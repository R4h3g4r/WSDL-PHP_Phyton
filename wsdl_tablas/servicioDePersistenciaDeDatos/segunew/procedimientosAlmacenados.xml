<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="segunew.procedimientosAlmacenados">

  <!-- ========================================================================================== ==
    == Consulta seguros
    == ========================================================================================== -->  
  
  <resultMap id="getConsultaSeguros" class="java.util.HashMap">
    <result property="tipo_seguro"        jdbcType="char" javaType="String" />
    <result property="com_intermediacion" jdbcType="char" javaType="String" />
    <result property="com_recaudacion"    jdbcType="char" javaType="String" />
    <result property="prima_cia_aseg"     jdbcType="char" javaType="String" />       
  </resultMap>

  <procedure id="consultaSeguros" resultMap="getConsultaSeguros">
     { call sp_consulta_seguros(#valores#, #plazo#, #edad# ) }
  </procedure>  
  
  <!-- Obtener Email del Gerente -->
  <resultMap id="getObtenerEmailGerente" class="java.util.HashMap">
  	<result property="cod_usuario"		jdbcType="char" javaType="String" />
  	<result property="desc_usuario"	jdbcType="char" javaType="String" />
  	<result property="email"		jdbcType="char" javaType="String" />
  <result property="cod_organizacion"	jdbcType="char" javaType="String" />
  	<result property="cod_sucursal"	    jdbcType="char" javaType="String" />
  	<result property="cod_cargo"	    jdbcType="char" javaType="String" />  	
  	<result property="fecha_ingreso"    jdbcType="DATE" javaType="java.util.Calendar"  typeHandler="cl.bci.middleware.aplicacion.persistencia.handler.CalendarTypeHandler"/>
  	<result property="fecha_expiracion" jdbcType="DATE" javaType="java.util.Calendar"  typeHandler="cl.bci.middleware.aplicacion.persistencia.handler.CalendarTypeHandler"/>
  	<result property="estado"    	    jdbcType="char" javaType="String" />
  	<result property="tipo"      	    jdbcType="char" javaType="String" />
  </resultMap>
  <procedure id="obtenerEmailGerente" resultMap="getObtenerEmailGerente">
  	{ call sp_obtener_email_gerente(#codigoSucursal#) }
  </procedure>
</sqlMap>
