<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
	
<sqlMap namespace="reccel.procedimientosAlmacenados">

	<parameterMap id="setInsertaRecargaFrecuente" class="java.util.HashMap">
		<parameter property="rutEmpresa"	jdbcType="CHAR"		javaType="String" />
		<parameter property="numCnv"		jdbcType="CHAR" 	javaType="String" />
		<parameter property="desAlias"	 	jdbcType="CHAR" 	javaType="String" />
		<parameter property="codOperador" 	jdbcType="integer"	javaType="Integer" />
        <parameter property="desOperador" 	jdbcType="CHAR" 	javaType="String" />
		<parameter property="numCelular"	jdbcType="CHAR" 	javaType="String" />
    </parameterMap>	

    <procedure id="insertaRecargaFrecuente" parameterMap="setInsertaRecargaFrecuente" resultClass="int">		{ CALL sp_ins_rec_frec ( ?,?,?,?,?,? ) }
	</procedure>
	
	<parameterMap id="setConsultarRecargaFrecuente" class="java.util.HashMap">
		<parameter property="rutEmpresa"        jdbcType="CHAR"		javaType="String" />
		<parameter property="numConvenio"       jdbcType="CHAR"		javaType="String" />
	</parameterMap>

	<resultMap id="getConsultarRecargaFrecuente" class="java.util.HashMap">
		<result property="idAlias"				column="idAlias"		jdbcType="integer" javaType="String" />
		<result property="rutEmpresa"			column="rutEmpresa"		jdbcType="CHAR" javaType="String" />
		<result property="numConvenio"			column="numConvenio"	jdbcType="CHAR" javaType="String" />
		<result property="desAlias"				column="desAlias"		jdbcType="CHAR" javaType="String" />
		<result property="codOperador"			column="codOperador"	jdbcType="NUMERIC" javaType="Integer" />
		<result property="desOperador"			column="desOperador"	jdbcType="CHAR" javaType="String" />
		<result property="numCelular"			column="numCelular"		jdbcType="CHAR" javaType="String" />
	</resultMap>
	
	<procedure id="consultarRecargaFrecuente" parameterMap="setConsultarRecargaFrecuente" resultMap="getConsultarRecargaFrecuente">
		{ CALL sp_cns_rec_frec ( ?,? ) }
	</procedure>

	<parameterMap id="setModificaRecargaFrecuente" class="java.util.HashMap">
		<parameter property="idRecarga"		jdbcType="NUMERIC"	javaType="Integer" />
		<parameter property="desAlias"	 	jdbcType="CHAR" 	javaType="String" />
		<parameter property="codOperador" 	jdbcType="integer"	javaType="Integer" />
        <parameter property="desOperador" 	jdbcType="CHAR" 	javaType="String" />
		<parameter property="numCelular"	jdbcType="CHAR" 	javaType="String" />
    </parameterMap>	

    <procedure id="modificaRecargaFrecuente" parameterMap="setModificaRecargaFrecuente" resultClass="int">		{ CALL sp_mod_rec_frec ( ?,?,?,?,? ) }
	</procedure>
	
	<parameterMap id="setEliminaRecargaFrecuente" class="java.util.HashMap">
		<parameter property="idRecarga"        jdbcType="NUMERIC"		javaType="Integer" />
	</parameterMap>
	
	<procedure id="eliminaRecargaFrecuente" parameterMap="setEliminaRecargaFrecuente" resultClass="int">
		{ CALL sp_eli_rec_frec ( ? ) }
	</procedure>

	<parameterMap id="setConsultarRecargaPorAutorizar" class="java.util.HashMap">
		<parameter property="rutEmpresa"        jdbcType="CHAR"		javaType="String" />
		<parameter property="numConvenio"       jdbcType="CHAR"		javaType="String" />
	</parameterMap>

	<resultMap id="getConsultarRecargaPorAutorizar" class="java.util.HashMap">
		<result property="numeroTransf"			column="numeroTransf"		jdbcType="CHAR" javaType="String" />
		<result property="nombreUsuario"		column="nombreUsuario"		jdbcType="CHAR" javaType="String" />
		<result property="fechaIngreso"			column="fechaIngreso"		jdbcType="CHAR" javaType="String" />
		<result property="cuentaCargo"			column="cuentaCargo"		jdbcType="CHAR" javaType="String" />
		<result property="estadoSolicitud"		column="estadoSolicitud"	jdbcType="CHAR" javaType="String" />
		<result property="cantidadRecargas"		column="cantidadRecargas"	jdbcType="integer" javaType="Integer" />
		<result property="totalRecargas"		column="totalRecargas"		jdbcType="DECIMAL"  javaType="Double" />
	</resultMap>

	<procedure id="consultarRecargaPorAutorizar" parameterMap="setConsultarRecargaPorAutorizar" resultMap="getConsultarRecargaPorAutorizar">
		{ CALL sp_cns_rec_por_aut ( ?, ? ) }
	</procedure>

	<parameterMap id="setIngresarDetalleRecarga" class="java.util.HashMap">
		<parameter property="numeroTransf"  jdbcType="CHAR"		javaType="String" />
		<parameter property="numCelular"	jdbcType="CHAR" 	javaType="String" />		
		<parameter property="idRecarga"		jdbcType="NUMERIC"	javaType="Integer" />
		<parameter property="codOperador" 	jdbcType="integer"	javaType="Integer" />		
		<parameter property="montoRecarga"	jdbcType="DECIMAL"  javaType="Double"  />
	</parameterMap>
	
	<procedure id="ingresarDetalleRecarga" parameterMap="setIngresarDetalleRecarga" resultClass="int">
		{ CALL sp_ing_det_rec_cel( ?,?,?,?,? ) }
	</procedure>
	
	<parameterMap id="setConsultarDetalleRecarga" class="java.util.HashMap">
		<parameter property="numeroTransf"        jdbcType="CHAR"		javaType="String" />
	</parameterMap>

	<resultMap id="getConsultarDetalleRecarga" class="java.util.HashMap">
		<result property="numCelular"			column="numCelular"			jdbcType="CHAR" javaType="String" />
		<result property="codigoOperador"		column="codigoOperador"		jdbcType="integer" javaType="Integer" />
		<result property="montoRecarga"			column="montoRecarga"		jdbcType="DECIMAL"  javaType="Double" />
		<result property="numeroAutorizacion"	column="numeroAutorizacion"	jdbcType="CHAR" javaType="String" />
		<result property="descOperador"			column="descOperador"		jdbcType="CHAR" javaType="String" />
		<result property="descAlias"			column="descAlias"			jdbcType="CHAR"  javaType="String" />
		<result property="idAlias"				column="idAlias"			jdbcType="NUMERIC"  javaType="Integer" />
	</resultMap>

	<procedure id="consultarDetalleRecarga" parameterMap="setConsultarDetalleRecarga" resultMap="getConsultarDetalleRecarga">
		{ CALL sp_cns_det_rec ( ? ) }
	</procedure>

	<parameterMap id="setEliminarDetalleRecarga" class="java.util.HashMap">
		<parameter property="numeroTransf"        jdbcType="CHAR"		javaType="String" />
		<parameter property="numeroCelular"       jdbcType="CHAR"		javaType="String" />
	</parameterMap>
	
	<procedure id="eliminarDetalleRecarga" parameterMap="setEliminarDetalleRecarga" resultClass="int">
		{ CALL sp_eli_det_rec ( ?,? ) }
	</procedure>
	
	<parameterMap id="setActualizarDetalleRecarga" class="java.util.HashMap">
		<parameter property="numeroTransf"		jdbcType="CHAR"		javaType="String" />
		<parameter property="numeroCelular"		jdbcType="CHAR" 	javaType="String" />
		<parameter property="comprobante"		jdbcType="CHAR" 	javaType="String" />
		<parameter property="estado" 			jdbcType="CHAR"		javaType="String" />
	</parameterMap>	

	<procedure id="actualizarDetalleRecarga" parameterMap="setActualizarDetalleRecarga" resultClass="int">		{ CALL sp_act_det_rec_cel ( ?,?,?,? ) }
	</procedure>

	<parameterMap id="setIngresarSolicitudRecarga" class="java.util.HashMap">
		<parameter property="numTrf"			jdbcType="CHAR"		javaType="String" />
		<parameter property="rutEmpresa"		jdbcType="CHAR" 	javaType="String" />
		<parameter property="dvEmpresa"			jdbcType="CHAR" 	javaType="String" />
		<parameter property="rutUsuario" 		jdbcType="CHAR"		javaType="String" />
		<parameter property="dvUsuario" 		jdbcType="CHAR"		javaType="String" />		
		<parameter property="nomUsuario" 		jdbcType="CHAR"		javaType="String" />				
		<parameter property="cnvNum" 			jdbcType="CHAR"		javaType="String" />		
		<parameter property="ctaCargo" 			jdbcType="CHAR"		javaType="String" />
    </parameterMap>	

    <procedure id="ingresarSolicitudRecarga" parameterMap="setIngresarSolicitudRecarga" resultClass="int">		{ CALL sp_ing_rec_cel ( ?,?,?,?,?,?,?,? ) }
	</procedure>

	<parameterMap id="setActualizarEstadoSolicitudRecarga" class="java.util.HashMap">
		<parameter property="numTrf"			jdbcType="CHAR"		javaType="String" />
		<parameter property="estado" 			jdbcType="CHAR"		javaType="String" />
	</parameterMap>	

	<procedure id="actualizarEstadoSolicitudRecarga" parameterMap="setActualizarEstadoSolicitudRecarga" resultClass="int">		{ CALL sp_act_est_sol_rec ( ?,? ) }
	</procedure>
	
	<resultMap id="getConsultarDetalleRecargaAutorizada" class="java.util.HashMap">
		<result property="numeroTransf"			column="numeroTransf"		jdbcType="CHAR" javaType="String" />
		<result property="nombreUsuario"		column="nombreUsuario"		jdbcType="CHAR" javaType="String" />
		<result property="fechaAutorizacion"	column="fechaAutorizacion"	jdbcType="CHAR" javaType="String" />
		<result property="cuentaCargo"			column="cuentaCargo"		jdbcType="CHAR" javaType="String" />
		<result property="numeroCelular"		column="numeroCelular"		jdbcType="CHAR" javaType="String" />
		<result property="montoRecarga"			column="montoRecarga"		jdbcType="DECIMAL"  javaType="Double" />
		<result property="comprobante"			column="comprobante"		jdbcType="CHAR" javaType="String" />		
		<result property="estadoRecarga"		column="estadoRecarga"		jdbcType="CHAR" javaType="String" />				
		<result property="descAlias"			column="descAlias"			jdbcType="CHAR"  javaType="String" />
		<result property="idAlias"				column="idAlias"			jdbcType="NUMERIC"  javaType="Integer" />
		<result property="codOperador"			column="codOperador"		jdbcType="integer" javaType="Integer" />
		<result property="descOperador"			column="descOperador"		jdbcType="CHAR" javaType="String" />
	</resultMap>

	<parameterMap id="setConsultarDetalleRecargaAutorizada" class="java.util.HashMap">
		<parameter property="numeroTransf"		jdbcType="CHAR"				javaType="String" />
	</parameterMap>	

	<procedure id="consultarDetalleRecargaAutorizada" parameterMap="setConsultarDetalleRecargaAutorizada" resultMap="getConsultarDetalleRecargaAutorizada">		{ CALL sp_cns_det_rec_aut ( ? ) }
	</procedure>	<resultMap id="getTraeListaOperadoras" class="java.util.HashMap">		<result property="desOperadora" column="desc_operadora" jdbcType="VARCHAR" 	javaType="String"  />		<result property="idOperadora"  column="id_operadora"   jdbcType="NUMERIC" 	javaType="Integer" />		<result property="comision" 	column="comision"       jdbcType="NUMERIC" 	javaType="Integer" />		<result property="nemonico" 	column="nem_cargo" 		jdbcType="NUMERIC" 	javaType="Integer" />	<result property="tipo"         column="tipo_operadora" jdbcType="VARCHAR"  javaType="String"  />
	</resultMap>		<procedure id="traeListaOperadoras" resultMap="getTraeListaOperadoras">		{ CALL sp_cns_operadora( ) }	</procedure>
	
</sqlMap>
