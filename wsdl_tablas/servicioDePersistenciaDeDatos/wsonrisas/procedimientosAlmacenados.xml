<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
	
<sqlMap namespace="wsonrisas.procedimientosAlmacenados">	



<!--
			sp_snr_obt_det_prd (@clg_cod char(3),@prd_cod char(15)
	-->
	<resultMap id="getDetalleProducto" class="java.util.HashMap">
		<result property="CodigoProducto" 					jdbcType="Integer"  javaType="java.lang.Integer"/>
		<result property="CodigoCatalogo"  				jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="Categoria"      		jdbcType="VARCHAR" javaType="java.lang.String"/>
		<result property="Nombre"      		jdbcType="VARCHAR" javaType="java.lang.String"/>
		<result property="Descripcion"  			jdbcType="VARCHAR"  javaType="java.lang.String"/> 
		<result property="Precio"  				jdbcType="Integer"  javaType="java.lang.Integer"/> 
	</resultMap>
	
	<parameterMap id="setDetalleProducto" class="java.util.HashMap">
		<parameter property="clg_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
	</parameterMap>
	
    <procedure id="obtieneDetalleProducto" parameterMap="setDetalleProducto" resultMap="getDetalleProducto">
		{CALL sp_snr_obt_det_prd (?,?)}
	</procedure>
	
	<!--
	 dbo.sp_snr_ins_sol(@sol_rut   varchar(12),  
@num_tjt   varchar(16),  
@clg_cod   varchar(3) ,  
@sol_fec   datetime ,    
@dir_env   varchar(150), 
@tel_env   varchar(20),  
@nom_ter   varchar(50),  
@rel_ter   varchar(50),  
@com_env   varchar(50),  
@ciu_env   varchar(50),  
@cod_canal int)    
	-->
	
	<parameterMap id="setInsertaSolicitud" 		class="java.util.HashMap">
		<parameter property="sol_rut" 		jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="num_tjt"		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="clg_cod"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="dir_env"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="tel_env"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="nom_ter"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="rel_ter"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="com_env"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="ciu_env"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="cod_canal"  	jdbcType="INTEGER" javaType="java.lang.Integer" />
		<parameter property="num_cuo"  	jdbcType="INTEGER" javaType="java.lang.Integer" />
		<parameter property="mon_cargo"  	jdbcType="INTEGER" javaType="java.lang.Integer" />
		<parameter property="tot_canjear"  	jdbcType="INTEGER" javaType="java.lang.Integer" />
	</parameterMap>
	
    <resultMap id="getInsertaSolicitud" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="insertarSolicitud" parameterMap="setInsertaSolicitud" resultMap="getInsertaSolicitud">
		{CALL sp_snr_ins_sol (?, ?, ?, ?, ?, ? ,?, ?, ?, ?, ?, ?, ?)}
	</procedure>
	
	<parameterMap id="setInsertaBeneficiario" 	class="java.util.HashMap">
		<parameter property="cwp_cli_idc" 		jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="cwp_ipe_cli"		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="cwp_eml_cli"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="cwp_tel_cel"  		jdbcType="NUMERIC" javaType="java.lang.Long" />
		<parameter property="cwp_tel_fjo"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="cwp_cnl"  		    jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="cwp_tar_aad"  		jdbcType="INTEGER" javaType="java.lang.Integer" />
		
	</parameterMap>
	
	<parameterMap id="setInsertaCanje" 	class="java.util.HashMap">
		<parameter property="cpt_idc_com" 		jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="cpt_idc_can"		jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="cpt_idc_prg"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="cpt_num_tar"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="cpt_num_ref"  		jdbcType="NUMERIC" javaType="java.lang.Long" />
		<parameter property="cpt_nom_com"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="cpt_rub"  		    jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="cpt_mto"   		jdbcType="NUMERIC" javaType="java.lang.Long" />
		<parameter property="cpt_pto_dis"  		jdbcType="INTEGER" javaType="java.lang.Integer" />
		<parameter property="cpt_pto_can"  		jdbcType="NUMERIC" javaType="java.lang.Long" />
		<parameter property="cpt_fch_hms"  		 javaType="DATE" />
		<parameter property="cpt_mod_cnj"  		jdbcType="INTEGER" javaType="java.lang.Integer" />
	</parameterMap>
	<procedure id="insertaBeneficario" parameterMap="setInsertaBeneficiario" resultClass="java.util.HashMap">
	   {CALL sp_ins_ben(?, ?, ?, ?, ?,?, ?)}
	</procedure>
		<procedure id="insertarCanje" parameterMap="setInsertaCanje" resultClass="java.util.HashMap">
	   {CALL sp_ins_cje(?, ?, ?, ?, ?,?, ?, ?, ?, ?,?, ?)}
	</procedure>
	
	
	<!--
	 p_snr_ins_det_sol(@cod_sol numeric(18,0),
@cod_prd varchar(15) , 
@pre     numeric(18,0),
@can     int          
)  
	-->
	
	<parameterMap id="setInsertaDetalleSolicitud" 		class="java.util.HashMap">
		<parameter property="cod_sol" 		jdbcType="INTEGER" javaType="java.lang.Integer"/>
		<parameter property="cod_prd"		jdbcType="INTEGER" javaType="java.lang.Integer" />
		<parameter property="pre"  		jdbcType="INTEGER" javaType="java.lang.Integer" />
		<parameter property="can"  		jdbcType="INTEGER" javaType="java.lang.Integer" />
	</parameterMap>
	
    <resultMap id="getInsertaDetalleSolicitud" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="insertarDetalleSolicitud" parameterMap="setInsertaDetalleSolicitud" resultMap="getInsertaDetalleSolicitud">
		{CALL sp_snr_ins_det_sol (?, ?, ?, ?)}
	</procedure>
	
	<!--
		dbo.sp_cns_prd(@prd_cod	char(15),
                                @prd_nom	char(100),
                                @cat_cod    char(3),
                                @prd_est    char(1),
                                @clg_cod    char(3)
                                ) 
		prd_cod, prd_img, prd_des, prd_nom, c.cat_des, c.cat_cod, prd_pec_ref, prd_est, c.clg_cod                             
	 -->
		<resultMap id="getProducto" class="java.util.HashMap">
			<result property="CodigoProducto"		jdbcType="VARCHAR" javaType="java.lang.String"/>
			<result property="NombreImagen" 		jdbcType="VARCHAR" javaType="java.lang.String"/>
			<result property="DescripcionProducto"  jdbcType="VARCHAR" javaType="java.lang.String"/>
			<result property="NombreProducto"      	jdbcType="VARCHAR" javaType="java.lang.String"/>
			<result property="DescripcionCategoria" jdbcType="VARCHAR" javaType="java.lang.String"/>
			<result property="CodigoCategoria"      jdbcType="VARCHAR" javaType="java.lang.String"/>
			<result property="PrecioProducto"  		jdbcType="Integer" javaType="java.lang.Integer"/>			
			<result property="EstadoProducto"       jdbcType="VARCHAR" javaType="java.lang.String"/>
			<result property="CodigoCatalogo"  		jdbcType="VARCHAR" javaType="java.lang.String"/>
			<result property="Stock"  		        jdbcType="Integer" javaType="java.lang.Integer"/>
			<result property="Orden"  		        jdbcType="Integer" javaType="java.lang.Integer"/>
			<result property="NombreImagenBanner"   jdbcType="VARCHAR" javaType="java.lang.String"/>
			<result property="CantidadRegistros"    jdbcType="Integer" javaType="java.lang.Integer"/>
		</resultMap>
	
	<parameterMap id="setProducto" class="java.util.HashMap">
		<parameter property="prd_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_nom"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="cat_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_est"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="clg_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_pec_ran_ini"   jdbcType="Integer" javaType="java.lang.Integer"/>
		<parameter property="prd_pec_ran_fin"   jdbcType="Integer" javaType="java.lang.Integer"/>
		<parameter property="pag_num_pag"  		jdbcType="Integer" javaType="java.lang.Integer"/>
		<parameter property="pag_cant_reg"  	jdbcType="Integer" javaType="java.lang.Integer"/>
		<parameter property="activo"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		
	</parameterMap>
	
    <procedure id="obtieneProducto" parameterMap="setProducto" resultMap="getProducto">
		{CALL sp_cns_prd (
		<isNotNull property="prd_cod">#prd_cod#</isNotNull>
		<isNull property="prd_cod">NULL</isNull>,
		<isNotNull property="prd_nom">#prd_nom#</isNotNull>
		<isNull property="prd_nom">NULL</isNull>,
		<isNotNull property="cat_cod">#cat_cod#</isNotNull>
		<isNull property="cat_cod">NULL</isNull>,
		<isNotNull property="prd_est">#prd_est#</isNotNull>
		<isNull property="prd_est">NULL</isNull>,
		<isNotNull property="clg_cod">#clg_cod#</isNotNull>
		<isNull property="clg_cod">NULL</isNull>,
		<isNotNull property="prd_pec_ran_ini">#prd_pec_ran_ini#</isNotNull>
		<isNull property="prd_pec_ran_ini">NULL</isNull>,
		<isNotNull property="prd_pec_ran_fin">#prd_pec_ran_fin#</isNotNull>
		<isNull property="prd_pec_ran_fin">NULL</isNull>,
		<isNotNull property="pag_num_pag">#pag_num_pag#</isNotNull>
		<isNull property="pag_num_pag">NULL</isNull>,
		<isNotNull property="pag_cant_reg">#pag_cant_reg#</isNotNull>
		<isNull property="pag_cant_reg">NULL</isNull>,
		<isNotNull property="activo">#activo#</isNotNull>
		<isNull property="activo">NULL</isNull>)}
	</procedure>
	
	
	<!--
		dbo.sp_upd_prd(@prd_cod CHAR(15),
                                @cat_cod CHAR(3),
                                @prd_est CHAR(1),
                                @prd_nom CHAR(100),
                                @prd_pec_ofr NUMERIC(18,0),
                                @prd_des CHAR(255),
                                @prd_img CHAR(30),
                                @prd_stk INT,
                                @clg_cod CHAR(3)
                                ) 
	 -->		
	<parameterMap id="setActualizaProducto" class="java.util.HashMap">
		<parameter property="prd_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="cat_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_est"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_nom"			jdbcType="VARCHAR"  javaType="java.lang.String"/>		
		<parameter property="prd_pec_ofr"	 	jdbcType="NUMERIC"  javaType="java.lang.Long"/>
		<parameter property="prd_des"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_img"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_stk"			jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<parameter property="clg_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>	
	    <parameter property="prd_des_ord"	    jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	    <parameter property="prd_des_img"		jdbcType="VARCHAR"  javaType="java.lang.String"/>
	    <parameter property="prd_des_fec_ini"	jdbcType="TIMESTAMP"  javaType="java.util.Date"/>
		<parameter property="prd_des_fec_fin"	jdbcType="TIMESTAMP"  javaType="java.util.Date"/>
	</parameterMap>
	
    <procedure id="actualizaProducto" parameterMap="setActualizaProducto">
		{CALL sp_upd_prd (?,?,?,?,?,?,?,?,?,?,?,?,?)}
	</procedure>
	
	<!-- 
		dbo.sp_ins_prd(			@prd_cod 		char(15),
								@clg_cod 		char(3),
								@cat_cod 		char(3),
								@prd_nom 		char(100),
								@prd_des 		char(255),
								@prd_pec_ofr    numeric(18,0),
								@prd_pec_ref    numeric(18,0),
								@prd_img 		char(30),	
								@prd_stk_min    int,
								@prd_stk		int,
								@prd_uni 		int,
								@prd_est 		char(1),
								@prd_mon	    char(15)							  
							    )
	 -->
	 <parameterMap id="setIngresaProducto" class="java.util.HashMap">
		<parameter property="prd_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="clg_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="cat_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_nom"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_des"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_pec_ofr"	 	jdbcType="NUMERIC"  javaType="java.lang.Long"/>
		<parameter property="prd_pec_ref"	 	jdbcType="NUMERIC"  javaType="java.lang.Long"/>
		<parameter property="prd_img"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_stk_min"		jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<parameter property="prd_stk"			jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<parameter property="prd_uni"			jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<parameter property="prd_est"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_mon"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="prd_fec_ini_vig"	jdbcType="TIMESTAMP"  javaType="java.util.Date"/>
		<parameter property="prd_fec_fin_vig"	jdbcType="TIMESTAMP"  javaType="java.util.Date"/>	
	    <parameter property="prd_des_ord"	    jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	    <parameter property="prd_des_img"		jdbcType="VARCHAR"  javaType="java.lang.String"/>
	    <parameter property="prd_des_fec_ini"	jdbcType="TIMESTAMP"  javaType="java.util.Date"/>
		<parameter property="prd_des_fec_fin"	jdbcType="TIMESTAMP"  javaType="java.util.Date"/>						
	</parameterMap>
	
    <procedure id="ingresaProducto" parameterMap="setIngresaProducto">
		{CALL sp_ins_prd (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)}
	</procedure>
	
	<!--
		dbo.sp_del_prd( @clg_cod char(3),
		                @cat_cod char(3),
                        @prd_cod char(15),
                        ) 
	 -->
	  <parameterMap id="setEliminaProducto" class="java.util.HashMap">
		<parameter property="clg_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="cat_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>	
		<parameter property="prd_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>				
	</parameterMap>
	
    <procedure id="eliminaProducto" parameterMap="setEliminaProducto">
		{CALL sp_del_prd (?,?,?)}
	</procedure>
	
	<!--
		dbo.sp_cns_cat(@cat_cod    char(3),                                
	                   @clg_cod    char(3)
	                   ) 
	 -->
	
	<!--
		dbo.sp_bsc_prd(@prd_cod	char(15),
		               @cat_cod char(3),
                       @clg_cod    char(3)
                       ) 
	 -->
	 <resultMap id="getBuscarProducto" class="java.util.HashMap">
	 	<result property="CodigoCatalogo" 	jdbcType="VARCHAR" javaType="java.lang.String"/>
	 	<result property="NombreImagen" 	jdbcType="VARCHAR" javaType="java.lang.String"/>
	 	<result property="EstadoProducto" 	jdbcType="VARCHAR" javaType="java.lang.String"/>
	 	<result property="CodigoProducto"   jdbcType="VARCHAR" javaType="java.lang.String"/>
	 	<result property="PrecioOferta"   	jdbcType="INTEGER" javaType="java.lang.Integer"/>
	 	<result property="Descripcion"	    jdbcType="VARCHAR" javaType="java.lang.String"/>
	 	<result property="Stock"   			jdbcType="INTEGER" javaType="java.lang.Integer"/>
		<result property="NombreProducto"   jdbcType="VARCHAR" javaType="java.lang.String"/>		
		<result property="OrdenDestacado"   jdbcType="INTEGER" javaType="java.lang.Integer"/>		
		<result property="NombreImagenBanner" 	jdbcType="VARCHAR" javaType="java.lang.String"/>
		<result property="Categoria" 	    jdbcType="VARCHAR" javaType="java.lang.String"/>
		<result property="CodigoCategoria" 	jdbcType="VARCHAR" javaType="java.lang.String"/>	
	</resultMap>
	
	<parameterMap id="setBuscarProducto" class="java.util.HashMap">
		<parameter property="prd_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="cat_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>					
		<parameter property="clg_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>		
	</parameterMap>
	
    <procedure id="buscarProducto" parameterMap="setBuscarProducto" resultMap="getBuscarProducto">
		{CALL sp_bsc_prd(?,?,?)}
	</procedure>
	
	<!--
		dbo.sp_cns_cat
	 -->
	<resultMap id="getFiltroCatalogo" class="java.util.HashMap">	 
		<result property="CodigoCatalogo" 		jdbcType="VARCHAR" javaType="java.lang.String"/>	
		<result property="DescripcionCatalogo" 	jdbcType="VARCHAR" javaType="java.lang.String"/>						
	</resultMap>
	
	<parameterMap id="setFiltroCatalogo" class="java.util.HashMap">
		<parameter property="clg_cod"	jdbcType="VARCHAR"  javaType="java.lang.String"/>		
	</parameterMap>
	
    <procedure id="obtieneFiltroCatalogo" parameterMap="setFiltroCatalogo" resultMap="getFiltroCatalogo">
		{CALL sp_cns_clg(<isNotNull property="clg_cod">#clg_cod#</isNotNull>
		                 <isNull property="clg_cod">NULL</isNull>)}
	</procedure>
	
	<!-- INICIO MCV -->
	
	<resultMap id="getObtSolReal" class="java.util.HashMap">	 
		<result property="codigoSolicitud" jdbcType="NUMERIC" javaType="java.lang.Double"/>	
		<result property="fechaSolicitud" jdbcType="TIMESTAMP" javaType="java.util.Date"/>
		<result property="nombreTercero" jdbcType="VARCHAR" javaType="java.lang.String"/>							
		<result property="totalRegistros" jdbcType="INTEGER" javaType="java.lang.Integer"/>
		<result property="numeroPagSolicitada" jdbcType="INTEGER" javaType="java.lang.Integer"/>
		<result property="registrosPorPag" jdbcType="INTEGER" javaType="java.lang.Integer"/>
	</resultMap>
	
	<parameterMap id="setObtSolReal" class="java.util.HashMap">
		<parameter property="sol_rut" jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="reg_por_pag" jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="num_pag" jdbcType="NUMERIC" javaType="java.lang.Long"/>					
	</parameterMap>
	
	<procedure id="obtenerSolicitudesRealizadas" parameterMap="setObtSolReal" resultMap="getObtSolReal">
		{CALL sp_cns_sol(?,?,?)}
	</procedure>
	
	<resultMap id="getObtDetSolReal" class="java.util.HashMap">	 
		<result property="codigoSolicitud" jdbcType="NUMERIC" javaType="java.lang.Long"/>	
		<result property="nombreProducto" jdbcType="VARCHAR" javaType="java.lang.String"/>
		<result property="codigoProducto" jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<result property="estadoProducto" jdbcType="VARCHAR" javaType="java.lang.String"/>
		<result property="codigoDespacho" jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<result property="fechaSolicitud" jdbcType="TIMESTAMP" javaType="java.util.Date"/>
		<result property="totalRegistros" jdbcType="INTEGER" javaType="java.lang.Integer"/>
		<result property="numeroPagSolicitada" jdbcType="INTEGER" javaType="java.lang.Integer"/>
		<result property="registrosPorPag" jdbcType="INTEGER" javaType="java.lang.Integer"/>
		<result property="precio" jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</resultMap>
	
	<parameterMap id="setObtDetSolReal" class="java.util.HashMap">
		<parameter property="sol_rut" jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="sol_cod" jdbcType="NUMERIC" javaType="java.lang.Double"/>
		<parameter property="reg_por_pag" jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="num_pag_sol" jdbcType="NUMERIC" javaType="java.lang.Long"/>					
	</parameterMap>
	
	<procedure id="obtenerDetalleSolicitudRealizada" parameterMap="setObtDetSolReal" resultMap="getObtDetSolReal">
		{CALL sp_cns_det_sol(?,?,?,?)}
	</procedure>
	
	
	<parameterMap id="setDetSolReal" class="java.util.HashMap">
		<parameter property="cod_sol"	jdbcType="NUMERIC" javaType="java.lang.Double"/>
		<parameter property="cod_prd"	jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="pre"		jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="can"		jdbcType="INTEGER" javaType="java.lang.Integer" />
		<parameter property="clg_cod"	jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="cat_cod"	jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="dso_est"	jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="cod_des"	jdbcType="NUMERIC" javaType="java.lang.Long" />
		<parameter property="dso_prc"	jdbcType="VARCHAR" javaType="java.lang.String" />
	</parameterMap>
	
    <resultMap id="getDetSolReal" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="insertarDetalleSolicitudGenerada" parameterMap="setDetSolReal" resultMap="getDetSolReal">
		{CALL sp_ins_det_sol(?,?,?,?,?,?,?,?,?)}
	</procedure>
	
	<parameterMap id="setInsertSol" 		class="java.util.HashMap">
		<parameter property="sol_rut" 		jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="sol_dv" 		jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="nom_cli"		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="num_tjt"		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="clg_cod"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="dir_env"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="tel_env"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="nom_ter"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="rel_ter"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="com_env"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="ciu_env"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="cod_canal"  	jdbcType="INTEGER" javaType="java.lang.Integer" />
		<parameter property="num_cuo"  		jdbcType="INTEGER" javaType="java.lang.Integer" />
		<parameter property="mon_cargo"  	jdbcType="INTEGER" javaType="java.lang.Integer" />
		<parameter property="tot_canjear"  	jdbcType="INTEGER" javaType="java.lang.Integer" />
		<parameter property="sol_opc_can"  	jdbcType="INTEGER" javaType="java.lang.Integer" />
		<parameter property="sol_tot_ptj"  	jdbcType="INTEGER" javaType="java.lang.Integer" />
		<parameter property="sol_email"  	jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="sol_tjt_des"  	jdbcType="VARCHAR" javaType="java.lang.String" />
	</parameterMap>
	
    <resultMap id="getInsertSol" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="NUMERIC"  javaType="java.lang.Double"/>
	</resultMap>
	
	<procedure id="insertarSolicitudGenerada" parameterMap="setInsertSol" resultMap="getInsertSol">
		{CALL sp_ins_sol (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)}
	</procedure>
		
	<!-- FIN MCV -->
	
	<!-- 
	   dbo.sp_upd_est_prd(@clg_cod CHAR(3))
	 -->
	 <parameterMap id="setActualizaEstadoProducto" class="java.util.HashMap">       
        <parameter property="clg_cod"           jdbcType="VARCHAR"  javaType="java.lang.String"/>        
    </parameterMap>
    
    <procedure id="actualizaEstadoProducto" parameterMap="setActualizaEstadoProducto">
        {CALL sp_upd_est_prd (?)}
    </procedure>
    
    <!-- 
        dbo.sp_upd_est_sol(@cod_prd CHAR(15),                               
                                    @clg_cod CHAR(3),
                                    @cod_prd NUMERIC(18,0),
                                    @dso_est INT
                                    )
     -->
     
      <parameterMap id="setActualizaEstadoSolicitud" class="java.util.HashMap">    
        <parameter property="cod_sol"           jdbcType="NUMERIC"  javaType="java.lang.Double"/>            
        <parameter property="clg_cod"           jdbcType="VARCHAR"  javaType="java.lang.String"/>   
        <parameter property="cat_cod"           jdbcType="VARCHAR"  javaType="java.lang.String"/>    
        <parameter property="cod_prd"           jdbcType="NUMERIC"  javaType="java.lang.Long"/>           
        <parameter property="dso_est"           jdbcType="VARCHAR"  javaType="java.lang.String"/>        
   	 </parameterMap>
    
    <procedure id="actualizaEstadoSolicitud" parameterMap="setActualizaEstadoSolicitud">
        {CALL sp_upd_est_sol (?,?,?,?,?)}
    </procedure>
    
    <!--
    	sp_man_bus_catalogos(@clg_cod 	char(3),
                             @clg_des  char(50),       
                             @clg_flg  char(1)
                               ) 
     -->
      <parameterMap id="setAgregarCatalogo" class="java.util.HashMap">                
        <parameter property="clg_cod"           jdbcType="VARCHAR"  javaType="java.lang.String"/>     
        <parameter property="clg_des"           jdbcType="VARCHAR"  javaType="java.lang.String"/>           
        <parameter property="clg_flg"           jdbcType="VARCHAR"  javaType="java.lang.String"/>        
   	 </parameterMap>
    
    <procedure id="agregarCatalogo" parameterMap="setAgregarCatalogo">
        {CALL sp_man_bus_catalogos(?,?,?)}
    </procedure>
    
    <!--
        dbo.sp_cns_det_sol_pend(@clg_cod   char(3),
                                         @dso_prc   char(1)
                                         ) 
        d.cod_sol, d.cod_prd, d.pre, d.can, d.clg_cod, d.cat_cod, d.dso_est, 
        s.sol_rut, s.num_tjt, s.mon_cargo, s.num_cuo, s.sol_opc_can, 
        s.sol_tot_ptj, s.sol_email, s.dir_env, s.com_env, s.ciu_env, 
        s.tel_env, s.nom_ter, s.rel_ter,
        p.prd_cod, p.prd_nom, prd_des,
        p.prd_uni, p.prd_pec_ofr
                    <result property="ProcesoSolicitud"		jdbcType="VARCHAR" javaType="java.lang.String"/>              
     -->
      <resultMap id="getObtenerSolicitudesNoProcesadas" class="java.util.HashMap">
        <result property="CodigoSolicitud"      jdbcType="NUMERIC" javaType="java.lang.Long"/>
        <result property="CodigoProducto"       jdbcType="NUMERIC" javaType="java.lang.Long"/>
        <result property="Precio"               jdbcType="NUMERIC" javaType="java.lang.Long"/>  
        <result property="Cantidad"             jdbcType="INTEGER" javaType="java.lang.Integer"/>          
        <result property="CodigoCatalogo"       jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="CodigoCategoria"      jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="EstadoSolicitud"      jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="RutSolicitud"         jdbcType="NUMERIC" javaType="java.lang.Long"/>        
        <result property="NumeroTarjeta"        jdbcType="VARCHAR" javaType="java.lang.String"/>       
        <result property="MontoCargo"           jdbcType="NUMERIC" javaType="java.lang.Long"/>                            
        <result property="NumeroCuotas"         jdbcType="INTEGER" javaType="java.lang.Integer"/>
        <result property="OpcionCanje"          jdbcType="INTEGER" javaType="java.lang.Integer"/>
        <result property="TotalPuntaje"         jdbcType="INTEGER" javaType="java.lang.Integer"/>
        <result property="Email"                jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="DireccionEnvio"       jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="ComunaEnvio"	        jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="CiudadEnvio"	        jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="TelefonoEnvio"	    jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="NombreTercero"	    jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="RelacionTercero"	    jdbcType="VARCHAR" javaType="java.lang.String"/>               
        <result property="NombreProducto"       jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="DescripcionProducto"  jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="Digito"  				jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="NombreCliente"  		jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="FechaSolicitud"  		jdbcType="TIMESTAMP" javaType="java.util.Date"/>
        <result property="TotalCanjear"  		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
        <result property="PrecioUnitario"  		jdbcType="INTEGER" javaType="java.lang.Integer"/>
        <result property="NumeroTarjetaCargoDespacho"        jdbcType="VARCHAR" javaType="java.lang.String"/>
    </resultMap>
    
    <parameterMap id="setObtenerSolicitudesNoProcesadas" class="java.util.HashMap">                       
        <parameter property="clg_cod"           jdbcType="VARCHAR"  javaType="java.lang.String"/>
        <parameter property="dso_prc"           jdbcType="VARCHAR"  javaType="java.lang.String"/>       
        <parameter property="fecha_ini_sol"     jdbcType="TIMESTAMP"  javaType="java.util.Date"/>
        <parameter property="fecha_fin_sol"     jdbcType="TIMESTAMP"  javaType="java.util.Date"/>
    </parameterMap>
    
    <procedure id="obtenerSolicitudesNoProcesadas" parameterMap="setObtenerSolicitudesNoProcesadas" resultMap="getObtenerSolicitudesNoProcesadas">
        {CALL sp_cns_det_sol_pend(?,?,?,?)}
    </procedure>
    
     <!--
        sp_upd_est_sol_prc(@clg_cod CHAR(3),                                                                        
                                        @dso_est CHAR(3)
                                        ) 
     -->
     <parameterMap id="seActualizarSolicitudesProcesadas" class="java.util.HashMap">                       
        <parameter property="clg_cod"           jdbcType="VARCHAR"  javaType="java.lang.String"/>
        <parameter property="dso_prc"           jdbcType="VARCHAR"  javaType="java.lang.String"/>       
        <parameter property="fecha_ini_sol"     jdbcType="TIMESTAMP"  javaType="java.util.Date"/>
        <parameter property="fecha_fin_sol"     jdbcType="TIMESTAMP"  javaType="java.util.Date"/>		
    </parameterMap>
    
    <procedure id="actualizarSolicitudesProcesadas" parameterMap="seActualizarSolicitudesProcesadas">
        {CALL sp_upd_est_sol_prc(?,?,?,?)}
    </procedure>
    
    <!--
        sp_snr_lst_cat_vig(
						      @clg_cod char(3)
						  )
						  
		a.clg_cod+a.cat_cod cod, cat_des	
		<result property="CodigoCategoria"          jdbcType="VARCHAR" javaType="java.lang.String"/>			 
     -->
      <resultMap id="getObtenerCategoriasVigentes" class="java.util.HashMap">
        <result property="CatalogoCategoria"          jdbcType="VARCHAR" javaType="java.lang.String"/>               
        <result property="DescripcionCategoria"     jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="CodigoCategoriaPadre"     jdbcType="VARCHAR" javaType="java.lang.String"/>
	   </resultMap>
       
      <parameterMap id="setObtenerCategoriasVigentes" class="java.util.HashMap">                       
        <parameter property="clg_cod"           jdbcType="VARCHAR"  javaType="java.lang.String"/>        
      </parameterMap>
   
	  <procedure id="obtenerCategoriasVigentes" parameterMap="setObtenerCategoriasVigentes" resultMap="getObtenerCategoriasVigentes">
	        {CALL sp_snr_lst_cat_vig(?)}
	  </procedure>
	  
	  <resultMap id="getObtenerSubCategoriasVigentes" class="java.util.HashMap">
        <result property="CatalogoCategoria"          jdbcType="VARCHAR" javaType="java.lang.String"/>               
        <result property="DescripcionCategoria"     jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="CodigoCategoriaPadre"     jdbcType="VARCHAR" javaType="java.lang.String"/>
	   </resultMap>
       
      <parameterMap id="setObtenerSubCategoriasVigentes" class="java.util.HashMap">                       
        <parameter property="clg_cod"           jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="cat_cod_pad"       jdbcType="VARCHAR"  javaType="java.lang.String"/>		
      </parameterMap>
   
	  <procedure id="obtenerSubCategoriasVigentes" parameterMap="setObtenerSubCategoriasVigentes" resultMap="getObtenerSubCategoriasVigentes">
	        {CALL sp_snr_lst_sub_cat_vig(?,?)}
	  </procedure>
    
    <!--   
      sp_cns_lst_prd_des(
                        @clg_cod CHAR(3),
                        @cat_cod CHAR(3)
                        )
           select 
         pd.prd_cod, pd.clg_cod, pd.cat_cod, pd.prd_des_ord, pd.prd_des_img,         
         p.prd_des, p.prd_nom, p.prd_pec_ofr, p.prd_img            
     -->
        <resultMap id="getObtenerProductosDestacadosCatalogo" class="java.util.HashMap">
	        <result property="CodigoProducto"        jdbcType="VARCHAR" javaType="java.lang.String"/>
	        <result property="CodigoCatalogo"        jdbcType="VARCHAR" javaType="java.lang.String"/>         
	        <result property="CodigoCategoria"       jdbcType="VARCHAR" javaType="java.lang.String"/>
	        <result property="OrdenProducto"         jdbcType="TINYINT" javaType="java.lang.Integer"/>
	        <result property="ImagenProductoBanner"  jdbcType="VARCHAR" javaType="java.lang.String"/>
	        <result property="Descripcion"           jdbcType="VARCHAR" javaType="java.lang.String"/>
	        <result property="Nombre"                jdbcType="VARCHAR" javaType="java.lang.String"/>
	        <result property="Precio"                jdbcType="NUMERIC" javaType="java.lang.Long"/>
	        <result property="ImagenProducto"        jdbcType="VARCHAR" javaType="java.lang.String"/>
       </resultMap>
        
      <parameterMap id="setObtenerProductosDestacadosCatalogo" class="java.util.HashMap">                       
        <parameter property="clg_cod"           jdbcType="VARCHAR"  javaType="java.lang.String"/>        
        <parameter property="cat_cod"           jdbcType="VARCHAR"  javaType="java.lang.String"/>
    </parameterMap>
    
    <procedure id="obtenerProductosDestacadosCatalogo" parameterMap="setObtenerProductosDestacadosCatalogo" resultMap="getObtenerProductosDestacadosCatalogo">
        {CALL sp_cns_lst_prd_des(?,?)}
    </procedure>
     
	<resultMap id="getCategorias" class="java.util.HashMap">
		<result property="CodigoCatalogo"  		jdbcType="VARCHAR" javaType="java.lang.String"/>
		<result property="CodigoCategoria"      jdbcType="VARCHAR" javaType="java.lang.String"/>
		<result property="NombreCategoria"      jdbcType="VARCHAR" javaType="java.lang.String"/>
		<result property="EstadoCategoria"      jdbcType="VARCHAR" javaType="java.lang.String"/>
		<result property="DescripcionCatalogo"  jdbcType="VARCHAR" javaType="java.lang.String"/>
	</resultMap>
	
	<parameterMap id="setCategorias" class="java.util.HashMap">
		<parameter property="clg_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="cat_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="cat_des"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="cat_flg"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		
	</parameterMap>
	
	 <parameterMap id="setIngresarCategoria" class="java.util.HashMap">
		<parameter property="cat_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="clg_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="cat_des"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="cat_flg"			jdbcType="VARCHAR"  javaType="java.lang.String"/>						
	</parameterMap>
	<parameterMap id="setEliminarCategoria" class="java.util.HashMap">
		<parameter property="cat_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>				
		<parameter property="clg_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>
	</parameterMap>
	<parameterMap id="setBuscarCategoria" class="java.util.HashMap">
		<parameter property="cat_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>				
		<parameter property="clg_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>		
	</parameterMap>
	
    <procedure id="obtenerCategorias" parameterMap="setCategorias" resultMap="getCategorias">
		{CALL sp_cns_cat (
		<isNotNull property="clg_cod">#clg_cod#</isNotNull>
		<isNull property="clg_cod">NULL</isNull>,
		<isNotNull property="cat_cod">#cat_cod#</isNotNull>
		<isNull property="cat_cod">NULL</isNull>,
		<isNotNull property="cat_des">#cat_des#</isNotNull>
		<isNull property="cat_des">NULL</isNull>,
		<isNotNull property="cat_flg">#cat_flg#</isNotNull>
		<isNull property="cat_flg">NULL</isNull>)}
	</procedure>

    <procedure id="ingresarCategoria" parameterMap="setIngresarCategoria">
		{CALL sp_ins_cat (?,?,?,?)}
	</procedure>
	
    <procedure id="actualizarCategoria" parameterMap="setIngresarCategoria">
		{CALL sp_upd_cat (?,?,?,?)}
	</procedure>
	
    <procedure id="eliminarCategoria" parameterMap="setEliminarCategoria">
		{CALL sp_del_cat (?,?)}
	</procedure>
	
    <procedure id="buscarCategoria" parameterMap="setBuscarCategoria" resultMap="getCategorias">
		{CALL sp_bsc_cat(?,?)}
	</procedure>

	<parameterMap id="setRebajarStock" class="java.util.HashMap">                            
			<parameter property="prd_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>    
			<parameter property="cat_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>    
			<parameter property="clg_cod"			jdbcType="VARCHAR"  javaType="java.lang.String"/>    
			<parameter property="cant"			jdbcType="Integer"  javaType="java.lang.Integer"/>     
	</parameterMap>
		
		
   <procedure id="rebajarStock" parameterMap="setRebajarStock">	
		{CALL sp_upd_stk(?,?,?,?)}
	 </procedure>

	</sqlMap>	