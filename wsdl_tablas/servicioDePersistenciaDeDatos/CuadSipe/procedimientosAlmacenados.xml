<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
    
<sqlMap namespace="CuadSipe.procedimientosAlmacenados">

    <resultMap id="salidaResultadoGlobalCuadratura" class="java.util.HashMap">
        <result property="idCuadratura" javaType="Integer" column="EST_GLO_ID"/>
        <result property="tipoTransaccion" javaType="String" column="EST_TIP_TRX"/>
        <result property="glosaTransaccion" javaType="String" column="EST_TIP_TRX_GLS"/>
        <result property="formaDePago" javaType="String" column="EST_FRM_PAG"/>
        <result property="montoOriginacion" javaType="java.math.BigDecimal" column="EST_MON_TOT_ORI"/>
        <result property="montoAceptado" javaType="java.math.BigDecimal" column="EST_MON_CAR"/>
        <result property="montoRechazado" javaType="java.math.BigDecimal" column="EST_MON_RCZ"/>
        <result property="diferencia" javaType="java.math.BigDecimal" column="EST_DIF"/>
    </resultMap>
    <procedure id="consultaResultadoGlobalCuadratura" resultMap="salidaResultadoGlobalCuadratura" parameterClass="java.util.HashMap">
        {CALL sp_consCuadraturaCierre(#fechaProceso#,#tipoConsulta#)}
    </procedure>
    
    <resultMap id="salidaResultadoDetallePagoCuadratura" class="java.util.HashMap">
        <result property="numeroFolio" javaType="String" column="MOV_NRO_FOL"/>
        <result property="numeroLinea" javaType="String" column="MOV_NRO_LIN"/>
        <result property="banco" javaType="String" column="MOV_COD_BCO"/>
        <result property="montoOriginacion" javaType="java.math.BigDecimal" column="MOV_MON_ACE_ORI"/>
        <result property="montoAceptado" javaType="java.math.BigDecimal" column="MOV_MON_ACE"/>
        <result property="montoRechazado" javaType="java.math.BigDecimal" column="MOV_MON_RCZ"/>
        <result property="diferencia" javaType="java.math.BigDecimal" column="MOV_DIF"/>
        <result property="numeroPaginas"    javaType="Integer"              column="CANTIDAD_PAGINAS"/>
        <result property="estadoVV"         javaType="String"               column="MOV_EST_VV"/>
    </resultMap>
    <procedure id="consultaResultadoDetallePagoCuadratura" resultMap="salidaResultadoDetallePagoCuadratura" parameterClass="java.util.HashMap">
        {CALL sp_consDetPagCuad(#idTransaccion#,#cantRegistros#,#pagina#)}
    </procedure>
    
    <resultMap id="salidaResultadoCuadraturaArchivo" class="java.util.HashMap">
        <result property="idCuadratura" javaType="Integer" column="EST_GLO_ID"/>
        <result property="tipoTransaccion" javaType="String" column="EST_TIP_TRX"/>
        <result property="glosaTransaccion" javaType="String" column="EST_TIP_TRX_GLS"/>
        <result property="formaDePago" javaType="String" column="EST_FRM_PAG"/>
        <result property="montoOriginacion" javaType="java.math.BigDecimal" column="EST_MON_TOT_ORI"/>
        <result property="montoAceptado" javaType="java.math.BigDecimal" column="EST_MON_CAR"/>
        <result property="montoRechazado" javaType="java.math.BigDecimal" column="EST_MON_RCZ"/>
        <result property="diferencia" javaType="java.math.BigDecimal" column="EST_DIF"/>
        <result property="cantidadTrxOriginacion" javaType="Integer" column="EST_CAN_ORI_TRX"/>
        <result property="cantidadTrxAceptadas" javaType="Integer" column="EST_CAN_ACE_TRX"/>
        <result property="fechaTransaccion" javaType="java.util.Date" column="EST_FEC_TRX"/>
    </resultMap>
    <procedure id="consultaResultadoCuadraturaArchivo" resultMap="salidaResultadoCuadraturaArchivo" parameterClass="java.util.HashMap">
        {CALL sp_consCuadraturaArch(#fechaProceso#,#tipoConsulta#)}
    </procedure>
    
    <parameterMap id="setConsultaDetallePagoCCACuadratura" class="java.util.HashMap">
        <parameter property="idTransaccion" jdbcType="INT"      javaType="int" />
        <parameter property="cantRegistros" jdbcType="INT"      javaType="int" />
        <parameter property="pagina"        jdbcType="INT"      javaType="int" />
    </parameterMap>
    
    <resultMap id="getConsultaDetallePagoCCACuadratura" class="java.util.HashMap">
        <result property="idCuadratura"     column="EST_GLO_ID"         jdbcType="INT"              javaType="Integer"/>                 
        <result property="codigoBanco"      column="MOV_COD_BCO"        jdbcType="VARCHAR"          javaType="String"/>         
        <result property="diferencia"       column="MOV_DIF"            jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="fecha"            column="MOV_FEC_PAG"        jdbcType="SMALLDATETIME"    javaType="Date"/>
        <result property="montoOriginacion" column="MOV_MON_ACE_ORI"    jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="montoAceptado"    column="MOV_MON_ACE"        jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="montoRechazado"   column="MOV_MON_RCZ"        jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="numeroPaginas"    column="CANTIDAD_PAGINAS"   jdbcType="INT"              javaType="Integer"/>
    </resultMap>
    
    <procedure id="consultaDetallePagoCCACuadratura" parameterMap="setConsultaDetallePagoCCACuadratura" resultMap="getConsultaDetallePagoCCACuadratura">
            { CALL sp_consDetPagCuadCCA( ?, ?, ?) }
    </procedure>

    <parameterMap id="setConsultaDetalleFolioCuadratura" class="java.util.HashMap">
        <parameter property="idTransaccion" jdbcType="INT"      javaType="int" />
        <parameter property="cantRegistros" jdbcType="INT"      javaType="int" />
        <parameter property="pagina"        jdbcType="INT"      javaType="int" />
    </parameterMap>
    
    <resultMap id="getConsultaDetalleFolioCuadratura" class="java.util.HashMap">
        <result property="numeroFolio"      column="MOV_NRO_FOL"        jdbcType="VARCHAR"          javaType="String" />
        <result property="diferencia"       column="MOV_DIF"            jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="fecha"            column="MOV_FEC_PAG"        jdbcType="SMALLDATETIME"    javaType="Date"/>
        <result property="montoOriginacion" column="MOV_MON_ACE_ORI"    jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="montoAceptado"    column="MOV_MON_ACE"        jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="montoRechazado"   column="MOV_MON_RCZ"        jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="numeroPaginas"    column="CANTIDAD_PAGINAS"   jdbcType="INT"              javaType="Integer"/>
    </resultMap>
    
    <procedure id="consultaDetalleFolioCuadratura" parameterMap="setConsultaDetalleFolioCuadratura" resultMap="getConsultaDetalleFolioCuadratura">
            { CALL sp_consFolioAgrCuad( ?, ?, ?) }
    </procedure>    


    <parameterMap id="setConsultaDetallePagoCuadraturaPorFolio" class="java.util.HashMap">
        <parameter property="idTransaccion" jdbcType="INT"      javaType="int" />
        <parameter property="numeroFolio"   jdbcType="VARCHAR"  javaType="String" />
        <parameter property="cantRegistros" jdbcType="INT"      javaType="int" />
        <parameter property="pagina"        jdbcType="INT"      javaType="int" />
    </parameterMap>
    
    <resultMap id="getConsultaDetallePagoCuadraturaPorFolio" class="java.util.HashMap">
        <result property="codigoBanco"      column="MOV_COD_BCO"        jdbcType="VARCHAR"          javaType="String"/>
        <result property="diferencia"       column="MOV_DIF"            jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="montoOriginacion" column="MOV_MON_ACE_ORI"    jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="montoAceptado"    column="MOV_MON_ACE"        jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="montoRechazado"   column="MOV_MON_RCZ"        jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="numeroLinea"      column="MOV_NRO_LIN"        jdbcType="VARCHAR"          javaType="String" />
        <result property="estadoVV"         column="MOV_EST_VV"         jdbcType="VARCHAR"          javaType="String"/>
        <result property="numeroPaginas"    column="CANTIDAD_PAGINAS"   jdbcType="INT"              javaType="Integer"/>
    </resultMap>
    
    <procedure id="consultaDetallePagoCuadraturaPorFolio" parameterMap="setConsultaDetallePagoCuadraturaPorFolio" resultMap="getConsultaDetallePagoCuadraturaPorFolio">
            { CALL sp_consDetPagCuadPorFolio(?, ?, ?, ?) }
    </procedure>
	
	<parameterMap id="setConsultaCuadraturaArchivoDebito" class="java.util.HashMap">
        <parameter property="fecha"           jdbcType="SMALLDATETIME"    javaType="Date"/>
    </parameterMap>
    
    <resultMap id="getConsultaCuadraturaArchivoDebito" class="java.util.HashMap">
        <result property="formaPago"        column="formaPago"          jdbcType="VARCHAR"          javaType="String"/>
        <result property="mtoProceso"       column="mtoProceso"         jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="montoAbonado"     column="montoAbonado"       jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="montoNoAbonado"   column="montoNoAbonado"     jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
        <result property="diferencia"       column="diferencia"         jdbcType="DECIMAL"          javaType="java.math.BigDecimal"/>
    </resultMap>
    
    <procedure id="consultaCuadraturaArchivoDebito" parameterMap="setConsultaCuadraturaArchivoDebito" resultMap="getConsultaCuadraturaArchivoDebito">
            { CALL sp_consCuadraturaDebArc(?) }
    </procedure>

    <parameterMap id="setObtenerDetalleCuadraturaDebitosEntrantes" class="java.util.HashMap">
        <parameter property="fecha"            jdbcType="DATETIME" javaType="Date"/>
    </parameterMap>
    <resultMap id="getObtenerDetalleCuadraturaDebitosEntrantes" class="java.util.HashMap">
        <result property="codigo"       jdbcType="CHAR"        javaType="String"/>
        <result property="banco"        jdbcType="CHAR"        javaType="String"/>
        <result property="efectivas"    jdbcType="MONEY"         javaType="Double"/>
        <result property="retornos"     jdbcType="MONEY"         javaType="Double"/>
        <result property="diferencia"   jdbcType="MONEY"         javaType="Double"/>
        <result property="informe"      jdbcType="MONEY"         javaType="Double"/>
        <result property="estado"       jdbcType="CHAR"        javaType="String"/>
    </resultMap>
    <procedure id="obtenerDetalleCuadraturaDebitosEntrantes" parameterMap="setObtenerDetalleCuadraturaDebitosEntrantes" resultMap="getObtenerDetalleCuadraturaDebitosEntrantes">
        {CALL sp_consCuadraturaDebEnt(?)}
    </procedure>	

    <parameterMap id="setObtenerDetalleCuadraturaDebitosSalientes" class="java.util.HashMap">
        <parameter property="fecha"            jdbcType="DATETIME" javaType="Date"/>
    </parameterMap>
    <resultMap id="getObtenerDetalleCuadraturaDebitosSalientes" class="java.util.HashMap">
        <result property="codigo"                   jdbcType="CHAR"        javaType="String"/>
        <result property="banco"                    jdbcType="CHAR"        javaType="String"/>
        <result property="efectivas"                jdbcType="MONEY"         javaType="Double"/>
        <result property="retornos"                 jdbcType="MONEY"         javaType="Double"/>
        <result property="diferencia"               jdbcType="MONEY"         javaType="Double"/>
        <result property="informeSIPE"              jdbcType="MONEY"         javaType="Double"/>
        <result property="estado"                   jdbcType="CHAR"        javaType="String"/>
        <result property="retornosContingencia"     jdbcType="MONEY"         javaType="Double"/>
    </resultMap>
    <procedure id="obtenerDetalleCuadraturaDebitosSalientes" parameterMap="setObtenerDetalleCuadraturaDebitosSalientes" resultMap="getObtenerDetalleCuadraturaDebitosSalientes">
        {CALL sp_consCuadraturaDebSal(?)}
    </procedure>

	    <parameterMap id="setObtenerDetalleCuadraturaEfectivasEntrantes" class="java.util.HashMap">
        <parameter property="fecha"            jdbcType="DATETIME" javaType="Date"/>
    </parameterMap>
    <resultMap id="getObtenerDetalleCuadraturaEfectivasEntrantes" class="java.util.HashMap">
        <result property="codigo"                       jdbcType="CHAR"        javaType="String"/>
        <result property="banco"                        jdbcType="CHAR"        javaType="String"/>
        <result property="totalInformeSIPE"             jdbcType="MONEY"       javaType="Double"/>
        <result property="totalEfectivasRecibidasCAA"   jdbcType="MONEY"       javaType="Double"/>
        <result property="diferencia"                   jdbcType="MONEY"       javaType="Double"/>
        <result property="estado"                       jdbcType="CHAR"        javaType="String"/>
    </resultMap>
    <procedure id="obtenerDetalleCuadraturaEfectivasEntrantes" parameterMap="setObtenerDetalleCuadraturaEfectivasEntrantes" resultMap="getObtenerDetalleCuadraturaEfectivasEntrantes">
        {CALL sp_consCuadraturaEfeEnt(?)}
    </procedure>

    <parameterMap id="setObtenerDetalleCuadraturaRegistrosEnviados" class="java.util.HashMap">
        <parameter property="fecha"            jdbcType="DATETIME" javaType="Date"/>
    </parameterMap>
    <resultMap id="getObtenerDetalleCuadraturaRegistrosEnviados" class="java.util.HashMap">
        <result property="codigo"                           jdbcType="CHAR"        javaType="String"/>
        <result property="banco"                            jdbcType="CHAR"        javaType="String"/>
        <result property="efectivasRetornosEnviadas"        jdbcType="MONEY"       javaType="Double"/>
        <result property="informeEnviadas"                  jdbcType="MONEY"       javaType="Double"/>
        <result property="glosaDiferenciaEnviadas"          jdbcType="CHAR"        javaType="String"/>
        <result property="efectivasRetornosRecibidas"       jdbcType="MONEY"       javaType="Double"/>
        <result property="informeRecibidas"                 jdbcType="MONEY"       javaType="Double"/>
        <result property="glosaDiferenciaRecibidas"         jdbcType="CHAR"        javaType="String"/>
    </resultMap>
    <procedure id="obtenerDetalleCuadraturaRegistrosEnviados" parameterMap="setObtenerDetalleCuadraturaRegistrosEnviados" resultMap="getObtenerDetalleCuadraturaRegistrosEnviados">
        {CALL sp_consCuadraturaRegEnv(?)}
    </procedure>
</sqlMap>   