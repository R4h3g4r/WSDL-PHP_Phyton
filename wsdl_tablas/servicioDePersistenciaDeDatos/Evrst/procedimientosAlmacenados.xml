<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Evrst.procedimientosAlmancenados">

	<parameterMap id="setParametro" class="java.util.HashMap">        
        <parameter property="codigo" jdbcType="CHAR" javaType="java.lang.String" />
    </parameterMap>

    <resultMap id="getParametro" class="java.util.HashMap">
        <result  property="prm_id"     jdbcType="char"    javaType="String" column="prm_id"/>                                             
        <result  property="prm_cod"     jdbcType="char"    javaType="String" column="prm_cod"/>                                             
        <result  property="prm_gls"         jdbcType="char"    javaType="String" column="prm_gls" />                                             
    </resultMap>

    <procedure id="obtenerParametro" parameterMap="setParametro" resultMap="getParametro">
       {CALL sp_cns_parametros(?)}
    </procedure>    

    <resultMap id="getObtenerGgee" class="java.util.HashMap">
        <result  property="pge_id"          jdbcType="int"        javaType="Integer" column="pge_id"          />
        <result  property="pge_prg"         jdbcType="int"        javaType="Integer" column="pge_prg"         />
        <result  property="pge_tip"         jdbcType="int"        javaType="Integer" column="pge_tip"         />
        <result  property="pge_niv_emp"     jdbcType="char"       javaType="String"  column="pge_niv_emp"     />
        <result  property="pge_tra_vta_ini" jdbcType="decimal"    javaType="Double"  column="pge_tra_vta_ini" />
        <result  property="pge_tra_vta_fin" jdbcType="decimal"    javaType="Double"  column="pge_tra_vta_fin" />
        <result  property="pge_pla_ini"     jdbcType="int"        javaType="Integer" column="pge_pla_ini"     />
        <result  property="pge_pla_fin"     jdbcType="int"        javaType="Integer" column="pge_pla_fin"     />
        <result  property="pge_prc_cob"     jdbcType="decimal"    javaType="Double"  column="pge_prc_cob"     /> 
        <result  property="pge_com"         jdbcType="decimal"    javaType="Double"  column="pge_com"         />   
        <result  property="pge_com_esp"     jdbcType="decimal"    javaType="Double"  column="pge_com_esp"     />    
        <result  property="pge_tpe_cob"     jdbcType="int"        javaType="Integer" column="pge_tpe_cob"     />                                          
    </resultMap> 

    <procedure id="obtenerGgee" resultMap="getObtenerGgee">
       {CALL sp_cns_ggee()}
    </procedure>  

    <resultMap id="getObtenerSeguroDesgravamen" class="java.util.HashMap">
        <result  property="seg_id"          jdbcType="int"        javaType="Integer" column="seg_id"          />
        <result  property="seg_pla_ini"         jdbcType="int"        javaType="Integer" column="seg_pla_ini"         />
        <result  property="seg_pla_fin"         jdbcType="int"        javaType="Integer" column="seg_pla_fin"         />
        <result  property="seg_tasa"        jdbcType="decimal"       javaType="Double"  column="seg_tasa"     />
        <result  property="seg_glosa"       jdbcType="char"    javaType="String"  column="seg_glosa" />
    </resultMap> 

    <procedure id="obtenerSeguroDesgravamen" resultMap="getObtenerSeguroDesgravamen">
       {CALL sp_cns_seg_des()}
    </procedure>
    
            <parameterMap id="setObtenerCodigoCredito" class="java.util.HashMap">        
        <parameter property="pcc_cod_prd" jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="pcc_cod_dcr" jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="pcc_cod_lmg" jdbcType="CHAR" javaType="java.lang.String" />
    </parameterMap>
    
     <resultMap id="getObtenerCodigoCredito" class="java.util.HashMap">
        <result  property="pcc_codigo"          jdbcType="char"        javaType="String" column="pcc_codigo"          />
    </resultMap> 

    <procedure id="obtenerCodigoCredito" parameterMap="setObtenerCodigoCredito" resultMap="getObtenerCodigoCredito" >
       {CALL sp_cns_cod_cred(?,?,?)}
    </procedure>



    <parameterMap id="setObtenerCodigoTaCo" class="java.util.HashMap">        
        <parameter property="tcg_por" jdbcType="Numeric" javaType="java.lang.Integer"     />
    </parameterMap>
    
     <resultMap id="getObtenerCodigoTaCo" class="java.util.HashMap">
        <result  property="tcg_cod"          jdbcType="char"        javaType="String" column="tcg_cod"          />
    </resultMap> 

    <procedure id="obtenerCodigoTaCo" parameterMap="setObtenerCodigoTaCo" resultMap="getObtenerCodigoTaCo" >
       {CALL sp_cns_cod_TaCo(?)}
    </procedure>


    
    <resultMap id="getObtenerIte" class="java.util.HashMap">
        <result  property="ite_id"          jdbcType="int"        javaType="Integer" column="ite_id"          />
        <result  property="ite_pla_ini"         jdbcType="int"        javaType="Integer" column="ite_pla_ini"         />
        <result  property="ite_pla_fin"         jdbcType="int"        javaType="Integer" column="ite_pla_fin"         />
        <result  property="ite_tas"        jdbcType="decimal"       javaType="Double"  column="ite_tas"     />
    </resultMap> 

    <procedure id="obtenerIte" resultMap="getObtenerIte">
       {CALL sp_cns_ite()}
    </procedure> 
    
    
        
    <parameterMap id="setRegistrarSimulacion" class="java.util.HashMap">        
         <parameter  property="sim_id"           jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_oper"         jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_rut_cli"      jdbcType="Numeric" javaType="java.lang.Integer"     />
         <parameter  property="sim_dv_rut"       jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_cod_prd"      jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_cod_des"      jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_mnt"          jdbcType="Numeric" javaType="java.lang.Double"      />
         <parameter  property="sim_tip_mnt"      jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_plz"          jdbcType="Numeric" javaType="java.lang.Integer"     />
         <parameter  property="sim_tas_men"      jdbcType="Numeric" javaType="java.lang.Double"      />
         <parameter  property="sim_tas_anu"      jdbcType="Numeric" javaType="java.lang.Double"      />
         <parameter  property="sim_fec_cur"      jdbcType="Datetime"    javaType="java.util.Date"    />
         <parameter  property="sim_fec_des"      jdbcType="Datetime"    javaType="java.util.Date"    />
         <parameter  property="sim_fec_pri_ven"  jdbcType="Datetime"    javaType="java.util.Date"    />
         <parameter  property="sim_mnt_bru"      jdbcType="Numeric"    javaType="java.lang.Double"   />
         <parameter  property="sim_mnt_liq"      jdbcType="Numeric"    javaType="java.lang.Double"   />
         <parameter  property="sim_val_cuo"      jdbcType="Numeric"    javaType="java.lang.Double"   />
         <parameter  property="sim_mnt_imp"      jdbcType="Numeric"    javaType="java.lang.Double"   />
         <parameter  property="sim_gas_not"      jdbcType="Numeric"    javaType="java.lang.Double"   />
         <parameter  property="sim_sum_seg"      jdbcType="Numeric"    javaType="java.lang.Double"   />
         <parameter  property="sim_mnt_gar"      jdbcType="Numeric"    javaType="java.lang.Double"   />
         <parameter  property="sim_cms_gar"      jdbcType="Numeric"    javaType="java.lang.Double"   />
         <parameter  property="sim_tip_ggee"     jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_cod_niv_vta"  jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_tas_gar"      jdbcType="Numeric"    javaType="java.lang.Double"   />
         <parameter  property="sim_tas_com"      jdbcType="Numeric"    javaType="java.lang.Double"   />
         <parameter  property="sim_cod_tas"      jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_fec_ult_ven"  jdbcType="Datetime"    javaType="java.util.Date"    />
         <parameter  property="sim_mes_gra"      jdbcType="Numeric"    javaType="java.lang.Integer"  />
         <parameter  property="sim_gls_mon"      jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_cod_mon"      jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_id_eje"       jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_cod_ofi"      jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_cta_car"      jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_cta_cli"      jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_id_pla_cre"   jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_est"          jdbcType="CHAR"    javaType="java.lang.String"      />
         <parameter  property="sim_fec_cre"      jdbcType="Datetime"    javaType="java.util.Date"    />
         <parameter  property="sim_fec_mod"      jdbcType="Datetime"    javaType="java.util.Date"    />
    </parameterMap>

    <resultMap id="getRegistrarSimulacion" class="java.util.HashMap">
        <result  property="sim_id"     jdbcType="char"    javaType="String" column="sim_id"/>                                             
    </resultMap>
    
    <procedure id="registrarSimulacion" parameterMap="setRegistrarSimulacion" resultMap="getRegistrarSimulacion">
       {CALL sp_ins_act_simulacion(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)}
    </procedure>
    

    <parameterMap id="setGrabarSeguros" class="java.util.HashMap">   
        <parameter property="cps_sim_id" jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cps_seg_glosa" jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cps_seg_tasa" jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cps_seg_valor" jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cps_fec_pro" jdbcType="datetime" javaType="java.util.Date" />
        <parameter property="cps_fec_mod" jdbcType="datetime" javaType="java.util.Date" />
    </parameterMap>
    
    <procedure id="grabarSeguros" parameterMap="setGrabarSeguros" resultClass="int">
       {CALL sp_ins_act_cuad_seguro(?,?,?,?,?,?)}
    </procedure>  


    <parameterMap id="setGrabarPagos" class="java.util.HashMap">   
        <parameter property="cpc_sim_id"       jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cpc_fec_ven"      jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cpc_int"          jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cpc_val_capital"  jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cpc_val_cuota"    jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cpc_val_saldo"    jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cpc_fec_pro"      jdbcType="datetime" javaType="java.util.Date" />
        <parameter property="cpc_fec_mod"      jdbcType="datetime" javaType="java.util.Date" />     
    </parameterMap>
    
    <procedure id="grabarPagos" parameterMap="setGrabarPagos" resultClass="int">
       {CALL sp_ins_act_cuad_pago(?,?,?,?,?,?,?,?)}
    </procedure> 


    <parameterMap id="setGrabarComision" class="java.util.HashMap">   
        <parameter property="ccg_sim_id"        jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="ccg_dias"          jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="ccg_saldo"         jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="ccg_mnt_comision"  jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="ccg_fec_pro"       jdbcType="datetime" javaType="java.util.Date" />
        <parameter property="ccg_fec_mod"       jdbcType="datetime" javaType="java.util.Date" />        
    </parameterMap>
    
    <procedure id="grabarComision" parameterMap="setGrabarComision" resultClass="int">
       {CALL sp_ins_act_cuad_comision(?,?,?,?,?,?)}
    </procedure> 
    
    
    <parameterMap id="setGrabarCorfo" class="java.util.HashMap">   
        <parameter property="cpc_sim_id"        jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cpc_fec_ven"           jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cpc_int"           jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cpc_capital"       jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cpc_val_cuota"     jdbcType="CHAR" javaType="java.lang.String" />
        <parameter property="cpc_saldo"         jdbcType="CHAR" javaType="java.lang.String" />   
        <parameter property="cpc_fec_pro"       jdbcType="datetime" javaType="java.util.Date" />
        <parameter property="cpc_fec_mod"       jdbcType="datetime" javaType="java.util.Date" />        
    </parameterMap>
    
    <procedure id="grabarCorfo" parameterMap="setGrabarCorfo" resultClass="int">
       {CALL sp_ins_act_cuad_corfo(?,?,?,?,?,?,?,?)}
    </procedure> 
    
    


<parameterMap id="setActualizarGgEe" class="java.util.HashMap">   
        <parameter property="pge_id"            jdbcType="Numeric" javaType="java.lang.Integer" />
        <parameter property="pge_tra_vta_ini"   jdbcType="Numeric" javaType="java.lang.Double" />
        <parameter property="pge_tra_vta_fin"   jdbcType="Numeric" javaType="java.lang.Double" />
        <parameter property="pge_pla_ini"       jdbcType="Numeric" javaType="java.lang.Integer" />
        <parameter property="pge_pla_fin"       jdbcType="Numeric" javaType="java.lang.Integer" />
        <parameter property="pge_prc_cob"       jdbcType="Numeric" javaType="java.lang.Double" />   
        <parameter property="pge_com"           jdbcType="Numeric" javaType="java.lang.Double" />
        <parameter property="pge_com_esp"       jdbcType="Numeric" javaType="java.lang.Double" />        
        <parameter property="pge_tpe_cob"       jdbcType="Numeric" javaType="java.lang.Integer" />        
    </parameterMap>
    
    <procedure id="actualizarGgEe" parameterMap="setActualizarGgEe" resultClass="int">
       {CALL sp_act_ggee(?,?,?,?,?,?,?,?,?)}
    </procedure> 
    
    
    <resultMap id="getObtenerListaTaCo" class="java.util.HashMap">
        <result  property="tcg_por"         jdbcType="int"        javaType="Integer" column="tcg_por"          />
        <result  property="tcg_cod"         jdbcType="CHAR"        javaType="String" column="tcg_cod"         />
    </resultMap> 

    <procedure id="obtenerListaTaCo" resultMap="getObtenerListaTaCo">
       {CALL sp_cns_TaCo()}
    </procedure> 
  
  
    <resultMap id="getObtenerListaCodigoCredito" class="java.util.HashMap">
        <result  property="pcc_codigo"        jdbcType="CHAR"        javaType="String" column="pcc_codigo"          />
        <result  property="pcc_glosa"         jdbcType="CHAR"        javaType="String" column="pcc_glosa"         />
    </resultMap> 

    <procedure id="obtenerListaCodigoCredito" resultMap="getObtenerListaCodigoCredito">
       {CALL sp_cns_lis_cred()}
    </procedure>   
    
    
    <parameterMap id="setActualizarTaCo" class="java.util.HashMap">   
     <parameter property="tcg_cod"            jdbcType="Char" javaType="java.lang.String" /> 
     <parameter property="tcg_por"            jdbcType="Numeric" javaType="java.lang.Integer" /> 
    </parameterMap>
    
    <procedure id="actualizarTaCo" parameterMap="setActualizarTaCo" resultClass="int">
       {CALL sp_act_TaCo(?,?)}
    </procedure> 
  
    
    <parameterMap id="SetActualizarCodigoCredito" class="java.util.HashMap">   
     <parameter property="pcc_codigo"            jdbcType="Char" javaType="java.lang.String" /> 
     <parameter property="pcc_glosa"            jdbcType="Char" javaType="java.lang.String" /> 
    </parameterMap>
    
    <procedure id="actualizarCodigoCredito" parameterMap="SetActualizarCodigoCredito" resultClass="int">
       {CALL sp_upd_cod_cred(?,?)}
    </procedure> 
    

    <parameterMap id="SetActualizarSeguroDesgravamen" class="java.util.HashMap">   
     <parameter property="seg_id"            jdbcType="Numeric" javaType="java.lang.Integer" /> 
     <parameter property="seg_pla_ini"       jdbcType="Numeric" javaType="java.lang.Integer" /> 
     <parameter property="seg_pla_fin"       jdbcType="Numeric" javaType="java.lang.Integer" />
     <parameter property="seg_tasa"          jdbcType="Numeric" javaType="java.lang.Double" />
     <parameter property="seg_glosa"         jdbcType="Char"    javaType="java.lang.String" />
    </parameterMap>
    
    <procedure id="actualizarSeguroDesgravamen" parameterMap="SetActualizarSeguroDesgravamen" resultClass="int">
       {CALL sp_act_seg_des(?,?,?,?,?)}
    </procedure> 
    

	<resultMap id="ProductoCliente" class="java.util.HashMap">
	        <result property="codigo" javaType="String" column="codigo" jdbcType="char"/>
	        <result property="fecha" javaType="java.util.Date"
	            column="fecha" jdbcType="datetime"  typeHandler="cl.bci.middleware.aplicacion.persistencia.handler.CalendarTypeHandler" /> 
            <result property="descripcion" javaType="String" column="descripcion" jdbcType="char"/>
     </resultMap>
     <resultMap id="ProductoVigenteCliente" class="java.util.HashMap">
            <result property="rut" javaType="Long" column="rut" jdbcType="numeric"/>
            <result property="codigo" javaType="String" column="codigo" jdbcType="char"/>
            <result property="fecha" javaType="java.util.Date"
                column="fecha" jdbcType="datetime"  typeHandler="cl.bci.middleware.aplicacion.persistencia.handler.CalendarTypeHandler" /> 
            <result property="descripcion" javaType="String" column="descripcion" jdbcType="char"/>
     </resultMap>
    <resultMap id="EmpresasEnConvenio" class="java.util.HashMap">
		<result property="rutEmpresa"   				column="emp_rut_emp" 				jdbcType="INT" 	javaType="long"/>
		<result property="digitoVerificador"   			column="emp_dv_emp" 				jdbcType="CHAR" 	javaType="String"/>
		<result property="cicEmpresa"				   	column="emp_cic_emp" 				jdbcType="CHAR"   	javaType="String"/>
		<result property="razonSocial"   				column="emp_rzs_emp" 				jdbcType="CHAR"   	javaType="String"/>
		<result property="nombreComercial"   			column="emp_ncm_emp" 				jdbcType="CHAR"   	javaType="String"/>
	  	<result property="paginaActual"   				column="paginaActual" 				jdbcType="INT"   	javaType="int"/>
		<result property="totalPaginas"   				column="totalPaginas" 				jdbcType="INT"   	javaType="int"/>
	</resultMap>     
    <resultMap id="EmpresaPorRut" class="java.util.HashMap">
		<result property="rutEmpresa"   				column="emp_rut_emp" 				jdbcType="INT" 	javaType="long"/>
		<result property="digitoVerificador"   			column="emp_dv_emp" 				jdbcType="CHAR" 	javaType="String"/>
		<result property="cicEmpresa"				   	column="emp_cic_emp" 				jdbcType="CHAR"   	javaType="String"/>
		<result property="razonSocial"   				column="emp_rzs_emp" 				jdbcType="CHAR"   	javaType="String"/>
		<result property="nombreComercial"   			column="emp_ncm_emp" 				jdbcType="CHAR"   	javaType="String"/>
	</resultMap>
    <resultMap id="ConveniosDeEmpresa" class="java.util.HashMap">
		<result property="codigoConvenio"   		column="cnv_cod_cnv" 				jdbcType="CHAR" 	javaType="String"/>
		<result property="fechaApertura"   			column="cnv_fec_apr" 				jdbcType="DATETIME" javaType="Date"/>
		<result property="codigoEstado"			   	column="cnv_cod_est" 				jdbcType="CHAR"   	javaType="String"/>
		<result property="codigoEjecutivo"   		column="cnv_cod_eje" 				jdbcType="CHAR"   	javaType="String"/>
		<result property="cantidadMinima"   		column="cnv_ctd_min" 				jdbcType="INT"   	javaType="int"/>
	  	<result property="descripcion"   			column="cnv_gls_cnv" 				jdbcType="CHAR"   	javaType="String"/>
		<result property="codigoOficina"   			column="cnv_ofi_cnv" 				jdbcType="CHAR"   	javaType="String"/>
		<result property="rentaMinima"   			column="cnv_rta_min" 				jdbcType="MONEY"   	javaType="double"/>
	</resultMap>

<procedure id="lealtadCliente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
	{CALL sp_cns_cua_cli(#rut_cli#)}
</procedure>
<procedure id="agregarComentario" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_ins_com_cli(#cli_idc#,#dig_vrf#,#cod_ejc#,#tip_com#,#txt_com#)}
</procedure>
<procedure id="traerComentarios" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_com_cli(#cli_idc#,#fec_ini#,#fec_fin#,#tip_com#)}
</procedure>
	<procedure id="consultaProductosNoVigentesCliente" resultMap="ProductoCliente"
		parameterClass="java.util.HashMap">
		{CALL sp_cns_crc_prd_cli(#rut#,#banca#)}
	</procedure>
	<procedure id="consultaProductosVigentesCliente" resultMap="ProductoVigenteCliente"
        parameterClass="java.util.HashMap">
        {CALL sp_cns_prd_vig_cli(#rut#,#banca#)}
    </procedure>
   
	<procedure id="consultaEstadoPDFDatosConsolidadoDeCliente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_estado_pdf(#cli_rut#,#cli_dv#)}
	</procedure>

	<procedure id="actualizaEstadoPDFDatosConsolidadoDeCliente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_act_estado_pdf(#cli_rut#,#cli_dv#,#col_cod#,#estado#,#banca#)}
	</procedure>

    <parameterMap id="setObtenerGiros" class="java.util.HashMap">
    	<parameter property="idGiro" jdbcType="Numeric" javaType="java.lang.Integer"/>
    </parameterMap>
    <resultMap id="getObtenerGiros" class="java.util.HashMap" >
    	<result property="idGiro" 			column="girocom_id_giro" 		jdbcType="Numeric" 	javaType="java.lang.Integer"/>
    	<result property="nombreGiro" 		column="girocom_nom_giro" 		jdbcType="Char" 	javaType="java.lang.String"/>
    	<result property="esCalculable" 	column="girocom_calc" 			jdbcType="Char" 	javaType="java.lang.String"/>
    	<result property="usaCAR" 			column="girocom_usa_car" 		jdbcType="Char" 	javaType="java.lang.String"/>
    	<result property="consParticular" 	column="girocom_men_con_par" 	jdbcType="Char" 	javaType="java.lang.String"/>
    </resultMap>
    <procedure id="obtenerGiros" parameterMap="setObtenerGiros" resultMap="getObtenerGiros">
    	{CALL sp_con_giros(?) }
    </procedure>
    
    <parameterMap id="setObtenerParametrosDeCalculo" class="java.util.HashMap">
    	<parameter property="nombreParam" 	jdbcType="Char" javaType="java.lang.String"/>
    	<parameter property="ete" 			jdbcType="Char" javaType="java.lang.String"/>
    </parameterMap>
    <resultMap id="getObtenerParametrosDeCalculo" class="java.util.HashMap" >
    	<result property="nombreParam"	column="parmar_desc_par"	jdbcType="Char"	javaType="java.lang.String"/>
    	<result property="RAN12"		column="RAN12"				jdbcType="money"	javaType="java.lang.Double"/>
     	<result property="RAN34"		column="RAN34"				jdbcType="money"	javaType="java.lang.Double"/>
    	<result property="RAN5"			column="RAN5"				jdbcType="money"	javaType="java.lang.Double"/>
    </resultMap>
    <procedure id="obtenerParametrosDeCalculo" parameterMap="setObtenerParametrosDeCalculo" resultMap="getObtenerParametrosDeCalculo">
    	{CALL sp_con_parmar(? , ?) }
    </procedure>
    
    <parameterMap id="setInsertarRegistroCalculo" class="java.util.HashMap">
    	<parameter property="fecha" 			jdbcType="Datetime" javaType="java.util.Date"/>
    	<parameter property="ejecutivo"			jdbcType="Char" 	javaType="java.lang.String"/>
    	<parameter property="rutCliente" 		jdbcType="Numeric" 	javaType="java.lang.Integer"/>
    	<parameter property="dv"				jdbcType="Char"		javaType="java.lang.String"/>
    	<parameter property="ete" 				jdbcType="Char" 	javaType="java.lang.String"/>
    	<parameter property="ventaPromedio" 	jdbcType="Numeric" 	javaType="java.lang.Double"/>
    	<parameter property="antiguedad" 		jdbcType="Char" 	javaType="java.lang.String"/>
    	<parameter property="rentabilidad" 		jdbcType="Char" 	javaType="java.lang.String"/>
    	<parameter property="patrimonio" 		jdbcType="Numeric" 	javaType="java.lang.Double"/>
    	<parameter property="idGiro"			jdbcType="Numeric" 	javaType="java.lang.Integer"/>
    	<parameter property="gtiaFogape" 		jdbcType="Numeric" 	javaType="java.lang.Double"/>
    	<parameter property="gtiaNoFogape" 		jdbcType="Numeric" 	javaType="java.lang.Double"/>
    	<parameter property="deudaCortoPlazo" 	jdbcType="Numeric" 	javaType="java.lang.Double"/>
    	<parameter property="margenFinal"		jdbcType="Char" 	javaType="java.lang.String"/>
    </parameterMap>
    <procedure id="insertarRegistroCalculo" parameterMap="setInsertarRegistroCalculo" resultClass="int">
    	{CALL sp_ins_calregcli(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) }
    </procedure>
    
    <parameterMap id="setObtenerPlantillaCAR" class="java.util.HashMap">
    	<parameter property="idGiro" jdbcType="Numeric" javaType="java.lang.Integer"/>
    </parameterMap>
    <resultMap id="getObtenerPlantillaCAR" class="java.util.HashMap" >
    	<result property="idPlantilla" 	column="plancar_id_plant" 		jdbcType="Numeric" 	javaType="java.lang.Integer"/>	
    	<result property="giro" 		column="plancar_giro_com" 		jdbcType="Char" 	javaType="java.lang.String"/>
    	<result property="activ" 		column="plancar_activ" 			jdbcType="Char" 	javaType="java.lang.String"/>
    	<result property="banca" 		column="plancar_banca" 			jdbcType="Char" 	javaType="java.lang.String"/>
    </resultMap>
    <procedure id="obtenerPlantillaCAR" parameterMap="setObtenerPlantillaCAR" resultMap="getObtenerPlantillaCAR">
    	{CALL sp_con_plan_car(?) }
    </procedure>
    
    <parameterMap id="setObtenerCriterios" class="java.util.HashMap">
    	<parameter property="idPlantilla" jdbcType="Numeric" javaType="java.lang.Integer"/>
    </parameterMap>
    <resultMap id="getObtenerCriterios" class="java.util.HashMap">
    	<result property="id_cri"		column="crit_id_cri"		 jdbcType="Numeric" 	javaType="java.lang.Integer"/> 
		<result property="nom_cri"		column="crit_nom_cri"		 jdbcType="Char" 		javaType="java.lang.String" />
    </resultMap>
    <procedure id="obtenerCriterios" parameterMap="setObtenerCriterios" resultMap="getObtenerCriterios">
    	{CALL sp_con_crit(?) }
    </procedure>
    
    <parameterMap id="setObtenerDetalleCriterio" class="java.util.HashMap">
    	<parameter property="id_cri" jdbcType="Numeric" javaType="java.lang.Integer"/>
    </parameterMap>
    <resultMap id="getObtenerDetalleCriterio" class="java.util.HashMap">
		<result property="det_id"      	column="detcri_id"        	 jdbcType="Numeric" 	javaType="java.lang.Integer" />
		<result property="det_nom"      column="detcri_nom"          jdbcType="Char" 		javaType="java.lang.String" />
		<result property="det_desc" 	column="detcri_desc"         jdbcType="Varchar" 	javaType="java.lang.String" />
    </resultMap>
    <procedure id="obtenerDetalleCriterio" parameterMap="setObtenerDetalleCriterio" resultMap="getObtenerDetalleCriterio">
    	{CALL sp_con_detcri(?) }
    </procedure>
    
    <parameterMap id="setObtenerRegistrosPorFecha" class="java.util.HashMap">
    	<parameter property="fechaIni"	jdbcType="Datetime"	javaType="java.util.Date"/>
    	<parameter property="fechaFin"	jdbcType="Datetime"	javaType="java.util.Date"/>
    	<parameter property="ete"		jdbcType="Char"		javaType="java.lang.String"/>
    </parameterMap>
    <resultMap id="getObtenerRegistrosPorFecha" class="java.util.HashMap" >
		<result property="fec_reg"  column="calregcli_fec_reg"    jdbcType="Datetime" 	javaType="java.util.Date"/>
		<result property="eje"      column="calregcli_eje"        jdbcType="Char" 		javaType="java.lang.String"/>
		<result property="rut_cli"  column="calregcli_rut_cli"    jdbcType="Numeric" 	javaType="java.lang.Integer"/>
		<result property="dv_cli"	column="calregcli_dv_cli"	  jdbcType="Char"		javaType="java.lang.String"/>
		<result property="nom_giro" column="girocom_nom_giro"     jdbcType="Char" 		javaType="java.lang.String"/>
		<result property="vta_prom" column="calregcli_vta_prom"   jdbcType="Money" 		javaType="java.lang.Double"/>
		<result property="ant_giro" column="calregcli_ant_giro"   jdbcType="Char" 		javaType="java.lang.String"/>
		<result property="rent"     column="calregcli_rent"       jdbcType="Char" 		javaType="java.lang.String"/>
		<result property="pat"      column="calregcli_pat"        jdbcType="Money" 		javaType="java.lang.Double"/>
		<result property="gta_fog"  column="calregcli_gta_fog"    jdbcType="Money" 		javaType="java.lang.Double"/>
		<result property="gta_nfog" column="calregcli_gta_nfog"   jdbcType="Money"		javaType="java.lang.Double"/>
		<result property="deu_cp"   column="calregcli_deu_cp"     jdbcType="Money" 		javaType="java.lang.Double"/>
		<result property="mgen_fin" column="calregcli_mgen_fin"   jdbcType="Char" 		javaType="java.lang.String"/>
    </resultMap>
    <procedure id="obtenerRegistrosPorFecha" parameterMap="setObtenerRegistrosPorFecha" resultMap="getObtenerRegistrosPorFecha">
    	{CALL sp_con_calregcli( ? , ? , ? )}
    </procedure>
    
    <parameterMap id="setActualizarParametrosCalculo" class="java.util.HashMap">
    	<parameter property="nombreParam"	jdbcType="Char"		javaType="java.lang.String"/>
    	<parameter property="ete"			jdbcType="Char"		javaType="java.lang.String"/>
    	<parameter property="RAN12"			jdbcType="money"	javaType="java.lang.Double"/>
     	<parameter property="RAN34"			jdbcType="money"	javaType="java.lang.Double"/>
    	<parameter property="RAN5"			jdbcType="money"	javaType="java.lang.Double"/>
    </parameterMap>
    <procedure id="actualizarParametrosCalculo" parameterMap="setActualizarParametrosCalculo" resultClass="int">
    	{CALL sp_upd_parmar(? , ? , ? , ? , ? )}
    </procedure>
    
    <parameterMap id="setActualizarGiro" class="java.util.HashMap" >
    	<parameter property="idGiro" 			jdbcType="Numeric" javaType="java.lang.Integer"/>
    	<parameter property="esCalculable" 		jdbcType="Char" 	javaType="java.lang.String"/>
    	<parameter property="usaCAR" 			jdbcType="Char" 	javaType="java.lang.String"/>
    	<parameter property="consParticular" 	jdbcType="Char" 	javaType="java.lang.String"/>
    </parameterMap>
    <procedure id="actualizarGiro" parameterMap="setActualizarGiro" resultClass="int">
    	{CALL sp_upd_girocom( ? , ? , ? , ?)}
    </procedure>
    
    <parameterMap id="setActualizarPlantillaCAR" class="java.util.HashMap">
    	<parameter property="idGiro"	jdbcType="Numeric"	javaType="java.lang.Integer"/>
    	<parameter property="giro"		jdbcType="Char"		javaType="java.lang.String"/>
    	<parameter property="actividad"	jdbcType="Char"		javaType="java.lang.String"/>
    	<parameter property="banca"		jdbcType="Char"		javaType="java.lang.String"/>
    </parameterMap>
    <procedure id="actualizarPlantillaCAR" parameterMap="setActualizarPlantillaCAR" resultClass="int">
    	{CALL sp_upd_plancar(?, ?, ?, ?)}
    </procedure>
    
    <parameterMap id="setActualizarCriterio" class="java.util.HashMap">
       	<parameter property="id_cri"		jdbcType="Numeric" 	javaType="java.lang.Integer"/> 
		<parameter property="nom_cri"		jdbcType="Char" 	javaType="java.lang.String" />
    </parameterMap>
    <procedure id="actualizarCriterio" parameterMap="setActualizarCriterio" resultClass="int">
    	{CALL sp_upd_crit(? , ?) }
    </procedure>
    
    <parameterMap id="setActualizarDetalleCriterio" class="java.util.HashMap">
		<parameter property="det_id"		jdbcType="Numeric"	javaType="java.lang.Integer" />
		<parameter property="det_desc"		jdbcType="Varchar"	javaType="java.lang.String" />
    </parameterMap>
    <procedure id="actualizarDetalleCriterio" parameterMap="setActualizarDetalleCriterio" resultClass="int">
    	{CALL sp_upd_detcri(? ,?) }
    </procedure>

	<procedure id="obtenerEmpresasEnConvenio" parameterClass="java.util.HashMap" resultMap="EmpresasEnConvenio">
        {CALL sp_cns_emp_cnv(#pagina#,#largoPagina#)}
    </procedure>

	<procedure id="obtenerEmpresaPorRut" parameterClass="java.util.HashMap" resultMap="EmpresaPorRut">
        {CALL sp_cns_emp_rut(#rutEmpresa#)}
    </procedure>

	<procedure id="obtenerEmpresasPorNombre" parameterClass="java.util.HashMap" resultMap="EmpresasEnConvenio">
        {CALL sp_cns_emp_nom(#nombreEmpresa#,#pagina#,#largoPagina#)}
    </procedure>

	<procedure id="obtenerEmpresasPorLetra" parameterClass="java.util.HashMap" resultMap="EmpresasEnConvenio">
        {CALL sp_cns_emp_let(#letra#,#pagina#,#largoPagina#)}
    </procedure>

	<procedure id="obtenerConveniosDeEmpresa" parameterClass="java.util.HashMap" resultMap="ConveniosDeEmpresa">
        {CALL sp_cns_cnv_rut(#rutEmpresa#)}
    </procedure>

	<procedure id="verificarConvenioVigente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_vrf_cnv_emp(#rutEmpresa#)}
    </procedure>

    <procedure id="consultaXMLParaPDFDatosConsolidadoDeCliente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_xml_pdf(#cli_rut#,#cli_dv#)}
    </procedure>

    <parameterMap id="setConsultaEstadoActualizacionRenta" class="java.util.HashMap">
    	<parameter property="rutCliente"	jdbcType="INTEGER"	javaType="java.lang.Long"/>
    </parameterMap>
    
    <procedure id="consultarEstadoActualizacionRenta" parameterMap="setConsultaEstadoActualizacionRenta" resultClass="java.lang.String">
    	{CALL sp_cns_cpc (?)}
    </procedure>
    
    <parameterMap id="setConsultaReady" class="java.util.HashMap">
    	<parameter property="rutCliente"	jdbcType="INTEGER"	javaType="java.lang.Long"/>
    </parameterMap>

   <procedure id="consultarSemaforoReady" parameterMap="setConsultaReady" resultClass="java.util.HashMap">
    	{CALL sp_cns_cpc_ready (?)}
    </procedure>

    <resultMap id="listadoHistorialClienteBitacora" class="java.util.HashMap">
        <result property="rutCliente" javaType="String" column="com_cli_idc"/>
		<result property="dvCliente" javaType="String" column="com_dig_vrf"/>
		<result property="ejecutivo" javaType="String" column="com_cod_ejc"/>
		<result property="fecha" javaType="Date" column="com_fec_ing"/>
		<result property="canal" javaType="String" column="canal"/>
		<result property="subCanal" javaType="String" column="subcanal"/>
		<result property="tipoComentario" javaType="String" column="com_tip_com"/>
		<result property="comentario" javaType="String" column="comentario"/>
    </resultMap>

    <procedure id="sp_bus_acc_cli" parameterClass="java.util.HashMap" resultMap="listadoHistorialClienteBitacora">
        {CALL sp_bus_acc_cli(#rutCliente#,#dvCliente#,#fechaHasta#,#fechaDesde#,#esBusquedaInicial#)}
    </procedure>
	
	<!-- INICIO CONSULTA REGION-CIUDAD-COMUNA -->	
	<parameterMap id="setciudadPorRegion" class="java.util.HashMap">		
		<parameter property="vlr_cod_fml" jdbcType="CHAR" javaType="java.lang.String" />
		<parameter property="vlr_anx" 	  jdbcType="CHAR" javaType="java.lang.String" />
    </parameterMap>

  	<resultMap id="getciudadPorRegion" class="java.util.HashMap">
		<result  property="vlr_cod_fml" 	jdbcType="char"    javaType="String" />												
		<result  property="vlr_cod_int" 	jdbcType="char"    javaType="String" />												
		<result  property="vlr_des" 		jdbcType="char"    javaType="String" />
		<result  property="vlr_anx" 		jdbcType="char"    javaType="String" />   											
	</resultMap>

	<procedure id="ciudadPorRegion" parameterMap="setciudadPorRegion" resultMap="getciudadPorRegion">
	   {CALL sp_cns_vlr_001(?, ?)}
	</procedure>	
	<!-- FIN CONSULTA REGION-CIUDAD-COMUNA -->
	<procedure id="consultaOperacionesFogain" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_estadoOperacionesFogain(#rutCliente#)}
    </procedure>
    
    <procedure id="consultaDocumentoFogain" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_documentosPdfFogain(#sim_id#)}
    </procedure>
    
    
<procedure id="consultaDatosSimulacionFogain" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_operacionesFogain(#idSimulacion#)}
    </procedure>
    
    <procedure id="consultarOtrosDatosFogain" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_otrosDatosFogain(#idSimulacion#)}
    </procedure>
    
    <procedure id="consultarTipoPersona" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_tipoPersonaFogain(#idSimulacion#,#rut#,#tipoPersona#)}
    </procedure>
    
    <procedure id="insertarTipoPersona" parameterClass="java.util.HashMap">
        {CALL sp_ins_tipoPersonaFogain(
        #idSimulacion#,
        #rut#,
        #dv#,
        #tipoPersona#,
        #nombreCompleto#,
        <isNull property="fechaNacimiento">NULL</isNull><isNotNull property="fechaNacimiento">#fechaNacimiento#</isNotNull>,
        #domicilio#,
        <isNull property="comuna">NULL</isNull><isNotNull property="comuna">#comuna#</isNotNull>,
        <isNull property="ciudad">NULL</isNull><isNotNull property="ciudad">#ciudad#</isNotNull>,
        <isNull property="fono">NULL</isNull><isNotNull property="fono">#fono#</isNotNull>,
        <isNull property="ctaCorriente">NULL</isNull><isNotNull property="ctaCorriente">#ctaCorriente#</isNotNull>,
        #indicadorAsegurado#)}
    </procedure>
    
    <procedure id="insertarOtrosDatosFogain" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_ins_otrosDatosFogain(#idSimulacion#,
        #rut#,
        #dv#,
        <isNull property="nombreEjecutivo">NULL</isNull><isNotNull property="nombreEjecutivo">#nombreEjecutivo#</isNotNull>,
        <isNull property="nombreOficina">NULL</isNull><isNotNull property="nombreOficina">#nombreOficina#</isNotNull>,
        <isNull property="ciudadOficina">NULL</isNull><isNotNull property="ciudadOficina">#ciudadOficina#</isNotNull>,
        #condicionGarantia#)}
    </procedure>

    <procedure id="consultaEstadoContable" parameterClass="java.util.HashMap"  resultClass="java.util.HashMap">
        {CALL sp_cns_estado_contable(#estado#)}
    </procedure>
    
    <procedure id="consultaDetalleEstadoContable" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_det_estado_contable(
        <isNull property="tramo">NULL</isNull><isNotNull property="tramo">#tramo#</isNotNull>,
        <isNull property="situacionContable">NULL</isNull><isNotNull property="situacionContable">#situacionContable#</isNotNull>)}
    </procedure>
    
    <procedure id="consultaTrazabilidadCredito" resultClass="java.util.HashMap">
        {CALL sp_cns_trazabilidad_credito()}
    </procedure>
    
    <procedure id="consultaDetalleTrazabilidad" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_detalle_trazabilidad(#codigo#)}
    </procedure>
    
    <procedure id="consultaEstadoGarantia" resultClass="java.util.HashMap">
        {CALL sp_cns_estado_garantia(#estado#)}
    </procedure>
    
    <procedure id="consultaDetalleGarantia" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_detalle_estado_garantia(#tramo_operacion#,#estado_gtia#)}
    </procedure>
    
    <procedure id="consultaAlertaGarantia" resultClass="java.util.HashMap">
        {CALL sp_cns_alerta_estado_garantia()}
    </procedure>
    
    <procedure id="consultaAlertaDetalleGarantia" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_det_alerta_garantia(#descripcion_filtro#)}
    </procedure>

    	
<procedure id="consultaFechaActualizacion" resultClass="java.util.HashMap">
        {CALL sp_cns_fecha_actualizacion()}
    </procedure>
    


</sqlMap>	
