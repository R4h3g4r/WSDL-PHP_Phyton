<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
	
<sqlMap namespace="bci_prod.procedimientosAlmacenados">	

<resultMap id="valeVista" class = "java.util.HashMap">
 
  <result property = "apellidoMaternoDelBeneficiario" 		column = ""/>
  <result property = "apellidoPaternoDelBeneficiario" 		column = ""/>
  <result property = "ciudadDelBeneficiario" 		  		column = ""/>
  <result property = "codigoDeBanco"                  		column = ""/>
  <result property = "codigoDeOficinaDeCabecera"			column = ""/>
  <result property = "codigoDeOficinaDeEntrega"				column = ""/>
  <result property = "codigoDeOficinaDeImpresion"			column = ""/>
  <result property = "codigoDeOficinaDeReferencia"			column = ""/>
  <result property = "comunaDelBeneficiario"				column = ""/>
  <result property = "correlativo"							column = ""/>
  <result property = "digitoVerificadorDelPrimerRetirador"	column = ""/>
  <result property = "digitoVerificadorDelSegundoRetirador" column = ""/>
  <result property = "direccionDelBeneficiario"				column = ""/>
  <result property = "direccionOficinaDeEntrega"			column = ""/>
  <result property = "estado"								column = ""/>
  <result property = "fechaDeEntrega"						column = ""		javaType="Date"/>
  <result property = "monto"								column = ""/>
  <result property = "nombreDeOficinaDeEntrega"				column = ""/>
  <result property = "nombreDeOficinaDeReferencia"			column = ""/>
  <result property = "nombreDelBeneficiario"				column = ""/>
  <result property = "nombreDelCliente"						column = ""/>
  <result property = "nombreDelPrimerRetirador"				column = ""/>
  <result property = "nombreDelSegundoRetirador" 			column = ""/>
  <result property = "numeroDeDetalle"						column = ""/>
  <result property = "numeroDeSistema"						column = ""/>
  <result property = "plazaDeOficinaDeReferencia"			column = ""/>
  <result property = "rutDelBeneficiario"					column = ""/>
  <result property = "rutDelCliente"						column = ""/>
  <result property = "rutDelPrimerRetirador"				column = ""/>
  <result property = "rutDelSegundoRetirador"				column = ""/>
  <result property = "serial"								column = ""/>
  <result property = "tipoDeOperacion"						column = ""/>
  </resultMap>
  
<resultMap id="registroFIR" class="java.util.HashMap">
	<result property="clave" column="bit_clv" />
	<result property="descripcion" column="bit_des" />
</resultMap>  
		
	<procedure id="traerTodosPorBeneficiario" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_vvi_bnf_all_est(#cRutDelBeneficiario#,#cFechaDeEntrega#,#cEstado#)}
    </procedure>

	<procedure id="traerTodosPorRetirador" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_vvi_ret_all_est(#cRutDelRetirador#,#cFechaDeEntrega:DATE#,#cEstado#)}
    </procedure>
	
	<procedure id="traerPorRetirador" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_vvi_ret_est(#cRutDelBeneficiario#,#cFechaDeEntrega:DATE#,#cCodigoDeOficinaDeEntrega#,#cEstado#)}
    </procedure>
	
	<procedure id="traerPorBeneficiario" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_vvi_bnf_est(#cRutDelBeneficiario#,#cFechaDeEntrega:DATE#,#cCodigoDeOficinaDeEntrega#,#cEstado#)}
    </procedure>

<procedure id="obtenerFirmaValeVista" resultMap="registroFIR" parameterClass="java.util.HashMap">
	{CALL sp_cns_fir(#bit_clv#)}
</procedure>

	
	<resultMap class="java.util.HashMap" id="registroRetirador">
		<result property="ret_rut_ret" column="ret_rut_ret" />
		<result property="ret_dv_ret" column="ret_dv_ret" />
		<result property="ret_est_ret" column="ret_est_ret" />
		<result property="ret_nom_ret" columnIndex="3" />
		<result property="ret_apat_ret" columnIndex="4" />
        <result property="ret_amat_ret" columnIndex="5" />
        <result property="ret_fec_vnc" columnIndex="9" />
	</resultMap>
<procedure id="obtenerRetiradoresValeVistaEmpresa" resultMap="registroRetirador" parameterClass="java.util.HashMap">
	{CALL sp_BuscarRetporEmp(#rutemp#)}
</procedure>




	
</sqlMap>	