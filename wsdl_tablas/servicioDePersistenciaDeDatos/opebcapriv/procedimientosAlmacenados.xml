<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
	
<sqlMap namespace="opebcapriv.procedimientosAlmacenados">


    <!-- INICIO Cuaderno MiddleOfice -->
	
	<!--
			sp_MO_lista_atributos(@tipoDeDato     		varchar(2),
								  @clienteProducto		varchar(1)) 
	-->
	<resultMap id="getAtributos" class="java.util.HashMap">
		<result property="id" 						jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<result property="nombre"  					jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="descripcion"      		jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="idTipoDato"  				jdbcType="NUMERIC"  javaType="java.lang.Integer"/> 
		<result property="valorPorDefecto"  		jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="clienteOProducto"  		jdbcType="CHAR" 	javaType="java.lang.String"/>
		<result property="nombreTipoDato"  			jdbcType="VARCHAR" 	javaType="java.lang.String"/>
          <result property="atr_on_off"       jdbcType="NUMERIC" javaType="java.lang.Integer"/>     		
          <result property="atr_ord"          jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</resultMap>
	
	<parameterMap id="setAtributos" class="java.util.HashMap">
		<parameter property="tipoDeDato"			jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="clienteProducto"  		jdbcType="VARCHAR" javaType="java.lang.String" />		
		<parameter property="activo"           jdbcType="VARCHAR" javaType="java.lang.String" />
	</parameterMap>
	
    <procedure id="obtieneListaDeAtributos" parameterMap="setAtributos" resultMap="getAtributos">
		{CALL sp_MO_lista_atributos (?, ?, ?)}
	</procedure>
	
	
	<!-- 
	          actualizar atributo tabla ATR
	    CREATE PROCEDURE dbo.sp_MO_actualiza_atributo(@p_id          numeric(18,0),
                                                         @p_nombre           varchar(30),
                                                         @p_descripcion   varchar(50),
                                                         @p_id_tipo_dato  int,
                                                         @p_valor_defecto varchar(100),
                                                         @p_cliente_producto varchar(1),
                                                                                          @p_orden_atr numeric(9),
                                                                                          @p_habilita_atr numeric(1))
	-->
	<parameterMap id="setActualizaAtributo" 	   class="java.util.HashMap">
		<parameter property="p_id" 			   jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_nombre"		   jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="p_descripcion"  	   jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="p_id_tipo_dato" 	   jdbcType="INTEGER" javaType="java.lang.Integer"/>
		<parameter property="p_valor_defecto"  	   jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="p_cliente_producto"   jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="p_orden_atr"          jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_habilita_atr"       jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</parameterMap>
	
	<resultMap id="getActualizaAtributo" class="java.util.HashMap">
		<result property="resultado" 	 jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>

    <procedure id="actualizarAtributo" parameterMap="setActualizaAtributo" resultMap="getActualizaAtributo">
		{CALL sp_MO_actualiza_atributo (?, ?, ?, ?, ?, ?, ?, ?)}
	</procedure>
	

	<parameterMap id="setEliminaAtributo" 		class="java.util.HashMap">
		<parameter property="p_id" 	    jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</parameterMap>
	
	
	<resultMap id="getEliminaAtributo" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	
	<procedure id="eliminarAtributo" parameterMap="setEliminaAtributo" resultMap="getEliminaAtributo">
		{CALL sp_MO_elimina_atributo (?)}
	</procedure>
	
	<!--
          CREATE PROCEDURE dbo.sp_MO_ingresa_atributo(  @p_id                   numeric(18,0),
                                                         @p_nombre                   varchar(30),
                                                         @p_descripcion         varchar(50),
                                                         @p_id_tipo_dato        int,
                                                         @p_valor_defecto       varchar(100),
                                                         @p_cliente_producto    varchar(1),
                                                                                          @p_orden_atr numeric(9),
                                                                                          @p_habilita_atr numeric(1))
	-->
	<!-- -->
	
	<parameterMap id="setInsertaAtributo" 		class="java.util.HashMap">
		<parameter property="p_id" 				jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_nombre"			jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="p_descripcion"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="p_id_tipo_dato" 		jdbcType="INTEGER" javaType="java.lang.Integer"/>
		<parameter property="p_valor_defecto"  		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="p_cliente_producto"     jdbcType="VARCHAR" javaType="java.lang.String" />
          <parameter property="p_orden_atr"            jdbcType="NUMERIC" javaType="java.lang.Integer"/>
          <parameter property="p_habilita_atr"         jdbcType="NUMERIC" javaType="java.lang.Integer"/>		
	</parameterMap>
	
    <resultMap id="getInsertaAtributo" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="ingresarAtributo" parameterMap="setInsertaAtributo" resultMap="getInsertaAtributo">
		{CALL sp_MO_ingresa_atributo (?, ?, ?, ?, ?, ?, ?, ?)}
	</procedure>

    <resultMap id="getTipoDeDato" 		class="java.util.HashMap">
		<result property="id" 			jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<result property="nombre"		jdbcType="VARCHAR" 	javaType="java.lang.String" />
	</resultMap>

	<procedure id="obtienelistaTiposDeDato"  resultMap="getTipoDeDato">
		{CALL sp_MO_lista_tiposDeDatos}
	</procedure>
	<!--
	CREATE PROCEDURE dbo.sp_MO_ingresar_atributocliente( @rut  numeric(10),
											  @dv varchar(1),
											  @atributo  numeric(18),
											  @valor varchar(1900))
	-->
	<parameterMap id="setInsertaAtributoCliente" 		class="java.util.HashMap">
		<parameter property="rut" 				jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="dv"  				jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="nombre"                 jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="apellidoPaterno"        jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="apellidoMaterno"        jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="banquero"               jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="atributo"			jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="valor"  				jdbcType="VARCHAR" javaType="java.lang.String" />
	</parameterMap>
	
    <resultMap id="getInsertaAtributoCliente" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="ingresarAtributoCliente" parameterMap="setInsertaAtributoCliente" resultMap="getInsertaAtributo">
		{CALL sp_MO_ingresar_atributocliente (?,?,?,?,?,?,?,?)}
	</procedure>
	
	<!--
			sp_MO_lista_atributoscliente(@rut numeric(10)) 
	-->
	<resultMap id="getAtributosCliente" class="java.util.HashMap">
		<result property="IdAtributo" 					jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
		<result property="NombreAtributo"  				jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="IdTipoDato"      		jdbcType="INTEGER" javaType="java.lang.Integer"/>
		<result property="ValorDefecto"      		jdbcType="VARCHAR" javaType="java.lang.String"/>
		<result property="ValorAtributo"  			jdbcType="VARCHAR"  javaType="java.lang.String"/> 
		<result property="NombreTipoDato"  				jdbcType="VARCHAR"  javaType="java.lang.String"/> 
		<result property="ordenAtributo"            jdbcType="NUMERIC" javaType="java.lang.Integer"/>
          <result property="activo"         jdbcType="NUMERIC" javaType="java.lang.Integer"/>
          <result property="valIdAtributo"                          jdbcType="NUMERIC"  javaType="java.lang.Integer"/> 
	</resultMap>
	
	<parameterMap id="setAtributosCliente" class="java.util.HashMap">
		<parameter property="rut"			jdbcType="NUMERIC"  javaType="java.lang.Long"/>
	</parameterMap>
	
    <procedure id="obtieneListaDeAtributosCliente" parameterMap="setAtributosCliente" resultMap="getAtributosCliente">
		{CALL sp_MO_lista_atributoscliente (?)}
	</procedure>

	<!--
			sp_MO_modificar_atributocliente(@rut  numeric(10),
											  @atributo  numeric(18),
											  @valor varchar(1900)) 
	-->
	<parameterMap id="setModificarAtributoCliente" 		class="java.util.HashMap">
		<parameter property="rut" 			jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="dv"                jdbcType="VARCHAR" javaType="java.lang.String" />
          <parameter property="nombre"            jdbcType="VARCHAR" javaType="java.lang.String" />
          <parameter property="apellidoPaterno"   jdbcType="VARCHAR" javaType="java.lang.String" />
          <parameter property="apellidoMaterno"   jdbcType="VARCHAR" javaType="java.lang.String" />
          <parameter property="banquero"          jdbcType="VARCHAR" javaType="java.lang.String" />		
		<parameter property="atributo"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="valor"  			jdbcType="VARCHAR" javaType="java.lang.String" />
	</parameterMap>
	
    <resultMap id="getModificarAtributoCliente" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="modificarAtributoCliente" parameterMap="setModificarAtributoCliente" resultMap="getModificarAtributoCliente">
		{CALL sp_MO_mod_atributocliente(?,?,?,?,?,?,?,?)}
	</procedure>
	
	<!--
			sp_MO_lista_controles
	-->
	<resultMap id="getControles" class="java.util.HashMap">
		<result property="id" 						jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<result property="nombre"  					jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="descripcion"      		jdbcType="VARCHAR" 	javaType="java.lang.String"/>
	</resultMap>
	
	
    <procedure id="obtieneListaDeControles" resultMap="getControles">
		{CALL sp_MO_lista_controles}
	</procedure>
	
	<!-- 
     CREATE PROCEDURE dbo.sp_MO_actualiza_control(@p_id          numeric(18,0),
                                                         @p_nombre           varchar(30),
                                                         @p_descripcion   varchar(50))
	-->
	<parameterMap id="setActualizaControl" 		class="java.util.HashMap">
		<parameter property="p_id" 			jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_nombre"		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="p_descripcion"  	jdbcType="VARCHAR" javaType="java.lang.String" />
	</parameterMap>
	
	<resultMap id="getActualizaControl" class="java.util.HashMap">
		<result property="resultado" 	 jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>

    <procedure id="actualizarControl" parameterMap="setActualizaControl" resultMap="getActualizaControl">
		{CALL sp_MO_actualiza_control (?, ?, ?)}
	</procedure>
	
	<!--
		sp_MO_elimina_control(  @p_id numeric(18,0))
	-->
	<parameterMap id="setEliminaControl" 		class="java.util.HashMap">
		<parameter property="p_id" 	    jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</parameterMap>
	
	
	<resultMap id="getEliminaControl" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	
	<procedure id="eliminarControl" parameterMap="setEliminaControl" resultMap="getEliminaControl">
		{CALL sp_MO_elimina_control (?)}
	</procedure>
	
	<!--
	CREATE PROCEDURE dbo.sp_MO_ingresa_control(  @p_id            numeric(18,0),
                                                         @p_nombre           varchar(30),
                                                         @p_descripcion   varchar(50))
	-->
	
	<parameterMap id="setInsertaControl" 		class="java.util.HashMap">
		<parameter property="p_id" 			jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_nombre"		jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="p_descripcion"  	jdbcType="VARCHAR" javaType="java.lang.String" />
	</parameterMap>
	
    <resultMap id="getInsertaControl" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="ingresarControl" parameterMap="setInsertaControl" resultMap="getInsertaControl">
		{CALL sp_MO_ingresa_control (?, ?, ?)}
	</procedure>
	
	
	<!-- esaez  Ingresa producto-->	
	<parameterMap id="setIngresaProducto" 		class="java.util.HashMap">
		<parameter property="p_id" 					jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_nombre"				jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="p_descripcion"  		jdbcType="VARCHAR" javaType="java.lang.String" />
	</parameterMap>
	
	<resultMap id="getIngresaProducto" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="ingresarProducto" parameterMap="setIngresaProducto" resultMap="getIngresaProducto">
		{CALL sp_MO_ingresa_producto (?, ?, ?)}
	</procedure>
	<!-- esaez -->

	<!-- esaez  actualiza producto-->	
	<parameterMap id="setActualizaProducto" 		class="java.util.HashMap">
		<parameter property="p_id" 					jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_nombre"				jdbcType="VARCHAR" javaType="java.lang.String" />
		<parameter property="p_descripcion"  		jdbcType="VARCHAR" javaType="java.lang.String" />
	</parameterMap>
	
	<resultMap id="getActualizaProducto" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="actualizaProducto" parameterMap="setIngresaProducto" resultMap="getIngresaProducto">
		{CALL sp_MO_actualiza_producto (?, ?, ?)}
	</procedure>
	<!-- esaez -->

	<!-- esaez Ingresa Atributo-Producto-->	
	<parameterMap id="setIngresaAtrPrd"		class="java.util.HashMap">
		<parameter property="p_pro_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_atr_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
          <parameter property="p_on_off"  jdbcType="NUMERIC" javaType="java.lang.Integer"/>
          <parameter property="p_orden"  jdbcType="NUMERIC" javaType="java.lang.Integer"/>		
	</parameterMap>
	
	<resultMap id="getIngresaAtrPrd" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="ingresarAtrPrd" parameterMap="setIngresaAtrPrd" resultMap="getIngresaAtrPrd">
		{ CALL sp_MO_ingresa_atr_pro (?, ?, ?, ?) }
	</procedure>
	<!-- esaez -->

	<!-- esaez Ingresa Control-Producto-->	
	<parameterMap id="setIngresaCtrPrd"		class="java.util.HashMap">
		<parameter property="p_pro_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_ctr_ide"	jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_on_off"  jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_orden"  jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</parameterMap>
	
	<resultMap id="getIngresaCtrPrd" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="ingresarCtrPrd" parameterMap="setIngresaCtrPrd" resultMap="getIngresaCtrPrd">
		{ CALL sp_MO_ingresa_ctr_pro (?, ?, ?, ?) }
	</procedure>
	<!-- esaez -->

	<!-- esaez Ingresa Tarea-->	
	<parameterMap id="setIngresaTarea"		class="java.util.HashMap">
		<parameter property="p_sol_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_tar_nom"		jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="p_tar_fec_ctr"	jdbcType="Date" javaType="java.util.Date"/>
		<parameter property="p_tar_ok"		jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="p_tar_usr"		jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="p_tar_report"  jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="p_tar_pend"    jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</parameterMap>
	
	<resultMap id="getIngresaTarea" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="ingresarTareas" parameterMap="setIngresaTarea" resultMap="getIngresaTarea">
		{ CALL sp_MO_ingresa_tarea (?, ?, ?, ?, ?, ?, ?) }
	</procedure>
	<!-- esaez -->

	<!-- esaez Obtiene lista de productos -->
	<resultMap id="getProductos" class="java.util.HashMap">
		<result property="id" 						jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<result property="nombre"  				jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="descripcion"  				jdbcType="VARCHAR" 	javaType="java.lang.String"/>
	</resultMap>	
    <procedure id="obtieneListaDeProductos" resultMap="getProductos">
		{ CALL sp_MO_obtiene_productos }
	</procedure>
	<!-- esaez -->

	<!-- esaez Obtiene lista de atributos de un producto -->
	<parameterMap id="setAtrPrd"		class="java.util.HashMap">
		<parameter property="p_pro_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>		
		<parameter property="activo"       jdbcType="NUMERIC" javaType="java.lang.Integer"/> 
	</parameterMap>
	<resultMap id="getAtrPrd" class="java.util.HashMap">
		<result property="id" 					jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<result property="nombre"  				jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="nombreTipoDato"  				jdbcType="VARCHAR" 	javaType="java.lang.String"/>
          <result property="atr_ord"       jdbcType="NUMERIC" javaType="java.lang.Integer"/>
          <result property="atr_on_off"    jdbcType="NUMERIC" javaType="java.lang.Integer"/> 		
	</resultMap>	
    <procedure id="obtieneListaAtrPrd" parameterMap="setAtrPrd" resultMap="getAtrPrd">
		{ CALL sp_MO_obtiene_atr_prd(?,?) }
	</procedure>
	<!-- esaez -->

	<!-- esaez Obtiene lista de controles de un producto-->
	<parameterMap id="setCtrPrd"		class="java.util.HashMap">
		<parameter property="p_pro_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="activo"       jdbcType="NUMERIC" javaType="java.lang.Integer"/> 		
	</parameterMap>
	<resultMap id="getCtrPrd" class="java.util.HashMap">
		<result property="id" 					jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<result property="nombre"  				jdbcType="VARCHAR" 	javaType="java.lang.String"/>
          <result property="ctr_ord"       jdbcType="NUMERIC" javaType="java.lang.Integer"/>
          <result property="ctr_on_off"    jdbcType="NUMERIC" javaType="java.lang.Integer"/>   		
	</resultMap>	
    <procedure id="obtieneListaCtrPrd" parameterMap="setCtrPrd" resultMap="getCtrPrd">
		{ CALL sp_MO_obtiene_ctr_prd (?,?) }
	</procedure> 
	<!-- esaez -->

	<!-- esaez Ingresa Solicitud-->
	<parameterMap id="setIngresaSolicitud"		class="java.util.HashMap">
		<parameter property="p_pro_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_cli_rut"		jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="p_cli_dv"		jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="p_sol_fec"		jdbcType="Date" javaType="java.util.Date"/>
		<parameter property="p_sol_usr"		jdbcType="VARCHAR" javaType="java.lang.String"/>
	</parameterMap>
	
	<resultMap id="getIngresaSolicitud" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="ingresarSolicitud" parameterMap="setIngresaSolicitud" resultMap="getIngresaSolicitud">
		{ CALL sp_MO_ingresa_solicitud (?, ?, ?, ?, ?) }
	</procedure>
	<!-- esaez -->

	<!-- esaez Ingresa Detalle Solicitud -->
	<parameterMap id="setIngresaDetalleSolicitud"		class="java.util.HashMap">
		<parameter property="p_atr_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_pro_ide"	jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_sol_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_det_sol_val"	jdbcType="VARCHAR" javaType="String"/>
	</parameterMap>
	
	<resultMap id="getIngresaDetalleSolicitud" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="ingresarDetalleSolicitud" parameterMap="setIngresaDetalleSolicitud" resultMap="getIngresaDetalleSolicitud">
		{ CALL sp_MO_ingresa_det_sol (?, ?, ?, ?) }
	</procedure>
	<!-- esaez -->

	<!-- esaez Ingresa Chk_Lst-->	
	<parameterMap id="setIngresaChkLst"		class="java.util.HashMap">
		<parameter property="p_pro_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_ctr_ide"	     jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_sol_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_sol_fec_ctr"	jdbcType="Date" javaType="java.util.Date"/>
		<parameter property="p_sol_chk_lst"	jdbcType="VARCHAR" javaType="String"/>
		<parameter property="p_chk_lst_usr"	jdbcType="VARCHAR" javaType="String"/>
	</parameterMap>
	
	<resultMap id="getIngresaChkLst" class="java.util.HashMap">
		<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="ingresarChkLst" parameterMap="setIngresaChkLst" resultMap="getIngresaChkLst">
		{ CALL sp_MO_ingresa_chk_lst (?, ?, ?, ?, ?,?) }
	</procedure>
	<!-- esaez -->

	

	<!-- esaez Obtiene lista de valores de atributos de un producto -->
	<parameterMap id="setAtrPrdVal"		class="java.util.HashMap">		
		<parameter property="p_pro_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_sol_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</parameterMap>
	<resultMap id="getAtrPrdVal" class="java.util.HashMap">
		<result property="id" 			jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<result property="nombre"  		jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="nombreTipoDato"  jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="valor"  		jdbcType="VARCHAR" 	javaType="java.lang.String"/>
          <result property="atr_ord"         jdbcType="INTEGER"  javaType="java.lang.Integer"/>
          <result property="atr_on_off"      jdbcType="INTEGER"  javaType="java.lang.Integer"/>   		
	</resultMap>	
    <procedure id="obtieneListaValAtrPrd" parameterMap="setAtrPrdVal" resultMap="getAtrPrdVal">
		{ CALL sp_MO_obtiene_val_atr_prd(?,?) }
	</procedure>
	<!-- esaez -->


<!-- esaez Obtiene lista de valores de controles de un producto -->
	<parameterMap id="setCtrPrdVal"		class="java.util.HashMap">		
		<parameter property="p_pro_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="p_sol_ide"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</parameterMap> 
	<resultMap id="getCtrPrdVal" class="java.util.HashMap">
		<result property="id" 					jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<result property="nombre"  				jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="fecha"  				jdbcType="Date" 	javaType="Date"/>
		<result property="estado"  				jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="usr"					jdbcType="VARCHAR"	javaType="java.lang.String"/>
          <result property="ctr_ord"       jdbcType="NUMERIC" javaType="java.lang.Integer"/>
          <result property="ctr_on_off"    jdbcType="NUMERIC" javaType="java.lang.Integer"/>  		
	</resultMap>	
    <procedure id="obtieneListaValCtrPrd" parameterMap="setCtrPrdVal" resultMap="getCtrPrdVal">
		{ CALL sp_MO_obtiene_val_ctr_prd(?,?) }
	</procedure>
	<!-- esaez -->
	
<!-- fvelasquez Obtiene lista de tareas -->
	<!--
	sp_MO_listar_tareas(	@rut NUMERIC,
												@fecha datetime,
												@fechaTermino    datetime,
												@producto varchar,
												@estado  varchar(20)
											)
	
	-->
	
	<parameterMap id="setListarTarea"		class="java.util.HashMap">
		<parameter property="rut"		jdbcType="NUMERIC" javaType="java.lang.Long"/>		
		<parameter property="estado"		jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="fechaDesde"	jdbcType="Date" javaType="java.util.Date"/>
		<parameter property="fechaHasta"   jdbcType="Date" javaType="java.util.Date"/>
		<parameter property="producto"	jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="actividad"    jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="nro_trx"     jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="tip_pend"     jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="dias_vencidos"     jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="dias_vencidos_hasta"     jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="banquero"     jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="reporteable"     jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="cabecera"     jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="fec_comp"     jdbcType="Date" javaType="java.util.Date"/>
		<parameter property="fec_comp_hasta"     jdbcType="Date" javaType="java.util.Date"/>
		<parameter property="memo"		jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="monto"		jdbcType="NUMERIC" javaType="java.lang.Double"/>
		<parameter property="estadosOperacion"	jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="usuario"		jdbcType="VARCHAR" javaType="java.lang.String"/>
		<parameter property="moneda"		jdbcType="VARCHAR" javaType="java.lang.String"/>
	</parameterMap>
	<resultMap id="getListarTarea" class="java.util.HashMap">
		<result property="ide" 			jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
	 <!-- revisar -->  <result property="fec_ctr"          jdbcType="Date"     javaType="java.util.Date"/>
		<result property="ok"  			jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="nombre"		jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="cli_rut"		jdbcType="NUMERIC" 	javaType="java.lang.Long"/>
		<result property="cli_dv"		jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="cli_nom"     jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<result property="ejecutivo"		jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="producto"		jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="tipo"			jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="ide_actividad"	jdbcType="NUMERIC" 	javaType="java.lang.Integer"/>
	   <result property="des_actividad"     jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<result property="dias_vencidos"     jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
		<result property="tipo_pend"     jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
		<result property="det_pend"     jdbcType="VARCHAR"  javaType="java.lang.String"/>
	   <result property="rut_cabecera"      jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<result property="nom_cabecera"     jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<result property="reporteable"     jdbcType="VARCHAR"  javaType="java.lang.String"/>
       <result property="sol_fec_cre"          jdbcType="Date"     javaType="java.util.Date"/>
       <result property="sol_memo"     jdbcType="VARCHAR"  javaType="java.lang.String"/>
       <result property="sol_monto"		jdbcType="NUMERIC" javaType="java.lang.Double" nullValue="0"/>
       <result property="est_ope_ide"	jdbcType="NUMERIC" 	javaType="java.lang.Integer"/>
       <result property="usuario"     jdbcType="VARCHAR"  javaType="java.lang.String"/>
       <result property="moneda"     jdbcType="VARCHAR"  javaType="java.lang.String"/>
       <result property="sol_det"     jdbcType="VARCHAR"  javaType="java.lang.String"/>
	</resultMap>	
    <procedure id="obtieneListaDeTareas" parameterMap="setListarTarea" resultMap="getListarTarea">
		{ CALL sp_MO_listar_tareas(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) }
	</procedure>
	<!-- fvelasquez -->
	
	<parameterMap id="setSolicitudGuardada" 		class="java.util.HashMap">
		<parameter property="idSolicitud" 	    jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</parameterMap>
	<resultMap id="getSolicitudGuardada" class="java.util.HashMap">
		<result property="sol_ide"  jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
		<result property="fec_cre" 	jdbcType="Date"  javaType="java.util.Date"/>
		<result property="cli_rut" 	jdbcType="NUMERIC"  javaType="java.lang.Long"/>
		<result property="pro_nom" 	jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<result property="pro_ide" 	jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
	</resultMap>
	<procedure id="solicitudGuardada" parameterMap="setSolicitudGuardada" resultMap="getSolicitudGuardada">
		{CALL sp_MO_obtiene_solicitud(?)}
	</procedure>
	
	<!-- fvelasquez, Actualiza los estados de las actividades -->
	<!--
	sp_MO_actualiza_actividades 	(	@estado varchar(1),
										@tipo	varchar(3),
										@ide	numeric
									)	
	-->
	<parameterMap id="setActualizaActividad"	class="java.util.Hashmap">
		<parameter property="ide"			jdbcType="NUMERIC" 	javaType="java.lang.Integer"/>
		<parameter property="idSolicitud"	jdbcType="NUMERIC" 	javaType="java.lang.Integer"/>
		<parameter property="estado"		jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<parameter property="tipo"			jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<parameter property="usuario"		jdbcType="VARCHAR"	javaType="java.lang.String"/>
	</parameterMap>
	<resultMap id="getActualizaActividad"	class="java.util.HashMap">
			<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>
	<procedure id="actualizaEstadoActividad" parameterMap="setActualizaActividad" resultMap="getActualizaActividad">
		{ CALL sp_MO_actualiza_actividades(?,?,?,?,?) }
	</procedure>
	<!-- fvelasquez -->

	<parameterMap id="setTarSol"		class="java.util.HashMap">		
		<parameter property="ideSolicitud"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</parameterMap>
	<resultMap id="getTarSol" class="java.util.HashMap">
		<result property="ide" 					jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<result property="nombre"  				jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="fechaTarea"			jdbcType="Date" 	javaType="java.util.Date"/>
		<result property="estado"  				jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="usr"  				jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="report"               jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<result property="pendiente"            jdbcType="INTEGER"  javaType="java.lang.Integer"/>
		<result property="nom_pendiente"        jdbcType="VARCHAR"  javaType="java.lang.String"/>
		
	</resultMap>	
    <procedure id="obtieneListaTarSol" parameterMap="setTarSol" resultMap="getTarSol">
		{ CALL sp_MO_obtiene_tar_sol(?) }
	</procedure>

<!-- CREATE PROCEDURE dbo.sp_MO_actualiza_det_sol(   @idSolicitud    NUMERIC,
                                                @idAtr          numeric,
                                                @valAtr         varchar)
-->
<!-- fvelasquez actualiza el valor de los atributos de una solicitud -->
	<parameterMap id="setUpAtr"		class="java.util.HashMap">		
		<parameter property="ideSolicitud"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="idAtr"				jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="valAtr"			jdbcType="VARCHAR"	javaType="java.lang.String"/>
	</parameterMap>
	<resultMap id="getUpAtr" class="java.util.HashMap">
			<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>	
    <procedure id="actualizaValAtr" parameterMap="setUpAtr" resultMap="getUpAtr">
		{ CALL sp_MO_actualiza_det_sol(?,?,?) }
	</procedure>

<!-- fvelasquez Borra un control de un producto -->
	<parameterMap id="setBorraControlProducto"		class="java.util.HashMap">		
		<parameter property="idControl"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="idProducto"	jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</parameterMap>
	<resultMap id="getBorraControlProducto" class="java.util.HashMap">
			<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>	
    <procedure id="borraControlProducto" parameterMap="setBorraControlProducto" resultMap="getBorraControlProducto">
		{ CALL sp_MO_elimina_ctr_pro(?,?) }
	</procedure>

<!-- fvelasquez borra un atributo de un producto -->
	<parameterMap id="setBorraAtributoProducto"		class="java.util.HashMap">		
		<parameter property="idAtributo"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="idProducto"	jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</parameterMap>
	<resultMap id="getBorraAtributoProducto" class="java.util.HashMap">
			<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>	
    <procedure id="borraAtributoProducto" parameterMap="setBorraAtributoProducto" resultMap="getBorraAtributoProducto">
		{ CALL sp_MO_elimina_atr_pro(?,?) }
	</procedure>

<!-- CREATE PROCEDURE dbo.sp_MO_lista_solicitudes(	@rut		    numeric,
                                                @idSolicitud	numeric,
                                                @fecha		    datetime,
                                                @producto 	    numeric,
                                                @fechaTermino          datetime)
-->
<!-- fvelasquez Lista las solicitudes segun filtros de busqueda -->
<!-- emoya agrega parametro fechaTermino -->
	<parameterMap id="setListaSolicitudes"		class="java.util.HashMap"> 
		<parameter property="rut"					jdbcType="NUMERIC" javaType="java.lang.Long"/>		
		<parameter property="idSolicitud"			jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="fecha"					jdbcType="Date" javaType="java.util.Date"/>		
		<parameter property="producto"				jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="fechaTermino"  		jdbcType="Date" javaType="java.util.Date"/>
		<parameter property="banquero"      		jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="rutCab"        		jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="memo"      			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="monto"      			jdbcType="NUMERIC"  javaType="java.lang.Double"/>
		<parameter property="estadosOperacion"		jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="usuario"      			jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="moneda"      			jdbcType="VARCHAR"  javaType="java.lang.String"/>
	</parameterMap>
	<resultMap id="getListaSolicitudes" class="java.util.HashMap">
		<result property="sol_ide" 			jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
		<result property="pro_ide"  		jdbcType="NUMERIC" 	javaType="java.lang.Integer"/>
		<result property="cli_rut"  		jdbcType="NUMERIC" 	javaType="java.lang.Long"/>
		<result property="cli_dv"			jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="sol_fec_cre"		jdbcType="Date" 	javaType="java.util.Date"/>	
		<result property="pro_nom"			jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="pro_des"			jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="banquero"            jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<result property="nom_cli"            jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<result property="rut_cab"            jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<result property="nom_cab"            jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<result property="sol_memo"            jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<result property="sol_monto"		jdbcType="NUMERIC" javaType="java.lang.Double" nullValue="0"/>
		<result property="sol_fec_cur"		jdbcType="VARCHAR" javaType="java.lang.String" nullValue=""/>
		<result property="sol_fec_ven"		jdbcType="VARCHAR" javaType="java.lang.String" nullValue=""/>
		<result property="est_ope_ide" 			jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
		<result property="usuario"		jdbcType="VARCHAR" javaType="java.lang.String" nullValue=""/>
		<result property="moneda"		jdbcType="VARCHAR" javaType="java.lang.String" nullValue=""/>
		<result property="sol_det"		jdbcType="VARCHAR" javaType="java.lang.String" nullValue=""/>
	</resultMap>	
    <procedure id="obtieneListaSolicitudes" parameterMap="setListaSolicitudes" resultMap="getListaSolicitudes">
		{ CALL sp_MO_lista_solicitudes(?,?,?,?,?,?,?,?,?,?,?,?) }
	</procedure>
	
	<!-- fvelasquez limpia los datos de una solicitud -->
	<parameterMap id="setlimpiarSolicitud"		class="java.util.HashMap">		
		<parameter property="idSolicitud"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</parameterMap>
	<resultMap id="getlimpiarSolicitud" class="java.util.HashMap">
			<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>	
    <procedure id="limpiarSolicitud" parameterMap="setlimpiarSolicitud" resultMap="getlimpiarSolicitud">
		{ CALL sp_MO_limpia_solicitud(?) }
	</procedure>

	<parameterMap id="setEliminaProducto"		class="java.util.HashMap">		
	<parameter property="p_id"	jdbcType="NUMERIC" javaType="java.lang.Integer"/>
	</parameterMap>
	<resultMap id="getEliminaProducto" class="java.util.HashMap">
			<result property="resultado" 	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
	</resultMap>	
    <procedure id="eliminarProducto" parameterMap="setEliminaProducto" resultMap="getEliminaProducto">
		{ CALL sp_MO_elimina_producto(?) }
	</procedure>


<!-- CREATE PROCEDURE dbo.sp_MO_obtiene_datos_cliente(@rut  numeric,@dv varchar(1)) -->
<!-- Emoya Obtiene los datos del cliente -->
     <parameterMap id="setDatosCliente"       class="java.util.HashMap">
          <parameter property="rut"          jdbcType="NUMERIC" javaType="java.lang.Long"/>         
          <parameter property="dv"           jdbcType="VARCHAR" javaType="java.lang.String"/>
     </parameterMap>
     <resultMap id="getDatosCliente" class="java.util.HashMap">
          <result property="cli_rut"         jdbcType="NUMERIC"  javaType="java.lang.Long"/>
          <result property="cli_dv"          jdbcType="VARCHAR"  javaType="java.lang.String"/>
          <result property="cli_nom"         jdbcType="VARCHAR"  javaType="java.lang.String"/>
          <result property="cli_ape_pat"     jdbcType="VARCHAR"  javaType="java.lang.String"/>
          <result property="cli_ape_mat"     jdbcType="VARCHAR"  javaType="java.lang.String"/>
          <result property="cli_ban"         jdbcType="VARCHAR"  javaType="java.lang.String"/>
     </resultMap>   
    <procedure id="obtieneDatosCliente" parameterMap="setDatosCliente" resultMap="getDatosCliente">
          { CALL sp_MO_obtiene_datos_cliente(?,?) }
     </procedure>
     
<!--
     CREATE PROCEDURE dbo.sp_MO_ingresar_datosCliente(@rut  numeric,
                                                    @dv varchar(1),
                                                    @nombre varchar(50),
                                                    @apellidoPaterno varchar(25),
                                                    @apellidoMaterno varchar(25),
                                                    @banquero varchar(12))
     -->
     <parameterMap id="setInsertaDatosCliente"           class="java.util.HashMap">
          <parameter property="rut"                    jdbcType="NUMERIC" javaType="java.lang.Long"/>
          <parameter property="dv"                     jdbcType="VARCHAR" javaType="java.lang.String" />
          <parameter property="nombre"                 jdbcType="VARCHAR" javaType="java.lang.String" />
          <parameter property="apellidoPaterno"        jdbcType="VARCHAR" javaType="java.lang.String" />
          <parameter property="apellidoMaterno"        jdbcType="VARCHAR" javaType="java.lang.String" />
          <parameter property="banquero"               jdbcType="VARCHAR" javaType="java.lang.String" />
     </parameterMap>
     
    <resultMap id="getInsertaDatosCliente" class="java.util.HashMap">
          <result property="resultado"  jdbcType="INTEGER"  javaType="java.lang.Integer"/>
     </resultMap>
     
     <procedure id="ingresarDatosCliente" parameterMap="setInsertaDatosCliente" resultMap="getInsertaDatosCliente">
          {CALL sp_MO_ingresar_datosCliente (?,?,?,?,?,?)}
     </procedure>     
     
     
<!--
    CREATE PROCEDURE dbo.sp_MO_modificar_datosCliente(@rut  numeric,
                                                    @dv varchar(1),
                                                    @nombre varchar(50),
                                                    @apellidoPaterno varchar(25),
                                                    @apellidoMaterno varchar(25),
                                                    @banquero varchar(12))
     -->
     <parameterMap id="setModificaDatosCliente"           class="java.util.HashMap">
          <parameter property="rut"                    jdbcType="NUMERIC" javaType="java.lang.Long"/>
          <parameter property="dv"                     jdbcType="VARCHAR" javaType="java.lang.String" />
          <parameter property="nombre"                 jdbcType="VARCHAR" javaType="java.lang.String" />
          <parameter property="apellidoPaterno"        jdbcType="VARCHAR" javaType="java.lang.String" />
          <parameter property="apellidoMaterno"        jdbcType="VARCHAR" javaType="java.lang.String" />
          <parameter property="banquero"               jdbcType="VARCHAR" javaType="java.lang.String" />
     </parameterMap>
     
    <resultMap id="getModificaDatosCliente" class="java.util.HashMap">
          <result property="resultado"  jdbcType="INTEGER"  javaType="java.lang.Integer"/>
     </resultMap>
     
     <procedure id="modificarDatosCliente" parameterMap="setModificaDatosCliente" resultMap="getModificaDatosCliente">
          {CALL sp_MO_modificar_datosCliente (?,?,?,?,?,?)}
     </procedure>
     
<!--
    CREATE PROCEDURE dbo.sp_MO_modifica_solicitud (@solId  numeric,
												   @estOpeId  numeric,
                                                   @solDet varchar(250))
     -->
     <parameterMap id="setModificaDatosSolicitud"           class="java.util.HashMap">
          <parameter property="solicitudGuardada"                    jdbcType="NUMERIC" javaType="java.lang.Integer"/>
          <parameter property="idEstado"                    jdbcType="NUMERIC" javaType="java.lang.Integer"/>
          <parameter property="detalleEstado"                     jdbcType="VARCHAR" javaType="java.lang.String" />
     </parameterMap>
     
    <resultMap id="getModificaDatosSolicitud" class="java.util.HashMap">
          <result property="resultado"  jdbcType="INTEGER"  javaType="java.lang.Integer"/>
     </resultMap>
     
     <procedure id="modificarDatosSolicitud" parameterMap="setModificaDatosSolicitud" resultMap="getModificaDatosSolicitud">
          {CALL sp_MO_modifica_solicitud (?,?,?)}
     </procedure>    

     <!--
     CREATE PROCEDURE dbo.sp_MO_lista_clientes_atributos
     -->

     <resultMap id="getListarClientesAtributos" class="java.util.HashMap">
                   <result property="cli_rut"        jdbcType="NUMERIC"  javaType="java.lang.Long"/>
                   <result property="cli_dv"         jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="cli_nom"        jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="cli_ape_pat"    jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="cli_ape_mat"    jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="cli_ban"        jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="atr_ide"        jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
                   <result property="atr_cli_val"    jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="atr_nom"        jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="atr_des"        jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="atr_por_def"    jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="atr_cli_o_pro"  jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="atr_ord"        jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
                   <result property="atr_on_off"     jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
                   <result property="tda_ide"        jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
                   <result property="tda_nom"        jdbcType="VARCHAR"  javaType="java.lang.String"/>          
     </resultMap>   
     <procedure id="obtieneListaDeClientesAtributos" resultMap="getListarClientesAtributos">
          { CALL sp_MO_lista_clientes_atributos}
     </procedure>                   
           
     <!--
     CREATE PROCEDURE dbo.sp_MO_lista_pro_sol_att(@fechaDesde    datetime,
                                             @fechaHasta    datetime) 
     -->
     <parameterMap id="setListarProductosSolicitudesAtributos"       class="java.util.HashMap">
          <parameter property="fechaDesde"   jdbcType="Date" javaType="java.util.Date"/>
          <parameter property="fechaHasta"   jdbcType="Date" javaType="java.util.Date"/>
     </parameterMap>
     <resultMap id="getListarProductosSolicitudesAtributos" class="java.util.HashMap">
                   <result property="pro_ide"        jdbcType="NUMERIC"  javaType="java.lang.Long"/>
                   <result property="pro_nom"        jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="pro_des"        jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="sol_ide"        jdbcType="NUMERIC"  javaType="java.lang.Long"/>
                   <result property="cli_rut"        jdbcType="NUMERIC"  javaType="java.lang.Long"/>
                   <result property="cli_dv"         jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="sol_fec_cre"    jdbcType="Date"     javaType="java.util.Date"/>   
                   <result property="sol_usr"        jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="atr_ide"        jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
                   <result property="atr_nom"        jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="atr_des"        jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="atr_por_def"    jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="atr_cli_o_pro"  jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="atr_ord"        jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
                   <result property="atr_on_off"     jdbcType="NUMERIC"  javaType="java.lang.Integer"/>                   
                   <result property="tda_ide"        jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
                   <result property="tda_nom"        jdbcType="VARCHAR"  javaType="java.lang.String"/>          
                   <result property="det_sol_val"    jdbcType="VARCHAR"  javaType="java.lang.String"/>          
     </resultMap>   
     <procedure id="obtieneListaDeProductosSolicitudesAtributos" parameterMap="setListarProductosSolicitudesAtributos" resultMap="getListarProductosSolicitudesAtributos">
          { CALL sp_MO_lista_pro_sol_att(?,?)}
     </procedure>    
                
     <!--
     CREATE PROCEDURE dbo.sp_MO_lista_sol_clientes(@fechaDesde   datetime,
                                                      @fechaHasta     datetime) 
     -->
     <parameterMap id="setListarSolicitudesClientes"       class="java.util.HashMap">
          <parameter property="fechaDesde"   jdbcType="Date" javaType="java.util.Date"/>
          <parameter property="fechaHasta"   jdbcType="Date" javaType="java.util.Date"/>
     </parameterMap>
     <resultMap id="getListarSolicitudesClientes" class="java.util.HashMap">
                   <result property="sol_ide"      jdbcType="NUMERIC"  javaType="java.lang.Long"/>
                   <result property="cli_rut"      jdbcType="NUMERIC"  javaType="java.lang.Long"/>
                   <result property="cli_dv"       jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="sol_fec_cre"  jdbcType="Date"     javaType="java.util.Date"/>
                   <result property="pro_ide"      jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
                   <result property="pro_nom"      jdbcType="VARCHAR"  javaType="java.lang.String"/>
                   <result property="pro_des"      jdbcType="VARCHAR"  javaType="java.lang.String"/>    
     </resultMap>   
     <procedure id="obtieneListaDeSolicitudesClientes" parameterMap="setListarSolicitudesClientes" resultMap="getListarSolicitudesClientes">
          { CALL sp_MO_lista_sol_clientes(?,?)}
     </procedure>  
     
    <!-- Obtiene lista de tipos de pendientes -->
    <resultMap id="getPendientes" class="java.util.HashMap">
        <result property="id"                   jdbcType="INTEGER"  javaType="java.lang.Integer"/>
        <result property="nombre"               jdbcType="VARCHAR"  javaType="java.lang.String"/>
        <result property="descripcion"          jdbcType="VARCHAR"  javaType="java.lang.String"/>
    </resultMap>    
    <procedure id="obtieneListaDePendientes" resultMap="getPendientes">
        { CALL sp_MO_busca_tipo_pendiente }
    </procedure>
    
    <!-- Ingresa un nuevo tipo de pendiente -->
    <parameterMap id="setInsertaTipoPendiente"       class="java.util.HashMap">
        <parameter property="pend_id"              jdbcType="NUMERIC" javaType="java.lang.Integer"/>
        <parameter property="pend_nombre"          jdbcType="VARCHAR" javaType="java.lang.String" />
        <parameter property="pend_descripcion"     jdbcType="VARCHAR" javaType="java.lang.String" />
    </parameterMap>    
    <resultMap id="getInsertaTipoPendiente" class="java.util.HashMap">
        <result property="resultado"    jdbcType="INTEGER"  javaType="java.lang.Integer"/>
    </resultMap>    
    <procedure id="ingresarTipoPendiente" parameterMap="setInsertaTipoPendiente" resultMap="getInsertaTipoPendiente">
        {CALL sp_MO_ingresa_tipo_pendiente (?, ?, ?)}
    </procedure>
    
    <!-- Actualiza un tipo de pendiente -->                  
    <parameterMap id="setActualizaTipoPendiente"        class="java.util.HashMap">
        <parameter property="pend_id"             jdbcType="NUMERIC" javaType="java.lang.Integer"/>
        <parameter property="pend_nombre"         jdbcType="VARCHAR" javaType="java.lang.String" />
        <parameter property="pend_descripcion"        jdbcType="VARCHAR" javaType="java.lang.String" />
    </parameterMap>    
    <resultMap id="getActualizaTipoPendiente" class="java.util.HashMap">
        <result property="resultado"     jdbcType="INTEGER"  javaType="java.lang.Integer"/>
    </resultMap>
    <procedure id="actualizarTipoPendiente" parameterMap="setActualizaTipoPendiente" resultMap="getActualizaTipoPendiente">
        {CALL sp_MO_actualiza_tipo_pendiente (?, ?, ?)}
    </procedure>
    
    <!-- Elimina un tipo de pendiente -->
    <parameterMap id="setEliminaTipoPendiente"       class="java.util.HashMap">
    <parameter property="pend_id"      jdbcType="NUMERIC" javaType="java.lang.Integer"/>
    </parameterMap>
    <resultMap id="getEliminaTipoPendiente" class="java.util.HashMap">
        <result property="resultado"    jdbcType="INTEGER"  javaType="java.lang.Integer"/>
    </resultMap>
    <procedure id="eliminarTipoPendiente" parameterMap="setEliminaTipoPendiente" resultMap="getEliminaTipoPendiente">
        {CALL sp_MO_elimina_tipo_pendiente (?)}
    </procedure>

	<parameterMap id="setListarArchivosAdjuntos" class="java.util.HashMap">
          <parameter property="idSolicitud" jdbcType="Integer" javaType="java.lang.Integer"/>
    </parameterMap>
    <resultMap id="getListarArchivosAdjuntos" class="java.util.HashMap">
        <result property="idTarea"  		jdbcType="INTEGER"  javaType="java.lang.Integer"/>
        <result property="codigoArchivo"	jdbcType="INTEGER"  javaType="java.lang.Integer"/>
        <result property="nombreArchivo"	jdbcType="VARCHAR"  javaType="java.lang.String"/>
        <result property="fechaArchivo"		jdbcType="Date" 	javaType="Date"/>
     </resultMap>
     <procedure id="listarArchivosAdjuntos" parameterMap="setListarArchivosAdjuntos" resultMap="getListarArchivosAdjuntos">
          {CALL sp_sel_arc_adj (?)}
     </procedure>    

	<parameterMap id="setGrabarArchivoAdjunto" class="java.util.HashMap">
          <parameter property="idSolicitud" 	jdbcType="Integer" javaType="java.lang.Integer"/>
          <parameter property="idTarea"			jdbcType="Integer" javaType="java.lang.Integer"/>
          <parameter property="codigoArchivo"	jdbcType="Integer" javaType="java.lang.Integer"/>
          <parameter property="nombreArchivo"	jdbcType="VARCHAR" javaType="java.lang.String"/>
          <parameter property="fechaSubida"		jdbcType="Date"	   javaType="java.util.Date"/>
    </parameterMap>
    <resultMap id="getGrabarArchivoAdjunto" class="java.util.HashMap">
        <result property="resultado"	jdbcType="VARCHAR"  javaType="java.lang.String"/>
     </resultMap>
     <procedure id="grabarArchivoAdjunto" parameterMap="setGrabarArchivoAdjunto" resultMap="getGrabarArchivoAdjunto">
          {CALL sp_ins_arc_adj (?,?,?,?,?)}
     </procedure>    

	<parameterMap id="setEliminarArchivoAdjunto" class="java.util.HashMap">
          <parameter property="idSolicitud" 	jdbcType="Integer" javaType="java.lang.Integer"/>
          <parameter property="idTarea"			jdbcType="Integer" javaType="java.lang.Integer"/>
          <parameter property="codigoArchivo"	jdbcType="Integer" javaType="java.lang.Integer"/>
          <parameter property="nombreArchivo"	jdbcType="VARCHAR" javaType="java.lang.String"/>
    </parameterMap>
    <resultMap id="getEliminarArchivoAdjunto" class="java.util.HashMap">
        <result property="resultado"	jdbcType="VARCHAR"  javaType="java.lang.String"/>
     </resultMap>
     <procedure id="eliminarArchivoAdjunto" parameterMap="setEliminarArchivoAdjunto" resultMap="getEliminarArchivoAdjunto">
          {CALL sp_eli_arc_adj (?,?,?,?)}
     </procedure>
                                        
	<parameterMap id="setListaLogTrx"	class="java.util.HashMap"> 
		<parameter property="rut"			jdbcType="NUMERIC" javaType="java.lang.Long"/>		
		<parameter property="idSolicitud"	jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="banquero"      jdbcType="VARCHAR"  javaType="java.lang.String"/>		
		<parameter property="rutCab"        jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="producto"		jdbcType="NUMERIC" javaType="java.lang.Integer"/>
		<parameter property="memo"      	jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="fecha"			jdbcType="Date" javaType="java.util.Date"/>
		<parameter property="fechaTermino"  jdbcType="Date" javaType="java.util.Date"/>
	</parameterMap>
	<resultMap id="getListaLogTrx" class="java.util.HashMap">
		<result property="sol_ide" 			jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
		<result property="pro_ide"  		jdbcType="NUMERIC" 	javaType="java.lang.Integer"/>
		<result property="cli_rut"  		jdbcType="NUMERIC" 	javaType="java.lang.Long"/>
		<result property="banquero"         jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<result property="rut_cab"          jdbcType="VARCHAR"  javaType="java.lang.Long"/>
		<result property="sol_memo"         jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<result property="des_mod"			jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="usu_cre"			jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="fec_cre"			jdbcType="Date" 	javaType="java.util.Date"/>
		<result property="usu_act"			jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="fec_act"			jdbcType="Date" 	javaType="java.util.Date"/>
		<result property="usu_con"			jdbcType="VARCHAR" 	javaType="java.lang.String"/>
		<result property="fec_con"			jdbcType="Date" 	javaType="java.util.Date"/>
	</resultMap>	
    <procedure id="obtieneListaLogTrx" parameterMap="setListaLogTrx" resultMap="getListaLogTrx">
		{ CALL sp_cns_log_trans(?,?,?,?,?,?,?,?) }
	</procedure>

	<parameterMap id="setInsertaLogTrx"	class="java.util.HashMap"> 
		<parameter property="tipo"   			jdbcType="VARCHAR"  javaType="java.lang.String"/>	
		<parameter property="idSolicitud"		jdbcType="NUMERIC"  javaType="java.lang.Integer"/>	
		<parameter property="usuarioCreacion"   jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="fechaCreacion"		jdbcType="Date" 	javaType="java.util.Date"/>
		<parameter property="usuarioActualiza"  jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="fechaActualiza"	jdbcType="Date" 	javaType="java.util.Date"/>
		<parameter property="descripcion"   	jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="usuarioConsulta"   jdbcType="VARCHAR"  javaType="java.lang.String"/>
		<parameter property="fechaConsulta"		jdbcType="Date" 	javaType="java.util.Date"/>
	</parameterMap>
	<resultMap id="getInsertaLogTrx" class="java.util.HashMap">
		<result property="retorno" 			jdbcType="NUMERIC"  javaType="java.lang.Integer"/>
	</resultMap>	
    <procedure id="insertaLogTrx" parameterMap="setInsertaLogTrx" resultMap="getInsertaLogTrx">
		{ CALL sp_ins_log_trans(?,?,?,?,?,?,?,?,?) }
	</procedure>

</sqlMap>
