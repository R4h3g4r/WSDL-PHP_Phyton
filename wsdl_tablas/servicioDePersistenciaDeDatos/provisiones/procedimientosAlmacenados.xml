<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
	
<sqlMap namespace="provisiones.procedimientosAlmacenados">

	<procedure id="retornaPerdidasEsperadasPorCliente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_rie_cab_sel_per_esp(#rutCliente#)}
	</procedure>
	<procedure id="retornaDeudaGarantiaPorCliente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_rie_cab_sel_deu_gar(#rutCliente#)}
	</procedure>	
	<procedure id="retornaRelacionDeudaGarantia" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_rie_cab_rel_deu_gar(#rutCliente#)}
	</procedure>
	<procedure id="retornaProvisiones" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_rie_cab_sel_prov(#rutCliente#)}
	</procedure>
	<procedure id="retornaDetallePerdidaEsperada" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_rie_det_sel_per_esp(#rutCliente#,#fecha#,#codigoFuente#)}
	</procedure>
	<procedure id="retornaDetalleDeudaGarantia" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_rie_det_sel_deu_gar(#rutCliente#,#fecha#,#codigoFuente#)}
	</procedure>
	<procedure id="retornaDetalleDeudaGarantiaGrupal" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_rie_det_rel_deu_gar(#rutCliente#,#fecha#)}
	</procedure>	
	<procedure id="retornaDetalleProvisiones" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_rie_det_sel_prov(#rutCliente#,#fecha#)}
	</procedure>
	<procedure id="retornaDeudaBanco" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_rie_det_sub_deu_ban(#rutCliente#,#fecha#,#codigoFuente#)}
	</procedure>
	<procedure id="retornaDeudaLeasing" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_rie_det_sub_deu_lea(#rutCliente#,#fecha#,#codigoFuente#)}
	</procedure>
	
	<!-- Consulta Probabilidad de incumplimiento-->  
	<resultMap id="resultado"	class="java.util.HashMap">
			<result property="Incumplimiento" javaType="Double" column="Incumplimiento" jdbcType="numeric"/>
	</resultMap>

    <procedure id="consultarProbabilidadDeIncumplimiento" parameterClass="java.util.HashMap" resultMap="resultado">
        {CALL sp_cns_PI_pyme( #rutCliente# )}
    </procedure>
	<!-- Consulta Probabilidad de incumplimiento-->  

</sqlMap>	
