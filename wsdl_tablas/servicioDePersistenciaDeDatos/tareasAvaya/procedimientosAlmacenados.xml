<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
	
<sqlMap namespace="tareas.procedimientosAlmacenados">	

    	
	<parameterMap id="setActualizarAnexoEjecutivo" class="java.util.HashMap">
		<parameter property="ofc_eje_cab"		jdbcType="CHAR" javaType="String" />
		<parameter property="eje_anexo"			jdbcType="VARCHAR" javaType="String" />
	</parameterMap>
	<resultMap id="getActualizarAnexoEjecutivo" class="java.util.HashMap">
		<result  property="id" 										jdbcType="CHAR"     javaType="String" />
		<result  property="nombre" 								jdbcType="VARCHAR"  javaType="String" />
		<result  property="anexo" 								jdbcType="VARCHAR"  javaType="String" />
		<result  property="fechaUltimoIngreso" 		jdbcType="VARCHAR"  javaType="String" />
	</resultMap>
	
	<procedure id="actualizarAnexoEjecutivo" parameterMap="setActualizarAnexoEjecutivo" resultMap="getActualizarAnexoEjecutivo">
		{CALL sp_act_anexo_eje (?, ?)}
	</procedure>

  <parameterMap id="setActualizarFechaLogEjecutivo" class="java.util.HashMap">
		<parameter property="ofc_eje_cab"         jdbcType="CHAR" javaType="String" />
	</parameterMap>
	<resultMap id="getActualizarFechaLogEjecutivo" class="java.util.HashMap">
		<result  property="id" 										jdbcType="CHAR"  javaType="String" />
		<result  property="nombre" 								jdbcType="VARCHAR"  javaType="String" />
		<result  property="anexo" 								jdbcType="VARCHAR"  javaType="String" />
		<result  property="fechaUltimoIngreso" 		jdbcType="DATE"  javaType="String" />
	</resultMap>

	<procedure id="actualizarFechaLogEjecutivo" parameterMap="setActualizarFechaLogEjecutivo" resultMap="getActualizarFechaLogEjecutivo">
		{CALL sp_act_fecha_login (?)}
	</procedure>
	
	<parameterMap id="setActualizarTarea" class="java.util.HashMap">
		<parameter property="id_tar_usr"   				jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="est_tar_id" 					jdbcType="INT" javaType="java.lang.Integer" />
	</parameterMap>	
	
	<procedure id="actualizarTarea" parameterMap="setActualizarTarea" resultClass="java.lang.Integer">
		{ CALL sp_act_tarea( ?,?) }
	</procedure>

  <parameterMap id="setEliminaClienteDireccion" class="java.util.HashMap">
		<parameter property="cli_rut"   				jdbcType="NUMERIC" javaType="java.lang.Long"/>
	</parameterMap>	
	
	<procedure id="eliminaClienteDireccion" parameterMap="setEliminaClienteDireccion" resultClass="java.lang.Integer">
		{ CALL sp_del_cli_dir( ?) }
	</procedure>

	<parameterMap id="setEliminaTarea" class="java.util.HashMap">
		<parameter property="ofc_eje_cab"   			jdbcType="CHAR" javaType="String"/>
		<parameter property="cod_tipo_tarea" 			jdbcType="INT" javaType="java.lang.Integer" />
	</parameterMap>	
	
	<procedure id="eliminaTarea" parameterMap="setEliminaTarea" resultClass="java.lang.Integer">
		{ CALL sp_del_tar( ?,?) }
	</procedure>
 
	<parameterMap id="setInsertCliente" class="java.util.HashMap">
		<parameter property="cli_rut" 						jdbcType="CHAR" javaType="java.lang.Long"/>
		<parameter property="cli_dv" 							jdbcType="CHAR" javaType="String"/>	
		<parameter property="cli_app_pat" 				jdbcType="VARCHAR" javaType="String"/>
		<parameter property="cli_app_mat" 				jdbcType="VARCHAR" javaType="String" />
		<parameter property="cli_nomb" 						jdbcType="VARCHAR" javaType="String"/>	
		<parameter property="cli_mail" 						jdbcType="VARCHAR" javaType="String"/>			
	</parameterMap>
     
	<procedure id="insertCliente" parameterMap="setInsertCliente" resultClass="java.lang.Integer">
       {CALL sp_ins_cli(?,?,?,?,?,?)}
	</procedure>

	<parameterMap id="setInsertDireccion" class="java.util.HashMap">
		<parameter property="ubi_clt_id"					jdbcType="INT" javaType="java.lang.Integer"/>
		<parameter property="cli_rut" 						jdbcType="CHAR" javaType="java.lang.Long"/>
		<parameter property="ubi_clt_gls" 				jdbcType="VARCHAR" javaType="String"/>
		<parameter property="ubi_clt_tel" 				jdbcType="VARCHAR" javaType="String" />
		<parameter property="ubi_clt_cat" 				jdbcType="VARCHAR" javaType="String"/>	
		<parameter property="ubi_est" 						jdbcType="VARCHAR" javaType="String"/>			
	</parameterMap>
     
	<procedure id="insertDireccion" parameterMap="setInsertDireccion" resultClass="java.lang.Integer">
       {CALL sp_ins_cli_dir(?,?,?,?,?,?)}
	</procedure>
	
	<parameterMap id="setInsertTarea" class="java.util.HashMap">
		<parameter property="ofc_eje_cab" 				jdbcType="CHAR" javaType="String" />
		<parameter property="tar_usr_pos"					jdbcType="INT" javaType="java.lang.Integer" />
		<parameter property="est_tar_id" 					jdbcType="INT" javaType="java.lang.Integer" />
		<parameter property="cod_tipo_tarea"			jdbcType="INT" javaType="java.lang.Integer" />
		<parameter property="cli_rut" 						jdbcType="CHAR" javaType="java.lang.Long"/>
		<parameter property="tar_usr_gls" 				jdbcType="VARCHAR" javaType="String"/>
		<parameter property="tar_min_rei" 				jdbcType="DATE"  javaType="java.lang.Integer" />
		<parameter property="sol_num"							jdbcType="INT" javaType="java.lang.Integer" />
	</parameterMap>
		
	<procedure id="insertTarea" parameterMap="setInsertTarea" resultClass="java.lang.Long">
		{CALL sp_ins_tarea(?,?,?,?,?,?,?,?)}
	</procedure>	
	
	<parameterMap id="setLimpiaTareasOtroDia" class="java.util.HashMap">
		<parameter property="ofc_eje_cab" 				jdbcType="CHAR" javaType="String" />
	</parameterMap>	
	
	<procedure id="limpiaTareasOtroDia" parameterMap="setLimpiaTareasOtroDia" resultClass="java.lang.Integer">
		{ CALL sp_del_tar_ant( ?) }
	</procedure>
	 
	<parameterMap id="setObtenerDatosEjecutivo" class="java.util.HashMap">
		<parameter property="ofc_eje_cab" 				jdbcType="CHAR" javaType="String" />
	</parameterMap>
	<resultMap id="getObtenerDatosEjecutivo" class="java.util.HashMap">		
		<result  property="ofc_eje_cab"				jdbcType="CHAR"  javaType="String" />
		<result  property="eje_nom"					jdbcType="VARCHAR"  javaType="String" />
		<result  property="eje_anexo"				jdbcType="VARCHAR"  javaType="String" />
		<result  property="fec_ult_ing"				jdbcType="DATE"  javaType="String" />
		<result  property="eje_min_rei_eve"			jdbcType="INT"  javaType="java.lang.Integer" />
		<result  property="eje_min_rei_cam"			jdbcType="INT"  javaType="java.lang.Integer" />
		<result  property="eje_min_rei_tar"			jdbcType="INT"  javaType="java.lang.Integer" />
	</resultMap>
	
	<procedure id="obtenerDatosEjecutivo" parameterMap="setObtenerDatosEjecutivo" resultMap="getObtenerDatosEjecutivo">
		{CALL sp_buscar_eje (?)}
	</procedure>
	
	<parameterMap id="setObtenerGlosas" class="java.util.HashMap">
		<parameter property="cli_rut" 						jdbcType="CHAR" javaType="java.lang.Long"/>
	</parameterMap>
	<resultMap id="getObtenerGlosas" class="java.util.HashMap">
		<result  property="descripcion"						jdbcType="VARCHAR" javaType="String"/>
	</resultMap>
	
	<procedure id="obtenerGlosas" parameterMap="setObtenerGlosas" resultMap="getObtenerGlosas">
		{CALL sp_buscar_campanas_cliente(?)}
	</procedure>
	
	<parameterMap id="setObtenerTareas" class="java.util.HashMap">
		<parameter property="ofc_eje_cab" 				jdbcType="CHAR" javaType="String" />
		<parameter property="cod_tipo_tarea"			jdbcType="INT" javaType="java.lang.Integer" />
	</parameterMap>
	<resultMap id="getObtenerTareas" class="java.util.HashMap">
		<result  property="idTarea" 							jdbcType="CHAR" javaType="java.lang.Long"/>
		<result  property="ejecutivo" 						jdbcType="CHAR" javaType="String" />
		<result  property="posicion"							jdbcType="INT" javaType="java.lang.Integer" />
		<result  property="estado" 								jdbcType="INT"  javaType="java.lang.Integer" />
		<result  property="tipo" 									jdbcType="INT"  javaType="java.lang.Integer" />
		<result  property="rut" 									jdbcType="CHAR" javaType="java.lang.Long"/>
		<result  property="glosaTarea" 						jdbcType="VARCHAR" javaType="String"/>
		<result  property="fechaHoraUltimaActividad" jdbcType="DATE" javaType="java.util.Date"/>
		<result  property="minutosReintento" 			jdbcType="INT" javaType="java.lang.Integer"/>
		<result  property="numeroSolucion" 			  jdbcType="INT" javaType="java.lang.Integer"/>
	</resultMap>
	
	<procedure id="obtenerTareas" parameterMap="setObtenerTareas" resultMap="getObtenerTareas">
		{CALL sp_buscar_tareas (?, ?)}
	</procedure>
	

	<parameterMap id="setObtenerCliDirCache" class="java.util.HashMap">
		<parameter property="idcliente" 				  jdbcType="CHAR" javaType="java.lang.Long" />
	</parameterMap>
	<resultMap id="getObtenerCliDirCache" class="java.util.HashMap">
		<result  property="rut" 									jdbcType="CHAR"  javaType="String" />
		<result  property="dv" 										jdbcType="CHAR"  javaType="String" />
		<result  property="apellidoPaterno" 			jdbcType="CHAR"  javaType="String" />
		<result  property="apellidoMaterno" 			jdbcType="CHAR"  javaType="String" />
		<result  property="nombre" 								jdbcType="CHAR"  javaType="String" />
		<result  property="numeroDireccion" 			jdbcType="INT"  javaType="int" />
		<result  property="direccion" 						jdbcType="CHAR"  javaType="String" />
		<result  property="telefono" 							jdbcType="CHAR"  javaType="String" />
		<result  property="tipoDireccion" 				jdbcType="CHAR"  javaType="String" />
	</resultMap>
	<procedure id="obtenerCliDirCache" parameterMap="setObtenerCliDirCache" resultMap="getObtenerCliDirCache">
		{CALL sp_buscar_cli_ubi (?)}
	</procedure>

	<parameterMap id="setActualizaOrdenTarea" class="java.util.HashMap">
		<parameter property="id_tar_usr"   				jdbcType="NUMERIC" javaType="java.lang.Long"/>
		<parameter property="tar_usr_pos"				jdbcType="INT" javaType="java.lang.Integer" />
	</parameterMap>
	
	<procedure id="actualizaOrdenTarea" parameterMap="setActualizaOrdenTarea" resultClass="java.lang.Integer">
		{ CALL sp_act_pos_tarea( ?,?) }
	</procedure>


</sqlMap>