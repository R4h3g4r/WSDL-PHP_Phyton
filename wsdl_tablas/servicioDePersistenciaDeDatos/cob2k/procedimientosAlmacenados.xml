<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
	
<sqlMap namespace="cob2k.procedimientosAlmacenados">
		
	 <resultMap id="resultadoListadoCobranzasCliente" class="java.util.HashMap">
         <result property="banca" javaType="String" column="cod_banca"/>
         <result property="oficina" javaType="String" column="glosa_sucursal"/>
         <result property="ejecutivo" javaType="String" column="cod_ejecutivo"/>
         <result property="tipoDeudor" javaType="String" column="glosa_tipo_deudor"/>
         <result property="idOperacion" javaType="String" column="num_operacion"/>
         <result property="producto" javaType="String" column="glosa_producto"/>
         <result property="montoDeuda" javaType="Double" column="monto_total_mora"/>
         <result property="saldoInsoluto" javaType="Double" column="saldo_insoluto"/>
         <result property="diasMora" javaType="Integer" column="dias_mora_ciclo"/>
         <result property="estadoMora" javaType="String" column="glosa_estado_mora"/>
         <result property="estadoCobranza" javaType="String" column="glosa_estado_cobranza"/>
         <result property="fechaVigencia" javaType="String" column="fecha_ult_actual"/>
         <result property="modoCobranza" javaType="String" column="cod_modo_cobranza"/>
         <result property="glosaEmpresa" javaType="String" column="glosa_empresa"/>
         <result property="codEmpresa" javaType="String" column="cod_empresa"/>
    </resultMap>
    
    <resultMap id="resultadoProvisionesClienteEspecifico" class="java.util.HashMap">
         <result property="normal" javaType="Double" column="pro_prv"/>
         <result property="adicional" javaType="Double" column="pro_adi"/>
         <result property="total" javaType="Double" column="pro_total"/>
         <result property="totalDirecta" javaType="Double" column="deuda"/>
         <result property="anyoMes" javaType="String" column="pro_ano_mes"/>
    </resultMap>
    
    
      <resultMap id="resultadoListadoCobranzaProductosEjecutivo" class="java.util.HashMap">
         <result property="nombre" javaType="String" column="glosa_producto"/>
         <result property="codigo" javaType="String" column="cod_producto"/>
         <result property="montoDeuda" javaType="Double" column="monto"/>
         <result property="saldoInsoluto" javaType="Double" column="saldo"/>
         <result property="cantidadDeudores" javaType="Integer" column="deudores"/> 
    </resultMap>
    
    <resultMap id="resultadoListaDeudoresClienteProducto" class="java.util.HashMap">
        <result property="rut" javaType="String" column="rut_deudor"/>
        <result property="dv" javaType="String" column="dv_deudor"/>
        <result property="nombre" javaType="String" column="nombre_deudor"/>
        <result property="tipoDeudor" javaType="String" column="glosa_tipo_deudor"/>
        <result property="montoDeuda" javaType="Double" column="monto"/>
        <result property="saldoInsoluto" javaType="Double" column="saldo"/>
        <result property="operacion" javaType="Integer" column="opers"/>
        <result property="diasMora" javaType="Integer" column="dias"/>
        <result property="subbanca" javaType="String" column="cod_banca"/>
    </resultMap>
    
    <resultMap id="resultadoProvisionesEjecutivo" class="java.util.HashMap">
         <result property="normal" javaType="Double" column="normal"/>
         <result property="adicional" javaType="Double" column="adicional"/>
         <result property="total" javaType="Double" column="total"/>
         <result property="anyoMes" javaType="String" column="pro_ano_mes"/>
    </resultMap>
    
    <resultMap id="resultadoListaCobranzaProductosOficina" class="java.util.HashMap">
         <result property="nombre" javaType="String" column="glosa_producto"/>
         <result property="codigo" javaType="String" column="cod_producto"/>
         <result property="montoDeuda" javaType="Double" column="monto"/>
         <result property="saldoInsoluto" javaType="Double" column="saldo"/>
         <result property="cantidadEjecutivos" javaType="Integer" column="ejecutivos"/> 
    </resultMap>
    
     <resultMap id="resultadoListadoEjecutivosProducto" class="java.util.HashMap">
         <result property="nombre" javaType="String" column="cod_ejecutivo"/>
         <result property="deudoresDirectos" javaType="Integer" column="deudores"/>
         <result property="montoMora" javaType="Double" column="monto"/>
         <result property="saldoInsoluto" javaType="Double" column="saldo"/> 
    </resultMap>
    
    <resultMap id="resultadoListaClisEjecutivoProductoOfi" class="java.util.HashMap">
        <result property="rut" javaType="String" column="rut_deudor"/>
        <result property="dv" javaType="String" column="dv_deudor"/>
        <result property="nombre" javaType="String" column="nombre_deudor"/>
        <result property="tipoDeudor" javaType="String" column="glosa_tipo_deudor"/>
        <result property="montoDeuda" javaType="Double" column="monto"/>
        <result property="saldoInsoluto" javaType="Double" column="saldo"/>
        <result property="operacion" javaType="Integer" column="opers"/>
        <result property="diasMora" javaType="Integer" column="dias"/>
        <result property="subbanca" javaType="String" column="cod_banca"/>
    </resultMap>
    
      <resultMap id="resultadoListadoEjecutivosOficina" class="java.util.HashMap">
         <result property="nombre" javaType="String" column="cod_ejecutivo"/>
         <result property="deudoresDirectos" javaType="Integer" column="deudores"/>
         <result property="montoMora" javaType="Double" column="monto"/>
         <result property="saldoInsoluto" javaType="Double" column="saldo"/> 
    </resultMap>
    
    <resultMap id="resultadoListaCobranzaProductosEjecutivoOficina" class="java.util.HashMap">
         <result property="nombre" javaType="String" column="glosa_producto"/>
         <result property="codigo" javaType="String" column="cod_producto"/>
         <result property="montoDeuda" javaType="Double" column="monto"/>
         <result property="saldoInsoluto" javaType="Double" column="saldo"/>
         <result property="cantidadDeudores" javaType="Integer" column="deudores"/> 
    </resultMap>
    
     <resultMap id="resultadoProvisionesJefeOficina" class="java.util.HashMap">
         <result property="normal" javaType="Double" column="normal"/>
         <result property="adicional" javaType="Double" column="adicional"/>
         <result property="total" javaType="Double" column="total"/>
         <result property="anyoMes" javaType="String" column="pro_ano_mes"/>
    </resultMap>
    
    <resultMap id="resultadoRenegociacion" class="java.util.HashMap">
         <result property="rpa_seg" javaType="String" column="rpa_seg"/>
    </resultMap>
    
	<procedure  id="listadoCobranzasCliente" parameterClass="java.util.HashMap" resultMap ="resultadoListadoCobranzasCliente">
	   {CALL sp_get_cbrnzs_cli_especifico (#rutCliente#)}
	</procedure>
	
	<procedure id="provisionesClienteEspecifico" parameterClass="java.util.HashMap" resultMap ="resultadoProvisionesClienteEspecifico">
       {CALL sp_get_provisiones_cliente (#rutCliente#)}
    </procedure>
    
     <procedure id="listadoCobranzaProductosEjecutivo"  parameterClass="java.util.HashMap" resultMap ="resultadoListadoCobranzaProductosEjecutivo">
       {CALL sp_get_cbrnzs_prdcts_ejec (#codigoEjecutivo#,#banca#)}
    </procedure>
    
    <procedure id="listaDeudoresClienteProducto"   parameterClass="java.util.HashMap" resultMap ="resultadoListaDeudoresClienteProducto">
       {CALL sp_get_cbrnzs_clis_prod_ejec (#codigoEjecutivo#,#banca#,#codigoProducto#)}
    </procedure>
    
    <procedure id="provisionesEjecutivo"   parameterClass="java.util.HashMap" resultMap ="resultadoProvisionesEjecutivo">
       {CALL sp_get_provisiones_ejecutivo (#codigoEjecutivo#,#banca#)}
    </procedure>
    
    <procedure id="listaCobranzaProductosOficina"  parameterClass="java.util.HashMap" resultMap ="resultadoListaCobranzaProductosOficina">
       {CALL sp_get_cbrzs_prod_ofi (#codigoOficina#,#banca#)}
    </procedure>
    
    <procedure id="listadoEjecutivosProducto"  parameterClass="java.util.HashMap" resultMap ="resultadoListadoEjecutivosProducto">
       {CALL sp_get_cbrzs_ejecs_pro_ofi (#codigoOficina#,#banca#,#codigoProducto#)}
    </procedure>
    
    <procedure id="listaClisEjecutivoProductoOfi"  parameterClass="java.util.HashMap" resultMap ="resultadoListaClisEjecutivoProductoOfi">
       {CALL sp_get_cbrzs_cli_ejecs_pro_ofi (#codigoOficina#,#banca#,#codigoProducto#,#codigoEjecutivo#)}
    </procedure>
    
     <procedure id="listadoEjecutivosOficina"  parameterClass="java.util.HashMap" resultMap ="resultadoListadoEjecutivosOficina">
       {CALL sp_get_cbrzs_ejec_ofi (#codigoOficina#,#banca#)}
    </procedure>
    
    <procedure id="listaCobranzaProductosEjecutivoOficina"  parameterClass="java.util.HashMap" resultMap ="resultadoListaCobranzaProductosEjecutivoOficina">
       {CALL sp_get_cbrzs_prods_ejec_ofi (#codigoOficina#,#banca#,#codigoEjecutivo#)}
    </procedure>
    
     <procedure id="provisionesJefeOficina"   parameterClass="java.util.HashMap" resultMap ="resultadoProvisionesJefeOficina">
       {CALL sp_get_provisiones_jof (#codigoOficina#,#banca#)}
    </procedure>
    
    <procedure id="renegociacion"   parameterClass="java.util.HashMap" resultMap ="resultadoRenegociacion">
       {CALL sp_cns_ren_cli (#rut#)}
    </procedure>
    
</sqlMap>	
