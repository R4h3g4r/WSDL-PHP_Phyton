<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="multicre.procedimientosAlmacenados">

    <procedure id="registraSimulacionCreditoAutomotriz" parameterClass="java.util.HashMap">
        {CALL sp_ins_reg_sim(#veh_valor#, #veh_marca#, #veh_modelo#, #veh_anio#, #veh_estado#, #contacto_rut#, #pie_valor_t#, #producto#,
		#cuota_cant#, #meses_gracia#, #gasto_oper#, #cuota_mens#, #cuota_mens_i#, #tasa_interes#, #impuestos#, #contacto_nom#, #contacto_tel#, #contacto_ren#, #seg_desg#, #val_seg_desg#, #seg_cesan#, #val_seg_cesa#, #monto_fi_cre#, #monto_ult_ct#, #apellido_pat#, #apellido_mat#,
		#contacto_cel#, #contacto_mai#, #est_compra#, #ahorro_est#, #opcion_uno#, #opcion_dos#, #opcion_tres#, #opcion_cuatro#, #opcion_cinco#,
		#opcion_seis#, #opcion_siete#, #opcion_ocho#, #valor_uno#, #valor_dos#, #valor_tres#, #valor_cuatro#, #valor_cinco#, #valor_seis#,
		#valor_siete#, #valor_ocho#)}
    </procedure>
	<parameterMap id="setRegistrarSimulacion" class="java.util.HashMap">
		<parameter property="rut"  	 jdbcType="CHAR" javaType="string" />
		<parameter property="monto"   	 jdbcType="money" javaType="java.math.BigDecimal"/>
		<parameter property="plazo"  	 jdbcType="NUMERIC" javaType="integer" />
		<parameter property="cuota"   	 jdbcType="money" javaType="java.math.BigDecimal"/>
		<parameter property="total"  	 jdbcType="money" javaType="java.math.BigDecimal"/>
		<parameter property="tasaInteres" jdbcType="DECIMAL"	    	javaType="java.lang.Double" />
		<parameter property="montoInteres" jdbcType="money" javaType="java.math.BigDecimal"/>
		<parameter property="montoImpuesto" jdbcType="money" javaType="java.math.BigDecimal"/>
		<parameter property="montoSeguros" jdbcType="money" javaType="java.math.BigDecimal"/>
		<parameter property="iic" 	jdbcType="integer" javaType="integer"/>
		<parameter property="cai" 	jdbcType="CHAR" javaType="string" />
	</parameterMap>

<resultMap id="getRegistrarSimulacion" class="java.util.HashMap">
		<result property="resultado" 			column="resultado"		jdbcType="integer" 	javaType="integer"/>
	</resultMap>

	<procedure id="registrarSimulacion" parameterMap="setRegistrarSimulacion" resultMap="getRegistrarSimulacion">
		{ CALL sp_ins_sim_atm( ?,?,?,?,?,?,?,?,?,?,? ) }	
	</procedure>

  		 <parameterMap id="setConsultaDatosClienteYSimulacion" class="java.util.HashMap">
   				<parameter property="rut"  	  			jdbcType="CHAR"    		javaType="String"/>
   				<parameter property="lineaCreditoDispo"	jdbcType="money"    		javaType="java.math.BigDecimal"/>
   				<parameter property="duracionCot"	 	jdbcType="NUMERIC" 	javaType="integer" />
   				<parameter property="identificador"  	jdbcType="CHAR"    		javaType="String"/>
   				<parameter property="ctaCte"  			jdbcType="CHAR"    		javaType="String"/>
   		</parameterMap>
   		<resultMap id="getConsultaDatosClienteYSimulacion" class="java.util.HashMap">
   				<result property="fecha"  	 	column="sim_fec_sim"	jdbcType="CHAR" 	javaType="java.util.Calendar" typeHandler="cl.bci.middleware.aplicacion.persistencia.handler.CalendarTypeHandler" />
   				<result property="rut"  	 	column="sim_rut_cli"	jdbcType="CHAR" 	javaType="string" />
				<result property="monto"   	 	column="sim_mto_sim"	jdbcType="money" 	javaType="java.math.BigDecimal"/>
				<result property="plazo"  	 	column="sim_pla_sim"	jdbcType="NUMERIC" 	javaType="integer" />
				<result property="cuota"   	 	column="sim_mto_cta"	jdbcType="money" 	javaType="java.math.BigDecimal"/>
				<result property="total"  	 	column="sim_mto_tot"	jdbcType="money" 	javaType="java.math.BigDecimal"/>
				<result property="tasaInteres" 	column="sim_tsa_int"	jdbcType="DECIMAL"	javaType="java.lang.Double" />
				<result property="montoInteres" column="sim_mto_int"	jdbcType="money" 	javaType="java.math.BigDecimal"/>
				<result property="montoImpuesto" column="sim_mto_imp"	jdbcType="money" 	javaType="java.math.BigDecimal"/>
				<result property="montoSeguros" column="sim_mto_seg"	jdbcType="money" 	javaType="java.math.BigDecimal"/>
				<result property="iic" 			column="sim_iic"		jdbcType="integer" 	javaType="integer"/>
				<result property="cai" 			column="sim_cai"		jdbcType="CHAR" 	javaType="string" />
   		</resultMap>
   		<procedure id="consultaDatosClienteYSimulacion" parameterMap="setConsultaDatosClienteYSimulacion" resultMap="getConsultaDatosClienteYSimulacion">
   				{ CALL sp_cns_dcl_atm (?,?,?,?,?) }
   		</procedure>
   		
   		
   		
   		
   		<parameterMap id="setBuscaSimulacion" class="java.util.HashMap">
   				<parameter property="rut"  		jdbcType="CHAR"    		javaType="String"/>
   				<parameter property="monto"		jdbcType="money"    		javaType="java.math.BigDecimal"/>
   				<parameter property="plazo"	 	jdbcType="NUMERIC" 	javaType="integer" />
   		</parameterMap>
   		<resultMap id="getBuscaSimulacion" class="java.util.HashMap">
   				<result property="fecha"  	 	column="sim_fec_sim"	jdbcType="CHAR" 	javaType="java.util.Calendar" typeHandler="cl.bci.middleware.aplicacion.persistencia.handler.CalendarTypeHandler" />
   				<result property="rut"  	 	column="sim_rut_cli"	jdbcType="CHAR" 	javaType="string" />
				<result property="monto"   	 	column="sim_mto_sim"	jdbcType="money" 	javaType="java.math.BigDecimal"/>
				<result property="plazo"  	 	column="sim_pla_sim"	jdbcType="NUMERIC" 	javaType="integer" />
				<result property="cuota"   	 	column="sim_mto_cta"	jdbcType="money" 	javaType="java.math.BigDecimal"/>
				<result property="total"  	 	column="sim_mto_tot"	jdbcType="money" 	javaType="java.math.BigDecimal"/>
				<result property="tasaInteres" 	column="sim_tsa_int"	jdbcType="DECIMAL"	javaType="java.lang.Double" />
				<result property="montoInteres" column="sim_mto_int"	jdbcType="money" 	javaType="java.math.BigDecimal"/>
				<result property="montoImpuesto" column="sim_mto_imp"	jdbcType="money" 	javaType="java.math.BigDecimal"/>
				<result property="montoSeguros" column="sim_mto_seg"	jdbcType="money" 	javaType="java.math.BigDecimal"/>
				<result property="iic" 			column="sim_iic"		jdbcType="integer" 	javaType="integer"/>
				<result property="cai" 			column="sim_cai"		jdbcType="CHAR" 	javaType="string" />
   		</resultMap>
   		<procedure id="buscaSimulacion" parameterMap="setBuscaSimulacion" resultMap="getBuscaSimulacion">
   				{ CALL sp_cns_sim_atm (?,?,?) }
   		</procedure>
   		
   		
   		
   	<parameterMap id="setInsertaCurse" class="java.util.HashMap">
		<parameter property="rut"  	 jdbcType="CHAR" javaType="string" />
		<parameter property="identificador"  	 jdbcType="CHAR" javaType="string" />
		<parameter property="ctaCte"  	 jdbcType="CHAR" javaType="string" />
		<parameter property="numOperacion"  	 jdbcType="CHAR" javaType="string" />
	</parameterMap>

<resultMap id="getInsertaCurse" class="java.util.HashMap">
		<result property="resultado" 			column="resultado"		jdbcType="integer" 	javaType="integer"/>
	</resultMap>

	<procedure id="insertaCurse" parameterMap="setInsertaCurse" resultMap="getInsertaCurse">
		{ CALL sp_ins_crs_atm (?,?,?,?) }	
	</procedure>
   		
</sqlMap>