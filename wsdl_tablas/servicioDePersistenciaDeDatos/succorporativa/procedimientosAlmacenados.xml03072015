<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
    
<sqlMap namespace="succorporativa.procedimientosAlmacenados">

<!-- RESULT MAP -->

    <!-- Comienzo Resultados Analisis Solicitud -->
    <resultMap id="detalleAnalisisActivosRelevantes" class="java.util.HashMap">
        <result property="idDetalle"        javaType="Long"     column="id_det_act_rel"     jdbcType="int" />
        <result property="idAnalisis"       javaType="Long"     column="id_analisis"        jdbcType="int" />
        <result property="tipoBien"         javaType="String"   column="tipo_bien"          jdbcType="varchar" />
        <result property="caracteristica"   javaType="String"   column="caracteristica"     jdbcType="varchar" />
        <result property="valor"            javaType="Double"   column="valor"              jdbcType="decimal"/>
        <result property="comentarios"      javaType="String"   column="comentario"         jdbcType="varchar"/>
    </resultMap>

    <resultMap id="detalleAnalisisCargaFinanciera" class="java.util.HashMap">
        <result property="idDetalle"        javaType="Long"     column="id_det_carga_finan"     jdbcType="int" />
        <result property="idAnalisis"       javaType="Long"     column="id_analisis"            jdbcType="int" />
        <result property="tipoDeuda"        javaType="String"   column="tipo_deuda"             jdbcType="char" />
        <result property="banco"            javaType="String"   column="banco"                 jdbcType="char" />
        <result property="saldoInsoluto"    javaType="Double"   column="saldo_insoluto"         jdbcType="decimal"/>
        <result property="plazoTotal"       javaType="Integer"  column="plazo_total"            jdbcType="numeric"/>
        <result property="cuotaActual"      javaType="Integer"  column="cuota_actual"           jdbcType="numeric"/>
        <result property="destino"          javaType="String"   column="destino"                jdbcType="varchar"/>
        <result property="tipoGarantia"     javaType="String"   column="tipo_garantia"          jdbcType="varchar"/>
        <result property="valorGarantia"    javaType="Double"   column="valor_garantia"         jdbcType="decimal"/>
        <result property="valorCuota"       javaType="Double"   column="valor_cuota"            jdbcType="decimal"/>
    </resultMap>

    <resultMap id="analisisSolicitud" class="java.util.HashMap">
        <result property="idAnalisis"                   javaType="Long"     column="id_analisis"            jdbcType="int" />
        <result property="idSolicitud"                  javaType="Long"     column="nro_solicitud"          jdbcType="int" />
        <result property="detalleActividad"             javaType="String"   column="detalle_actividad"      jdbcType="varchar" />
        <result property="fundadaAnyo"                  javaType="Integer"  column="fundada_anno"           jdbcType="varchar"/>
        <result property="aperturaCC"                   javaType="String"   column="apertura_cc"            jdbcType="varchar"/>
        <result property="nuevaCarga"                   javaType="Double"   column="nueva_carga_fin"        jdbcType="decimal"/>
        <result property="totalCargaFinancieraAnual"    javaType="Double"   column="total_carga_fin_anual"  jdbcType="decimal"/>
        <result property="generacionGOB"                javaType="Double"   column="generacion_gob"         jdbcType="decimal"/>
        <result property="ingresosExogenos"             javaType="Double"   column="ingreso_exogeno"        jdbcType="decimal"/>
        <result property="excedenteDeficit"             javaType="Double"   column="excedente_deficit"      jdbcType="decimal"/>
    </resultMap>

    <resultMap id="observacionAnalisis" class="java.util.HashMap">
        <result property="idObservacion"        javaType="Long"     column="id_analisis_obs"    jdbcType="int" />
        <result property="idSolicitud"          javaType="Long"     column="id_analisis"        jdbcType="int" />
        <result property="observacion"          javaType="String"   column="observacion"        jdbcType="varchar" />
        <result property="codigoObservacion"    javaType="String"   column="tipo_obs"           jdbcType="varchar"/>
        <result property="descripcionCodigo"    javaType="String"   column="descripcionCod"     jdbcType="varchar"/>
    </resultMap>
    <!-- Fin Resultados Analisis Solicitud -->

    <!-- Resultados Parametros -->
    <resultMap id="parametro" class="java.util.HashMap">
        <result property="codigo"       javaType="String"   column="codigo"         jdbcType="varchar" />
        <result property="descripcion"  javaType="String"   column="descripcion"    jdbcType="varchar" />
    </resultMap> 
    <!-- Fin Resultados Parametros -->

    <!-- Comienzo Resultados Estado Situacion -->
    <resultMap id="estadoSituacion" class="java.util.HashMap">
        <result property="activo"           javaType="Long"     column="activo"         jdbcType="int" />
        <result property="pasivo"           javaType="Long"     column="pasivo"         jdbcType="int" />
        <result property="patrimonio"       javaType="Long"     column="patrimonio"     jdbcType="int" />
        <result property="codigoItem"       javaType="String"   column="codigoItem"     jdbcType="varchar" />
        <result property="glosa"            javaType="String"   column="glosa"          jdbcType="varchar"/>
        <result property="cantidadItem"     javaType="Long"     column="cantidad_item"  jdbcType="int"/>
        <result property="monto"            javaType="Double"   column="monto"          jdbcType="decimal"/>
    </resultMap>

    <resultMap id="fechaAteriorEstadoSituacion" class="java.util.HashMap">
        <result property="fechaAnterior"            javaType="Date"     column="fechaAnterior"      jdbcType="DATE" />
    </resultMap>
    <!-- FIN Resultados Estado Situacion -->

    <!-- Resultados Estado Financiero Y Ventas -->
    <resultMap id="estadoFinancieroSolicitante" class="java.util.HashMap">
        <result property="cod_err"                      column="cod_err"/>
        <result property="des_err"                      column="des_err"/>
        <result property="rutSolicitante"               column="rut"/>
        <result property="nroSolicitud"                 column="nro_solicitud"/>
        <result property="periodo"                      column="periodo"/>
        <result property="ingresos"                     column="ingresos"/>
        <result property="resultFinal"                  column="result_final"/>
        <result property="resultFinalIngresos"          column="result_final_ingresos"/>
        <result property="liquidezCorriente"            column="liquidez_corriente"/>
        <result property="permanenciaCredito"           column="permanencia_credito"/>
        <result property="permanenciaInventario"        column="permanencia_inventario"/>
        <result property="totalActivos"                 column="total_act"/>
        <result property="totalActivosFijos"            column="total_act_fijos"/>
        <result property="totalPasivoExigible"          column="total_pas_exigible"/>
        <result property="totalPasivoNoExigible"        column="total_pas_no_exigible"/>
        <result property="leverage"                     column="leverage"/>
        <result property="usuarioCreador"               column="usuario_creador"/>
        <result property="usuarioModifica"              column="usuario_modifica"/>
        <result property="fechaCreacion"                column="fecha_creacion"/>
        <result property="fechaModifica"                column="fecha_modifica"/>

<result property="activoDisponibleDap"          column="act_disp_dap"/>
        <result property="ctaDocPorCobrar"              column="cta_doc_cobrar"/>
        <result property="ctaPorCobrar"                 column="cta_por_cobrar"/>
        <result property="existencias"                  column="existencia"/>
        <result property="otrosCirculantes"             column="otro_circ_act"/>
        <result property="totalCirculante"              column="total_circ_act"/>
        <result property="inversionesEmpresas"          column="inv_empresas"/>
        <result property="cuentasPorCobrarLP"           column="cta_por_cobrar_lp"/>
        <result property="activosLeasing"               column="act_leasing"/>
        <result property="otrosActivosLP"               column="otro_act_lp"/>
        <result property="totalOtrosActivos"            column="total_otro_act"/>
        <result property="deudaCuotaLP"                 column="deuda_cuota_lp"/>
        <result property="deudaLeasingCP"               column="deuda_leasing_cp"/>
        <result property="ctaDocPorPagar"               column="cta_doc_por_pagar"/>
        <result property="ctaPorPagarCP"                column="cta_por_pagar_cp"/>
        <result property="otrosCirculantesPasivos"      column="otro_circ_pas"/>
        <result property="totalPasivoCirculante"        column="total_pas_circ"/>
        <result property="deudaBancoLP"                 column="deuda_banco_lp"/>
        <result property="deudaLeasingLP"               column="deuda_leasing_lp"/>
        <result property="ctaPorPagarEmpresasLP"        column="cta_pagar_emp_lp"/>
        <result property="otrosPasivosLP"               column="otro_pas_lp"/>
        <result property="totalPasivoLP"                column="total_pas_lp"/>
        <result property="capitalPagado"                column="cap_pag"/>
        <result property="otrasCuentasCapital"          column="otra_cta_cap"/>
        <result property="utilidadPerdidaAcumulada"     column="utl_per_acum"/>
        <result property="utilidadEjercicio"            column="utl_ejer"/>
        <result property="totalPasivos"                 column="total_pas"/>
        <result property="costoVentas"                  column="cost_venta"/>
        <result property="depreciacion"                 column="depreciacion"/>
        <result property="resultadoExplotacion"         column="result_expl"/>
        <result property="gastosAdministracionVentas"   column="gasto_adm_vnt"/>
        <result property="resultadoOperacional"         column="resul_ope"/>
        <result property="gastosFinancieros"            column="gast_finan"/>
        <result property="correcionMonetaria"           column="corr_monetaria"/>
        <result property="utlPerdEmpRelacionadas"       column="utl_per_emp_rel"/>
        <result property="otrosIngresosEgresosNetos"    column="otro_ing_egre_neto"/>
        <result property="resultadoNoOperacional"       column="result_no_ope"/>
        <result property="impuestoRenta"                column="imp_renta"/>
        <result property="interesMinoritario"           column="int_minoritario"/>
        <result property="amortizacionInversion"        column="amort_inver"/>
        <result property="generacionOperativa"          column="gen_ope"/>
        <result property="utilidadOperacionalVentas"    column="utl_ope_vta"/>
        <result property="utilidadVentas"               column="utl_venta"/>
        <result property="utilidadPatrimonio"           column="utl_patrimonio"/>
        <result property="liquidezAcida"                column="liq_acida"/>
        <result property="permanenciaCuentasPorPagar"   column="pert_cta_pagar"/>
        <result property="resultadoOperacionalGastos"   column="resul_ope_gto"/>
        <result property="coberturaPasivos"             column="cober_pas"/>
        <result property="usuarioCreador"               column="usuario_creador"/>
        <result property="usuarioModifica"              column="usuario_modifica"/>
        <result property="fechaCreacion"                column="fecha_creacion"/>
        <result property="fechaModifica"                column="fecha_modifica"/>
        <result property="patrimonio"                	column="patrimonio"/>
        <result property="estado_balance"               column="estado_balance"/>
    </resultMap>

    <resultMap id="ventasDelPeriodo" class="java.util.HashMap">
        <result property="cod_err"                      column="cod_err"/>
        <result property="des_err"                      column="des_err"/>
        <result property="rutSolicitante"               column="rut"/>
        <result property="nroSolicitud"                 column="nro_solicitud"/>
        <result property="periodo"                      column="periodo"/>
        <result property="ventas_enero"                 column="ventas_enero"/>
        <result property="ventas_febrero"               column="ventas_febrero"/>
        <result property="ventas_marzo"                 column="ventas_marzo"/>
        <result property="ventas_abril"                 column="ventas_abril"/>
        <result property="ventas_mayo"                  column="ventas_mayo"/>
        <result property="ventas_junio"                 column="ventas_junio"/>
        <result property="ventas_julio"                 column="ventas_julio"/>
        <result property="ventas_agosto"                column="ventas_agosto"/>
        <result property="ventas_septiembre"            column="ventas_septiembre"/>
        <result property="ventas_octubre"               column="ventas_octubre"/>
        <result property="ventas_noviembre"             column="ventas_noviembre"/>
        <result property="ventas_diciembre"             column="ventas_diciembre"/>
        <result property="total_ventas"                 column="total_ventas"/>
        <result property="usuarioCreador"               column="usuario_creador"/>
        <result property="usuarioModifica"              column="usuario_modifica"/>
        <result property="fechaCreacion"                column="fecha_creacion"/>
        <result property="fechaModifica"                column="fecha_modifica"/>
    </resultMap>
    <!-- Fin Resultados Estado Financiero Y Ventas -->


    <!-- Resolucion Solicitud -->
    <resultMap id="cuadroDeMando" class="java.util.HashMap">
        <result property="rut"                          column="rut"/>
        <result property="dv"                           column="dv"/>
        <result property="nro_solicitud"                column="nro_solicitud"/>
        <result property="sem_patrimonio"               column="sem_patrimonio"/>
        <result property="sem_carga_financiera"         column="sem_carga_financiera"/>
        <result property="sem_icr"                      column="sem_icr"/>
        <result property="puntaje_creditdesk"           column="puntaje_creditdesk"/>
        <result property="ajuste_garantia"              column="ajuste_garantia"/>
        <result property="monto_max_pesos"              column="monto_max_pesos"/>
        <result property="cic"                          column="cic"/>
        <result property="nombres"                      column="nombres"/>
        <result property="apellidos"                    column="apellidos"/>
        <result property="fecha_nacimiento"             column="fecha_nacimiento"/>
        <result property="edad"                         column="edad"/>
        <result property="id_banca"                     column="id_banca"/>
        <result property="descripcion_Banca"            column="descripcion_Banca"/>
        <result property="fecha_cta_cte_vig"            column="fecha_cta_cte_vig"/>
        <result property="id_actividad"                 column="id_actividad"/>
        <result property="descripcion_actividad"        column="descripcion_actividad"/>
        <result property="renta_cliente"                column="renta_cliente"/>
        <result property="est_civil"                    column="est_civil"/>
        <result property="descripcion_est_civil"        column="descripcion_est_civil"/>
        <result property="total_ventas"                 column="total_ventas"/>
        <result property="utilidad"                     column="utilidad"/>
        <result property="usuario_creador"              column="usuario_creador"/>
        <result property="usuario_modifica"             column="usuario_modifica"/>
        <result property="fecha_creacion"               column="fecha_creacion"/>
        <result property="fecha_modifica"               column="fecha_modifica"/>
        <result property="id_estado"                    column="id_estado"/>
        <result property="tipo_persona"                 column="tipo_persona"/>
    </resultMap>

    <resultMap id="evaluacionSolicitud" class="java.util.HashMap">
        <result property="nro_solicitud"    column="nro_solicitud"/>
        <result property="id_estado"        column="id_estado"/>
        <result property="glosa_estado"     column="glosa_estado"/>
        <result property="traspaso_banca"   column="traspaso_banca"/>
        <result property="grupo_economico"  column="grupo_economico"/>
        <result property="presentacion"     column="presentacion"/>
        <result property="perspectiva"      column="perspectiva"/>
        <result property="tipo_resolucion"  column="tipo_resolucion"/>
        <result property="resolutor"        column="resolutor"/>
        <result property="renegociado"      column="renegociado"/>
        <result property="ingreso_lob"      column="ingreso_lob"/>
        <result property="glTraspasoDeBanca"    column="glTraspasoDeBanca"/>
        <result property="glGrupoEconomico"     column="glGrupoEconomico"/>
        <result property="glcalidad_present"    column="glcalidad_present"/>
        <result property="glPerspectiva"        column="glPerspectiva"/>
        <result property="glTipoDeResolucion"   column="glTipoDeResolucion"/>
        <result property="glPoliticaSel"        column="glPoliticaSel"/>
        <result property="comentario_check"        column="glComentarioCheck"/>
    </resultMap>

    <resultMap id="politicasSolicitud" class="java.util.HashMap">
        <result property="nro_solicitud"        column="nro_solicitud"/>
        <result property="codigo_politica"      column="codigo_politica"/>
        <result property="usuario_creador"      column="usuario_creador"/>
        <result property="usuario_modifica"     column="usuario_modifica"/>
        <result property="fecha_creacion"       column="fecha_creacion"/>
        <result property="fecha_modifica"       column="fecha_modifica"/>
    </resultMap>

    <resultMap id="sem_icr" class="java.util.HashMap">
        <result property="sem_icr"        column="sem_icr"/>
    </resultMap>

    <resultMap id="observacionesSolicitud" class="java.util.HashMap">
        <result property="nro_solicitud"        column="nro_solicitud"/>
        <result property="id_estado"            column="id_estado"/>
        <result property="glosa_estado"         column="glosa_estado"/>
        <result property="observacion"          column="observacion"/>
        <result property="fecha"                column="fecha"/>
        <result property="usuario"              column="usuario"/>
        <result property="id_observacion"       javaType="Double"   column="id_obs_solicitud"   jdbcType="numeric"/>
        <result property="posee_detalle"        javaType="String"   column="posee_detalle"      jdbcType="varchar"/>
    </resultMap>

    <resultMap id="id_obs_solicitud" class="java.util.HashMap">
        <result property="id_obs_solicitud"        javaType="Long"   column="id_obs_solicitud"  jdbcType="NUMERIC"/>
    </resultMap>
    <!-- Fin Resolucion Solicitud -->

    <!-- Comienzo Result Ciclo Solicitudes -->
    <resultMap id="cicloSolicitudes" class="java.util.HashMap">
        <result property="rutCliente"           javaType="Long"     column="rut"                jdbcType="int" />
        <result property="dvCliente"            javaType="String"   column="digitoVerificador"  jdbcType="varchar" />
        <result property="idSolicitud"          javaType="Long"     column="nro_solicitud"      jdbcType="int" />
        <result property="nombreCliente"        javaType="String"   column="nombre"             jdbcType="varchar" />
        <result property="estado"               javaType="String"   column="estado"             jdbcType="varchar" />
        <result property="codigoEstado"         javaType="Long"     column="codigoEstado"       jdbcType="int" />
        <result property="fechaIngreso"         javaType="Date"     column="fechaIngreso"       jdbcType="DATE" />
        <result property="fechaCreacion"        javaType="Date"     column="fecha_creacion"     jdbcType="DATE" />
        <result property="fechaActualizacion"   javaType="Date"     column="fecha_modifica"     jdbcType="DATE"/>
        <result property="enviadoA"             javaType="String"   column="enviado_a"          jdbcType="varchar"/>
        <result property="recibidoDe"           javaType="String"   column="recibido_de"        jdbcType="varchar"/>
        <result property="bandeja"              javaType="Long"     column="bandeja"            jdbcType="int"/>
        <result property="ejecutivoSolicitante" javaType="String"   column="ejecutivoSolicitante" jdbcType="varchar"/>
    </resultMap>
    
    <resultMap id="resultBusquedaSolicitudes" class="java.util.HashMap">
    	<result property="idSolicitud"          javaType="Long"     column="nro_solicitud"      jdbcType="int" />
        <result property="rutCliente"           javaType="Long"     column="rut"                jdbcType="int" />
        <result property="dvCliente"            javaType="String"   column="digitoVerificador"  jdbcType="varchar" />
        <result property="nombreCliente"        javaType="String"   column="nombre"             jdbcType="varchar" />
        <result property="estado"               javaType="String"   column="estado"             jdbcType="varchar" />
        <result property="codigoEstado"         javaType="Long"     column="codigoEstado"       jdbcType="int" />
        <result property="fechaIngreso"         javaType="Date"     column="fechaIngreso"       jdbcType="DATE" />
        <result property="fechaCreacion"        javaType="Date"     column="fecha_creacion"     jdbcType="DATE" />
        <result property="fechaActualizacion"   javaType="Date"     column="fecha_modifica"     jdbcType="DATE"/>
        <result property="ejecutivoSolicitante" javaType="String"   column="ejecutivoSolicitante" jdbcType="varchar"/>
        <result property="ejecutivoAsignado"    javaType="String"   column="ejecutivoAsignado"  jdbcType="varchar"/>
    </resultMap>       

    <resultMap id="resultadoConsultaReasignar" class="java.util.HashMap">
        <result property="rutCliente"           javaType="Long"     column="rut"                jdbcType="int" />
        <result property="dvCliente"            javaType="String"   column="digitoVerificador"  jdbcType="varchar" />
        <result property="idSolicitud"          javaType="Long"     column="nro_solicitud"      jdbcType="int" />
        <result property="nombreCliente"        javaType="String"   column="nombre"             jdbcType="varchar" />
        <result property="estado"               javaType="String"   column="estado"             jdbcType="varchar" />
        <result property="codigoEstado"         javaType="Long"     column="codigoEstado"       jdbcType="int" />
        <result property="fechaIngreso"         javaType="Date"     column="fechaIngreso"       jdbcType="DATE" />
        <result property="fechaCreacion"        javaType="Date"     column="fecha_creacion"     jdbcType="DATE" />
        <result property="fechaActualizacion"   javaType="Date"     column="fecha_modifica"     jdbcType="DATE"/>
        <result property="enviadoA"             javaType="String"   column="enviado_a"          jdbcType="varchar"/>
        <result property="recibidoDe"           javaType="String"   column="recibido_de"        jdbcType="varchar"/>
        <result property="bandeja"              javaType="Long"     column="bandeja"            jdbcType="int"/>
        <result property="ejecutivoSolicitante" javaType="String"   column="ejecutivoSolicitante" jdbcType="varchar"/>
    </resultMap>
    <!-- Fin Result Ciclo Solicitudes -->

    <!-- Grupo Economico -->
    <resultMap id="grupoEconomico" class="java.util.HashMap">
        <result property="rut_asociado"     javaType="Long"     column="rut_asociado"   jdbcType="int"/>
        <result property="dv_asociado"      javaType="String"   column="dv_asociado"    jdbcType="char"/>
        <result property="tipo_relacion"    javaType="String"   column="tipo_relacion"  jdbcType="char"/>
        <result property="nombres"          javaType="String"   column="nombres"        jdbcType="char"/>
        <result property="tipo_persona"     javaType="String"   column="tipo_persona"   jdbcType="varchar"/>
        <result property="ingresos"         javaType="Double"   column="ingresos"       jdbcType="decimal"/>
        <result property="fuente_ingreso"   javaType="String"   column="fuente_ingreso" jdbcType="varchar"/>
        <result property="participacion"    javaType="Double"   column="participacion"  jdbcType="decimal" />
        <result property="evaluado"     javaType="String"    column="evaluado"       jdbcType="char" />
        </resultMap>
    
    <resultMap id="grupoEconomicoConsulta" class="java.util.HashMap">
        <result property="rut_asociado"     javaType="Long"     column="rut_asociado"   jdbcType="int"/>
        <result property="dv_asociado"      javaType="String"   column="dv_asociado"    jdbcType="char"/>
        <result property="tipo_relacion"    javaType="String"   column="tipo_relacion"  jdbcType="char"/>
        <result property="nombres"          javaType="String"   column="nombres"        jdbcType="char"/>
        <result property="tipo_persona"     javaType="String"   column="tipo_persona"   jdbcType="varchar"/>
        <result property="ingresos"         javaType="Double"   column="ingresos"       jdbcType="decimal"/>
        <result property="fuente_ingreso"   javaType="String"   column="fuente_ingreso" jdbcType="varchar"/>
        <result property="participacion"    javaType="Double"   column="participacion"  jdbcType="decimal" />
        <result property="evaluado"     javaType="String"    column="evaluado"       jdbcType="char" />
        <result property="codigo_tipo_relacion"     javaType="String"    column="codigo_tipo_relacion"       jdbcType="char" />
        <result property="fecha_verificacion"     javaType="Date"    column="fecha_verificacion"       jdbcType="datetime" />
        <result property="vigencia"     javaType="String"    column="vigencia"       jdbcType="char" />
        <result property="indicador_art85"  javaType="String"   column="indicador_art85" jdbcType="char" />
    </resultMap>

    <resultMap id="consultaIntegranteGrupoEconomico" class="java.util.HashMap">
        <result property="rut_asociado"     javaType="Long"     column="rut_asociado"   jdbcType="int"/>
        <result property="dv_asociado"      javaType="String"    column="dv_asociado"    jdbcType="char"/>
        <result property="tipo_relacion"    javaType="String"   column="tipo_relacion"  jdbcType="char"/>
        <result property="nombres"          javaType="String"   column="nombres"        jdbcType="char" />
    <result property="tipo_persona"     javaType="String"   column="tipo_persona"   jdbcType="varchar"/>
        <result property="ingresos"         javaType="Double"   column="ingresos"       jdbcType="decimal"/>
        <result property="fuente_ingreso"   javaType="String"   column="fuente_ingreso" jdbcType="varchar"/>
        <result property="participacion"    javaType="Double"   column="participacion"  jdbcType="decimal" />
    </resultMap>
        <!-- Fin Grupo Economico -->

    <!-- Documentos Solicitud -->
    <resultMap id="documento" class="java.util.HashMap">
        <result property="idDocumento"  javaType="Long"     column="id_documento"   jdbcType="int"/>
        <result property="idSolicitud"  javaType="Long"     column="nro_solicitud"  jdbcType="int"/>
        <result property="nombre"       javaType="String"   column="nombre_archivo" jdbcType="varchar"/>
        <result property="descripcion"  javaType="String"   column="descripcion"    jdbcType="varchar"/>
        <result property="ruta"         javaType="String"   column="ruta"           jdbcType="varchar"/>
        <result property="fecha"        javaType="Date"     column="fecha"          jdbcType="DATE"/>
        <result property="usuario"      javaType="String"   column="usuario"        jdbcType="varchar" />
    </resultMap>
    <!-- Fin Documentos Solicitud -->

    <!-- Linea de Credito -->
    <resultMap id="idlineaVigente" class="java.util.HashMap">
        <result property="id_lin_vig"       javaType="Long"     column="id_lin_vig" jdbcType="numeric" />
    </resultMap>

    <resultMap id="LGCVigente" class="java.util.HashMap">
        <result property="id_cab_lcg_vig"       javaType="Long"     column="id_cab_lcg_vig" jdbcType="numeric" />
        <result property="moneda"               javaType="String"   column="moneda" jdbcType="varchar"/>
        <result property="monto_max_pesos"      javaType="Double"   column="monto_max_pesos"    jdbcType="numeric"/>
        <result property="monto_max_uf"         javaType="Double"   column="monto_max_uf"   jdbcType="numeric"/>
        <result property="vencimiento"          javaType="Date"     column="vencimiento" jdbcType="datetime"/>
        <result property="total_garantia"       javaType="Double"   column="total_garantia" jdbcType="numeric"/>
        <result property="rel_deuda_garantia"   javaType="Double"   column="rel_deuda_garantia" jdbcType="decimal"/>
        <result property="deficit"              javaType="Double"   column="deficit" jdbcType="numeric"/>
        <result property="ind_creditdesk"       javaType="Double"   column="ind_creditdesk" jdbcType="numeric"/>
        <result property="glosa_moneda"         javaType="String"   column="glosa_moneda" jdbcType="varchar"/>
    </resultMap>

    <resultMap id="LGCSolicitada" class="java.util.HashMap">
        <result property="id_cab_lcg_sol"       javaType="Long"     column="id_cab_lcg_sol" jdbcType="numeric" />
        <result property="moneda"               javaType="String"   column="moneda" jdbcType="varchar"/>
        <result property="monto_max_pesos"      javaType="Double"     column="monto_max_pesos"    jdbcType="numeric"/>
        <result property="monto_max_uf"         javaType="Double"     column="monto_max_uf"   jdbcType="numeric"/>
        <result property="vencimiento"          javaType="Date"     column="vencimiento" jdbcType="datetime"/>
        <result property="total_garantia"       javaType="Double"     column="total_garantia" jdbcType="numeric"/>
        <result property="rel_deuda_gtia"       javaType="Double"   column="rel_deuda_gtia" jdbcType="decimal"/>
        <result property="deficit"              javaType="Double"     column="deficit" jdbcType="numeric"/>
        <result property="ind_creditdesk"       javaType="Double"     column="ind_creditdesk" jdbcType="numeric"/>
    </resultMap>

    <resultMap id="DetalleLineaVigente" class="java.util.HashMap">
        <result property="id_detalle_linea"     javaType="Long"       column="id_detalle_linea"         jdbcType="numeric"/>
        <result property="tipo_linea"           javaType="String"       column="tipo_linea"             jdbcType="varchar"/>
        <result property="moneda"               javaType="String"       column="moneda"                 jdbcType="varchar"/>
        <result property="tipo_garantia"        javaType="String"       column="tipo_garantia"          jdbcType="varchar"/>
        <result property="sub_tipo_gar"         javaType="String"       column="sub_tipo_gar"           jdbcType="varchar"/>
        <result property="monto_max"            javaType="Double"       column="monto_max"              jdbcType="decimal"/>
        <result property="monto_cont"           javaType="Double"       column="monto_cont"             jdbcType="decimal"/>
        <result property="vencimiento"          javaType="Date"         column="vencimiento"            jdbcType="datetime"/>
        <result property="cobertura"            javaType="Double"       column="cobertura"              jdbcType="decimal"/>
        <result property="cond_garantia"        javaType="String"       column="cond_garantia"          jdbcType="varchar"/>
        <result property="glosa_tipo_linea"     javaType="String"       column="glosa_tipo_linea"       jdbcType="varchar"/>
        <result property="glosa_moneda"         javaType="String"       column="glosa_moneda"           jdbcType="varchar"/>
        <result property="glosa_tipo_garantia"  javaType="String"       column="glosa_tipo_garantia"    jdbcType="varchar"/>
        <result property="glosa_sub_tipo_gar"   javaType="String"       column="glosa_sub_tipo_gar"     jdbcType="varchar"/>
        <result property="glosa_cond_garantia"  javaType="String"       column="glosa_cond_garantia"    jdbcType="varchar"/>
    </resultMap>

    <resultMap id="DetalleLineaSolicitada" class="java.util.HashMap">
        <result property="id_detalle_linea"     javaType="Long"     column="id_detalle_linea"       jdbcType="numeric"/>
        <result property="tipo_linea"           javaType="String"   column="tipo_linea"             jdbcType="varchar"/>
        <result property="moneda"               javaType="String"   column="moneda"                 jdbcType="varchar"/>
        <result property="monto_max"            javaType="Double"   column="monto_max"              jdbcType="decimal"/>
        <result property="vencimiento"          javaType="Date"     column="vencimiento"            jdbcType="datetime"/>
        <result property="cond_garantia"        javaType="String"   column="cond_garantia"          jdbcType="varchar"/>
        <result property="vigencia"             javaType="String"   column="vigencia"               jdbcType="varchar"/>
        <result property="glosa_tipo_linea"     javaType="String"   column="glosa_tipo_linea"       jdbcType="varchar"/>
        <result property="glosa_moneda"         javaType="String"   column="glosa_moneda"           jdbcType="varchar"/>
        <result property="glosa_cond_garantia"  javaType="String"   column="glosa_cond_garantia"    jdbcType="varchar"/>
        <result property="glosa_vigencia"       javaType="String"   column="glosa_vigencia"         jdbcType="varchar"/>
        <result property="lin_clon_vig"         javaType="String"   column="lin_clon_vig"           jdbcType="varchar"/>
    </resultMap>

    <resultMap id="DetalleLineaHipotecario" class="java.util.HashMap">
        <result property="id_detalle_linea"     javaType="Long"     column="id_detalle_linea"       jdbcType="numeric"/>
        <result property="tipo_linea"           javaType="String"   column="tipo_linea"             jdbcType="varchar"/>
        <result property="moneda"               javaType="String"   column="moneda"                 jdbcType="varchar"/>
        <result property="monto_max"            javaType="Double"   column="monto_max"              jdbcType="decimal"/>
        <result property="vencimiento"          javaType="Date"     column="vencimiento"            jdbcType="datetime"/>
        <result property="cond_garantia"        javaType="String"   column="cond_garantia"          jdbcType="varchar"/>
        <result property="vigencia"             javaType="String"   column="vigencia"               jdbcType="varchar"/>
        <result property="glosa_tipo_linea"     javaType="String"   column="glosa_tipo_linea"       jdbcType="varchar"/>
        <result property="glosa_moneda"         javaType="String"   column="glosa_moneda"           jdbcType="varchar"/>
        <result property="glosa_cond_garantia"  javaType="String"   column="glosa_cond_garantia"    jdbcType="varchar"/>
        <result property="glosa_vigencia"       javaType="String"   column="glosa_vigencia"         jdbcType="varchar"/>
        <result property="lin_clon_vig"         javaType="String"   column="lin_clon_vig"           jdbcType="varchar"/>
        <result property="renta_dividendo"      javaType="Double"   column="renta_dividendo"        jdbcType="numeric"/>
        <result property="valor_vivienda_uf"    javaType="Double"   column="valor_vivienda_uf"      jdbcType="numeric"/>
        <result property="plazo_maximo"         javaType="Long"     column="plazo_maximo"           jdbcType="numeric"/>
        <result property="objetivo"             javaType="String"   column="objetivo"               jdbcType="varchar"/>
        <result property="dividendo_uf"         javaType="Double"   column="dividendo_uf"           jdbcType="numeric"/>
        <result property="porcentaje_finan"     javaType="Double"   column="porcentaje_finan"       jdbcType="numeric"/>
        <result property="tasacion_uf"          javaType="Double"   column="tasacion_uf"            jdbcType="numeric"/>
        <result property="monto_credito_uf"     javaType="Double"   column="monto_credito_uf"       jdbcType="numeric"/>
        <result property="tipo_credito"         javaType="String"   column="tipo_credito"           jdbcType="varchar"/>
        <result property="posee_aval"           javaType="String"   column="posee_aval"             jdbcType="varchar"/>
        <result property="tipo_aval"            javaType="String"   column="tipo_aval"              jdbcType="varchar"/>
        <result property="rut_aval"             javaType="Long"     column="rut_aval"               jdbcType="numeric"/>
        <result property="digito_aval"          javaType="String"   column="digito_aval"            jdbcType="varchar"/>
        <result property="renta_liquida_aval"   javaType="Double"   column="renta_liquida_aval"     jdbcType="decimal"/>
        <result property="solicita_recurse"     javaType="String"   column="solicita_recurse"       jdbcType="varchar"/>
        <result property="solicita_cca_sbif"    javaType="String"   column="solicita_cca_sbif"      jdbcType="varchar"/>
        <result property="glosa_objetivo"       javaType="String"   column="glosa_objetivo"         jdbcType="varchar"/>
        <result property="glosa_tipo_credito"   javaType="String"   column="glosa_tipo_credito"     jdbcType="varchar"/>
        <result property="glosa_tipo_aval"      javaType="String"   column="glosa_tipo_aval"        jdbcType="varchar"/>
        <result property="glosa_posee_aval"     javaType="String"   column="glosa_posee_aval"       jdbcType="varchar"/>
        <result property="glosa_sol_recurse"    javaType="String"   column="glosa_sol_recurse"      jdbcType="varchar"/>
        <result property="glosa_sol_cca_sbif"   javaType="String"   column="glosa_sol_cca_sbif"     jdbcType="varchar"/>
    </resultMap>

    <resultMap id="DetalleLineaPregrado" class="java.util.HashMap">
        <result property="id_detalle_linea"     javaType="Long"     column="id_detalle_linea"       jdbcType="numeric"/>
        <result property="tipo_linea"           javaType="String"   column="tipo_linea"             jdbcType="varchar"/>
        <result property="moneda"               javaType="String"   column="moneda"                 jdbcType="varchar"/>
        <result property="monto_max"            javaType="Double"   column="monto_max"              jdbcType="decimal"/>
        <result property="vencimiento"          javaType="Date"     column="vencimiento"            jdbcType="datetime"/>
        <result property="cond_garantia"        javaType="String"   column="cond_garantia"          jdbcType="varchar"/>
        <result property="vigencia"             javaType="String"   column="vigencia"               jdbcType="varchar"/>
        <result property="glosa_tipo_linea"     javaType="String"   column="glosa_tipo_linea"       jdbcType="varchar"/>
        <result property="glosa_moneda"         javaType="String"   column="glosa_moneda"           jdbcType="varchar"/>
        <result property="glosa_cond_garantia"  javaType="String"   column="glosa_cond_garantia"    jdbcType="varchar"/>
        <result property="glosa_vigencia"       javaType="String"   column="glosa_vigencia"         jdbcType="varchar"/>
        <result property="lin_clon_vig"         javaType="String"   column="lin_clon_vig"           jdbcType="varchar"/>
        <result property="tipoDeFinan"          javaType="String"   column="tipoDeFinanciamiento"   jdbcType="varchar"/>
        <result property="universidad"          javaType="String"   column="universidad"            jdbcType="varchar"/>
        <result property="carrera"              javaType="String"   column="carrera"                jdbcType="varchar"/>
        <result property="plazoEnCuotaAnyos"    javaType="Integer"  column="plazoEnCuotaAnyos"      jdbcType="int"/>
        <result property="plazoDeGraciaAnyos"   javaType="Integer"  column="plazoDeGraciaAnyos"     jdbcType="int"/>
        <result property="anyoEnCurso"          javaType="Integer"  column="anyoEnCurso"            jdbcType="int"/>
        <result property="anyoIngresoCarrera"   javaType="Integer"  column="anyoIngresoCarrera"     jdbcType="int"/>
        <result property="anyoAFinanciar"       javaType="Integer"  column="anyoAFinanciar"         jdbcType="int"/>
        <result property="duracionCarrera"      javaType="Integer"  column="duracionCarrera"        jdbcType="int"/>
        <result property="montoMatriculaUF"     javaType="Double"   column="montoMatriculaUF"       jdbcType="numeric"/>
        <result property="montoTotalFinanUF"    javaType="Double"   column="montoTotalFinanciarUF"  jdbcType="numeric"/>
        <result property="rentaFamBrutaPesos"   javaType="Double"   column="rentaFamBrutaPesos"     jdbcType="numeric"/>
        <result property="montoGastosAsocUF"    javaType="Double"   column="montoGastosAsociadosUF" jdbcType="numeric"/>
        <result property="patAvalEnPesos"       javaType="Double"   column="patrimonioAvalEnPesos"  jdbcType="numeric"/>
        <result property="glosa_tipoDeFinan"    javaType="String"   column="glosa_tipoDeFinan"      jdbcType="varchar"/>
        <result property="glosa_universidad"    javaType="String"   column="glosa_universidad"      jdbcType="varchar"/>
        <result property="glosa_carrera"        javaType="String"   column="glosa_carrera"          jdbcType="varchar"/>
    </resultMap>

    <resultMap id="DetalleLineaPostgrado" class="java.util.HashMap">
        <result property="id_detalle_linea"     javaType="Long"     column="id_detalle_linea"       jdbcType="numeric"/>
        <result property="tipo_linea"           javaType="String"   column="tipo_linea"             jdbcType="varchar"/>
        <result property="moneda"               javaType="String"   column="moneda"                 jdbcType="varchar"/>
        <result property="monto_max"            javaType="Double"   column="monto_max"              jdbcType="decimal"/>
        <result property="vencimiento"          javaType="Date"     column="vencimiento"            jdbcType="datetime"/>
        <result property="cond_garantia"        javaType="String"   column="cond_garantia"          jdbcType="varchar"/>
        <result property="vigencia"             javaType="String"   column="vigencia"               jdbcType="varchar"/>
        <result property="glosa_tipo_linea"     javaType="String"   column="glosa_tipo_linea"       jdbcType="varchar"/>
        <result property="glosa_moneda"         javaType="String"   column="glosa_moneda"           jdbcType="varchar"/>
        <result property="glosa_cond_garantia"  javaType="String"   column="glosa_cond_garantia"    jdbcType="varchar"/>
        <result property="glosa_vigencia"       javaType="String"   column="glosa_vigencia"         jdbcType="varchar"/>
        <result property="lin_clon_vig"         javaType="String"   column="lin_clon_vig"           jdbcType="varchar"/>
        <result property="pais"                 javaType="String"   column="pais"                   jdbcType="varchar"/>
        <result property="grado"                javaType="String"   column="grado"                  jdbcType="varchar"/>
        <result property="universidad"          javaType="String"   column="universidad"            jdbcType="varchar"/>
        <result property="tipoDeFinanciamiento" javaType="String"   column="tipoDeFinanciamiento"   jdbcType="varchar"/>
        <result property="montoMatriculaUF"     javaType="Double"   column="montoMatriculaUF"       jdbcType="decimal"/>
        <result property="montoTotalAFinanUF"   javaType="Double"   column="montoTotalAFinanciarUF" jdbcType="decimal"/>
        <result property="montoGastosAsocUF"    javaType="Double"   column="montoGastosAsociadosUF" jdbcType="decimal"/>
        <result property="garantias"            javaType="Double"   column="garantias"              jdbcType="decimal"/>
        <result property="plazoCuotaEnAnyos"    javaType="Integer"  column="plazoCuotaEnAnyos"      jdbcType="int"/>
        <result property="plazoGraciaEnAnyos"   javaType="Integer"  column="plazoGraciaEnAnyos"     jdbcType="int"/>
        <result property="glosa_pais"           javaType="String"   column="glosa_pais"             jdbcType="varchar"/>
        <result property="glosa_grado"          javaType="String"   column="glosa_grado"            jdbcType="varchar"/>
        <result property="glosa_universidad"    javaType="String"   column="glosa_universidad"      jdbcType="varchar"/>
        <result property="glosa_tipoDeFinan"    javaType="String"   column="glosa_tipoDeFinan"      jdbcType="varchar"/>
    </resultMap>

    <resultMap id="RevisionLDCSolicitada" class="java.util.HashMap">
        <result property="fec_vcmto_mar_venc"       javaType="String"   column="fec_vcmto_mar_venc"         jdbcType="varchar"/>
        <result property="fec_vcmto_dlc_venc"       javaType="String"   column="fec_vcmto_dlc_venc"         jdbcType="varchar"/>
        <result property="venc_mar_menor_venc_lin"  javaType="String"   column="venc_mar_menor_venc_lin"    jdbcType="varchar"/>
        <result property="mont_lin_may_mont_mar"    javaType="String"   column="mont_lin_may_mont_mar"      jdbcType="varchar"/>
    </resultMap>

    <!-- Fin Linea de Credito -->

    <!-- Carga Financiera-->
    <resultMap id="cargaFinancieraPyme" class="java.util.HashMap">
        <result property="num_reg"          javaType="String"  column="num_reg"        jdbcType="numeric"/>
        <result property="rut"              javaType="long"    column="rut"            jdbcType="numeric"/>
        <result property="nro_solicitud"    javaType="long"    column="nro_solicitud"  jdbcType="numeric"/>
        <result property="tipo_deuda"       javaType="String"  column="tipo_deuda"     jdbcType="char"/>
        <result property="banco"            javaType="String"  column="banco"          jdbcType="char"/>
        <result property="total_deuda"      javaType="Long"    column="total_deuda"    jdbcType="numeric"/>
        <result property="total_cuotas"     javaType="Integer"     column="total_cuotas"   jdbcType="numeric"/>
        <result property="cuotas_pagadas"   javaType="Integer"     column="cuotas_pagadas" jdbcType="numeric"/>
        <result property="valor_cuota"      javaType="long"    column="valor_cuota"    jdbcType="numeric"/>
    </resultMap>
    
    <resultMap id="cargaFinanciera" class="java.util.HashMap">
        <result property="rut"  column="rut"/>
        <result property="dv"  column="dv"/>
        <result property="nombres"  column="nombres"/>
        <result property="apellidos"  column="apellidos"/>
        <result property="tipo_relacion"  column="tipo_relacion"/>
        <result property="nro_solicitud"  column="nro_solicitud"/>
        <result property="renta_fija"  column="renta_fija"/>
        <result property="renta_variable"  column="renta_variable"/>
        <result property="renta_lm_pesos"  column="renta_lm_pesos"/>
        <result property="renta_lm_uf"  column="renta_lm_uf"/>
        <result property="uf"  column="uf"/>
        <result property="fecha_uf"  column="fecha_uf"/>
        <result property="consumo"  column="consumo"/>
        <result property="comercial"  column="comercial"/>
        <result property="hipotecario"  column="hipotecario"/>
        <result property="tipo_calculo"  column="tipo_calculo"/>
        <result property="carga_maxima"  column="carga_maxima"/>
        <result property="carga_actual"  column="carga_actual"/>
        <result property="carga_futura"  column="carga_futura"/>
        <result property="periodo"  column="periodo"/>
        <result property="error_deuda_bci"  column="error_deuda_bci"/>
        <result property="error_informacion_de_credito"  column="error_informacion_de_credito"/>
        <result property="colorSemaforo"  javaType="String" column="sem_carga_financiera"  jdbcType="char"/>
        <result property="fecha_ingreso"  column="fecha_ingreso" />
    </resultMap>

    <resultMap id="detalleCalculoCargaFinanciera" class="java.util.HashMap">
        <result property="deuda_bci"  column="deuda_bci"/>
        <result property="deuda_no_bci"  column="deuda_no_bci"/>
        <result property="deuda_total"  column="deuda_total"/>
        <result property="carga_mensual"  column="carga_mensual"/>
        <result property="conoce_carga_real"  column="conoce_carga_real"/>
        <result property="inc_deuda"  column="inc_deuda"/>
        <result property="inc_carga"  column="inc_carga"/>
    </resultMap>
    <!-- Fin Carga Financiera-->

    <!-- Creacion de la solicitud -->
    <resultMap id="nuevaSolicitud" class="java.util.HashMap">
        <result property="nro_solicitud"            javaType="Long"     column="nro_solicitud"          jdbcType="numeric" />
        <result property="nombres"                  javaType="String"   column="nombres"                jdbcType="varchar" />
        <result property="apellidos"                javaType="String"   column="apellidos"              jdbcType="varchar" />
        <result property="rut"                      javaType="Long"     column="rut"                    jdbcType="integer" />
        <result property="dv"                       javaType="String"   column="dv"                     jdbcType="varchar" />
        <result property="oficina"                  javaType="String"   column="oficina"                jdbcType="varchar" />
        <result property="fecha_llegada"            javaType="Date"     column="fecha_llegada"          jdbcType="datetime" />
        <result property="fecha_creacion"           javaType="Date"     column="fecha_creacion"         jdbcType="datetime" />
        <result property="estado"                   javaType="String"   column="estado"                 jdbcType="varchar" />
        <result property="recibido_de"              javaType="String"   column="recibido_de"            jdbcType="varchar" />
        <result property="ejecutivo_solicitante"    javaType="String"   column="ejecutivo_solicitante"  jdbcType="varchar" />
        <result property="telefono_solicitante"     javaType="Long"     column="telefono_solicitante"   jdbcType="numeric" />
        <result property="monbre_solicitante"       javaType="String"   column="monbre_solicitante"     jdbcType="varchar" />
        <result property="tipo_persona"             javaType="String"   column="tipo_persona"           jdbcType="varchar" />
        <result property="origen"                   javaType="String"   column="origen"                 jdbcType="varchar" />
    </resultMap>

    <resultMap id="obtenerSolicitud" class="java.util.HashMap">
        <result property="ID_SOLICITUD"     javaType="Long"     column="ID_SOLICITUD"       jdbcType="numeric" />
        <result property="NOM_TITULAR"      javaType="String"   column="NOM_TITULAR"        jdbcType="varchar" />
        <result property="APE_TITULAR"      javaType="String"   column="APE_TITULAR"        jdbcType="varchar" />
        <result property="RUT_TITULAR"      javaType="Long"     column="RUT_TITULAR"        jdbcType="integer" />
        <result property="DV_TITULAR"       javaType="String"   column="DV_TITULAR"         jdbcType="varchar" />
        <result property="COD_OFICINA_SOL"  javaType="String"   column="COD_OFICINA_SOL"    jdbcType="varchar" />
        <result property="FEC_LLEGADA"      javaType="Date"     column="FEC_LLEGADA"        jdbcType="datetime" />
        <result property="FEC_CREACION"     javaType="Date"     column="FEC_CREACION"       jdbcType="datetime" />
        <result property="FEC_ACTUALIZACION" javaType="Date"    column="FEC_ACTUALIZACION"  jdbcType="datetime" />
        <result property="EJE_ORIGEN"       javaType="String"   column="EJE_ORIGEN"         jdbcType="varchar" />
        <result property="EJE_ACTUALIZO"    javaType="String"   column="EJE_ACTUALIZO"      jdbcType="varchar" />
        <result property="COD_EJECUTIVO_SOL" javaType="String"  column="COD_EJECUTIVO_SOL"  jdbcType="varchar" />
        <result property="DES_OFICINA_SOL"  javaType="String"   column="DES_OFICINA_SOL"    jdbcType="varchar" />
        <result property="ESTADO_SOL"       javaType="String"   column="ESTADO_SOL"         jdbcType="varchar" />
        <result property="COD_ESTADO_SOL"   javaType="int"      column="COD_ESTADO_SOL"     jdbcType="int" />
        <result property="TELEFONO_SOL"     javaType="Long"     column="TELEFONO_SOL"       jdbcType="numeric" />
        <result property="NOM_EJECUTIVO_SOL" javaType="String"  column="NOM_EJECUTIVO_SOL"  jdbcType="varchar" />
        <result property="ORIGEN_SOL" 		javaType="String" 	column="ORIGEN_SOL"  		jdbcType="varchar" />
        <result property="ID_BANCA"         javaType="String"   column="ID_BANCA"           jdbcType="char"/>
    </resultMap>

    <resultMap id="tiposGarantiaDlcSol" class="java.util.HashMap">
        <result property="idDetalle"            javaType="Double"     column="idDetalle"        jdbcType="numeric" />
        <result property="tipoGarantia"         javaType="String"     column="tipoGarantia"     jdbcType="varchar" />
        <result property="subTipoGarantia"      javaType="String"     column="subTipoGarantia"  jdbcType="varchar" />
        <result property="cobertura"            javaType="Double"     column="cobertura"        jdbcType="numeric" />
        <result property="glosaTipoGar"         javaType="String"     column="glosaTipoGar"     jdbcType="varchar" />
        <result property="glosaSubTipoGar"      javaType="String"     column="glosaSubTipoGar"  jdbcType="varchar" />
    </resultMap>

    <resultMap id="idDetalleLineaSolicitada" class="java.util.HashMap">
        <result property="id_detalle_linea_sol" javaType="Long" column="id_detalle_linea_sol"   jdbcType="numeric" />
    </resultMap>

    <!-- Fin Creacion de la solicitud -->

    <!-- Solicitantes -->
    <resultMap id="grupoClienteSolicitud" class="java.util.HashMap">
        <result property="rut"          javaType="Long"     column="rut"        jdbcType="numeric"/>
        <result property="dv"           javaType="String"   column="dv"         jdbcType="char"/>
        <result property="nombres"      javaType="String"   column="nombres"    jdbcType="varchar"/>
        <result property="apellidos"    javaType="String"   column="apellidos"  jdbcType="varchar"/>
        <result property="renta_fija"   javaType="Double"   column="renta_fija" jdbcType="decimal"/>
        <result property="renta_var"    javaType="Double"   column="renta_var"  jdbcType="decimal"/>
    </resultMap>

    <resultMap id="grupoSolicitud" class="java.util.HashMap">
        <result property="rut" javaType="Long"  column="rut" jdbcType="numeric"/>
        <result property="dv"  javaType="String" column="dv" jdbcType="char"/>
        <result property="nombres"  javaType="String" column="nombres" jdbcType="char"/>
        <result property="evaluacion"  javaType="String" column="evaluacion" jdbcType="char"/>
        <result property="tipo_rel"  javaType="String" column="tipo_rel" jdbcType="varchar"/>
        <result property="glosa_tipo_rel"  javaType="String" column="glosa_tipo_rel" jdbcType="varchar"/>
    </resultMap>
    <!-- Fin Solicitantes -->

    <!-- Datos Basicos cliente -->
    <resultMap id="datosBasicosClientePersona" class="java.util.HashMap">
        <result property="rut"                      column="rut"/>
        <result property="digito"                   column="digito"/>
        <result property="cic"                      column="cic"/>
        <result property="nombres"                  column="nombres"/>
        <result property="apellidos"                column="apellidos"/>
        <result property="edad"                     column="edad"/>
        <result property="nro_hijos"                column="nro_hijos"/>
        <result property="nro_cargas"               column="nro_cargas"/>
        <result property="antiguedad_emp_trab"      column="antiguedad_emp_trab"/>
        <result property="renta_fija"               column="renta_fija"/>
        <result property="renta_variable"           column="renta_variable"/>
        <result property="renta_liquida"            column="renta_liquida"/>
        <result property="periodo_renta_fija"       column="periodo_renta_fija"/>
        <result property="periodo_renta_variable"   column="periodo_renta_variable"/>
        <result property="rut_emp_trab"             column="rut_emp_trab"/>
        <result property="digito_emp_trab"          column="digito_emp_trab"/>
        <result property="nombre_emp_trab"          column="nombre_emp_trab"/>
        <result property="nombre_emp_trab_ant"      column="nombre_emp_trab_ant"/>
        <result property="anno_ing_res_act"         column="anno_ing_res_act"/>
        <result property="anno_ing_universidad"     column="anno_ing_universidad"/>
        <result property="meses_trab_emp_ant"       column="meses_trab_emp_ant"/>
        <result property="fecha_cta_cte_vig"        column="fecha_cta_cte_vig"/>
        <result property="fecha_nacimiento"         column="fecha_nacimiento"/>
        <result property="banca"                    column="banca"/>
        <result property="tipo_cliente"             column="tipo_cliente"/>
        <result property="estado_civil"             column="estado_civil"/>
        <result property="nivel_educacional"        column="nivel_educacional"/>
        <result property="situacion_viv"            column="situacion_viv"/>
        <result property="oficina"                  column="oficina"/>
        <result property="segmento"                 column="segmento"/>
        <result property="nacionalidad"             column="nacionalidad"/>
        <result property="tipo_plan"                column="tipo_plan"/>
        <result property="sexo"                     column="sexo"/>
        <result property="actividad"                column="actividad"/>
        <result property="universidad"              column="universidad"/>
        <result property="carrera"                  column="carrera"/>
        <result property="situacion_laboral"        column="situacion_laboral"/>
        <result property="desc_banca"               column="desc_banca"/>
        <result property="desc_tipo_cli"            column="desc_tipo_cli"/>
        <result property="desc_estado_civil"        column="desc_estado_civil"/>
        <result property="desc_nivel_educ"          column="desc_nivel_educ"/>
        <result property="desc_situacion_viv"       column="desc_situacion_viv"/>
        <result property="desc_oficina"             column="desc_oficina"/>
        <result property="desc_segmento"            column="desc_segmento"/>
        <result property="desc_nacionalidad"        column="desc_nacionalidad"/>
        <result property="desc_tipo_plan"           column="desc_tipo_plan"/>
        <result property="desc_sexo"                column="desc_sexo"/>
        <result property="desc_actividad"           column="desc_actividad"/>
        <result property="desc_universidad"         column="desc_universidad"/>
        <result property="desc_carrera"             column="desc_carrera"/>
        <result property="desc_sit_laboral"         column="desc_sit_laboral"/>
        <result property="rut_conyuge"              column="rut_conyuge"/>
        <result property="dv_conyuge"               column="dv_conyuge"/>
        <result property="renta_conyuge"            column="renta_conyuge"/>
        <result property="nombre_completo_conyuge"  column="nombre_completo_conyuge"/>
        <result property="regimen_conyugal"         column="regimen_conyugal"/>
        <result property="id_act_conyuge"           column="id_act_conyuge"/>
        <result property="desc_regimen_cony"        column="desc_regimen_cony"/>
        <result property="desc_act_cony"            column="desc_act_cony"/>
        <result property="desc_act_cda"             column="desc_act_cda"/>
        <result property="desc_cont_lab_cda"        column="desc_cont_lab_cda"/>
        <result property="desc_nac_cda"             column="desc_nac_cda"/>
        <result property="res_def_cda"              column="res_def_cda"/>
        <result property="cod_actividad_sii"        javaType="Long" column="cod_actividad_sii" jdbcType="numeric"/>
    </resultMap>

    <resultMap id="datosBasicosClienteEmpresa" class="java.util.HashMap">
        <result property="rut"                      column="rut"/>
        <result property="digito"                   column="digito"/>
        <result property="cic"                      column="cic"/>
        <result property="razonSocial"              column="razonSocial"/>
        <result property="ejecutivoDestino"         column="ejecutivoDestino"/>
        <result property="nombrejecutivoDestino"    column="nombrejecutivoDestino"/>
        <result property="operaOtraOficina"         column="operaOtraOficina"/>
        <result property="fecha_inicio"             column="fecha_inicio"/>
        <result property="fecha_cta_cte_vig"        column="fecha_cta_cte_vig"/>
        <result property="clasificacion"            column="clasificacion"/>
        <result property="oficinaEjecutivoDestino"  column="oficinaEjecutivoDestino"/>
        <result property="banca"                    column="banca"/>
        <result property="actividad"                column="actividad"/>
        <result property="matriz_sucursal"          column="matriz_sucursal"/>
        <result property="categoriaEmpresa"         column="categoriaEmpresa"/>
        <result property="sector_economico"         column="sector_economico"/>
        <result property="desc_oficinaEjecutivo"    column="desc_oficinaEjecutivo"/>
        <result property="desc_banca"               column="desc_banca"/>
        <result property="desc_actividad"           column="desc_actividad"/>
        <result property="desc_matriz_sucursal"     column="desc_matriz_sucursal"/>
        <result property="desc_categoriaEmpresa"    column="desc_categoriaEmpresa"/>
        <result property="desc_sector_economico"    column="desc_sector_economico"/>
        <result property="sucesion"                 column="sucesion"/>
        <result property="ventaja_competitiva"      column="ventaja_competitiva"/>
        <result property="tipo_administracion"      column="tipo_administracion"/>
        <result property="tipo_persona_pyme"        column="tipo_persona_pyme"/>
        <result property="id_act_economica_dai"     column="id_act_economica_dai"/>
        <result property="tipo_cliente_emp"         column="tipo_cliente_emp"/>
        <result property="deuda_corto_plz"          column="deuda_corto_plz"/>
        <result property="deuda_largo_plz"          column="deuda_largo_plz"/>
        <result property="cod_actividad_sii"        column="cod_actividad_sii"/>
        <result property="antiguedad_giro"          column="antiguedad_giro"/>
        <result property="sector_economico_emp"     column="sector_economico_emp"/>
    </resultMap>

    <resultMap class="java.util.HashMap" id="res_dat_bas_eval_cda">
        <result property="renta_fija_cda"   javaType="Double"   column="renta_fija_cda" jdbcType="decimal"/>
        <result property="renta_var_cda"    javaType="Double"   column="renta_var_cda"  jdbcType="decimal"/>
        <result property="renta_liq_cda"    javaType="Double"   column="renta_liq_cda"  jdbcType="decimal"/>
    </resultMap>
    <!-- Fin Datos Basicos cliente -->

    <!-- Otros. No pertenecen a algun modulo en particular. -->
    <resultMap id="estadoSolicitud" class="java.util.HashMap">
        <result property="codigo"                       column="codigo"/>
        <result property="descripcion"                  column="descripcion"/>
    </resultMap>

    <resultMap id="opcionesSolicitud" class="java.util.HashMap">
        <result property="codigo"       column="codigo"/>
        <result property="glosa"        column="glosa"/>
    </resultMap>
    <!-- Fin Otros. No pertenecen a algun modulo en particular. -->

    <!-- Comienzo Result Asignacion de Solicitudes -->
    <resultMap id="asignacionSolicitudes" class="java.util.HashMap">
        <result property="rutCliente"           javaType="Long"     column="rut"                jdbcType="int" />
        <result property="dvCliente"            javaType="String"   column="digitoVerificador"  jdbcType="varchar" />
        <result property="idSolicitud"          javaType="Long"     column="nro_solicitud"      jdbcType="int" />
        <result property="nombreCliente"        javaType="String"   column="nombre"             jdbcType="varchar" />
        <result property="banca"                javaType="String"   column="banca"             jdbcType="varchar" />
        <result property="oficina"              javaType="String"   column="oficina"             jdbcType="varchar" />
        <result property="regional"             javaType="String"   column="regional"             jdbcType="varchar" />
        <result property="fechaCreacion"        javaType="Date"     column="fecha_creacion"     jdbcType="DATE" />
    </resultMap>
    <!-- Fin Result Asignacion de Solicitudes -->
    
    <!-- Garantias -->
    <resultMap id="detalleGarantia" class="java.util.HashMap">
        <result property="id_garantia"         	javaType="Long"     column="id_garantia"                jdbcType="numeric" />
        <result property="tipo_gtia"            javaType="String"   column="tipo_gtia"  				jdbcType="varchar" />
        <result property="tipo_bien"          	javaType="String"   column="tipo_bien"      			jdbcType="varchar" />
        <result property="valor_tasacion"       javaType="Double"   column="valor_tasacion"             jdbcType="numeric" />
        <result property="valor_liquidacion"    javaType="Double"   column="valor_liquidacion"          jdbcType="numeric" />
        <result property="fecha_tasacion"       javaType="Date"   	column="fecha_tasacion"             jdbcType="datetime" />
        <result property="cobertura"            javaType="String"   column="cobertura"             		jdbcType="varchar" />
        <result property="situacion_tasacion"   javaType="String"   column="situacion_tasacion"     	jdbcType="char" />
        <result property="vigencia"        		javaType="String"   column="vigencia"     				jdbcType="varchar" />
    </resultMap>
    
    <resultMap id="detalleGarantiaExterna" class="java.util.HashMap">
        <result property="id_garantia"         	javaType="Long"     column="id_garantia"                jdbcType="numeric" />
        <result property="tipo_gtia"            javaType="String"   column="tipo_gtia"  				jdbcType="varchar" />
        <result property="estado"            	javaType="String"   column="estado"  					jdbcType="varchar" />
        <result property="valor_comercial"       javaType="Double"   column="valor_comercial"             jdbcType="numeric" />
        <result property="valor_liquidacion"    javaType="Double"   column="valor_liquidacion"          jdbcType="numeric" />
        <result property="cobertura"            javaType="String"   column="cobertura"             		jdbcType="varchar" />
        <result property="vigencia"        		javaType="String"   column="vigencia"     				jdbcType="varchar" />
    </resultMap>
    
    <resultMap id="marcaGarantia" class="java.util.HashMap">
        <result property="tiene_garantia"         	javaType="Integer"     column="tiene_garantia"                jdbcType="numeric" />
    </resultMap>
    
    <resultMap id="porcentajeParticipacion" class="java.util.HashMap">
		<result property="rut_socio" javaType="Long" column="rut_socio"
			jdbcType="numeric" />
		<result property="porcentaje" javaType="Double"
			column="porcentaje" jdbcType="numeric" />
    </resultMap>

<resultMap id="consultaDeudorIndirecto" class="java.util.HashMap">
		<result property="deudorDirecto" javaType="Long"
			column="deudorDirecto" jdbcType="numeric" />
	</resultMap>
	
<resultMap id="consultarConyugue" class="java.util.HashMap">
		<result property="rutConyuge" javaType="Long"
			column="rutConyuge" jdbcType="numeric" />
	</resultMap>
    

<!-- FIN GARANTIAS -->

	<!-- REEMPLAZOS EJECUTIVOS -->
	<resultMap id="listaOficinas" class="java.util.HashMap">
        <result property="id_oficina"         	javaType="String"     column="id_oficina"                jdbcType="varchar" />
        <result property="descripcion"          javaType="String"     column="descripcion"               jdbcType="varchar"/>
    </resultMap>
    <resultMap id="respuestaReemplazo" class="java.util.HashMap">
        <result property="respuesta" javaType="int" column="respuesta"   jdbcType="int" />
    </resultMap>
    <resultMap id="respuestaObtenerPerfilObservador" class="java.util.HashMap">
        <result property="codigoEjecutivo"  javaType="String" 	column="cod_eje"   jdbcType="int" />
        <result property="fecha" 			javaType="Date" 	column="fec_ini_eje"   jdbcType="Date" />
    </resultMap>    
	<!-- FIN REEMPLAZOS EJECUTIVOS -->
	
<!-- FIN RESULT MAP -->

<!-- PROCEDIMIENTOS ALMACENADOS -->

	<!-- REEMPLAZO EJECUTIVOS -->
	<procedure id="obtenerOficinasReemplazo" resultMap="listaOficinas" parameterClass="java.util.HashMap">
        {CALL sp_con_ofi_suc}
    </procedure>
    
    <procedure id="obtenerPerfilObservador" parameterClass="java.util.HashMap" resultMap="respuestaObtenerPerfilObservador">
        {CALL sp_cns_per_obs_suc }
    </procedure>
    <procedure id="ingresarPerfilObservador" parameterClass="java.util.HashMap" resultMap="respuestaReemplazo">
        {CALL sp_ing_per_obs_suc (#cod_eje#)}
    </procedure>
    <procedure id="eliminarPerfilObservador" parameterClass="java.util.HashMap" resultMap="respuestaReemplazo">
        {CALL sp_del_per_obs_suc (#cod_eje#)}
    </procedure>
	<!-- FIN REEMPLAZOS EJECUTIVOS -->
	
    <!-- Comienzo SP Analisis Solicitud -->
    <procedure id="obtenerListadoDetallesAnalisisActivosRelevantes" resultMap="detalleAnalisisActivosRelevantes" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_lis_act_relev (#idAnalisis#)}
    </procedure>    
    <procedure id="obtenerListadoDetallesAnalisisCargaFinanciera" resultMap="detalleAnalisisCargaFinanciera" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_lis_carg_fin (#idAnalisis#)}
    </procedure>
    <procedure id="obtenerDetalleAnalisisActivosRelevantes" resultMap="detalleAnalisisActivosRelevantes" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_det_act_relev (#idAnalisis#, #idDetalle#)}
    </procedure>    
    <procedure id="obtenerDetalleAnalisisCargaFinanciera" resultMap="detalleAnalisisCargaFinanciera" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_det_carg_fin (#idAnalisis#, #idDetalle#)}
    </procedure>
    <procedure id="agregaDetalleAnalisiCargaFinanciera" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_det_carg_fin (#idAnalisis#, #tipoDeuda#, #banco#, #saldoInsoluto#, #plazoTotal#, #cuotaActual#, #valorCuota#, #destino#, #tipoGarantia#, #valorGarantia#, #usuRegistro#)}
    </procedure>    
    <procedure id="agregarDetalleAnalisisActivoRelevante" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_det_act_relev(#idAnalisis#, #tipoBien#, #caracteristica#, #valor#, #comentario#, #usuRegistro#)}
    </procedure>
    <procedure id="modificaDetalleAnalisiCargaFinanciera" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upt_det_carg_fin (#idAnalisis#, #idDetalle#, #tipoDeuda#, #banco#, #saldoInsoluto#, #plazoTotal#, #cuotaActual#, #valorCuota#, #destino#, #tipoGarantia#, #valorGarantia#, #usuRegistro#)}
    </procedure>    
    <procedure id="modificarDetalleAnalisisActivoRelevante" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upt_det_act_relev (#idAnalisis#, #idDetalle#, #tipoBien#, #caracteristica#, #valor#, #comentario#, #usuRegistro#)}
    </procedure>
    <procedure id="eliminarDetalleAnalisisActivoRelevante" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_del_det_act_relev (#idAnalisis#, #idDetalle#, #usuRegistro#)}
    </procedure>    
    <procedure id="eliminaDetalleAnalisiCargaFinanciera" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_del_det_carg_fin (#idAnalisis#, #idDetalle#, #usuRegistro#)}
    </procedure>
    <procedure id="obtenerAnalisisSolicitud" resultMap="analisisSolicitud" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_analisis (#idSolicitud#, #usuario#)}
    </procedure>
    <procedure id="obtenerCrearAnalisisSolicitudAnterior" resultMap="analisisSolicitud" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_als_ant (#rutCliente#, #idSolicitudActual#, #usuario#)}
    </procedure>
    <procedure id="obtenerListadoObservacionesAnalisis" resultMap="observacionAnalisis" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_obs_als (#idAnalisis#)}
    </procedure>


    <!-- MODIFICAR OBSERVACION ANALISIS SOLICITUD -->
    <parameterMap class="java.util.HashMap" id="parametrosModObsAnalisis">

        <!-- PRIMERA CONSULTA (SELECT) -->
        <parameter property="idAnalisis"            jdbcType="NUMERIC"  javaType="Long"/>
        <parameter property="codigoObservacion"     jdbcType="CHAR"     javaType="String"/>

        <!-- SEGUNDA CONSULTA (UPDATE) -->
        <parameter property="observacion"           jdbcType="TEXT"     javaType="String"/>
        <parameter property="usuario"               jdbcType="CHAR"     javaType="String"/>
        <parameter property="idAnalisis"            jdbcType="NUMERIC"  javaType="Long"/>
        <parameter property="codigoObservacion"     jdbcType="CHAR"     javaType="String"/>

        <!-- TERCERA CONSULTA (INSERT) -->
        <parameter property="idAnalisis"            jdbcType="NUMERIC"  javaType="Long"/>
        <parameter property="observacion"           jdbcType="TEXT"     javaType="String"/>
        <parameter property="codigoObservacion"     jdbcType="CHAR"     javaType="String"/>
        <parameter property="usuario"               jdbcType="CHAR"     javaType="String"/>
        <parameter property="usuario"               jdbcType="CHAR"     javaType="String"/>
    </parameterMap>

    <procedure id="modificarObservacionAnalisis" parameterMap="parametrosModObsAnalisis">
        DECLARE @fecha DATETIME
        SET @fecha = GETDATE()

        IF (SELECT 1 FROM analisis_obs WHERE id_analisis = ? AND tipo_obs = ?) IS NOT NULL
            BEGIN
                UPDATE analisis_obs SET
                    observacion= ?,
                    usuario_modifica=?,
                    fecha_modifica=@fecha
                WHERE
                    id_analisis = ?
                    AND tipo_obs = ?
            END
        ELSE
            BEGIN
                INSERT INTO analisis_obs(id_analisis, observacion, tipo_obs, usuario_creador, usuario_modifica, fecha_creacion, fecha_modifica)
                    VALUES (?,?,?,?,?,@fecha,@fecha)
            END
    </procedure>
    <!-- FIN MODIFICAR OBSERVACION ANALISIS SOLICITUD -->

    <procedure id="modificarAnalisisSolicitud" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upt_analisis (#idAnalisis#,#idSolicitud#, #excedenteDeficit#, #generacionGOB#, #ingresosExogenos#, #nuevaCarga#, #totalCargaFinancieraAnual#, #usuario#)}
    </procedure>
    <!-- Fin SP Analisis Solicitud -->

    <!-- Comienzo SP Parametro -->
    <procedure id="obtenerParametrosXGrupo" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_param_grp (#grupo#, <isNull property="codigo">NULL</isNull><isNotNull property="codigo">#codigo#</isNotNull>)}
    </procedure>

    <procedure id="obtenerListadoBancos" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_bancos (<isNull property="codigoBanco">NULL</isNull><isNotNull property="codigoBanco">#codigoBanco#</isNotNull>)}
    </procedure>

    <procedure id="obtenerEstados" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_est_sol(<isNull property="numeroSolicitud">NULL</isNull><isNotNull property="numeroSolicitud">#numeroSolicitud#</isNotNull>)}
    </procedure>

    <procedure id="obtenerListadoBancas" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_bancas(<isNull property="codigodeBanca">NULL</isNull><isNotNull property="codigodeBanca">#codigodeBanca#</isNotNull>)}
    </procedure>

    <procedure id="obtenerTiposDeResolucion" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_tpo_res(<isNull property="tipoDeResolucion">NULL</isNull><isNotNull property="tipoDeResolucion">#tipoDeResolucion#</isNotNull>,
                                       <isNull property="origen">NULL</isNull><isNotNull property="origen">#origen#</isNotNull>)}
    </procedure>

    <procedure id="obtenerPoliticas" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_politicas(<isNull property="codigo_tip_res">NULL</isNull><isNotNull property="codigo_tip_res">#codigo_tip_res#</isNotNull>)}
    </procedure>

    <procedure id="obtenerUniversidades" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_univ(<isNotNull property="id_universidad">#id_universidad#</isNotNull><isNull property="id_universidad">NULL</isNull>)}
    </procedure>

    <procedure id="obtenerOficinas" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_oficinas(<isNotNull property="codigoDeOficina">#codigoDeOficina#</isNotNull><isNull property="codigoDeOficina">NULL</isNull>)}
    </procedure>

    <procedure id="obtenerNacionalidades" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_nac_cli(<isNotNull property="codigoDeNacionalidad">#codigoDeNacionalidad#</isNotNull><isNull property="codigoDeNacionalidad">NULL</isNull>)}
    </procedure>

    <procedure id="obtenerActividadesCliente" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_act_cli(<isNotNull property="codigoDeActividad">#codigoDeActividad#</isNotNull><isNull property="codigoDeActividad">NULL</isNull>)}
    </procedure>

    <procedure id="obtenerProvinciasXRegion" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_prov(<isNotNull property="idRegion">#idRegion#</isNotNull><isNull property="idRegion">NULL</isNull>)}
    </procedure>

    <procedure id="obtenerComunasXProvincia" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_com_prv(<isNotNull property="idProvincia">#idProvincia#</isNotNull><isNull property="idProvincia">NULL</isNull>)}
    </procedure>
    <!-- Fin SP Parametro -->

    <!-- Comienzo SP Estado Situacion -->
    <procedure id="obtenerResumenEstadoSituacion" resultMap="estadoSituacion" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_est_sit (#idSolicitud#, #rutCliente#)}
    </procedure>

    <procedure id="crearEstadoSituacionPorAnterior" resultMap="fechaAteriorEstadoSituacion" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_est_sit_ant (#idSolicitud#, #rutCliente#, #usuario#)}
    </procedure>

    <procedure id="modificarEstadoSituacion" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_est_sit (
            #idSolicitud#,
            #rutCliente#,
            #tipoItem#,
            #codigoItem#,
            #usuario#,
            #cantidadItem#,
            #MontoItem#,
            #esPatrimonio#
        )}
    </procedure>
    <!-- Fin SP Estado Situación -->

    <!-- Estado Financiero Y Ventas -->
    <procedure id="obtenerEstadoFinanciero" parameterClass="java.util.HashMap" resultMap="estadoFinancieroSolicitante">
        {CALL sp_solicitud_cns_est_finan(
            #rut#,
            #numeroSolicitud#,
            #anioConsulta#
        )}
    </procedure>

    <procedure id="guardarEstadoFinanciero" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_est_finan (
            #rut#,
            #nro_solicitud#,
            #periodo#,
            #ingresos#,
            #result_final#,
            #result_final_ingresos#,
            #liquidez_corriente#,
            #permanencia_credito#,
            #permanencia_inventario#,
            #total_act#,
            #total_act_fijos#,
            #total_pas_exigible#,
            #total_pas_no_exigible#,
            #leverage#,
            #act_disp_dap#,          
        	#cta_doc_cobrar#,   
        	#cta_por_cobrar#,    
        	#existencia#,        
        	#otro_circ_act#,    
        	#total_circ_act#,    
        	#inv_empresas#,     
        	#cta_por_cobrar_lp#,
        	#act_leasing#,       
        	#otro_act_lp#,       
        	#total_otro_act#,   
        	#deuda_cuota_lp#,    
        	#deuda_leasing_cp#, 
        	#cta_doc_por_pagar#,
        	#cta_por_pagar_cp#, 
        	#otro_circ_pas#,    
        	#total_pas_circ#,    
        	#deuda_banco_lp#,
        	#deuda_leasing_lp#,
        	#cta_pagar_emp_lp#,
        	#otro_pas_lp#,      
        	#total_pas_lp#,  
        	#cap_pag#,        
       		#otra_cta_cap#,      
        	#utl_per_acum#,     
        	#utl_ejer#,         
        	#total_pas#,        
        	#cost_venta#,      
        	#depreciacion#,      
        	#result_expl#,    
        	#gasto_adm_vnt#,     
        	#resul_ope#,        
        	#gast_finan#,       
        	#corr_monetaria#,    
        	#utl_per_emp_rel#,  
        	#otro_ing_egre_neto#,
        	#result_no_ope#,    
        	#imp_renta#, 
        	#int_minoritario#,   
        	#amort_inver#,       
        	#gen_ope#,          
        	#utl_ope_vta#,      
        	#utl_venta#,         
        	#utl_patrimonio#,  
        	#liq_acida#,        
        	#pert_cta_pagar#,    
        	#resul_ope_gto#,     
        	#cober_pas#,
            #usuario_creador#,
            #patrimonio#,
            <isNotNull property="estado_balance">#estado_balance#</isNotNull>
            <isNull property="estado_balance">NULL</isNull>
        )}
    </procedure>

    <procedure id="obtenerVentasDelPeriodo" parameterClass="java.util.HashMap" resultMap="ventasDelPeriodo">
        {CALL sp_solicitud_cns_ventas(
            #rut#,
            #numeroSolicitud#,
            #anioConsulta#
        )}
    </procedure>

    <procedure id="guardarVentasDelPeriodo" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_ventas (
            #rut#,
            #nro_solicitud#,
            #periodo#,
            #ventas_enero#,
            #ventas_febrero#,
            #ventas_marzo#,
            #ventas_abril#,
            #ventas_mayo#,
            #ventas_junio#,
            #ventas_julio#,
            #ventas_agosto#,
            #ventas_septiembre#,
            #ventas_octubre#,
            #ventas_noviembre#,
            #ventas_diciembre#,
            #total_ventas#,
            #usuario_creador#
        )}
    </procedure>
    <!-- Fin Estado Financiero Y Ventas -->

    <!-- Resolucion Solicitud -->
    <procedure id="obtenerCuadroMando" parameterClass="java.util.HashMap" resultMap="cuadroDeMando">
        {CALL sp_solicitud_cns_cuadro_mando(
            #numeroSolicitud#
        )}
    </procedure>

    <procedure id="guardarAjusteGarantias" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_ajuste_gar(
            #nro_solicitud#,
            #rut#,
            #usuario_creador#,
            #monto_garantias#
        )}
    </procedure>

    <procedure id="obtenerEstadoEvaluacionSolicitud" parameterClass="java.util.HashMap" resultMap="evaluacionSolicitud">
        {CALL sp_solicitud_cns_est_evl_sol(
            #numeroSolicitud#
        )}
    </procedure>

    <procedure id="obtenerPoliticasSolicitud" parameterClass="java.util.HashMap" resultMap="politicasSolicitud">
        {CALL sp_solicitud_cns_politicas_sol(
            #numeroSolicitud#
        )}
    </procedure>

    <procedure id="guardarEstadoEvaluacion" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_est_eval_sol(
            #nro_solicitud#,
            #usuario#,
            #presentacion#,
            #perspectiva#,
            <isNull property="traspaso_banca">NULL</isNull><isNotNull property="traspaso_banca">#traspaso_banca#</isNotNull>,
            #resolutor#,
            <isNull property="tipo_resolucion">NULL</isNull><isNotNull property="tipo_resolucion">#tipo_resolucion#</isNotNull>,
            #renegociado#,
            #ingresoLob#,
            #grupoEconomico#,
            <isNull property="politicas">NULL</isNull><isNotNull property="politicas">#politicas#</isNotNull>,
            #act_renta#,
            #acr_activos#,
            #acr_canc_deudas#,
            #acr_abono#,
            #acr_contrato#,
            #acr_cuota_real#,
            #acr_cert_afp#,
            #acr_deuda_estudios#,
            #acr_sep_hecho#,
            #acr_desc_sbif#,
            #acr_vehiculo#,
            #acr_curse_carrera#,
            <isNull property="comentario_check">NULL</isNull><isNotNull property="comentario_check">#comentario_check#</isNotNull>
        )}
    </procedure>

    <procedure id="obtenerColorSemaforoICR" parameterClass="java.util.HashMap" resultMap="sem_icr">
        {CALL sp_solicitud_cns_sem_icr(
            #rut#,
            #cantidad_dias#,
            #numeroDeSolicitud#
        )}
    </procedure>

    <procedure id="guardarColorSemaforoICR" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_sem_icr(
            #rut#,
            #nro_solicitud#,
            #color_icr#,
            #usuario#
        )}
    </procedure>

    <procedure id="obtenerObservaciones" parameterClass="java.util.HashMap" resultMap="observacionesSolicitud">
        {CALL sp_solicitud_cns_obs_sol(
            #nro_solicitud#
        )}
    </procedure>

    <!-- Ingreso observaciones cambio de estado -->
    <parameterMap class="java.util.HashMap" id="parametrosCambiarEstadoSolicitud">

        <!-- PRIMERA CONSULTA (SELECT) -->
        <parameter property="nro_solicitud"  jdbcType="NUMERIC"  javaType="Long"/>

        <!-- SEGUNDA CONSULTA (INSERT) -->
        <parameter property="nro_solicitud"             jdbcType="NUMERIC"  javaType="Long"/>
        <parameter property="id_estado"                 jdbcType="INT"      javaType="Integer"/>
        <parameter property="observacion"               jdbcType="TEXT"     javaType="String"/>
        <parameter property="enviado_a"                 jdbcType="VARCHAR"  javaType="String"/>
        <parameter property="recibido_de"               jdbcType="VARCHAR"  javaType="String"/>
        <parameter property="esEvaluacionAutomatica"    jdbcType="CHAR"     javaType="String"/>
        <parameter property="esEvaluacionAutomatica"    jdbcType="CHAR"     javaType="String"/>

        <!-- TERCERA CONSULTA (UPDATE) -->
        <parameter property="id_estado"                 jdbcType="INT"      javaType="Integer"/>
        <parameter property="recibido_de"               jdbcType="VARCHAR"  javaType="String"/>
        <parameter property="recibido_de"               jdbcType="VARCHAR"  javaType="String"/>
        <parameter property="enviado_a"                 jdbcType="VARCHAR"  javaType="String"/>
        <parameter property="recibido_de"               jdbcType="VARCHAR"  javaType="String"/>
        <parameter property="id_estado"                 jdbcType="INT"      javaType="Integer"/>
        
        <parameter property="nro_solicitud"             jdbcType="NUMERIC"  javaType="Long"/>
        <parameter property="esEvaluacionAutomatica"    jdbcType="CHAR"     javaType="String"/>
    </parameterMap>

    <procedure id="cambiarEstadoSolicitud" parameterMap="parametrosCambiarEstadoSolicitud" parameterClass="java.util.HashMap" resultMap="id_obs_solicitud">
        DECLARE @fecha DATETIME, @id_obs_solicitud NUMERIC(15,0)
        SET @fecha = GETDATE()

        SELECT @id_obs_solicitud = max(id_obs_solicitud) FROM estado_solicitud
            WHERE nro_solicitud = ? and id_obs_solicitud IS NOT NULL

        SET @id_obs_solicitud = ISNULL(@id_obs_solicitud,0) + 1

        BEGIN tran

            INSERT INTO estado_solicitud (nro_solicitud, id_estado, observacion, fecha, enviado_a, recibido_de, posee_detalle_aut, id_obs_solicitud)
                VALUES(?,?,?,@fecha,?,?,?,CASE WHEN ? = '1' THEN @id_obs_solicitud ELSE -1 END)

            IF NOT(@@error = 0)
            BEGIN
                ROLLBACK
                RAISERROR 2000 'No se logro ingresar el nuevo estado de la solicitud.'
                RETURN
            END

            UPDATE solicitud SET
                id_estado = ?,
                bandeja = '1',
                usuario_modifica = ?,
                fecha_modifica = @fecha,
                fecha_asignacion = @fecha,
                ejecutivo_envia_sol = ?,
                ejecutivo_asignado = ?,
                id_estado_cda = CASE WHEN ? = 'EVAL_AUT' THEN ? ELSE id_estado_cda END
            WHERE
                nro_solicitud = ?

            IF NOT(@@error = 0)
            BEGIN
                ROLLBACK
                RAISERROR 2000 'No se logro actualizar los datos de la oferta.'
                RETURN
            END

            SELECT
                CASE WHEN ? = '1' THEN @id_obs_solicitud ELSE -1 END as id_obs_solicitud
        COMMIT
    </procedure>
    <!-- Termino Ingreso observaciones cambio de estado -->

    <procedure id="guardarReasignacionSolicitud" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upt_reasig_sol(
            #nro_solicitud#,
            #recibido_de#,
            <isNull property="enviado_a">NULL</isNull><isNotNull property="enviado_a">#enviado_a#</isNotNull>,
            <isNotNull property="observacion1">#observacion1#</isNotNull><isNull property="observacion1">NULL</isNull>,
            <isNotNull property="observacion2">#observacion2#</isNotNull><isNull property="observacion2">NULL</isNull>,
            <isNotNull property="observacion3">#observacion3#</isNotNull><isNull property="observacion3">NULL</isNull>,
            <isNotNull property="observacion4">#observacion4#</isNotNull><isNull property="observacion4">NULL</isNull>,
            <isNotNull property="observacion5">#observacion5#</isNotNull><isNull property="observacion5">NULL</isNull>
        )}
    </procedure>


    <parameterMap class="java.util.HashMap" id="parametrosDetObsCambioEstadoSol">
        <parameter property="nro_solicitud"     jdbcType="NUMERIC"  javaType="Long" />
        <parameter property="idObservacion"     jdbcType="NUMERIC"  javaType="Long" />
        <parameter property="correlativo"       jdbcType="INT"      javaType="Integer" />
        <parameter property="id_estado"         jdbcType="INT"      javaType="Integer" />
        <parameter property="ejecutivo"         jdbcType="VARCHAR"  javaType="String" />
        <parameter property="tipo_observacion"  jdbcType="VARCHAR"  javaType="String" />
        <parameter property="observacion"       jdbcType="TEXT"     javaType="String" />
    </parameterMap>

    <procedure id="detalleObservacionCambioEstadoSol" parameterClass="java.util.HashMap" parameterMap="parametrosDetObsCambioEstadoSol">
        INSERT INTO det_obs_est_sol (nro_solicitud, id_observacion, correlativo, id_estado, ejecutivo, tipo_observacion, observacion)
            VALUES (?,?,?,?,?,?,?)
    </procedure>

    <!-- Fin Resolucion Solicitud -->

    <!-- Linea de Credito -->
    <procedure id="obtenerLGCVigente" resultMap="LGCVigente" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_lgc_vig(#nro_solicitud#,#rut_cliente#)}
    </procedure>

    <procedure id="obtenerLGCSolicitada" resultMap="LGCSolicitada" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_lgc_sol(#nro_solicitud#,#rut_cliente#,#ejecutivo#)}
    </procedure>

    <procedure id="obtenerDetalleLineaVigente" resultMap="DetalleLineaVigente" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_dlc_vig(#id_lgc#)}
    </procedure>

    <procedure id="obtenerDetalleLineaSolicitada" resultMap="DetalleLineaSolicitada" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_dlc_sol(
            #id_lgc#,
            <isNull property="id_detalle_linea">NULL</isNull><isNotNull property="id_detalle_linea">#id_detalle_linea#</isNotNull>
        )}
    </procedure>

    <procedure id="obtenerDetalleLineaCreditoHipotecario" resultMap="DetalleLineaHipotecario" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_dlc_sol_hip(
            #id_lgc#,
            <isNull property="id_detalle_linea">NULL</isNull><isNotNull property="id_detalle_linea">#id_detalle_linea#</isNotNull>
        )}
    </procedure>

    <procedure id="obtenerDetalleLineaCreditoPregrado" resultMap="DetalleLineaPregrado" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_dlc_sol_pre(
            #id_lgc#,
            <isNull property="id_detalle_linea">NULL</isNull><isNotNull property="id_detalle_linea">#id_detalle_linea#</isNotNull>
        )}
    </procedure>

    <procedure id="obtenerDetalleLineaCreditoPostgrado" resultMap="DetalleLineaPostgrado" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_dlc_sol_post(
            #id_lgc#,
            <isNull property="id_detalle_linea">NULL</isNull><isNotNull property="id_detalle_linea">#id_detalle_linea#</isNotNull>
        )}
    </procedure>

    <procedure id="agregarDetalleLineaHipotecario" parameterClass="java.util.HashMap" resultMap="idDetalleLineaSolicitada">
        {CALL sp_solicitud_ins_dlc_hip(
            #id_cab_lcg_sol#, 
            #tipo_linea#,
            #moneda#,
            #monto_max#,
            #vencimiento#,
            <isNotNull property="cond_garantia">#cond_garantia#</isNotNull><isNull property="cond_garantia">NULL</isNull>,
            #vigencia#,
            <isNotNull property="renta_dividendo">#renta_dividendo#</isNotNull><isNull property="renta_dividendo">NULL</isNull>,
            <isNotNull property="valor_vivienda_uf">#valor_vivienda_uf#</isNotNull><isNull property="valor_vivienda_uf">NULL</isNull>,
            <isNotNull property="plazo_maximo">#plazo_maximo#</isNotNull><isNull property="plazo_maximo">NULL</isNull>,
            <isNotNull property="objetivo">#objetivo#</isNotNull><isNull property="objetivo">NULL</isNull>,
            <isNotNull property="dividendo_uf">#dividendo_uf#</isNotNull><isNull property="dividendo_uf">NULL</isNull>,
            <isNotNull property="porcentaje_financiamiento">#porcentaje_financiamiento#</isNotNull><isNull property="porcentaje_financiamiento">NULL</isNull>,
            <isNotNull property="tasacion_uf">#tasacion_uf#</isNotNull><isNull property="tasacion_uf">NULL</isNull>,
            <isNotNull property="monto_credito_uf">#monto_credito_uf#</isNotNull><isNull property="monto_credito_uf">NULL</isNull>,
            <isNotNull property="tipo_credito">#tipo_credito#</isNotNull><isNull property="tipo_credito">NULL</isNull>,
            <isNotNull property="posee_aval">#posee_aval#</isNotNull><isNull property="posee_aval">NULL</isNull>,
            <isNotNull property="tipo_aval">#tipo_aval#</isNotNull><isNull property="tipo_aval">NULL</isNull>,
            <isNotNull property="rut_aval">#rut_aval#</isNotNull><isNull property="rut_aval">NULL</isNull>,
            <isNotNull property="digito_aval">#digito_aval#</isNotNull><isNull property="digito_aval">NULL</isNull>,
            <isNotNull property="renta_liquida_aval">#renta_liquida_aval#</isNotNull><isNull property="renta_liquida_aval">NULL</isNull>,
            <isNotNull property="solicita_recurse">#solicita_recurse#</isNotNull><isNull property="solicita_recurse">NULL</isNull>,
            <isNotNull property="solicita_cca_sbif">#solicita_cca_sbif#</isNotNull><isNull property="solicita_cca_sbif">NULL</isNull>,
            #ejecutivo#,
            #tieneDetalleAdic#
        )}
    </procedure>

    <procedure id="agregarDetalleLinea" parameterClass="java.util.HashMap" resultMap="idDetalleLineaSolicitada">
        {CALL sp_solicitud_ins_dlc_sol (
            #id_cab_lcg_sol#, 
            #tipo_linea#,
            #moneda#,
            #monto_max#,
            #vencimiento#,
            #cond_garantia#,
            #vigencia#,
            #ejecutivo#
        )}
    </procedure>

    <procedure id="agregarDetalleLineaPregrado" parameterClass="java.util.HashMap" resultMap="idDetalleLineaSolicitada">
        {CALL sp_solicitud_ins_dlc_pre (
            #id_cab_lcg_sol#, 
            #tipo_linea#,
            #moneda#,
            #monto_max#,
            #vencimiento#,
            #cond_garantia#,
            #vigencia#,
            <isNotNull property="tipoDeFinanciamiento">#tipoDeFinanciamiento#</isNotNull><isNull property="tipoDeFinanciamiento">NULL</isNull>,
            <isNotNull property="universidad">#universidad#</isNotNull><isNull property="universidad">NULL</isNull>,
            <isNotNull property="carrera">#carrera#</isNotNull><isNull property="carrera">NULL</isNull>,
            <isNotNull property="plazoEnCuotaAnyos">#plazoEnCuotaAnyos#</isNotNull><isNull property="plazoEnCuotaAnyos">NULL</isNull>,
            <isNotNull property="plazoDeGraciaAnyos">#plazoDeGraciaAnyos#</isNotNull><isNull property="plazoDeGraciaAnyos">NULL</isNull>,
            <isNotNull property="anyoEnCurso">#anyoEnCurso#</isNotNull><isNull property="anyoEnCurso">NULL</isNull>,
            <isNotNull property="anyoIngresoCarrera">#anyoIngresoCarrera#</isNotNull><isNull property="anyoIngresoCarrera">NULL</isNull>,
            <isNotNull property="anyoAFinanciar">#anyoAFinanciar#</isNotNull><isNull property="anyoAFinanciar">NULL</isNull>,
            <isNotNull property="duracionCarrera">#duracionCarrera#</isNotNull><isNull property="duracionCarrera">NULL</isNull>,
            <isNotNull property="montoMatriculaUF">#montoMatriculaUF#</isNotNull><isNull property="montoMatriculaUF">NULL</isNull>,
            <isNotNull property="montoTotalFinanciarUF">#montoTotalFinanciarUF#</isNotNull><isNull property="montoTotalFinanciarUF">NULL</isNull>,
            <isNotNull property="rentaFamiliarBrutaPesos">#rentaFamiliarBrutaPesos#</isNotNull><isNull property="rentaFamiliarBrutaPesos">NULL</isNull>,
            <isNotNull property="montoGastosAsociadosUF">#montoGastosAsociadosUF#</isNotNull><isNull property="montoGastosAsociadosUF">NULL</isNull>,
            <isNotNull property="patrimonioAvalEnPesos">#patrimonioAvalEnPesos#</isNotNull><isNull property="patrimonioAvalEnPesos">NULL</isNull>,
            #ejecutivo#,
            #tieneDetalleAdic#
        )}
    </procedure>

    <procedure id="agregarDetalleLineaPostgrado" parameterClass="java.util.HashMap" resultMap="idDetalleLineaSolicitada">
        {CALL sp_solicitud_ins_dlc_post (
            #id_cab_lcg_sol#, 
            #tipo_linea#,
            #moneda#,
            #monto_max#,
            #vencimiento#,
            #cond_garantia#,
            #vigencia#,
            #pais#,
            #grado#,
            #universidad#,
            #tipoDeFinanciamiento#,
            #montoMatriculaUF#,
            #montoTotalAFinanciarUF#,
            #montoGastosAsociadosUF#,
            #garantias#,
            #plazoCuotaEnAnyos#,
            #plazoGraciaEnAnyos#,
            #ejecutivo#
        )}
    </procedure>

    <procedure id="eliminarDetalleLineaCreditoSolicitada" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_del_dlc_sol (
            #idDetalleLineaCredito#
        )}
    </procedure>

    <procedure id="eliminarDetalleLineaCreditoVigente" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_del_dlc_vig (
            #idDetalleLineaVigente#
        )}
    </procedure>

    <procedure id="modificarDetalleLinea" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upt_dlc_sol (
            #id_cab_lcg_sol#,
            #id_det_linea_cred#,
            #tipo_linea#,
            #moneda#,
            #monto_max#,
            #vencimiento#,
            #cond_garantia#,
            #vigencia#,
            #ejecutivo#
        )}
    </procedure>

    <procedure id="modificarDetalleLineaHipotecario" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upt_dlc_hip (
            #id_cab_lcg_sol#,
            #id_det_linea_cred#,
            #tipo_linea#,
            #moneda#,
            #monto_max#,
            #vencimiento#,
            #cond_garantia#,
            #vigencia#,
            <isNotNull property="renta_dividendo">#renta_dividendo#</isNotNull><isNull property="renta_dividendo">NULL</isNull>,
            <isNotNull property="valor_vivienda_uf">#valor_vivienda_uf#</isNotNull><isNull property="valor_vivienda_uf">NULL</isNull>,
            <isNotNull property="plazo_maximo">#plazo_maximo#</isNotNull><isNull property="plazo_maximo">NULL</isNull>,
            <isNotNull property="objetivo">#objetivo#</isNotNull><isNull property="objetivo">NULL</isNull>,
            <isNotNull property="dividendo_uf">#dividendo_uf#</isNotNull><isNull property="dividendo_uf">NULL</isNull>,
            <isNotNull property="porcentaje_financiamiento">#porcentaje_financiamiento#</isNotNull><isNull property="porcentaje_financiamiento">NULL</isNull>,
            <isNotNull property="tasacion_uf">#tasacion_uf#</isNotNull><isNull property="tasacion_uf">NULL</isNull>,
            <isNotNull property="monto_credito_uf">#monto_credito_uf#</isNotNull><isNull property="monto_credito_uf">NULL</isNull>,
            <isNotNull property="tipo_credito">#tipo_credito#</isNotNull><isNull property="tipo_credito">NULL</isNull>,
            <isNotNull property="posee_aval">#posee_aval#</isNotNull><isNull property="posee_aval">NULL</isNull>,
            <isNotNull property="tipo_aval">#tipo_aval#</isNotNull><isNull property="tipo_aval">NULL</isNull>,
            <isNotNull property="rut_aval">#rut_aval#</isNotNull><isNull property="rut_aval">NULL</isNull>,
            <isNotNull property="digito_aval">#digito_aval#</isNotNull><isNull property="digito_aval">NULL</isNull>,
            <isNotNull property="renta_liquida_aval">#renta_liquida_aval#</isNotNull><isNull property="renta_liquida_aval">NULL</isNull>,
            <isNotNull property="solicita_recurse">#solicita_recurse#</isNotNull><isNull property="solicita_recurse">NULL</isNull>,
            <isNotNull property="solicita_cca_sbif">#solicita_cca_sbif#</isNotNull><isNull property="solicita_cca_sbif">NULL</isNull>,
            #ejecutivo#,
            #tieneDetalleAdic#
        )}
    </procedure>

    <procedure id="modificarDetalleLineaPregrado" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upt_dlc_pre (
            #id_cab_lcg_sol#,
            #id_det_linea_cred#, 
            #tipo_linea#,
            #moneda#,
            #monto_max#,
            #vencimiento#,
            #cond_garantia#,
            #vigencia#,
            <isNotNull property="tipoDeFinanciamiento">#tipoDeFinanciamiento#</isNotNull><isNull property="tipoDeFinanciamiento">NULL</isNull>,
            <isNotNull property="universidad">#universidad#</isNotNull><isNull property="universidad">NULL</isNull>,
            <isNotNull property="carrera">#carrera#</isNotNull><isNull property="carrera">NULL</isNull>,
            <isNotNull property="plazoEnCuotaAnyos">#plazoEnCuotaAnyos#</isNotNull><isNull property="plazoEnCuotaAnyos">NULL</isNull>,
            <isNotNull property="plazoDeGraciaAnyos">#plazoDeGraciaAnyos#</isNotNull><isNull property="plazoDeGraciaAnyos">NULL</isNull>,
            <isNotNull property="anyoEnCurso">#anyoEnCurso#</isNotNull><isNull property="anyoEnCurso">NULL</isNull>,
            <isNotNull property="anyoIngresoCarrera">#anyoIngresoCarrera#</isNotNull><isNull property="anyoIngresoCarrera">NULL</isNull>,
            <isNotNull property="anyoAFinanciar">#anyoAFinanciar#</isNotNull><isNull property="anyoAFinanciar">NULL</isNull>,
            <isNotNull property="duracionCarrera">#duracionCarrera#</isNotNull><isNull property="duracionCarrera">NULL</isNull>,
            <isNotNull property="montoMatriculaUF">#montoMatriculaUF#</isNotNull><isNull property="montoMatriculaUF">NULL</isNull>,
            <isNotNull property="montoTotalFinanciarUF">#montoTotalFinanciarUF#</isNotNull><isNull property="montoTotalFinanciarUF">NULL</isNull>,
            <isNotNull property="rentaFamiliarBrutaPesos">#rentaFamiliarBrutaPesos#</isNotNull><isNull property="rentaFamiliarBrutaPesos">NULL</isNull>,
            <isNotNull property="montoGastosAsociadosUF">#montoGastosAsociadosUF#</isNotNull><isNull property="montoGastosAsociadosUF">NULL</isNull>,
            <isNotNull property="patrimonioAvalEnPesos">#patrimonioAvalEnPesos#</isNotNull><isNull property="patrimonioAvalEnPesos">NULL</isNull>,
            #ejecutivo#,
            #tieneDetalleAdic#
        )}
    </procedure>

    <procedure id="modificarDetalleLineaPostgrado" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upt_dlc_post (
            #id_cab_lcg_sol#, 
            #id_det_linea_cred#,
            #tipo_linea#,
            #moneda#,
            #monto_max#,
            #vencimiento#,
            #cond_garantia#,
            #vigencia#,
            #pais#,
            #grado#,
            #universidad#,
            #tipoDeFinanciamiento#,
            #montoMatriculaUF#,
            #montoTotalAFinanciarUF#,
            #montoGastosAsociadosUF#,
            #garantias#,
            #plazoCuotaEnAnyos#,
            #plazoGraciaEnAnyos#,
            #ejecutivo#
        )}
    </procedure>

    <procedure id="ingresarLineaCreditoVigente" parameterClass="java.util.HashMap" resultMap="idlineaVigente">
        {CALL sp_solicitud_ins_lcg_vig (
            #usuario#,
            #idSolicitud#,
            #rutCliente#,
            #moneda#,
            #deficit#,
            #indicadorMD#,
            #montoMaximo#,
            #montoManximoUf#,
            #relacionDeudaGar#,
            #totalgarantias#,
            #vencimiento#,
            <isNull property="idMargenCliente">NULL</isNull><isNotNull property="idMargenCliente">#idMargenCliente#</isNotNull>
        )}
    </procedure>

    <procedure id="agregarDetalleLineaVigente" parameterClass="java.util.HashMap" resultMap="idlineaVigente">
        {CALL sp_solicitud_ins_dlc_vig (
            #id_cab_lcg_sol#,
            #tipo_linea#,
            #moneda#,
            <isNull property="tipo_garantia">NULL</isNull><isNotNull property="tipo_garantia">#tipo_garantia#</isNotNull>,
            <isNull property="sub_tipo_garantia">NULL</isNull><isNotNull property="sub_tipo_garantia">#sub_tipo_garantia#</isNotNull>,
            #monto_max#,
            #monto_cont#,
            <isNull property="vencimiento">NULL</isNull><isNotNull property="vencimiento">#vencimiento#</isNotNull>,
            #cobertura#,
            <isNull property="cond_garantia">NULL</isNull><isNotNull property="cond_garantia">#cond_garantia#</isNotNull>,
            #ejecutivo#
        )}
    </procedure>

    <procedure id="clonarDetalleLineaVigente" parameterClass="java.util.HashMap" resultMap="idDetalleLineaSolicitada">
        {CALL sp_solicitud_cln_dlc_vig (
            #numeroDeSolicitud#,
            #rutCliente#,
            #idDetalleLineavigente#,
            #ejecutivo#
        )}
    </procedure>

    <procedure id="obtenerTiposGarantiasDlcSol" parameterClass="java.util.HashMap" resultMap="tiposGarantiaDlcSol">
        {CALL sp_solicitud_cns_tpo_gar (
            #idDetalleLinea#
        )}
    </procedure>

    <procedure id="eliminarDatosGarantiaDlcSol" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_del_tpo_gar (
            #idDetalleLinea#
        )}
    </procedure>

    <procedure id="agregarDatosGarantiaDlcSol" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_tpo_gar (
            #idDetalleLineaSolicitada#,
            #idDetallegarantia#,
            <isNull property="tipoGarantia">NULL</isNull><isNotNull property="tipoGarantia">#tipoGarantia#</isNotNull>,
            <isNull property="subTipoGarantia">NULL</isNull><isNotNull property="subTipoGarantia">#subTipoGarantia#</isNotNull>,
            #coberturaGarantia#,
            #ejecutivo#
        )}
    </procedure>

    <procedure id="obtenerDatosRevisionLDCSolicitada" parameterClass="java.util.HashMap" resultMap="RevisionLDCSolicitada">
        {CALL sp_solicitud_cns_rev_ldc (
            #nro_solicitud#,
            #rut_cliente#,
            #id_ldc_sol#
        )}
    </procedure>

    <procedure id="obtenerLDCSolicitadaCliente" resultMap="DetalleLineaSolicitada" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_dlc_sol_cli(
            #nro_solicitud#,
            #rut_cliente#
        )}
    </procedure>

    <!-- Fin Linea de Credito -->

    <!-- Comienzo SP Ciclo Solicitudes -->
    <procedure id="obtenerSolicitudesCiclo" resultMap="cicloSolicitudes" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_sol_cicl (
            #usuarioConsulta#, 
            <isNotNull property="idSolicitud">#idSolicitud#</isNotNull>
            <isNull property="idSolicitud">NULL</isNull>,
            <isNotNull property="estado">#estado#</isNotNull>
            <isNull property="estado">NULL</isNull>,
            <isNotNull property="fechaIngreso">#fechaIngreso#</isNotNull>
            <isNull property="fechaIngreso">NULL</isNull>,
            <isNotNull property="rutCliente">#rutCliente#</isNotNull>
            <isNull property="rutCliente">NULL</isNull>,
            <isNotNull property="ultimosDias">#ultimosDias#</isNotNull>
            <isNull property="ultimosDias">NULL</isNull>,
            #tipoBandeja#)}
    </procedure>
    <procedure id="moverSolicitudBandeja" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upd_bdj_sol (#idSolicitud#, #idBandeja#, #usuarioOrigen#, #usuarioDestino#,
        <isNotNull property="estado">#estado#</isNotNull>
            <isNull property="estado">NULL</isNull>)
        }
    </procedure>

    <procedure id="obtenerBusquedaSolicitudes" resultMap="resultBusquedaSolicitudes" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_bus_sol (
            <isNotNull property="idSolicitud">#idSolicitud#</isNotNull>
            <isNull property="idSolicitud">NULL</isNull>,
            <isNotNull property="estado">#estado#</isNotNull>
            <isNull property="estado">NULL</isNull>,
            <isNotNull property="fechaIngreso">#fechaIngreso#</isNotNull>
            <isNull property="fechaIngreso">NULL</isNull>,
            <isNotNull property="rutCliente">#rutCliente#</isNotNull>
            <isNull property="rutCliente">NULL</isNull>,
            <isNotNull property="ultimosDias">#ultimosDias#</isNotNull>
            <isNull property="ultimosDias">NULL</isNull>,
            #cant_registros#)}
    </procedure>

    <procedure id="obtenerSolicitudesAReasignar" resultMap="resultadoConsultaReasignar" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_sol_reasignar (
            #usuarioConsulta#,
            <isNotNull property="idSolicitud">#idSolicitud#</isNotNull><isNull property="idSolicitud">NULL</isNull>,
            <isNotNull property="estado">#estado#</isNotNull><isNull property="estado">NULL</isNull>,
            <isNotNull property="fechaIngreso">#fechaIngreso#</isNotNull><isNull property="fechaIngreso">NULL</isNull>,
            <isNotNull property="rutCliente">#rutCliente#</isNotNull><isNull property="rutCliente">NULL</isNull>,
            <isNotNull property="ultimosDias">#ultimosDias#</isNotNull><isNull property="ultimosDias">NULL</isNull>
        )}
    </procedure>

    <!-- Fin SP Ciclo Solicitudes -->

    <!-- Grupo Economico -->
    <procedure id="consultarGrupoEconomico" resultMap="grupoEconomicoConsulta" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_grupo_econ(
            #nro_solicitud#,
            #rut#
        )}
    </procedure>

    <procedure id="eliminarGrupoEconomico" parameterClass="java.util.HashMap">
    {CALL sp_solicitud_elim_grupo_econ(
            #nro_solicitud#,
            #rut_cliente#,
            #rut_relacionado#,
            #codigo_relacion#
        )}
    </procedure>

    <procedure id="agregarIntegranteGrupo" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_grp_econ(
            #rut_solicitante#,
            #id_solicitud#,
            #rut_relacionado#,
            #dv#,
            #tipo_relacion#,
            #nombre_relacionado#,
            #tipo_persona#,
            #ingresos#,
            #fuente_ingreso#,
            #participacion#,
            #id_ejecutivo#,
            #indicador_art85#
        )}
    </procedure>

    <procedure id="obtenerIntegranteGrupo" resultMap="consultaIntegranteGrupoEconomico" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_int_gecon(
            #nro_solicitud#,
            #rut_cliente#,
            #rut_relacionado#,
            #codigo_relacion#
        )}
    </procedure>

    <procedure id="modificarIntegranteGrupoEconomico" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upd_grupo_econ(
                   #nro_solicitud#,
                   #rut_titular#,
                   #rut_asociado#,
                   #dv_asociado#,
                   #tipo_relacion#,
                   #nombres#,
                   #tipo_persona#,
                   #ingresos#,
                   #fuente_ingreso#,
                   #participacion#,
                   #ejecutivo#
        )}
    </procedure>
    <!-- Fin Grupo Economico -->

    <!-- Documentos Solicitud -->
    <procedure id="obtenerDocumentoSolicitud" resultMap="documento" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_docs(#idSolicitud#)}
    </procedure>
    <procedure id="agregarDocumento" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_doc(#idSolicitud#, #nombreArchivo#, #descripcion#, #ruta#, #usuario#)}
    </procedure>
    <procedure id="eliminarDocumento" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_del_doc(#idDocumento#, #idSolicitud# )}
    </procedure>
    <!-- FIN Documentos Solicitud -->

    <!-- Carga Financiera-->
    <procedure id="resumenCargaFinanciera" resultMap="cargaFinanciera" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_car_finan( #rutCliente#, #numeroSolicitud# )}
    </procedure>

    <procedure id="obtenerDetalleCargaFinanciera" resultMap="detalleCalculoCargaFinanciera" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_det_car_finan( #rutCliente#, #numeroSolicitud#, #codigoSeccion# )}
    </procedure>

     <procedure id="guardarCargaFinanciera" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_car_finan( #rutCliente#, #numeroSolicitud#, #rentaFija#, #rentaVariable#, #rentaLiquidaPesos#, 
        #rentaLiquidaUF#, #UF#, #fechaUF#, #consumo#, #comercial#, #hipotecario#, #tipoCalculo#, #cargaMaxima#, 
        #cargaActual#, #cargaFutura#, #periodo#, #errorDeudaBCI#, #errorInformacionDeCredito# )}
    </procedure>

    <procedure id="guardarCargaFinancieraPyme" parameterClass="java.util.HashMap">
        {CALL sp_solic_ins_car_finan_pyme( #numRegistro#, #rutCliente#, #numeroSolicitud#, #tipoDeuda#, #banco#, 
        #totalDeuda#, #totalCuotas#, #cuotasPagadas#, #valorCuota#)}
    </procedure>
    
    <procedure id="obtenerCargaFinancieraPyme" resultMap="cargaFinancieraPyme" parameterClass="java.util.HashMap">
        {CALL sp_solic_cns_car_fin_pyme (#rutCliente#, #numeroSolicitud#)}
    </procedure>

    <procedure id="guardarDetalleCargaFinanciera" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_det_car_finan( #rutCliente#, #numeroSolicitud#, #codigoSeccion#, #deudaBCI#, #deudaNoBci#,
        #deudaTotal#, #cargaMensual#, #conoceCargaReal#, #incrementaDeuda#, #incrementaCarga#  )}
    </procedure>
    <procedure id="eliminarCargaFinancieraPyme" parameterClass="java.util.HashMap">
        {CALL sp_solic_del_car_fin_pyme( #rutCliente#, #numeroSolicitud#)}
    </procedure>
    <procedure id="eliminarCargaFinancieraAnalisis" parameterClass="java.util.HashMap">
        {CALL sp_soli_del_car_fin_analisis( #idAnalisis# )}
    </procedure>
    
    <resultMap id="resultCargaFinancieraPymeCabecera" class="java.util.HashMap">
        <result property="renta_liquida"        javaType="Double"   column="renta_liquida"              jdbcType="decimal"/>
        <result property="car_finan_mensual"    javaType="Double"   column="car_finan_mensual"          jdbcType="decimal"/>
        <result property="excedente_deficit"    javaType="Double"   column="excedente_deficit"          jdbcType="decimal"/>
    </resultMap>
    
    <procedure id="obtenerCargaFinancieraPymeCabecera"  resultMap="resultCargaFinancieraPymeCabecera" parameterClass="java.util.HashMap">
        {CALL sp_solic_cns_cab_car_fin_pyme (#rutCliente#, #numeroSolicitud#)}
    </procedure>

     <procedure id="guardarCargaFinancieraPymeCabecera"  resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
        {CALL sp_solic_ins_cab_car_fin_pyme (#rutCliente#, #numeroSolicitud#, #rentaLiquida#, #totalExcedente#, #totalCargaMensual#)}
    </procedure>
    
    <!-- Fin Carga Financiera-->


    <!-- Creacion de la solicitud -->
    <procedure id="ingresarNuevaSolicitud" resultMap="nuevaSolicitud" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_sol(
            #ejecutivo#,
            #rut_cliente#,
            #dv_rut#,
            #oficina#,
            #banca#,
            #nombre_cliente#,
            #apellido_cliente#,
            #cic_cliente#,
            <isNull property="telefonoSolicitante">NULL</isNull><isNotNull property="telefonoSolicitante">#telefonoSolicitante#</isNotNull>,
            <isNull property="monbre_solicitante">NULL</isNull><isNotNull property="monbre_solicitante">#monbre_solicitante#</isNotNull>,
            <isNull property="canal_solicitud">NULL</isNull><isNotNull property="canal_solicitud">#canal_solicitud#</isNotNull>,
            #tipo_persona#,
            <isNull property="origen">NULL</isNull><isNotNull property="origen">#origen#</isNotNull>
        )}
    </procedure>

    <procedure id="obtenerSolicitud" resultMap="obtenerSolicitud" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_sol(#id_solicitud#)}
    </procedure>
    <!-- Fin Creacion de la solicitud -->

    <!-- Solicitantes -->
    <procedure id="ingresarRelacionados" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_relaciones(
            #id_solicitud#,
            #nombre_relacionado#,
            #rut_relacionado#,
            #dv#,
            #id_ejecutivo#,
            #tipo_relacion#,
            #participacion#,
            #rut_solicitante#,
            <isNull property="fecha_verificacion">NULL</isNull><isNotNull property="fecha_verificacion">#fecha_verificacion#</isNotNull>,
            <isNull property="vigencia">NULL</isNull><isNotNull property="vigencia">#vigencia#</isNotNull>,
            #indicador_art85#)}
    </procedure>

    <procedure id="obtenerGrupoClienteSolicitud" resultMap="grupoClienteSolicitud" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_gru_cli_sol(
            #nro_solicitud#
        )}
    </procedure>
    
    <procedure id="obtenerGrupoEvaluacionSolicitud" resultMap="grupoSolicitud" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_eval_sol(
            #nro_solicitud#,
            #rut_titular#
        )}
    </procedure>
    
    <procedure id="modificarClienteSolicitud" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_cli_sol(
            #nro_solicitud#,
            #rut_cliente#,
            #dv_cliente#,
            #nombre_cliente#,
            #evaluacion#,
            #ejecutivo#
        )}
    </procedure>
    <!-- Fin Solicitantes -->

    <!-- Datos Basicos cliente -->
    <procedure id="obtenerCientePersona" parameterClass="java.util.HashMap" resultMap="datosBasicosClientePersona">
        {CALL sp_solicitud_cns_cli_per(
            #nro_solicitud#,
            #rut_cliente#
        )}
    </procedure>

    <procedure id="consultarDatosClienteEmpresa" parameterClass="java.util.HashMap" resultMap="datosBasicosClienteEmpresa">
        {CALL sp_solicitud_cns_cli_emp(
            #nro_solicitud#,
            #rut_cliente#
        )}
    </procedure>

    <procedure id="datos_basicos_eval_cda" parameterClass="java.util.HashMap" resultMap="res_dat_bas_eval_cda">
        {CALL sp_solicitud_cns_db_mtr(
            #nro_solicitud#,
            #rut_cliente#
        )}
    </procedure>

    <procedure id="guardarDatosClientePersona" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_cli_per(
            #codigoEjecutivo#,
            #nro_solicitud#,
            #rut#,
            #cic#,
            #digito#,
            #nombres#,
            #apellidos#,
            #edad#,
            #nro_hijos#,
            #nro_cargas#,
            #antiguedad_emp_trab#,
            #renta_fija#,
            #renta_variable#,
            <isNull property="periodo_renta_fija">NULL</isNull><isNotNull property="periodo_renta_fija">#periodo_renta_fija#</isNotNull>,
            <isNull property="periodo_renta_variable">NULL</isNull><isNotNull property="periodo_renta_variable">#periodo_renta_variable#</isNotNull>,
            <isNull property="rut_emp_trab">NULL</isNull><isNotNull property="rut_emp_trab">#rut_emp_trab#</isNotNull>,
            <isNull property="digito_emp_trab">NULL</isNull><isNotNull property="digito_emp_trab">#digito_emp_trab#</isNotNull>,
            <isNull property="nombre_emp_trab">NULL</isNull><isNotNull property="nombre_emp_trab">#nombre_emp_trab#</isNotNull>,
            <isNull property="nombre_emp_trab_ant">NULL</isNull><isNotNull property="nombre_emp_trab_ant">#nombre_emp_trab_ant#</isNotNull>,
            #anno_ing_res_act#,
            #anno_ing_universidad#,
            #meses_trab_emp_ant#,
            #fecha_cta_cte_vig#,
            #fecha_nacimiento#,
            #banca#,
            #tipo_cliente#,
            #estado_civil#,
            #nivel_educacional#,
            #situacion_viv#,
            #oficina#,
            <isNull property="segmento">NULL</isNull><isNotNull property="segmento">#segmento#</isNotNull>,
            #nacionalidad#,
            <isNull property="tipo_plan">NULL</isNull><isNotNull property="tipo_plan">#tipo_plan#</isNotNull>,
            #sexo#,
            #actividad#,
            <isNull property="universidad">NULL</isNull><isNotNull property="universidad">#universidad#</isNotNull>,
            #carrera#,
            #situacion_laboral#,
            <isNull property="rut_conyuge">NULL</isNull><isNotNull property="rut_conyuge">#rut_conyuge#</isNotNull>,
            <isNull property="dv_conyuge">NULL</isNull><isNotNull property="dv_conyuge">#dv_conyuge#</isNotNull>,
            <isNull property="renta_conyuge">NULL</isNull><isNotNull property="renta_conyuge">#renta_conyuge#</isNotNull>,
            <isNull property="nombre_completo_conyuge">NULL</isNull><isNotNull property="nombre_completo_conyuge">#nombre_completo_conyuge#</isNotNull>,
            <isNull property="regimen_conyugal">NULL</isNull><isNotNull property="regimen_conyugal">#regimen_conyugal#</isNotNull>,
            <isNull property="id_act_conyuge">NULL</isNull><isNotNull property="id_act_conyuge">#id_act_conyuge#</isNotNull>,
            #renta_liquida#,
	        #tipo_persona_pyme#,
            #id_act_economica_dai#,
            #cod_actividad_sii#
        )}
    </procedure>

    <procedure id="guardarDatosBasicosClienteEmpresa"  parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_cli_emp(
            #codigoEjecutivo#,
            #nro_solicitud#,
            <isNull property="ejecutivoDestino">NULL</isNull><isNotNull property="ejecutivoDestino">#ejecutivoDestino#</isNotNull>,
            <isNull property="nombrejecutivoDestino">NULL</isNull><isNotNull property="nombrejecutivoDestino">#nombrejecutivoDestino#</isNotNull>,
            <isNull property="oficinaEjecutivoDestino">NULL</isNull><isNotNull property="oficinaEjecutivoDestino">#oficinaEjecutivoDestino#</isNotNull>,
            #rut#,
            #digito#,
            #cic#,
            #banca#,
            #operaOtraOficina#,
            <isNull property="razonSocial">NULL</isNull><isNotNull property="razonSocial">#razonSocial#</isNotNull>,
            <isNull property="actividad">NULL</isNull><isNotNull property="actividad">#actividad#</isNotNull>,
            <isNull property="matriz_sucursal">NULL</isNull><isNotNull property="matriz_sucursal">#matriz_sucursal#</isNotNull>,
            <isNull property="categoriaEmpresa">NULL</isNull><isNotNull property="categoriaEmpresa">#categoriaEmpresa#</isNotNull>,
            <isNull property="clasificacion">NULL</isNull><isNotNull property="clasificacion">#clasificacion#</isNotNull>,
            <isNull property="fecha_inicio">NULL</isNull><isNotNull property="fecha_inicio">#fecha_inicio#</isNotNull>,
            <isNull property="fecha_apertura_cta_cte">NULL</isNull><isNotNull property="fecha_apertura_cta_cte">#fecha_apertura_cta_cte#</isNotNull>,
            <isNull property="sector_economico">NULL</isNull><isNotNull property="sector_economico">#sector_economico#</isNotNull>,
    #sucesion#,
    #ventaja_competitiva#,
    #tipo_administracion#,
    #tipo_persona_pyme#, 
    #id_act_economica_dai#
        )}
    </procedure>

    <!-- Fin Datos Basicos cliente -->

    <!-- Asignacion de Solicitudes -->
    <procedure id="obtenerBancasXSolicitudes" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_bca_asig }
    </procedure>
    <procedure id="obtenerRegionalesXBancaSolicitud" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_reg_asig (#banca#)}
    </procedure>
    <procedure id="obtenerOficinasXRegionalSolicitud" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_ofi_asig (#regional#)}
    </procedure>
    <procedure id="obtenerSolicitudesAsignacion" resultMap="asignacionSolicitudes" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_sol_asig (
            <isNotNull property="banca">#banca#</isNotNull><isNull property="banca">NULL</isNull>,
            <isNotNull property="regional">#regional#</isNotNull><isNull property="regional">NULL</isNull>,
            <isNotNull property="oficina">#oficina#</isNotNull><isNull property="oficina">NULL</isNull>,
            <isNotNull property="ordenarPor">#ordenarPor#</isNotNull><isNull property="ordenarPor">NULL</isNull>,
            <isNotNull property="orden">#orden#</isNotNull><isNull property="orden">NULL</isNull>
,
			<isNotNull property="idMonto">#idMonto#</isNotNull><isNull property="idMonto">NULL</isNull>
        )}
    </procedure>
    <!-- FIN Asignacion de Solicitudes -->
    
    <!-- Garantias -->
    <procedure id="obtenerGarantias" resultMap="detalleGarantia" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_gtias (#rut#,#nro_solicitud#)}
    </procedure>
    
    <procedure id="obtenerGarantiasExterna" resultMap="detalleGarantiaExterna" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_gti_reg (#rut#,#nro_solicitud#)}
    </procedure>
    
    
    <procedure id="agregarGarantia" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_gtias (#rut#,
        							  #nro_solicitud#,
        							  #tipo_gtia#,
        							  #tipo_bien#,
        							  #valor_tasacion#,
        							  #valor_liquidacion#,
        							  #fecha_tasacion#,
        							  #cobertura#,
        							  #situacion_tasacion#,
        							  #vigencia#,
        							  #ejecutivo#
        							  )}
    </procedure>
    
     <procedure id="agregarGarantiaExterna" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_gti_reg (#id_garantia#,
        							  #rut#,
        							  #nro_solicitud#,
        							  #tipo_gtia#,
        							  #estado#,
        							  #valor_comercial#,
        							  #valor_liquidacion#,
        							  #cobertura#,
        							  #vigencia#,
        							  #ejecutivo#
        							  )}
    </procedure>
    
    <procedure id="modificarGarantia" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upt_gtias (#id_garantia#,
        							  #tipo_gtia#,
        							  #tipo_bien#,
        							  #valor_tasacion#,
        							  #valor_liquidacion#,
        							  #fecha_tasacion#,
        							  #cobertura#,
        							  #situacion_tasacion#,
        							  #vigencia#,
        							  #ejecutivo#
        							  )}
    </procedure>
    
    <procedure id="modificarGarantiaExterna" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upt_gti_reg (#id_garantia#,
        							  #vigencia#,
        							  #ejecutivo#
        							  )}
    </procedure>
    
    <procedure id="eliminarGarantia" resultMap="detalleGarantia" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_del_gtias (#id_garantia#)}
    </procedure>
    
    <procedure id="obtenerMarcaGarantia" resultMap="marcaGarantia" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_mac_gar (#rut#,#nro_solicitud#)}
    </procedure>
    
    <procedure id="modificarMarcaGarantia" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upt_mac_gar (#rut#,#nro_solicitud#)}
    </procedure>
    
    <!-- FIN GARANTIAS -->
    
     <procedure id="modificarLineaDeCreditoSolicitada" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upt_lgc_sol (
                                        #usuario_modifica#, 
                                        #id_cab_lcg_sol#, 
                                        #moneda#, 
                                        #monto_max_pesos#, 
                                        #monto_max_uf#, 
                                        #vencimiento#, 
                                        #total_garantia#, 
                                        #rel_deuda_gtia#, 
                                        #deficit#
                                      )}
     </procedure>

    <procedure id="guardarAntecedentesSBIF" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_ant_sbif(
                                          #rut#, 
                                          #nro_solicitud#, 
                                          #fecha_informacion#, 
                                          #deuda_consumo#, 
                                          #deuda_comercial#, 
                                          #deuda_hipotecaria#, 
                                          #deuda_indirecta#, 
                                          #deuda_morosa#, 
                                          #deuda_castigada#, 
                                          #deuda_vencida#,
                                          #deuda_directa_vencida#,
                                          #deuda_directa_castigada#,
                                          #deuda_indirecta_vencida#,
                                          #protestos_vigentes#,
                                          #aclaraciones#
                                        )}
    </procedure>
<!-- FIN PROCEDIMIENTOS ALMACENADOS -->

<!-- ESTADO INYECCION MARGEN -->
    <resultMap class="java.util.HashMap" id="respuestainyMargen">
        <result property="respuesta"       javaType="String" column="respuesta"       jdbcType="varchar"/>
    </resultMap>

    <resultMap class="java.util.HashMap" id="respuestaverificarSolicitud">
        <result property="validacion_ok"    javaType="String"   column="validacion_ok"       jdbcType="varchar"/>
        <result property="codigo_error"     javaType="String"   column="codigo_error"        jdbcType="varchar"/>
    </resultMap>

    <resultMap class="java.util.HashMap" id="estadoInyeccionMargen">
        <result property="nro_solicitud"    javaType="Long"     column="nro_solicitud"  jdbcType="numeric"/>
        <result property="rut_cliente"      javaType="Long"     column="rut_cliente"    jdbcType="numeric"/>
        <result property="estado"           javaType="Integer"  column="estado"         jdbcType="int"/>
        <result property="codigo_error"     javaType="String" column="codigo_error"   jdbcType="varchar"/>
        <result property="glosa"            javaType="String"   column="glosa"          jdbcType="varchar"/>
        <result property="fecha_pri_int"    javaType="Date"     column="fecha_pri_int"  jdbcType="DATE"/>
        <result property="fecha_ult_int"    javaType="Date"     column="fecha_ult_int"  jdbcType="DATE"/>
        <result property="userid_pri_int"   javaType="String"   column="userid_pri_int" jdbcType="varchar"/>
        <result property="userid_ult_int"   javaType="String"   column="userid_ult_int" jdbcType="varchar"/>
        <result property="nro_intento"      javaType="Integer"  column="nro_intento"    jdbcType="int"/>
        <result property="iden_ope_mar"     javaType="String" column="iden_ope_mar"   jdbcType="varchar"/>
    <result property="num_ope_mar"      javaType="Integer"  column="num_ope_mar"    jdbcType="int"/>
    </resultMap>

    <resultMap class="java.util.HashMap" id="lineaGlobalydetalleVig">
    <!-- LINEA GLOBAL -->
        <result property="id_cab_lcg_vig"       javaType="Long"     column="id_cab_lcg_vig"         jdbcType="numeric" />
        <result property="moneda"               javaType="String"   column="moneda"                 jdbcType="varchar"/>
        <result property="monto_max_pesos"      javaType="Double"   column="monto_max_pesos"        jdbcType="numeric"/>
        <result property="monto_max_uf"         javaType="Double"   column="monto_max_uf"           jdbcType="numeric"/>
        <result property="vencimiento"          javaType="Date"     column="vencimiento"            jdbcType="datetime"/>
        <result property="total_garantia"       javaType="Double"   column="total_garantia"         jdbcType="numeric"/>
        <result property="rel_deuda_garantia"   javaType="Double"   column="rel_deuda_garantia"     jdbcType="decimal"/>
        <result property="deficit"              javaType="Double"   column="deficit"                jdbcType="numeric"/>
        <result property="ind_creditdesk"       javaType="Double"   column="ind_creditdesk"         jdbcType="numeric"/>
        <result property="id_lcg_mar_cli"       javaType="String"   column="id_lcg_mar_cli"         jdbcType="varchar"/>
        <result property="glosa_moneda"         javaType="String"   column="glosa_moneda"           jdbcType="varchar"/>
    <!-- DETALLE -->
        <result property="id_detalle_linea"     javaType="Long"     column="id_detalle_linea"       jdbcType="numeric"/>
        <result property="tipo_linea_det"       javaType="String"   column="tipo_linea_det"         jdbcType="varchar"/>
        <result property="moneda_det"           javaType="String"   column="moneda_det"             jdbcType="varchar"/>
        <result property="tipo_garantia_det"    javaType="String"   column="tipo_garantia_det"      jdbcType="varchar"/>
        <result property="sub_tipo_gar_det"     javaType="String"   column="sub_tipo_gar_det"       jdbcType="varchar"/>
        <result property="monto_max_det"        javaType="Double"   column="monto_max_det"          jdbcType="decimal"/>
        <result property="monto_cont_det"       javaType="Double"   column="monto_cont_det"         jdbcType="decimal"/>
        <result property="vencimiento_det"      javaType="Date"     column="vencimiento_det"        jdbcType="datetime"/>
        <result property="cobertura_det"        javaType="Double"   column="cobertura_det"          jdbcType="decimal"/>
        <result property="cond_garantia_det"    javaType="String"   column="cond_garantia_det"      jdbcType="varchar"/>
        <result property="gl_tipo_linea_det"    javaType="String"   column="gl_tipo_linea_det"      jdbcType="varchar"/>
        <result property="gl_moneda_det"        javaType="String"   column="gl_moneda_det"          jdbcType="varchar"/>
        <result property="gl_tipo_gar_det"      javaType="String"   column="gl_tipo_gar_det"        jdbcType="varchar"/>
        <result property="gl_sub_tipo_gar_det"  javaType="String"   column="gl_sub_tipo_gar_det"    jdbcType="varchar"/>
        <result property="gl_cond_gar_det"      javaType="String"   column="gl_cond_gar_det"        jdbcType="varchar"/>
    </resultMap>

    <resultMap class="java.util.HashMap" id="lineaGlobalydetalleSol">
    <!-- LINEA GLOBAL -->
        <result property="id_cab_lcg_sol"       javaType="Long"     column="id_cab_lcg_sol"         jdbcType="numeric" />
        <result property="moneda"               javaType="String"   column="moneda"                 jdbcType="varchar"/>
        <result property="monto_max_pesos"      javaType="Double"   column="monto_max_pesos"        jdbcType="numeric"/>
        <result property="monto_max_uf"         javaType="Double"   column="monto_max_uf"           jdbcType="numeric"/>
        <result property="vencimiento"          javaType="Date"     column="vencimiento"            jdbcType="datetime"/>
        <result property="total_garantia"       javaType="Double"   column="total_garantia"         jdbcType="numeric"/>
        <result property="rel_deuda_gtia"       javaType="Double"   column="rel_deuda_gtia"         jdbcType="decimal"/>
        <result property="deficit"              javaType="Double"   column="deficit"                jdbcType="numeric"/>
        <result property="ind_creditdesk"       javaType="Double"   column="ind_creditdesk"         jdbcType="numeric"/>
        <result property="glosa_moneda"         javaType="String"   column="glosa_moneda"           jdbcType="varchar"/>
    <!-- DETALLE -->
        <result property="id_detalle_linea"     javaType="Long"     column="id_detalle_linea"       jdbcType="numeric"/>
        <result property="tipo_lin_det"         javaType="String"   column="tipo_lin_det"           jdbcType="varchar"/>
        <result property="moneda_det"           javaType="String"   column="moneda_det"             jdbcType="varchar"/>
        <result property="monto_max_det"        javaType="Double"   column="monto_max_det"          jdbcType="decimal"/>
        <result property="vencimiento_det"      javaType="Date"     column="vencimiento_det"        jdbcType="datetime"/>
        <result property="cond_gar_det"         javaType="String"   column="cond_gar_det"           jdbcType="varchar"/>
        <result property="vigencia_det"         javaType="String"   column="vigencia_det"           jdbcType="varchar"/>
        <result property="gl_tipo_lin_det"      javaType="String"   column="gl_tipo_lin_det"        jdbcType="varchar"/>
        <result property="gl_moneda_det"        javaType="String"   column="gl_moneda_det"          jdbcType="varchar"/>
        <result property="gl_cond_gar_det"      javaType="String"   column="gl_cond_gar_det"        jdbcType="varchar"/>
        <result property="gl_vigencia_det"      javaType="String"   column="gl_vigencia_det"        jdbcType="varchar"/>
    </resultMap>

    <resultMap class="java.util.HashMap" id="rs-usuarioUltimaAprobacion">
        <result property="usuario"  javaType="String"   column="usuario"    jdbcType="varchar"/>
    </resultMap>

    <resultMap class="java.util.HashMap" id="rs-intInyectMargen">
        <result property="intentos" javaType="Integer"  column="intentos"   jdbcType="numeric"/>
    </resultMap>

    <procedure id="obtenerEstadoInyeccionMargen" parameterClass="java.util.HashMap" resultMap="estadoInyeccionMargen">
        {CALL sp_margen_cns_iny(
            #numeroDeSolicitud#,
            #rutSolicitante#
        )}
    </procedure>

    <procedure id="actualizarEstadoInyeccionMargen" parameterClass="java.util.HashMap">
        {CALL sp_margen_act_iny(
            #nro_solicitud#,
            #rut_solicitante#,
            #ejecutivo#,
            <isNull property="codigo_estado">NULL</isNull><isNotNull property="codigo_estado">#codigo_estado#</isNotNull>,
            <isNull property="codigoError">NULL</isNull><isNotNull property="codigoError">#codigoError#</isNotNull>,
            <isNull property="mensaje">NULL</isNull><isNotNull property="mensaje">#mensaje#</isNotNull>,
            <isNull property="id_ope_margen">NULL</isNull><isNotNull property="id_ope_margen">#id_ope_margen#</isNotNull>,
            <isNull property="nro_ope_margen">NULL</isNull><isNotNull property="nro_ope_margen">#nro_ope_margen#</isNotNull>,
            #numero_intentos#
        )}
    </procedure>

    <procedure id="obtenerLineaYDetalleVigente" parameterClass="java.util.HashMap" resultMap="lineaGlobalydetalleVig">
        {CALL sp_margen_cns_lgc_vig(
            #nro_solicitud#,
            #rut_cliente#
        )}
    </procedure>

    <procedure id="obtenerLineaYDetalleSolicitada" parameterClass="java.util.HashMap" resultMap="lineaGlobalydetalleSol">
        {CALL sp_margen_cns_lgc_sol(
            #nro_solicitud#,
            #rut_cliente#
        )}
    </procedure>

    <procedure id="consultarCambioEstadoMargen" parameterClass="java.util.HashMap" resultMap="respuestainyMargen">
        {CALL sp_margen_cns_iny_sol(
            #numeroDeSolicitud#,
            #cantidadSolicitantes#
        )}
    </procedure>

    <procedure id="verificarSolicitudAInyectar" parameterClass="java.util.HashMap" resultMap="respuestaverificarSolicitud">
        {CALL sp_margen_eval_iny_sol(
            #nro_solicitud#
        )}
    </procedure>

    <procedure id="usuarioUltimaAprobacion" parameterClass="java.util.HashMap" resultMap="rs-usuarioUltimaAprobacion">
        {CALL sp_margen_cns_ult_usu_apr(
            #nro_solicitud#
        )}
    </procedure>

    <procedure id="intInyectMargen" parameterClass="java.util.HashMap" resultMap="rs-intInyectMargen">
        {CALL sp_margen_cns_int_iny_mar(
            #nro_solicitud#
        )}
    </procedure>

<!-- ESTADO INYECCION MARGEN -->


<procedure id="guardarDatosClientePersonaExistente" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_cli_per_exi(
            #codigoEjecutivo#,
            #nro_solicitud#,
            #rut#,
            #cic#,
            #digito#,
            #nombres#,
            #apellidos#,
            #edad#,
            #nro_hijos#,
            #nro_cargas#,
            #antiguedad_emp_trab#,
            #renta_fija#,
            #renta_variable#,
            #renta_liquida#,
            <isNull property="periodo_renta_fija">NULL</isNull><isNotNull property="periodo_renta_fija">#periodo_renta_fija#</isNotNull>,
            <isNull property="periodo_renta_variable">NULL</isNull><isNotNull property="periodo_renta_variable">#periodo_renta_variable#</isNotNull>,
            <isNull property="rut_emp_trab">NULL</isNull><isNotNull property="rut_emp_trab">#rut_emp_trab#</isNotNull>,
            <isNull property="digito_emp_trab">NULL</isNull><isNotNull property="digito_emp_trab">#digito_emp_trab#</isNotNull>,
            <isNull property="nombre_emp_trab">NULL</isNull><isNotNull property="nombre_emp_trab">#nombre_emp_trab#</isNotNull>,
            <isNull property="nombre_emp_trab_ant">NULL</isNull><isNotNull property="nombre_emp_trab_ant">#nombre_emp_trab_ant#</isNotNull>,
            #anno_ing_res_act#,
            #anno_ing_universidad#,
            #meses_trab_emp_ant#,
            #fecha_cta_cte_vig#,
            #fecha_nacimiento#,
            #banca#,
            #tipo_cliente#,
            #estado_civil#,
            #nivel_educacional#,
            #situacion_viv#,
            #oficina#,
            <isNull property="segmento">NULL</isNull><isNotNull property="segmento">#segmento#</isNotNull>,
            <isNull property="nacionalidad">NULL</isNull><isNotNull property="nacionalidad">#nacionalidad#</isNotNull>,
            <isNull property="tipo_plan">NULL</isNull><isNotNull property="tipo_plan">#tipo_plan#</isNotNull>,
            #sexo#,
            #actividad#,
            <isNull property="universidad">NULL</isNull><isNotNull property="universidad">#universidad#</isNotNull>,
            #carrera#,
            #situacion_laboral#,
            <isNull property="rut_conyuge">NULL</isNull><isNotNull property="rut_conyuge">#rut_conyuge#</isNotNull>,
            <isNull property="dv_conyuge">NULL</isNull><isNotNull property="dv_conyuge">#dv_conyuge#</isNotNull>,
            <isNull property="renta_conyuge">NULL</isNull><isNotNull property="renta_conyuge">#renta_conyuge#</isNotNull>,
            <isNull property="nombre_completo_conyuge">NULL</isNull><isNotNull property="nombre_completo_conyuge">#nombre_completo_conyuge#</isNotNull>,
            <isNull property="regimen_conyugal">NULL</isNull><isNotNull property="regimen_conyugal">#regimen_conyugal#</isNotNull>,
            <isNull property="id_act_conyuge">NULL</isNull><isNotNull property="id_act_conyuge">#id_act_conyuge#</isNotNull>,
            #ejecutivo_cabecera#
        )}
    </procedure>
    
    <procedure id="guardarDatosBasicosClienteEmpresaExistente"  parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_cli_emp_exi(
            #codigoEjecutivo#,
            #nro_solicitud#,
            <isNull property="ejecutivoDestino">NULL</isNull><isNotNull property="ejecutivoDestino">#ejecutivoDestino#</isNotNull>,
            <isNull property="nombrejecutivoDestino">NULL</isNull><isNotNull property="nombrejecutivoDestino">#nombrejecutivoDestino#</isNotNull>,
            <isNull property="oficinaEjecutivoDestino">NULL</isNull><isNotNull property="oficinaEjecutivoDestino">#oficinaEjecutivoDestino#</isNotNull>,
            #rut#,
            #digito#,
            #cic#,
            #banca#,
            #operaOtraOficina#,
            <isNull property="razonSocial">NULL</isNull><isNotNull property="razonSocial">#razonSocial#</isNotNull>,
            <isNull property="actividad">NULL</isNull><isNotNull property="actividad">#actividad#</isNotNull>,
            <isNull property="matriz_sucursal">NULL</isNull><isNotNull property="matriz_sucursal">#matriz_sucursal#</isNotNull>,
            <isNull property="categoriaEmpresa">NULL</isNull><isNotNull property="categoriaEmpresa">#categoriaEmpresa#</isNotNull>,
            <isNull property="clasificacion">NULL</isNull><isNotNull property="clasificacion">#clasificacion#</isNotNull>,
            <isNull property="fecha_inicio">NULL</isNull><isNotNull property="fecha_inicio">#fecha_inicio#</isNotNull>,
            <isNull property="fecha_apertura_cta_cte">NULL</isNull><isNotNull property="fecha_apertura_cta_cte">#fecha_apertura_cta_cte#</isNotNull>,
            <isNull property="sector_economico">NULL</isNull><isNotNull property="sector_economico">#sector_economico#</isNotNull>
        )}
    </procedure>
    
     <procedure id="actualizarClienteDesdeSolicitudAnterior" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_hist(
            #rut#,
            #nro_solicitud#
        )}
    </procedure>
    
    <resultMap id="revisionSolicitud" class="java.util.HashMap">
        <result property="rut"  column="rut"/>
        <result property="dv"    column="dv"/>
        <result property="nro_solicitud"    column="nro_solicitud"/>
        <result property="est_civil"    column="est_civil"/>
        <result property="nivel_edu"    column="nivel_edu"/>
        <result property="situacion_viv"    column="situacion_viv"/>
        <result property="id_act_cli"   column="id_act_cli"/>
        <result property="id_oficina"   column="id_oficina"/>
        <result property="id_banca" column="id_banca"/>
        <result property="tipo_plan"    column="tipo_plan"/>
        <result property="tipo_cliente" column="tipo_cliente"/>
        <result property="fecha_cta_cte_vig"    column="fecha_cta_cte_vig"/>
        <result property="anno_ing_residencia"  column="anno_ing_residencia"/>
        <result property="id_bco"   column="id_bco"/>
        <result property="fecha_creacion_cs"  column="fecha_creacion_cs"/>
        <result property="fecha_modifica_cs"  column="fecha_modifica_cs"/>
        <result property="id_segmento"  column="id_segmento"/>
        <result property="id_sector_economico_emp"  column="id_sector_economico_emp"/>
        <result property="id_clasificacion_emp" column="id_clasificacion_emp"/>
        <result property="id_categoria_emp" column="id_categoria_emp"/>
        <result property="fecha_nacimiento" column="fecha_nacimiento"/>
        <result property="fecha_modifica_cli"   column="fecha_modifica_cli"/>
        <result property="fecha_inicio_emp" column="fecha_inicio_emp"/>
        <result property="sem_patrimonio"   column="sem_patrimonio"/>
        <result property="sem_carga_financiera" column="sem_carga_financiera"/>
        <result property="sem_icr"  column="sem_icr"/>
        <result property="situacion_laboral"    column="situacion_laboral"/>
        <result property="rut_emp"  column="rut_emp"/>
        <result property="dv_emp"   column="dv_emp"/>
        <result property="nombre_emp"   column="nombre_emp"/>
        <result property="antiguedad_laboral"   column="antiguedad_laboral"/>
        <result property="nombre_emp_ant"   column="nombre_emp_ant"/>
        <result property="meses_emp_ant"    column="meses_emp_ant"/>
        <result property="renta_variable"   column="renta_variable"/>
        <result property="renta_fija"   column="renta_fija"/>
        <result property="periodo_renta_var"    column="periodo_renta_var"/>
        <result property="periodo_renta_fija"   column="periodo_renta_fija"/>
        <result property="fecha_ingreso_cf" column="fecha_ingreso_cf"/>
        <result property="moneda_linea_cre_sol" column="moneda_linea_cre_sol"/>
        <result property="monto_max_linea_cre_sol"  column="monto_max_linea_cre_sol"/>
        <result property="moneda_linea_cre_vig" column="moneda_linea_cre_vig"/>
        <result property="monto_max_linea_cre_vig"  column="monto_max_linea_cre_vig"/>
        <result property="fecha_periodo_ult_ef" column="fecha_periodo_ult_ef"/>
        <result property="fecha_periodo_pen_ef" column="fecha_periodo_pen_ef"/>
        <result property="fecha_periodo_ult_ve" column="fecha_periodo_ult_ve"/>
        <result property="fecha_periodo_pen_ve" column="fecha_periodo_pen_ve"/>
        <result property="cant_solicitud_credito"   column="cant_solicitud_credito"/>
        <result property="tipo_lin_sol_repetida" column="tipo_lin_sol_repetida"/>
        <result property="id_act_conyuge" column="id_act_conyuge"/>
        <result property="rut_conyuge " column="rut_conyuge"/>
        <result property="dv_conyuge" column="dv_conyuge"/>
        <result property="nombre_conyuge" column="nombre_conyuge"/>
        <result property="renta_conyuge" column="renta_conyuge"/>
        <result property="id_universidad" column="id_universidad"/>
        <result property="anno_ingreso" column="anno_ingreso"/>
        <result property="carrera" column="carrera"/>
        <result property="fecha_modifica_es"   column="fecha_modifica_es"/>
        <result property="fecha_modifica_ult_ve"   column="fecha_modifica_ult_ve"/>
        <result property="det_lin_sol_cero"   column="det_lin_sol_cero"/>
        <result property="monto_max_uf_cre_sol"   column="monto_max_uf_cre_sol"/>
        <result property="fec_vcmto_mar_venc"       javaType="String"  column="fec_vcmto_mar_venc"      jdbcType="varchar"/>
        <result property="fec_vcmto_dlc_venc"       javaType="String"  column="fec_vcmto_dlc_venc"      jdbcType="varchar"/>
        <result property="venc_mar_menor_venc_lin"  javaType="String"  column="venc_mar_menor_venc_lin" jdbcType="varchar"/>
        <result property="mont_lin_may_mont_mar"    javaType="String"  column="mont_lin_may_mont_mar"   jdbcType="varchar"/>
    </resultMap>
    
    <procedure id="obtenerRevisionSolicitud" resultMap="revisionSolicitud" parameterClass="java.util.HashMap">
         {CALL sp_solicitud_cns_revision(
            #rut#,
            #nro_solicitud#
        )}
    </procedure>
    
    <procedure id="existeClienteEnGrupoEconomico" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
         {CALL sp_solicitud_cns_exi_gre(
            #rut#,
            #nro_solicitud#,
            #tipo_relacion#
            
        )}

    </procedure>


<parameterMap id="setConsultarProductos" class="java.util.HashMap">
    	<parameter property="tipoMoneda" javaType="java.lang.Integer" jdbcType="Int"/>
    	<parameter property="tipoTasa"	 javaType="java.lang.Integer" jdbcType="Int"/>
    </parameterMap>
    <resultMap id="getConsultarProductos" class="java.util.HashMap">
    	<result property="idProducto" 	column="idProducto" javaType="java.lang.Integer"/>
    	<result property="producto" 	column="producto" 	javaType="java.lang.String"/>
    	<result property="tipoMoneda"	column="tipoMoneda"	javaType="java.lang.String"/>
    	<result property="tipoTasa"		column="tipoTasa"	javaType="java.lang.String"/>
    </resultMap>
    <procedure id="consultarProductos" parameterMap="setConsultarProductos" resultMap="getConsultarProductos">
    	{CALL sp_con_prod( ?, ?)}    
</procedure>
    
     <parameterMap id="setObtenerFormularios" class="java.util.HashMap">
    	<parameter property="idProducto" javaType="java.lang.Integer" jdbcType="Numeric"/>
    	<parameter property="esSetDeDocumentos" javaType="java.lang.String" jdbcType="Char"/>
    </parameterMap>
    <resultMap id="getObtenerFormularios" class="java.util.HashMap">
    	<result property="idDocumento"	column="idDocumento"	javaType="java.lang.Integer"/>
    	<result property="documento"	column="documento"		javaType="java.lang.String"/>
    	<result property="url" 			column="url"			javaType="java.lang.String"/>
    </resultMap>
    <procedure id="obtenerFormularios" parameterMap="setObtenerFormularios" resultMap="getObtenerFormularios">
    	{CALL sp_con_form_prod( ? , ?)}
    </procedure>

    <!-- Bloqueo de solicitudes -->
    <resultMap id="resultadoBloqueoSolicitudes" class="java.util.HashMap">
        <result property="bloqueo"  javaType="String"   column="bloqueo"    jdbcType="varchar"/>
    </resultMap>

    <procedure id="consultarBloqueoSolicitud" parameterClass="java.util.HashMap" resultMap="resultadoBloqueoSolicitudes">
        {CALL sp_solicitud_cns_blq_sol(
            #id_modulo#,
            #id_solicitud#,
            <isNull property="id_cargo">NULL</isNull><isNotNull property="id_cargo">#id_cargo#</isNotNull>,
            #ejecutivo#
        )}
    </procedure>
    <!-- Bloqueo de solicitudes -->

    <!-- Consulta antecedenes bci y sbif -->
    <resultMap id="deudaBciYSbif" class="java.util.HashMap">
        <!-- DATOS COMUNES -->
        <result property="fecha_cta_cte"        javaType="Date"     column="fecha_cta_cte"          jdbcType="DATE"/>
        <!-- DATOS DEUDA BCI -->
        <result property="numero_cta_cte"       javaType="Integer"  column="numero_cta_cte"         jdbcType="int"/>
        <result property="numero_protestos"     javaType="Integer"  column="numero_protestos"       jdbcType="int"/>
        <result property="numero_aclaraciones"  javaType="Integer"  column="numero_aclaraciones"    jdbcType="int"/>
        <result property="deuda_indirecta"      javaType="Double"   column="deuda_indirecta"        jdbcType="numeric"/>
        <result property="deuda_vencida"        javaType="Double"   column="deuda_vencida"          jdbcType="numeric"/>
        <result property="deuda_compl"          javaType="Double"   column="deuda_compl"            jdbcType="numeric"/>
        <result property="saldo_prom_actual"    javaType="Double"   column="saldo_prom_actual"      jdbcType="numeric"/>
        <result property="total_dep_trim_act"   javaType="Double"   column="total_dep_trim_act"     jdbcType="numeric"/>
        <!-- DATOS DEUDA SBIF -->
        <result property="fecha_info_sbif"      javaType="Date"     column="fecha_info_sbif"        jdbcType="DATE"/>
        <result property="deu_consumo_sbif"     javaType="Double"   column="deu_consumo_sbif"       jdbcType="numeric"/>
        <result property="deu_comercial_sbif"   javaType="Double"   column="deu_comercial_sbif"     jdbcType="numeric"/>
        <result property="deu_hipotecaria_sbif" javaType="Double"   column="deu_hipotecaria_sbif"   jdbcType="numeric"/>
        <result property="deu_morosa_sbif"      javaType="Double"   column="deu_morosa_sbif"        jdbcType="numeric"/>
        <result property="deu_indirecta_sbif"   javaType="Double"   column="deu_indirecta_sbif"     jdbcType="numeric"/>
        <result property="deu_castigada_sbif"   javaType="Double"   column="deu_castigada_sbif"     jdbcType="numeric"/>
        <result property="deu_vencida_sbif"     javaType="Double"   column="deu_vencida_sbif"       jdbcType="numeric"/>
        <result property="deu_dir_venc_sbif"    javaType="Double"   column="deu_dir_venc_sbif"      jdbcType="numeric"/>
        <result property="deu_dir_cast_sbif"    javaType="Double"   column="deu_dir_cast_sbif"      jdbcType="numeric"/>
        <result property="deu_indir_venc_sbif"  javaType="Double"   column="deu_indir_venc_sbif"    jdbcType="numeric"/>
        <result property="prot_vig_sbif"        javaType="Double"   column="prot_vig_sbif"          jdbcType="numeric"/>
        <result property="aclarac_sbif"         javaType="Double"   column="aclarac_sbif"           jdbcType="numeric"/>
    </resultMap>

    <procedure id="obtenerDeudaBciYSbif" parameterClass="java.util.HashMap" resultMap="deudaBciYSbif">
        {CALL sp_solicitud_cns_bci_sbif(
            #rut#,
            #nro_solicitud#
        )}
    </procedure>

    <procedure id="guardarAntecedentesBCI" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_ant_bci(
                                          #rut#, 
                                          #nro_solicitud#,
                                          #numero_cta_cte#, 
                                          #deuda_indirecta#, 
                                          #deuda_vencida#, 
                                          #deuda_complementaria#, 
                                          #numero_protestos#, 
                                          #saldo_promedio_actual#, 
                                          #total_dep_trim_act#,
                                          #numero_aclaraciones#
                                        )}
    </procedure>

    <!-- Fin Consulta antecedenes bci y sbif -->

<!-- Fin Consulta antecedenes bci y sbif -->

    <!-- Numero de solicitudes en el mes -->
    
    <resultMap id="totalEvaluaciones" class="java.util.HashMap">
        <result property="resultado"  javaType="Integer"   jdbcType="int"/>
    </resultMap>

    <procedure id="consultarEvaluaciones" parameterClass="java.util.HashMap" resultMap="totalEvaluaciones">
        {CALL sp_cns_numero_evaluaciones( #rut#, #mesEvaluacion# )}
    </procedure>
    
    <!-- Numero de solicitudes en el mes-->

    <!-- Datos inicio relacion y filtros de riesgo del cliente -->
    
    <resultMap id="datosCliente" class="java.util.HashMap">

        <result property="deudaBCIDirecta"  javaType="Boolean"  column= "deudaBCIDirecta"     jdbcType="bit"/>
        <result property="deudaSBIFDirecta"  javaType="Boolean" column= "deudaSBIFDirecta"    jdbcType="bit"/>
        <result property="fechaInicioRelacion"  javaType="Date"   column= "fechaInicioRelacion" jdbcType="datetime"/>
        
    </resultMap>

    <procedure id="consultarRelacionBancoCliente" parameterClass="java.util.HashMap" resultMap="datosCliente">
        {CALL sp_cns_inicio_relacion_banco( #rut#, #digitoVerificador# )}
    </procedure>
    
    <!-- Datos inicio relacion y filtros de riesgo del cliente -->
    
   <!-- Datos deuda Sbif del cliente -->
    <resultMap id="datosDeuda" class="java.util.HashMap">
        <result property="deudaConsumo"  javaType="Double"  column= "deudaConsumo" jdbcType="decimal"/>
        <result property="deudaHipotecaria"  javaType="Double"  column= "deudaHipotecaria" jdbcType="decimal"/>
        <result property="deudaComercial"  javaType="Double" column= "deudaComercial"  jdbcType="decimal"/>
    </resultMap>

    <procedure id="consultarDeudaSbif" parameterClass="java.util.HashMap" resultMap="datosDeuda">
        {CALL sp_cns_deuda_sbif_CDA( #rut#, #digitoVerificador# )}
    </procedure>
    <!-- Datos deuda Sbif del cliente -->

    <!-- Renta del cliente -->
    <resultMap id="rentaCliente" class="java.util.HashMap">
        <result property="rentaFija"  javaType="Double"  column="rentaFija"  jdbcType="decimal"/>
        <result property="rentaVariable"  javaType="Double" column="rentaVariable"  jdbcType="decimal"/>
        <result property="fechaRenta"  javaType="Date"  column="fechaRenta" jdbcType="datetime"/>
               
    </resultMap>

    <procedure id="consultarRentaCliente" parameterClass="java.util.HashMap" resultMap="rentaCliente">
        {CALL sp_cns_renta_utilizada( #rut#, #digitoVerificador# )}
    </procedure>
    
    <!-- Renta del cliente -->
        
     <procedure id="ingresarMensajeRespuesta" parameterClass="java.util.HashMap">
        {CALL sp_cda_res_ins_men(
            #num_solicitud#,
            #num_mensaje#,
            #cod_severidad#,
            #descripcion#,
            #resolucion#
        )}
    </procedure>
    
     <procedure id="ingresarPuntajeRespuesta" parameterClass="java.util.HashMap">
        {CALL sp_cda_res_ins_puntuacion(
            #num_solicitud#,
            #puntajeFinal#,
            #puntajePrima#,
            #nombrePuntaje#
        )}
    </procedure>
    
    <procedure id="ingresarDecisionRespuesta" parameterClass="java.util.HashMap">
        {CALL sp_cda_res_ins_dec(
            #num_solicitud#,
            #resultado#,
            #ind_estado#,
            #razon#
        )}
    </procedure>
    
    <procedure id="ingresarGrupoReglasRespuesta" parameterClass="java.util.HashMap">
        {CALL sp_cda_res_ins_set_regla(
            #num_solicitud#,
            #nomGrupoReglas#,
            #resultado#
        )}
    </procedure>
    
    <procedure id="ingresarReglaRespuesta" parameterClass="java.util.HashMap">
        {CALL sp_cda_res_ins_regla(
            #num_solicitud#,
            #nomGrupoReglas#,
            <isNull property="nomRegla">NULL</isNull><isNotNull property="nomRegla">#nomRegla#</isNotNull>,
            <isNull property="razon">NULL</isNull><isNotNull property="razon">#razon#</isNotNull>
        )}
    </procedure>
        <procedure id="ingresarArbolDecisionRespuesta" parameterClass="java.util.HashMap">
        {CALL sp_cda_res_ins_arbol_dec(
            #num_solicitud#,
            #nombre#,
            #resultado#
        )}
    </procedure>
    
   <procedure id="ingresarSolicitante" parameterClass="java.util.HashMap">
        {CALL sp_cda_ins_solicitante(
			#num_solicitud#, 
			#cod_tipo_solicitante#,
			<isNull property="cod_tipo_contrato_lab">NULL</isNull><isNotNull property="cod_tipo_contrato_lab">#cod_tipo_contrato_lab#</isNotNull>,
			<isNull property="cod_tipo_activ_abr">NULL</isNull><isNotNull property="cod_tipo_activ_abr">#cod_tipo_activ_abr#</isNotNull>,
			<isNull property="cod_tipo_ocupacion">NULL</isNull><isNotNull property="cod_tipo_ocupacion">#cod_tipo_ocupacion#</isNotNull>,
			<isNull property="monto_lgc">NULL</isNull><isNotNull property="monto_lgc">#monto_lgc#</isNotNull>,
			<isNull property="mora_vigente">NULL</isNull><isNotNull property="mora_vigente">#mora_vigente#</isNotNull>,
			<isNull property="morosidad_cc">NULL</isNull><isNotNull property="morosidad_cc">#morosidad_cc#</isNotNull>,
			<isNull property="prob_incumplimiento">NULL</isNull><isNotNull property="prob_incumplimiento">#prob_incumplimiento#</isNotNull>,
			<isNull property="protestos_aclarados">NULL</isNull><isNotNull property="protestos_aclarados">#protestos_aclarados#</isNotNull>,
			<isNull property="score_bureau">NULL</isNull><isNotNull property="score_bureau">#score_bureau#</isNotNull>,
			<isNull property="fecha_apertura_cta">NULL</isNull><isNotNull property="fecha_apertura_cta">#fecha_apertura_cta#</isNotNull>,
			<isNull property="antiguedad_laboral">NULL</isNull><isNotNull property="antiguedad_laboral">#antiguedad_laboral#</isNotNull>,
			<isNull property="fecha_lgc">NULL</isNull><isNotNull property="fecha_lgc">#fecha_lgc#</isNotNull>,
			<isNull property="flag_bancarizacion">NULL</isNull><isNotNull property="flag_bancarizacion">#flag_bancarizacion#</isNotNull>,
			<isNull property="flag_dependiente">NULL</isNull><isNotNull property="flag_dependiente">#flag_dependiente#</isNotNull>,
			<isNull property="numero_tc">NULL</isNull><isNotNull property="numero_tc">#numero_tc#</isNotNull>,
			<isNull property="residencia_definitiva">NULL</isNull><isNotNull property="residencia_definitiva">#residencia_definitiva#</isNotNull>,
			<isNull property="numero_evaluaciones">NULL</isNull><isNotNull property="numero_evaluaciones">#numero_evaluaciones#</isNotNull>,
			<isNull property="fecha_referencia_negativa">NULL</isNull><isNotNull property="fecha_referencia_negativa">#fecha_referencia_negativa#</isNotNull>,
			<isNull property="tipo_persona">NULL</isNull><isNotNull property="tipo_persona">#tipo_persona#</isNotNull>,
			<isNull property="tipo_cliente">NULL</isNull><isNotNull property="tipo_cliente">#tipo_cliente#</isNotNull>,
			<isNull property="fecha_inicio_relacion">NULL</isNull><isNotNull property="fecha_inicio_relacion">#fecha_inicio_relacion#</isNotNull>,
			<isNull property="score_r04">NULL</isNull><isNotNull property="score_r04">#score_r04#</isNotNull>,
			<isNull property="fecha_score_r04">NULL</isNull><isNotNull property="fecha_score_r04">#fecha_score_r04#</isNotNull>,
			<isNull property="tasa_riesgo">NULL</isNull><isNotNull property="tasa_riesgo">#tasa_riesgo#</isNotNull>,
			<isNull property="score_comportamental">NULL</isNull><isNotNull property="score_comportamental">#score_comportamental#</isNotNull>
        )}
    </procedure>
    
       <procedure id="ingresarIndicadoresRespuesta" parameterClass="java.util.HashMap">
        {CALL sp_cda_res_ins_flags(
            #num_solicitud#,
            #tipo_indicador#,
            #valor#
        )}
    </procedure>
    
    <procedure id="ingresarEndeudamientoCliente" parameterClass="java.util.HashMap">
        {CALL sp_cda_res_ins_endeuda_cli(
           
            #num_solicitud#, 
            #carga_financiera_maxima#, 
            #factor_tope_endeudamiento#, 
            #lcg_cortoplazo_ajustada#, 
            #lcg_corto_plazo#, 
            #lcg_final#, 
            #carga_disponible#, 
            #carga_financiera#, 
            #chip_no_bci#, 
            #comercial_no_bci#, 
            #consumo_no_bci#, 
            #endeudamiento_adicional#, 
            #endeudamiento_maximo_final#, 
            #maximo_endeudamiento#, 
            #proporcion_deuda#, 
            #factor_maximo_tdc#, 
            #factor_linea_sobregiro#
            )}
    </procedure>
    
        <procedure id="ingresarFiltrosSolicitud" parameterClass="java.util.HashMap">
        {CALL sp_cda_ins_filtros(
            #num_solicitud#,
            #cod_tipo_filtro#, 
            #indicador#
        )}
    </procedure>
    
     <procedure id="ingresarSolicitud" parameterClass="java.util.HashMap">
        {CALL sp_cda_ins_sol(
            #num_solicitud#,
            #rut_cliente#,
            #fecha_evaluacion#,
            #valor_uf#,
            #usuario_creador#,
            #usuario_modifica#,
            #fecha_creacion#,
            #fecha_modificacion#
        )}
    </procedure>
   
    
  <procedure id="ingresarProductosSolicitud" parameterClass="java.util.HashMap">
        {CALL sp_cda_ins_producto(
            #num_solicitud#,
            #cod_tipo_producto#,
            #estado_producto#,
            <isNull property="cod_tipo_hipotecario">NULL</isNull><isNotNull property="cod_tipo_hipotecario">#cod_tipo_hipotecario#</isNotNull>,
			<isNull property="cod_tipo_obj_hipo">NULL</isNull><isNotNull property="cod_tipo_obj_hipo">#cod_tipo_obj_hipo#</isNotNull>,
			<isNull property="cod_tipo_aval">NULL</isNull><isNotNull property="cod_tipo_aval">#cod_tipo_aval#</isNotNull>,
			#cuota_vigente#,
			#cupo_vigente#,
			#fecha_producto_bci#,
			#monto_solicitado#,
			<isNull property="plazo">NULL</isNull><isNotNull property="plazo">#plazo#</isNotNull>,
			#saldo#,
			<isNull property="valor_venta">NULL</isNull><isNotNull property="valor_venta">#valor_venta#</isNotNull>,
			<isNull property="dividendo">NULL</isNull><isNotNull property="dividendo">#dividendo#</isNotNull>,
			<isNull property="porcentaje_financiar">NULL</isNull><isNotNull property="porcentaje_financiar">#porcentaje_financiar#</isNotNull>,
			<isNull property="compra_cartera">NULL</isNull><isNotNull property="compra_cartera">#compra_cartera#</isNotNull>,
			<isNull property="recurse">NULL</isNull><isNotNull property="recurse">#recurse#</isNotNull>,
			#monto_subdetalle#,
			#fecha_subdetalle#,
			#cuota_solicitada#,
			<isNull property="fecha_vencimiento">NULL</isNull><isNotNull property="fecha_vencimiento">#fecha_vencimiento#</isNotNull>,
			<isNull property="condicion_garantia">NULL</isNull><isNotNull property="condicion_garantia">#condicion_garantia#</isNotNull>,
			#correlativo_prod#
        )}
    </procedure>
    
    <procedure id="ingresarClasificacionCliente" parameterClass="java.util.HashMap">
        {CALL sp_cda_res_ins_clasif_cli(
			#num_solicitud#,
	        #antiguedad_cliente#,
	        #cargo#,
	        #niveleconomico#,
	        #tipo_cliente#,
	        #antiguedad_referencia#,
	        #estado_civil_vivienda_score#,
	        #renta_liquida_familiar#,
	        #porc_carga_finan_familiar#,
	        #antiguedad_ctacte#,
	        #score_aplicacion#,
	        #patrimonio_score_aplicacion#
        )}
    </procedure>

    <procedure id="ingresarOferta" parameterClass="java.util.HashMap">
        {CALL sp_cda_res_ins_oferta (
	        #num_solicitud#,
	        #tipo_oferta#,
	        #monto_total#,
	        <isNull property="condicion_gtia_oferta">NULL</isNull><isNotNull property="condicion_gtia_oferta">#condicion_gtia_oferta#</isNotNull>,
	        <isNull property="vigencia_oferta">NULL</isNull><isNotNull property="vigencia_oferta">#vigencia_oferta#</isNotNull>,
	        #plazo_oferta#,
	        #correlativo_oferta#
        )}
    </procedure>
    
        <procedure id="ingresarEstadoSituacion" parameterClass="java.util.HashMap">
        {CALL sp_cda_ins_est_sit(#num_solicitud#, #cod_tipo_est_situacion#, #cantidad#, #monto#
        )}
    </procedure>

    <procedure id="eliminarTodasLasLDCSolicitadas" parameterClass="java.util.HashMap">
        {CALL sp_cda_del_ldc_sol_suc(
            #id_cab_lgc_sol#
        )}
    </procedure>

    <procedure id="ingresarRenta" parameterClass="java.util.HashMap">
        {CALL sp_cda_ins_renta(
            #numero_solicitud#,
            #tipo_renta#,
            #renta_fija#,
            #renta_variable#,
            #renta_liquida#,
            #fecha#
        )}
    </procedure>

    <procedure id="ingresarDeudaSBIFMotorDecisiones" parameterClass="java.util.HashMap">
        {CALL sp_cda_ins_deuda_sbif(
            #numero_solicitud#,
            #tipo_deuda#,
            #monto_deuda#,
            #fecha_deuda#
        )}
    </procedure>

    <procedure id="ingresarEnvioSBIFMotorDecisiones" parameterClass="java.util.HashMap">
        {CALL sp_cda_ins_envio_sbif(
            #numero_solicitud#,
            #tipo_producto#,
            #monto#
        )}
    </procedure>

    <resultMap id="flag_bancarizacion" class="java.util.HashMap">
        <result property="flag_bancarizacion"  javaType="String"  column= "flag_bancarizacion" jdbcType="varchar"/>
    </resultMap>

    <procedure id="consultarFlagBancarizacion" parameterClass="java.util.HashMap" resultMap="flag_bancarizacion">
        {CALL sp_cda_cns_flag_bancarizacion(
            #rut_cli#
        )}
    </procedure>
    
    <!-- Aval Solicitante -->
    <resultMap id="resultadoAvalSolicitante" class="java.util.HashMap">
        <result property="rutAval"          javaType="Long"     column="rut_aval"           jdbcType="numeric"/>
        <result property="nombresAval"      javaType="String"   column="nombres_aval"       jdbcType="varchar"/>
        <result property="fuenteIngresos"   javaType="String"   column="fuente_ingreso"     jdbcType="varchar"/>
        <result property="ingresos"         javaType="Double"   column="ingresos"           jdbcType="numeric"/>
    </resultMap>

    <procedure id="obtenerRutAvalSolicitante" parameterClass="java.util.HashMap" resultMap="resultadoAvalSolicitante">
        {CALL sp_solicitud_avl_solicitante(
            #rut_solicitante#,
            #nro_solicitud#
        )}
    </procedure>
    <!-- Fin Aval Solicitante -->

    <!-- Modificar antigüedad nivel de renta para CDA -->
    <procedure id="modificarAntiguedadNivelDeRentaActualizada" parameterClass="java.util.HashMap">
        {CALL sp_upd_ant_renta_act(
            #numero_solicitud#,
            #antiguedad_renta#
        )}
    </procedure>

    <!-- GUARDADO XML ENTRADA Y SALIDA EVALUACION AUTOMATICA -->
    <parameterMap class="java.util.HashMap" id="parametrosAlmacenarXmlMotorDecision">

        <!-- PRIMERA CONSULTA (SELECT) -->
        <parameter property="numero_solicitud"  jdbcType="NUMERIC"  javaType="Long" />
        <parameter property="rut_cliente"       jdbcType="NUMERIC"  javaType="Long" />

        <!-- SEGUNDA CONSULTA (UPDATE) -->
        <parameter property="xml_entrada"       jdbcType="BINARY"/>
        <parameter property="xml_salida"        jdbcType="BINARY"/>
        <parameter property="numero_solicitud"  jdbcType="NUMERIC"  javaType="Long" />
        <parameter property="rut_cliente"       jdbcType="NUMERIC"  javaType="Long" />

        <!-- TERCERA CONSULTA (INSERT) -->
        <parameter property="numero_solicitud"  jdbcType="NUMERIC"  javaType="Long" />
        <parameter property="rut_cliente"       jdbcType="NUMERIC"  javaType="Long" />
        <parameter property="xml_entrada"       jdbcType="BINARY"/>
        <parameter property="xml_salida"        jdbcType="BINARY"/>
    </parameterMap>

    <statement id="almacenarXmlMotorDecision" parameterClass="java.util.HashMap" resultClass="int" parameterMap="parametrosAlmacenarXmlMotorDecision">
        DECLARE @paso INT
        SELECT @paso = count(1) FROM cda_xml_motor WHERE nro_solicitud = ? AND rut_cliente = ? 

        IF @paso > 0
            BEGIN
                UPDATE cda_xml_motor SET
                    xml_entrada = ?,
                    xml_salida = ?
                WHERE
                    nro_solicitud = ?
                    AND rut_cliente = ?
            END
        ELSE
            BEGIN
                INSERT INTO cda_xml_motor (nro_solicitud, rut_cliente, xml_entrada, xml_salida, est_proceso) VALUES (?, ?, ?, ?, 'D')
                SELECT @@ERROR as error
            END
    </statement>
    <!-- FIN GUARDADO XML ENTRADA Y SALIDA EVALUACION AUTOMATICA -->

    <!-- VARIABLES CDA SUCCORPORATIVA -->
    <resultMap id="result_var_motor" class="java.util.HashMap">
        <result property="flag_bancarizacion"   javaType="String"   column= "flag_bancarizacion"    jdbcType="varchar"/>
        <result property="deudaBCIDirecta"      javaType="Boolean"  column= "deudaBCIDirecta"       jdbcType="bit"/>
        <result property="deudaSBIFDirecta"     javaType="Boolean"  column= "deudaSBIFDirecta"      jdbcType="bit"/>
        <result property="flagCastigoNova"      javaType="String"   column= "flagCastigoNova"       jdbcType="char"/>
        <result property="fechaInicioRelacion"  javaType="Date"     column= "fechaInicioRelacion"   jdbcType="datetime"/>
        <result property="deudaConsumo"         javaType="Double"   column= "deudaConsumo"          jdbcType="decimal"/>
        <result property="deudaHipotecaria"     javaType="Double"   column= "deudaHipotecaria"      jdbcType="decimal"/>
        <result property="deudaComercial"       javaType="Double"   column= "deudaComercial"        jdbcType="decimal"/>
        <result property="nro_hijos"            javaType="Integer"  column="nro_hijos"              jdbcType="int"/>
        <result property="nro_cargas"           javaType="Integer"  column="nro_cargas"             jdbcType="int"/>
        <result property="score_r04"            javaType="Integer"  column="score_r04"               jdbcType="int"/>
        <result property="fecha_score_r04"      javaType="Integer"  column="fecha_score_r04"          jdbcType="int"/>
        <result property="tasa_riesgo"          javaType="Double"   column="tasa_riesgo"              jdbcType="decimal"/>
        
    </resultMap>

    <procedure id="consultarVariablesAdicionalesEAS" parameterClass="java.util.HashMap" resultMap="result_var_motor">
        {CALL sp_cda_cns_dts_eas(
            #rut_cliente#,
            #dv_cliente#,
            #nro_solicitud#
        )}
    </procedure>
    <!-- FIN VARIABLES CDA SUCCORPORATIVA -->

    <!-- Detalle Observacion Automatica -->
    <resultMap id="res_Det_obs_sol" class="java.util.HashMap">
        <result property="codigoObservacion"    javaType="String"   column= "codigo_obs"    jdbcType="varchar"/>
        <result property="observacion"          javaType="String"   column= "observacion"   jdbcType="varchar"/>
    </resultMap>

    <procedure id="obtenerDetalleObservacionSoliciud" parameterClass="java.util.HashMap" resultMap="res_Det_obs_sol">
        {CALL sp_cda_cns_det_obs_sol(
            #nro_solicitud#,
            #idObservacion#
        )}
    </procedure>

    <procedure id="respaldarLineaVigenteSuc" parameterClass="java.util.HashMap">
        {CALL sp_cda_clon_margen_suc(#id_cab_lcg_sol#)}
    </procedure>

    <resultMap id="res_consultaCLFOtorgadaMtr" class="java.util.HashMap">
        <result property="tipo_linea"       javaType="String"   column= "tipo_linea"        jdbcType="varchar"/>
        <result property="moneda"           javaType="String"   column= "moneda"            jdbcType="varchar"/>
        <result property="monto_max"        javaType="Double"   column= "monto_max"         jdbcType="numeric"/>
        <result property="vencimiento"      javaType="Date"     column= "vencimiento"       jdbcType="datetime"/>
        <result property="glosatipolinea"   javaType="String"   column= "glosatipolinea"    jdbcType="varchar"/>
        <result property="glosaMoneda"      javaType="String"   column= "glosaMoneda"       jdbcType="varchar"/>
    </resultMap>

    <procedure id="consultaCLFOtorgadaMtr" parameterClass="java.util.HashMap" resultMap="res_consultaCLFOtorgadaMtr">
        {CALL sp_cda_cns_margen_aprobado(#idsolicitud#,#rutcliente#)}
    </procedure>

    <!-- Detalle Observacion Automatica -->

    <!-- Dinero Instantáneo -->
    <parameterMap class="java.util.HashMap" id="parUltEvalCliSol">
        <parameter property="rut_cliente"   jdbcType="numeric"  javaType="Long"/>
        <parameter property="origen_sol"    jdbcType="varchar"  javaType="String"/>
        <parameter property="estado_sol"    jdbcType="int"      javaType="Integer"/>
    </parameterMap>

    <resultMap class="java.util.HashMap" id="respUltEvalCliSol">
        <result property="nro_solicitud"    javaType="Long"     column="nro_solicitud" jdbcType="numeric"/>
        <result property="fecha_act_sol"    javaType="Date"     column="fecha_act_sol" jdbcType="datetime"/>
    </resultMap>

    <resultMap class="java.util.HashMap" id="respuestaOrigenSol">
        <result property="rut_cliente"  javaType="Long"     column="rut_cliente"    jdbcType="numeric"/>
        <result property="ejecutivo"    javaType="String"   column="ejecutivo"      jdbcType="varchar"/>
        <result property="origen"       javaType="String"   column="origen"         jdbcType="varchar"/>
    </resultMap>

    <resultMap class="java.util.HashMap" id="respuestaUltEstSitAbreviado">
        <result property="nro_solicitud"    javaType="Long"     column="nro_solicitud"  jdbcType="numeric"/>
        <result property="origen"           javaType="String"   column="origen"         jdbcType="varchar"/>
        <result property="cant_veh"         javaType="Integer"  column="cant_veh"       jdbcType="int"/>
        <result property="cant_inv"         javaType="Integer"  column="cant_inv"       jdbcType="int"/>
        <result property="cant_br"          javaType="Integer"  column="cant_br"        jdbcType="int"/>
        <result property="monto_veh"        javaType="Double"   column="monto_veh"      jdbcType="numeric"/>
        <result property="monto_inv"        javaType="Double"   column="monto_inv"      jdbcType="numeric"/>
        <result property="monto_br"         javaType="Double"   column="monto_br"       jdbcType="numeric"/>
    </resultMap>

    <procedure id="consultarUltimaEvaluacionCliente" parameterMap="parUltEvalCliSol" resultMap="respUltEvalCliSol">
        {CALL sp_din_ins_cns_eval_cli(?,?,?)}
    </procedure>

    <procedure id="consultarOrigenSolicitud" resultMap="respuestaOrigenSol">
        {CALL sp_din_ins_cns_origen(#nro_solicitud#)}
    </procedure>

    <procedure id="consultarUltEstSitAbreviado" resultMap="respuestaUltEstSitAbreviado">
        {CALL sp_din_ins_cns_est_sit(#rut_cliente#)}
    </procedure>

    <!-- Fin Dinero Instantáneo -->
	
		<!-- Inicio Administrador Formularios -->
   	<resultMap id="getConsultarTipoDeMoneda" class="java.util.HashMap">	
			<result property="id_mon"  		column="id_mon"      javaType="Integer" />
			<result property="glosa" 	    column="glosa"       javaType="String"  />
			<result property="estado" 	    column="estado"      javaType="String"  />
		</resultMap>
		<procedure id="consultarTipoDeMoneda" resultMap="getConsultarTipoDeMoneda">
			{ CALL sp_formularios_con_mon ()}
		</procedure>
		
		<parameterMap id="setIngresarTipoDeMoneda" class="java.util.HashMap">
		  <parameter property="glosa"  jdbcType="CHAR" javaType="String" />		
		  <parameter property="estado" jdbcType="CHAR" javaType="String" />	
		</parameterMap>
		<procedure id="ingresarTipoDeMoneda" parameterMap="setIngresarTipoDeMoneda" resultClass="int">
			{ CALL sp_formularios_ins_mon ( ? , ? ) }
		</procedure>
		
		<parameterMap id="setActualizarTipoDeMoneda" class="java.util.HashMap">
			<parameter property="id_mon"     jdbcType="INT"   	javaType="Integer"/>	
			<parameter property="glosa"      jdbcType="CHAR" 	javaType="String" />
			<parameter property="estado"     jdbcType="CHAR" 	javaType="String" />		
		</parameterMap>
		<procedure id="actualizarTipoDeMoneda" parameterMap="setActualizarTipoDeMoneda" resultClass="int">
			{ CALL sp_formularios_upd_mon ( ? , ? , ? ) }
		</procedure>
		<parameterMap id="setIngresarTipoDeTasa" class="java.util.HashMap">
  			<parameter property="glosa"  jdbcType="CHAR" javaType="String" />	
  			<parameter property="estado"  jdbcType="CHAR" javaType="String" />	
		</parameterMap>
		<procedure id="ingresarTipoDeTasa" parameterMap="setIngresarTipoDeTasa" resultClass="int">
			{ CALL sp_formularios_ins_tasa ( ? , ? ) }
		</procedure>
		
		<parameterMap id="setActualizarTipoDeTasa" class="java.util.HashMap">
			<parameter property="identificadorDeTasa"  jdbcType="INT"  	javaType="Integer"/>	
			<parameter property="glosaDeTasa"          jdbcType="CHAR" 	javaType="String" />
			<parameter property="estadoDeTasa"         jdbcType="CHAR" 	javaType="String" />		
		</parameterMap>
		<procedure id="actualizarTipoDeTasa" parameterMap="setActualizarTipoDeTasa" resultClass="int">
			{ CALL sp_formularios_upd_tasa ( ? , ? , ? ) }
		</procedure>
		
		<resultMap id="getConsultarTipoDeTasa" class="java.util.HashMap">	
			<result property="identificadorDeTasa"  column="identificadorDeTasa" javaType="Integer" />
			<result property="glosaDeTasa" 	        column="glosaDeTasa"         javaType="String"  />
			<result property="estadoDeTasa" 	    column="estadoDeTasa"        javaType="String"  />
		</resultMap>
		<procedure id="consultarTipoDeTasa" resultMap="getConsultarTipoDeTasa">
			{ CALL sp_formularios_con_tasa ()}
		</procedure>
    
    <resultMap id="getConsultarFormularios" class="java.util.HashMap">	
			<result property="identificadorDocumento" column="identificadorDocumento"  javaType="Integer" />
			<result property="glosaDeDocumento" 	  column="glosaDeDocumento"        javaType="String"  />
			<result property="urlDeDocumento" 	      column="urlDeDocumento"          javaType="String"  />
			<result property="estadoDeDocumento" 	  column="estadoDeDocumento"       javaType="String"  />
			<result property="indicadorSetDocumento"  column="indicadorSetDocumento"   javaType="String"  />
			
		</resultMap>
		<procedure id="consultarFormularios" resultMap="getConsultarFormularios">
			{ CALL sp_formularios_con_documentos () }
		</procedure>
		
		<parameterMap id="setEliminarFormularios" class="java.util.HashMap" >	
			<parameter property="identificadorDocumento"  jdbcType="INT"  	javaType="Integer"/>
		</parameterMap>
		<procedure id="eliminarFormularios" parameterMap="setEliminarFormularios" resultClass="int">
			{ CALL sp_formularios_del_documento (?) }
		</procedure>
		
		<parameterMap id="setAgregarFormularios" class="java.util.HashMap" >	
			<parameter property="glosaDocumento"   jdbcType="VARCHAR"  	javaType="String"/>
			<parameter property="urlDocumento"     jdbcType="VARCHAR"  	javaType="String"/>
			<parameter property="estadoDocumento"  jdbcType="CHAR"  	javaType="String"/>
			<parameter property="setDocumento"     jdbcType="CHAR"  	javaType="String"/>
		</parameterMap>
		<procedure id="agregarFormularios" parameterMap="setAgregarFormularios" resultClass="int">
			{ CALL sp_formularios_ins_documento (?,?,?,?) }
		</procedure>
		
		<parameterMap id="setModificarFormularios" class="java.util.HashMap" >
		    <parameter property="identificadorDocumento"  jdbcType="INT"  	 javaType="Integer"/>	
			<parameter property="glosaDocumento"          jdbcType="CHAR"    javaType="String"/>
			<parameter property="urlDocumento"            jdbcType="CHAR"    javaType="String"/>
			<parameter property="estadoDocumento"         jdbcType="CHAR"  	 javaType="String"/>
			<parameter property="setDocumento"            jdbcType="CHAR"  	 javaType="String"/>
		</parameterMap>
		<procedure id="modificarFormularios" parameterMap="setModificarFormularios" resultClass="int">
			{ CALL sp_formularios_upd_documento (?,?,?,?,?) }
		</procedure>
		
		<parameterMap id="setInsertarNuevoProducto" class="java.util.HashMap">
			<parameter property="nombreProducto" 	javaType="java.lang.String"		jdbcType="CHAR"/>
			<parameter property="tipoMoneda" 		javaType="java.lang.Integer" 	jdbcType="NUMERIC"/>
			<parameter property="tipoTasa"			javaType="java.lang.Integer"	jdbcType="NUMERIC"/>
			<parameter property="estado"			javaType="java.lang.String"		jdbcType="CHAR" />
		</parameterMap>
		<procedure id="insertarNuevoProducto" parameterMap="setInsertarNuevoProducto" resultClass="int">
			{ CALL sp_formularios_ins_producto (?,?,?,?) }
		</procedure>
    	
    	<parameterMap id="setInsertarRelacionProductoFormulario" class="java.util.HashMap">
    		<parameter property="idProducto"	javaType="java.lang.Integer" jdbcType="INT"/>
    		<parameter property="idFormulario"	javaType="java.lang.Integer" jdbcType="INT"/>
    	</parameterMap>
    	<procedure id="insertarRelacionProductoFormulario" parameterMap="setInsertarRelacionProductoFormulario" resultClass="int">
    		{ CALL sp_formularios_ins_relpd (?,?) }
    	</procedure>
    	
    	<resultMap id="getObtenerListadoDeProductos" class="java.util.HashMap">
    		<result property="identificadorProducto" column="identificadorProducto" javaType="java.lang.Integer"/>
    		<result property="nombreDeProducto"		 column="nombreDeProducto"		javaType="java.lang.String"/>
    		<result property="idMoneda"				 column="idMoneda"				javaType="java.lang.Integer"/>
    		<result property="tipoDeMoneda"			 column="tipoDeMoneda" 			javaType="java.lang.String"/>
    		<result property="idTasa"				 column="idTasa"				javaType="java.lang.Integer"/>
    		<result property="tipoDeTasa"			 column="tipoDeTasa"			javaType="java.lang.String"/>
    		<result property="estado"				 column="estado"				javaType="java.lang.String"/>
    	</resultMap>
    	<procedure id="consultarProducto" resultMap="getObtenerListadoDeProductos">
    		{CALL sp_formularios_con_productos () }
    	</procedure>	
    	
    	<parameterMap id="getEliminarFormulariosAsociadosProducto" class="java.util.HashMap">
    		<parameter property="idProducto" javaType="java.lang.Integer" jdbcType="Numeric"/>
    	</parameterMap>
    	<procedure id="eliminarFormulariosAsociadosProducto" parameterMap="getEliminarFormulariosAsociadosProducto" resultClass="int">
    		{CALL sp_formularios_del_fcrelpd (?)}
    	</procedure>
    	
    	<parameterMap id="setActualizarProducto" class="java.util.HashMap">
    		<parameter property="identificadorDeProducto" 	javaType="java.lang.Integer" jdbcType="NUMERIC"/>
    		<parameter property="nombreProducto" 			javaType="java.lang.String"  jdbcType="CHAR"/>
    		<parameter property="tipoDeMoneda" 				javaType="java.lang.Integer" jdbcType="NUMERIC"/>
    		<parameter property="tipoDeTasa"				javaType="java.lang.Integer" jdbcType="NUMERIC"/>
    		<parameter property="estadoProducto"			javaType="java.lang.String"  jdbcType="CHAR"/>
    	</parameterMap>
    	<procedure id="actualizarProducto" parameterMap="setActualizarProducto" resultClass="int">
    		{CALL sp_formularios_upd_producto (?,?,?,?,?)}
    	</procedure>
    	
    	<parameterMap id="setEliminarProducto" class="java.util.HashMap">
    		<parameter property="identificadorDeProducto" javaType="java.lang.Integer" jdbcType="NUMERIC"/>
    	</parameterMap>
    	<procedure id="eliminarProducto" parameterMap="setEliminarProducto" resultClass="int">
    		{CALL sp_formularios_del_producto (?) }
    	</procedure>
    <!-- Fin Administrador Formularios -->

    <!-- Optimización CDA Proceso Masivo -->
    <procedure id="actualizarEstadoProceso" parameterClass="java.util.HashMap">
        {CALL sp_cda_upd_est_proc(
                   #nro_solicitud#,
                   #est_proceso#
        )}
    </procedure>    
    
  <procedure id="ingresarGarantiaSubdetalle" parameterClass="java.util.HashMap">
        {CALL sp_cda_ins_garantia_sub(
            #numero_solicitud#,
            #correlativo_prod#,
            <isNull property="tipo_garantia">NULL</isNull><isNotNull property="tipo_garantia">#tipo_garantia#</isNotNull>,
			<isNull property="sub_tipo_garantia">NULL</isNull><isNotNull property="sub_tipo_garantia">#sub_tipo_garantia#</isNotNull>,
			#cobertura_garantia#
        )}
    </procedure> 
    
  <procedure id="ingresarGarantiaOferta" parameterClass="java.util.HashMap">
        {CALL sp_cda_res_ins_garantia_ofe(
            #numero_solicitud#,
            #correlativo_oferta#,
            <isNull property="tipo_gtia_oferta">NULL</isNull><isNotNull property="tipo_gtia_oferta">#tipo_gtia_oferta#</isNotNull>,
			<isNull property="sub_tipo_gtia_oferta">NULL</isNull><isNotNull property="sub_tipo_gtia_oferta">#sub_tipo_gtia_oferta#</isNotNull>,
			#cobertura_gtia_oferta#
        )}
    </procedure>   
    
   <procedure id="actualizarSolicitante" parameterClass="java.util.HashMap">
        {CALL sp_cda_upd_solicitante(
			#num_solicitud#, 
			#cod_tipo_solicitante#,
			<isNull property="cod_tipo_contrato_lab">NULL</isNull><isNotNull property="cod_tipo_contrato_lab">#cod_tipo_contrato_lab#</isNotNull>,
			<isNull property="cod_tipo_activ_abr">NULL</isNull><isNotNull property="cod_tipo_activ_abr">#cod_tipo_activ_abr#</isNotNull>,
			<isNull property="cod_tipo_ocupacion">NULL</isNull><isNotNull property="cod_tipo_ocupacion">#cod_tipo_ocupacion#</isNotNull>,
			<isNull property="monto_lgc">NULL</isNull><isNotNull property="monto_lgc">#monto_lgc#</isNotNull>,
			<isNull property="mora_vigente">NULL</isNull><isNotNull property="mora_vigente">#mora_vigente#</isNotNull>,
			<isNull property="morosidad_cc">NULL</isNull><isNotNull property="morosidad_cc">#morosidad_cc#</isNotNull>,
			<isNull property="prob_incumplimiento">NULL</isNull><isNotNull property="prob_incumplimiento">#prob_incumplimiento#</isNotNull>,
			<isNull property="protestos_aclarados">NULL</isNull><isNotNull property="protestos_aclarados">#protestos_aclarados#</isNotNull>,
			<isNull property="score_bureau">NULL</isNull><isNotNull property="score_bureau">#score_bureau#</isNotNull>,
			<isNull property="fecha_apertura_cta">NULL</isNull><isNotNull property="fecha_apertura_cta">#fecha_apertura_cta#</isNotNull>,
			<isNull property="antiguedad_laboral">NULL</isNull><isNotNull property="antiguedad_laboral">#antiguedad_laboral#</isNotNull>,
			<isNull property="fecha_lgc">NULL</isNull><isNotNull property="fecha_lgc">#fecha_lgc#</isNotNull>,
			<isNull property="flag_bancarizacion">NULL</isNull><isNotNull property="flag_bancarizacion">#flag_bancarizacion#</isNotNull>,
			<isNull property="flag_dependiente">NULL</isNull><isNotNull property="flag_dependiente">#flag_dependiente#</isNotNull>,
			<isNull property="numero_tc">NULL</isNull><isNotNull property="numero_tc">#numero_tc#</isNotNull>,
			<isNull property="residencia_definitiva">NULL</isNull><isNotNull property="residencia_definitiva">#residencia_definitiva#</isNotNull>,
			<isNull property="numero_evaluaciones">NULL</isNull><isNotNull property="numero_evaluaciones">#numero_evaluaciones#</isNotNull>,
			<isNull property="fecha_referencia_negativa">NULL</isNull><isNotNull property="fecha_referencia_negativa">#fecha_referencia_negativa#</isNotNull>,
			<isNull property="tipo_persona">NULL</isNull><isNotNull property="tipo_persona">#tipo_persona#</isNotNull>,
			<isNull property="tipo_cliente">NULL</isNull><isNotNull property="tipo_cliente">#tipo_cliente#</isNotNull>,
			<isNull property="fecha_inicio_relacion">NULL</isNull><isNotNull property="fecha_inicio_relacion">#fecha_inicio_relacion#</isNotNull>,
			<isNull property="score_aplicacion_inicial">NULL</isNull><isNotNull property="score_aplicacion_inicial">#score_aplicacion_inicial#</isNotNull>,
			<isNull property="flag_pasa_mit_2">NULL</isNull><isNotNull property="flag_pasa_mit_2">#flag_pasa_mit_2#</isNotNull>,
			<isNull property="flag_pasa_mit_3">NULL</isNull><isNotNull property="flag_pasa_mit_3">#flag_pasa_mit_3#</isNotNull>
        )}
    </procedure>
     
    <!-- Fin Optimización CDA Proceso Masivo -->

<!-- Consulta Ventas Pyme -->
	<resultMap id="obtenerVentas"	class="java.util.HashMap">
			<result property="Ventas"		column="Ventas"/>
	</resultMap>

    <procedure id="obtenerVentas" parameterClass="java.util.HashMap" resultMap="obtenerVentas">
        {CALL sp_cns_ventas_pyme( #rutCliente# )}
    </procedure>
    <!-- Consulta Ventas Pyme -->
    
    <!-- Consulta Resumen Cta Cte -->
	<resultMap id="obtenerResumenCuenta"	class="java.util.HashMap">
			<result property="periodoCtaCte"	javaType="String"   column="periodoCtaCte"    jdbcType="varchar"/>
			<result property="depositoCtaCte"	javaType="Double"   column="depositoCtaCte"   jdbcType="numeric"/>
			<result property="saldoCtaCte"		javaType="Double"   column="saldoCtaCte"      jdbcType="numeric"/>
	</resultMap>

    <procedure id="obtenerResumenCuenta" parameterClass="java.util.HashMap" resultMap="obtenerResumenCuenta">
        {CALL sp_cns_resumen_ctacte( #rutCliente# )}
    </procedure>
    <!-- Consulta Resumen Cta Cte -->
    
    <!-- Consulta Deuda SBIF -->  
	<resultMap id="obtenerDeudaSbifPyme"	class="java.util.HashMap">
			<result property="tipoDeuda"	column="tipoDeuda"/>
			<result property="periodoDeuda"	column="periodoDeuda"/>
			<result property="fechaDeuda"	column="fechaDeuda"/>
			<result property="montoDeuda"	javaType="Double"   column="montoDeuda"  jdbcType="numeric"/>
	</resultMap>

    <procedure id="obtenerDeudaSbifPyme" parameterClass="java.util.HashMap" resultMap="obtenerDeudaSbifPyme">
        {CALL sp_cns_deuda_sbif_pyme( #rutCliente# )}
    </procedure>
    <!-- Consulta Deuda SBIF -->
    
    <!-- Consulta Envio SBIF -->  
	<resultMap id="obtenerEnvioSbifPyme"	class="java.util.HashMap">
			<result property="grupoProduto"	    javaType="String"   column="grupoProduto"     jdbcType="varchar"/>
			<result property="montoBciEnviado"	javaType="Double"   column="montoBciEnviado"  jdbcType="numeric"/>
	</resultMap>

    <procedure id="obtenerEnvioSbifPyme" parameterClass="java.util.HashMap" resultMap="obtenerEnvioSbifPyme">
        {CALL sp_cns_envio_deuda_pyme( #rutCliente# )}
    </procedure>
    <!-- Consulta Envio SBIF -->
    
     <!-- Consulta Productos Vigentes -->  
	<resultMap id="obtenerProductosVigentesPyme"	class="java.util.HashMap">
			<result property="nombreProducto"	javaType="String"   column="nombreProducto"   jdbcType="varchar"/>
			<result property="productoAgrupado"	javaType="String"   column="productoAgrupado"  jdbcType="varchar"/>
			<result property="cuotaVigente"	    javaType="Double"   column="cuotaVigente"   jdbcType="numeric"/>
			<result property="cupoVigente"	    javaType="Double"   column="cupoVigente"    jdbcType="numeric"/>
			<result property="fechaProducto"	column="fechaProducto"/>
			<result property="saldoResidual"	javaType="Double"   column="saldoResidual"  jdbcType="numeric"/>
	</resultMap>

    <procedure id="obtenerProductosVigentesPyme" parameterClass="java.util.HashMap" resultMap="obtenerProductosVigentesPyme">
        {CALL sp_cns_prod_vig( #rutCliente# )}
    </procedure>
    
    <resultMap id="obtenerNombreProductoPyme"	class="java.util.HashMap">
			<result property="codProducto"	    javaType="String"   column="codProducto"       jdbcType="varchar"/>
	</resultMap>

    <procedure id="obtenerNombreProductoPyme" parameterClass="java.util.HashMap" resultMap="obtenerNombreProductoPyme">
        {CALL sp_cns_cod_prod_cda( #producto# )}
    </procedure>
    
    <!-- Fin Consulta Productos -->
    
    <!-- Consulta Estado Situacion Pyme-->  
	<resultMap id="consultarEstadoPyme"	class="java.util.HashMap">
			<result property="totalActivos" javaType="Double" 	    column="totalActivos" jdbcType="numeric"/>
			<result property="totalPasivos" javaType="Double" 	    column="totalPasivos" jdbcType="numeric"/>
			<result property="totalPatrimonio" javaType="Double" 	column="totalPatrimonio" jdbcType="numeric"/>
	</resultMap>

    <procedure id="consultarEstadoSituacionPyme" parameterClass="java.util.HashMap" resultMap="consultarEstadoPyme">
        {CALL sp_cns_total_est_sit( #rutCliente#, #solicitud# )}
    </procedure>
    <!-- Consulta Estado Situacion Pyme-->  
    
    <!-- Consulta Perspectiva Pyme-->  
	<resultMap id="consultarPerspectiva"	class="java.util.HashMap">
			<result property="perspectiva"	    column="perspectiva"/>
	</resultMap>

    <procedure id="consultarPerspectivaCliente" parameterClass="java.util.HashMap" resultMap="consultarPerspectiva">
        {CALL sp_cns_perspectiva_pyme( #rutCliente# )}
    </procedure>
    <!-- Consulta Perspectiva Pyme-->  
    
    <!-- Consulta Datos Pyme-->  
	<resultMap id="consultaDatosPyme"	class="java.util.HashMap">
			<result property="ctaDisponible"	   javaType="Double"   column="ctaDisponible"       jdbcType="numeric"/>
			<result property="ctasDocPorCobrar"	   javaType="Double"   column="ctasDocPorCobrar"    jdbcType="numeric"/>
			<result property="depreciacion"	       javaType="Double"   column="depreciacion"        jdbcType="numeric"/>
			<result property="existencias"	       javaType="Double"   column="existencias"         jdbcType="numeric"/>
			<result property="gastosFinancieros"   javaType="Double"   column="gastosFinancieros"   jdbcType="numeric"/>
			<result property="gob"                 javaType="Double"   column="gob"                 jdbcType="numeric"/>
			<result property="ingresos"            javaType="Double"   column="ingresos"            jdbcType="numeric"/>
			<result property="margen"              javaType="Double"   column="margen"              jdbcType="numeric"/>
			<result property="resultadoFinal"      javaType="Double"   column="resultadoFinal"      jdbcType="numeric"/>
			<result property="resultadOperacional" javaType="Double"   column="resultadOperacional" jdbcType="numeric"/>
			<result property="retiroProvisiorio"   javaType="Double"   column="retiroProvisiorio"   jdbcType="numeric"/>
			<result property="activoCirculante"    javaType="Double"   column="activoCirculante"    jdbcType="numeric"/>
			<result property="activoFijo"          javaType="Double"   column="activoFijo"          jdbcType="numeric"/>
			<result property="activos"             javaType="Double"   column="activos"             jdbcType="numeric"/>
			<result property="otrosActivos"        javaType="Double"   column="otrosActivos"        jdbcType="numeric"/>
			<result property="pasivoNoExigible"    javaType="Double"   column="pasivoNoExigible"    jdbcType="numeric"/>
			<result property="r102"                javaType="String"   column="r102"                jdbcType="varchar"/>
			<result property="r103"                javaType="String"   column="r103"                jdbcType="varchar"/>
			<result property="fechaAperturaCta"	      column="fechaAperturaCta"/>
			<result property="fechaCuentaCorriente"	  column="fechaCuentaCorriente"/>
	</resultMap>

    <procedure id="consultarDatosPyme" parameterClass="java.util.HashMap" resultMap="consultaDatosPyme">
        {CALL sp_cns_datos_pyme( #rutCliente# )}
    </procedure>
    
    <procedure id="obtenerPorcentajeDeParticipacion" parameterClass="java.util.HashMap" resultMap="porcentajeParticipacion">
		{CALL sp_cns_participacion_pyme( #rutEmpresa# )}
	</procedure>
	
	<procedure id="consultaDeudorIndirecto" parameterClass="java.util.HashMap" resultMap="consultaDeudorIndirecto">
		{CALL sp_cns_deudor_indirecto_pyme( #rutCliente# )}
	</procedure>
	
	<procedure id="consultarConyugue" parameterClass="java.util.HashMap" resultMap="consultarConyugue">
		{CALL sp_cns_conyugue_pyme( #rutCliente# )}
	</procedure>

	<!-- Consulta Datos Pyme-->  
	
		<!-- Ingresar Solicitud Pyme--> 
	    <procedure id="ingresarSolicitudPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_solicitud_ent_pyme( 
        #num_solicitud#, 
        #regional#,
        #tipo_metodologia#,
        #fecha_evaluacion#,
        #numero_evaluaciones#,
        #indicador_campana#)}
    </procedure>
   <!-- Ingresar Solicitud Pyme --> 
   
   <!-- Ingresar Respuesta Solicitud Pyme--> 
	    <procedure id="ingresarRespuestaSolicitudPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_solicitud_sal_pyme( 
        #num_solicitud#, 
        #capacidad_maxima_grupo#,
        #carga_financiera_actual#,
        #carga_financiera_grupo#,
        #deuda_grupo#,
        #carga_financiera_vs_renta#,
        #carga_actual_vs_renta#,
        #deuda_vs_patrimonio#,
        #lgc_con_garantia_vs_venta#,
        #lgc_con_garantia#,
        #lgc_sin_garantia#,
        #patrimonio_grupo#,
        #renta_grupo#,
        #renta_socios_suma#,
        #carga_financiera_vs_gob_neta#)}
    </procedure>
   <!-- Ingresar Respuesta Solicitud Pyme --> 
   
      <!-- Ingresar Solicitante Pyme--> 
	    <procedure id="ingresarSolicitantePyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_solicitante_en_pyme( 
        #num_solicitud#, 
        #rut#,
        #cod_tipo_solicitante#,
        #score_externo#,
        #fecha_apertura_ctacte#,
        #fecha_cuenta_corriente#,
        #porcentaje_participacion#,
        #probabilidad_incumplimiento#,
        #codigo_104#,
        #codigo_110#,
        #codigo_161#,
        #renta_socio#)}
    </procedure>
    
          <!-- Ingresar Solicitante Pyme--> 
	    <procedure id="ingresarDeudaSbifPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_deuda_pyme( 
        #num_solicitud#, 
        #rut#,
        #tipo#,
        #fecha#,
        #monto#,
        #periodo#)}
    </procedure>
    
    	    <procedure id="ingresarEstadoFinancieroPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_est_finan_pyme( 
        #num_solicitud#, 
        #rut#,
        #cta_disponible_dap#, 
        #ctas_doctos_por_cobrar#,
        #depreciacion_del_ejercicio#,
        #cta_existencias#,
        #gastos_financieros#,
        #gob_eeff#,
        #ingresos_eeff#,
        #margen_final#,
        #resultado_final_empresa#,
        #resultado_operacional#,
        #retiro_o_dividendo#,
        #total_activo_circulante#,
        #total_activo_fijo#,
        #total_activos#,
        #total_otros_activos#,
        #total_pasivo_no_exigible#,
        #venta_anual#,
        #venta_parcial_ano_actual#,
        #venta_parcial_ano_anterior#)}
    </procedure>
    
    <procedure id="ingresarEnvioSbifPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_envio_pyme( 
        #num_solicitud#, 
        #rut#,
        #grupo_producto#,
        #monto#)}
    </procedure>
    
     <procedure id="ingresarProductoEntradaPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_prod_ent_pyme( 
        #num_solicitud#, 
        #rut#,
        #nombre_producto#, 
        #cuota_solicitada#,
        #cuota_vigente#,
        #cupo_vigente#,
        #fecha_producto#,
        #monto_solicitado#,
        #plazo_pactado#,
        #producto_agrupado#,
        #saldo_residual# )}
    </procedure>
    
    <procedure id="ingresarResumenCuentaPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_cta_cte_pyme( 
        #num_solicitud#, 
        #rut#,
        #deposito#, 
        #periodo#,
        #saldo#)}
    </procedure>
    
        <procedure id="ingresarSubdetallePyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_subdetalle_pyme( 
        #num_solicitud#, 
        #rut#,
        #tipo_subdetalle#, 
        #fecha_subdetalle#,
        #monto_subdetalle#, 
        #condicion_garantia#,
        #moneda_subdetalle#
        )}
    </procedure>
	
    <procedure id="ingresarGarantiaSubdetallePyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_garantia_sub_pyme( 
        #num_solicitud#, 
        #rut#,
        #tipo_subdetalle#,
        #tipo_garantia#,
        #sub_tipo_garantia#,
        #cobertura_garantia# 
        )}
    </procedure>
	
    <procedure id="ingresarFiltrosPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_filtros_pyme( 
        #numeroSolicitud#, 
        #rut#,
        #codigo#, 
        #valor#)}
    </procedure>
    
   <procedure id="ingresarIndicadoresPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_indicadores_pyme( 
        #numeroSolicitud#, 
        #rut#,
        #codigo#, 
        #valor#)}
    </procedure>
   <!-- Ingresar Solicitante Pyme --> 
   
         <!-- Ingresar Solicitante Respuesta Pyme--> 
	    <procedure id="ingresarSolicitanteRespuestaPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_solicitante_sa_pyme( 
        #num_solicitud#, 
        #rut#,
        #edad#, 
        #renta_segunda_categoria#,
        #leasing_no_bci#,
        #antiguedad_ctacte#,
        #antiguedad_giro#,
        #estrategia_asignada#,
        #estrategia_perfil#,
        #estrategia_riesgo#,
        #evolucion_deposito_ctacte#,
        #evolucion_deuda_sbif#,
        #evolucion_facturacion#,
        #renta_definitiva#,
        #renta_potencial#,
        #resultado_proyectado#,
		#capacidad_pago_maxima_empresa#, 
        #carga_financiera_actual#,
        #carga_financiera_bci#,
        #carga_financiera_final#,
        #carga_financiera_incremental#,
        #carga_financiera_no_bci#,
        #chip_no_bci#,
        #comercial_no_bci#,
        #consumo_no_bci#,
        #factor_comercial_cp#,
        #factor_consumo_cp#,
        #gob_neta#,
        #gob_proyectada#,
        #lcg_incremental#,
        #libre_disponibilidad#,
        #lgc_socio_con_garantia#,
        #lgc_socio_sin_garantia#,
        #lineas_utilizadas#,
        #margen_vigente_bci#,       
        #venta_promedio_mensual#,
        #relacion_sbif_comercial_vtas#,
        #venta_total#)}
    </procedure>
   
  <procedure id="ingresarDistribucionRespuestaPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_distribucion_pyme( 
        #num_solicitud#, 
        #rut#,
        #monto_con_garantia#, 
        #monto_sin_garantia#,
        #tipo_producto#
        )}
    </procedure>
       
      <procedure id="ingresarPreOfertaPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_preoferta_pyme( 
        #num_solicitud#, 
        #rut#,
        #tipo_producto#, 
        #monto_con_garantia#,
        #monto_sin_garantia#, 
        #condicion_garantia#,
        #vigencia_preoferta#, 
        #plazo_preoferta#,
        )}
    </procedure>
    
    <procedure id="ingresarGarantiaPreOfertaPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_garantia_pyme( 
        #num_solicitud#, 
        #rut#,
        #tipo_producto#,
        #correlativo_oferta#,
        #tipo_garantia#, 
        #sub_tipo_garantia#,
        #cobertura_garantia#
        )}
    </procedure>
    
    <procedure id="ingresarProductoSalidaPyme" parameterClass="java.util.HashMap" >
        {CALL sp_cda_ins_prod_sal_pyme( 
        #num_solicitud#, 
        #rut#, 
        #nombre_producto#, 
        #estado_producto#
        )} 
    </procedure> 
   <!-- Ingresar Solicitante Respuesta Pyme --> 

    <!-- Actualizacion de SUC con datos de CDA -->
    <procedure id="actualizacionDatosSUC" parameterClass="java.util.HashMap">
        {CALL sp_cda_upt_tbl_suc(
            #num_solicitud#,
            #rut_cliente#,
            #actividad#,
            #tip_cont_lab#,
            #nacionalidad#,
            #res_ext#,
            #est_civil#,
            #rentaFijaTit#,
            #rentaVariableTit#,
            #rentaLiquidaTit#,
            <isNull property="periodoRentaTit">NULL</isNull><isNotNull property="periodoRentaTit">#periodoRentaTit#</isNotNull>,
            <isNull property="rut_conyuge">0</isNull><isNotNull property="rut_conyuge">#rut_conyuge#</isNotNull>,
            <isNull property="dv_conyuge">NULL</isNull><isNotNull property="dv_conyuge">#dv_conyuge#</isNotNull>,
            <isNull property="renta_conyuge">0</isNull><isNotNull property="renta_conyuge">#renta_conyuge#</isNotNull>,
            <isNull property="nombre_conyuge">NULL</isNull><isNotNull property="nombre_conyuge">#nombre_conyuge#</isNotNull>,
            #ant_laboral#,
            #ejecutivo#
        )}
    </procedure>
    <!-- Fin Actualizacion de SUC con datos de CDA -->

    <!-- consulta rechazos suc -->
    <resultMap id="re-poseeRechazosSuc" class="java.util.HashMap">
        <result property="resultado" column="resultado" javaType="String" jdbcType="varchar"/>
    </resultMap>

    <procedure id="poseeRechazosSuc" parameterClass="java.util.HashMap" resultMap="re-poseeRechazosSuc">
        {CALL sp_solicitud_cns_rch_suc(
            #rut#,
            #dias#
        )}
    </procedure>
    <!-- Fin consulta rechazos suc -->
    
    <!-- Filtros de riesgo: Tasa Riesgo y Score R04 -->
    <resultMap id="consultaFiltroTasaRiesgo" class="java.util.HashMap">
        <result property="activaFiltro" javaType="String" column="activa_filtro" jdbcType="char" />
    </resultMap>
    <procedure id="consultaFiltroTasaRiesgo" parameterClass="java.util.HashMap" resultMap="consultaFiltroTasaRiesgo">
        {CALL sp_cns_filtro_tasa_riesgo (#rut_cliente#, #color_semaforo#)}
    </procedure>
    
    <resultMap id="consultaFiltroVisacionScoreR04" class="java.util.HashMap">
        <result property="activaFiltro" javaType="String" column="activa_filtro" jdbcType="char" />
    </resultMap>
    <procedure id="consultaFiltroVisacionScoreR04" parameterClass="java.util.HashMap" resultMap="consultaFiltroVisacionScoreR04">
        {CALL sp_cns_filtro_visacion_score (#rut_cliente#, #color_semaforo#)}
    </procedure>
    <!-- Fin Filtros de riesgo: Tasa Riesgo y Score R04 -->

    <!-- Auditoría de consultas a solicitudes -->
    <resultMap id="re-obtenerLogConsultas" class="java.util.HashMap">
        <result property="fechaConsulta" javaType="Date" column="fecha" jdbcType="datetime" />
        <result property="nombreUsuario" javaType="String" column="username" jdbcType="char" />
        <result property="nombreOficina" javaType="String" column="oficina" jdbcType="char" />
    </resultMap>
    <procedure id="obtenerLogConsultas" parameterClass="java.util.HashMap" resultMap="re-obtenerLogConsultas">
        {CALL sp_cns_log_consulta (#idSolicitud#, #maxLog#)}
    </procedure>

    <procedure id="registrarConsulta" parameterClass="java.util.HashMap">
        {CALL sp_ins_log_consulta (#idSolicitud#, #nombreUsuario#, #idOficina#)}
    </procedure>
    <!-- Fin Auditoría de consultas a solicitudes -->

	<!-- Reinsistencia -->
	<resultMap id="consultarEjecutivosEstado" class="java.util.HashMap">
		<result property="nombreUsuario" javaType="String" column="nombre_usuario" jdbcType="char" /> 
	</resultMap>
	<procedure id="consultarEjecutivosEstado" parameterClass="java.util.HashMap" resultMap="consultarEjecutivosEstado">
		{CALL sp_cns_eje_est (#numeroDeSolicitud#, #estadoActual#)}
	</procedure>
	
	<!-- Fin Reinsistencia -->
    
     <parameterMap class="java.util.HashMap" id="parametrosIngresarSolicitudAbreviada">
        <parameter property="sol_id"             jdbcType="NUMERIC"      javaType="Long"/>
        <parameter property="id_tipo_extra_data" jdbcType="INT"          javaType="Integer"/>
        <parameter property="data"               jdbcType="BINARY"/>
    </parameterMap>

    <procedure id="ingresarSolicitudAbreviada" parameterMap="parametrosIngresarSolicitudAbreviada" parameterClass="java.util.HashMap">
                INSERT INTO suc_extra_data (sol_id, id_tipo_extra_data, data) VALUES(?,?,?)
    </procedure>

    <procedure id="eliminarSolicitudAbreviada" parameterClass="java.util.HashMap">
        {CALL sp_del_suc_data_aux (#id_solicitud#)}
    </procedure>

    <resultMap id="resultadoObtenerSolicitudAbreviada" class="java.util.HashMap">
       <result property="data"   column="data" jdbcType="BINARY"/>
    </resultMap>

     <parameterMap class="java.util.HashMap" id="parametrosObtenerSolicitudAbreviada">
        <parameter property="sol_id"             jdbcType="NUMERIC"      javaType="Long"/>
        <parameter property="id_tipo_extra_data" jdbcType="INT"          javaType="Integer"/>
    </parameterMap>


    <procedure id="obtenerSolicitudAbreviada" parameterMap="parametrosObtenerSolicitudAbreviada" parameterClass="java.util.HashMap" resultMap="resultadoObtenerSolicitudAbreviada">
                SELECT data from suc_extra_data WHERE sol_id = ? AND id_tipo_extra_data = ?
    </procedure>

	<procedure id="registrarValoresInicialesSUCAbreviada" parameterClass="java.util.HashMap">
		{CALL sp_ing_val_orig (#idLog#, #idDato#, #idSolicitud#, #fecSolicitud#, #rutCliente#, #dvCliente#, #codEjecutivo#, #valor#, #fecModifica#)}
	</procedure>

	<procedure id="registrarValoresEditablesSUCAbreviada" parameterClass="java.util.HashMap">
		{CALL sp_upd_val_edit (#idDato#, #idSolicitud#, #fecSolicitud#, #rutCliente#, #dvCliente#, #codEjecutivo#, #valor#, #fecModifica#)}
	</procedure>
	
<procedure id="obtenerMontoPorBanca" parameterClass="java.util.HashMap" resultMap="parametro" >
        {CALL sp_solicitud_cns_mto_bca (<isNotNull property="banca">#banca#</isNotNull><isNull property="banca">NULL</isNull>)}
    </procedure>
    
	<resultMap id="resultadoPatrimonio"	class="java.util.HashMap">
		<result property="patrimonio"	   javaType="Double"   column="patrimonio"   jdbcType="numeric"/>
    </resultMap>
     <procedure id="consultarPatrimonioEmprendedor" parameterClass="java.util.HashMap" resultMap="resultadoPatrimonio">
		{CALL sp_cns_patrimonio_emprendedor(#idSolicitud#, #rut#)}
	</procedure>
	
	<resultMap id="resultadoSemaforoEbitda"	class="java.util.HashMap">
		<result property="semaforoEbitda"	   javaType="Double"   column="semaforoEbitda"   jdbcType="numeric"/>
    </resultMap>
	<procedure id="consultarSemaforoEbitda" parameterClass="java.util.HashMap" resultMap="resultadoSemaforoEbitda">
		{CALL sp_cns_ebitda_emprendedor(#idSolicitud#, #rut#)}
	</procedure>
	
   	<resultMap id="resultadoSemaforoTasaRiesgoIntegral"	class="java.util.HashMap">
		<result property="semaforoTasaRiesgoIntegral"	   javaType="Double"   column="semaforoTasaRiesgoIntegral"       jdbcType="decimal"/>
    </resultMap>
	<procedure id="consultarSemaforoTasaRiesgoIntegralEmprendedor" parameterClass="java.util.HashMap" resultMap="resultadoSemaforoTasaRiesgoIntegral">
		{CALL sp_cns_tasa_riesgo_int_emp(#idSolicitud#, #rut#)}
	</procedure>
    
    <resultMap id="resultadoSemaforoResultadoOperacional"	class="java.util.HashMap">
		<result property="semaforoResultadoOperacional"	   javaType="Double"   column="semaforoResultadoOperacional"    jdbcType="numeric"/>
    </resultMap>
	<procedure id="consultarSemaforoResultadoOperacionalEmprendedor" parameterClass="java.util.HashMap" resultMap="resultadoSemaforoResultadoOperacional">
		{CALL sp_cns_resultado_ope_emp(#idSolicitud#, #rut#)}
	</procedure>
	
	<resultMap id="resultDatosBasicosEmpresario"	class="java.util.HashMap">
		<result property="sectorEconomico"	   javaType="String"   column="sectorEconomico"   jdbcType="char"/>
		<result property="antiguedadGiro"	   javaType="String"   column="antiguedadGiro"   jdbcType="char"/>
		<result property="tipoAdministracion"	   javaType="String"   column="tipoAdministracion"   jdbcType="char"/>
    </resultMap>
    <procedure id="consultarDatosBasicosEmpresario" parameterClass="java.util.HashMap" resultMap="resultDatosBasicosEmpresario">
		{CALL sp_cns_datos_basicos_emp(#idSolicitud#, #rut#)}
	</procedure>
	<procedure id="guardarDatosBasicosClienteEmpresario"  parameterClass="java.util.HashMap">
        {CALL sp_ins_cli_empresario(
            #codigoEjecutivo#,
            #nro_solicitud#,
            <isNull property="ejecutivoDestino">NULL</isNull><isNotNull property="ejecutivoDestino">#ejecutivoDestino#</isNotNull>,
            <isNull property="nombrejecutivoDestino">NULL</isNull><isNotNull property="nombrejecutivoDestino">#nombrejecutivoDestino#</isNotNull>,
            <isNull property="oficinaEjecutivoDestino">NULL</isNull><isNotNull property="oficinaEjecutivoDestino">#oficinaEjecutivoDestino#</isNotNull>,
            #rut#,
            #digito#,
            #cic#,
            #banca#,
            #operaOtraOficina#,
            <isNull property="razonSocial">NULL</isNull><isNotNull property="razonSocial">#razonSocial#</isNotNull>,
            <isNull property="actividad">NULL</isNull><isNotNull property="actividad">#actividad#</isNotNull>,
            <isNull property="matriz_sucursal">NULL</isNull><isNotNull property="matriz_sucursal">#matriz_sucursal#</isNotNull>,
            <isNull property="categoriaEmpresa">NULL</isNull><isNotNull property="categoriaEmpresa">#categoriaEmpresa#</isNotNull>,
            <isNull property="clasificacion">NULL</isNull><isNotNull property="clasificacion">#clasificacion#</isNotNull>,
            <isNull property="fecha_inicio">NULL</isNull><isNotNull property="fecha_inicio">#fecha_inicio#</isNotNull>,
            <isNull property="fecha_apertura_cta_cte">NULL</isNull><isNotNull property="fecha_apertura_cta_cte">#fecha_apertura_cta_cte#</isNotNull>,
            <isNull property="sector_economico">NULL</isNull><isNotNull property="sector_economico">#sector_economico#</isNotNull>,
		    #sucesion#,
		    #ventaja_competitiva#,
		    <isNull property="tipo_administracion">NULL</isNull><isNotNull property="tipo_administracion">#tipo_administracion#</isNotNull>,
		    #tipo_persona_pyme#, 
		    #id_act_economica_dai#,
		    <isNull property="antiguedad_giro">NULL</isNull><isNotNull property="antiguedad_giro">#antiguedad_giro#</isNotNull>,
		    <isNull property="sector_economico_emp">NULL</isNull><isNotNull property="sector_economico_emp">#sector_economico_emp#</isNotNull>,
		    #tipo_cliente_emp#,
		    #deuda_corto_plz#,
		    #deuda_largo_plz#,
		    #cod_actividad_sii#
        )}
    </procedure>
     
    <resultMap id="resultadoDeudaClienteCalificacion"	class="java.util.HashMap">
		<result property="deudaClienteCalificacion"	   javaType="Double"   column="deudaClienteCalificacion"    jdbcType="numeric"/>
    </resultMap>
	<procedure id="consultarDeudaClienteCalificacion" parameterClass="java.util.HashMap" resultMap="resultadoDeudaClienteCalificacion">
		{CALL sp_cns_deuda_cli_calificacion(#rut#)}
	</procedure>
	
	<resultMap id="resultAlertasSolicitud"	class="java.util.HashMap">
		<result property="rut"	           javaType="long"     column="rut"             jdbcType="numeric"/>
		<result property="dv"	           javaType="String"   column="dv"              jdbcType="char"/>
		<result property="modulo"	       javaType="String"   column="modulo"          jdbcType="varchar"/>
		<result property="glosa"	       javaType="String"   column="glosa"           jdbcType="varchar"/>
		<result property="categoria"	   javaType="String"   column="categoria"       jdbcType="char"/>
		<result property="justificacion"   javaType="String"   column="justificacion"   jdbcType="varchar"/>
    </resultMap>
    <procedure id="consultarAlertasSolicitud" parameterClass="java.util.HashMap" resultMap="resultAlertasSolicitud">
		{CALL sp_cns_msn_alert_sol(#idSolicitud#)}
	</procedure>
	<procedure id="limpiarAlertasExistentes" parameterClass="java.util.HashMap">
		{CALL sp_elm_msn_alerta(#idSolicitud#)}
	</procedure>
	<procedure id="guardarMensajesAlertaSolicitud" parameterClass="java.util.HashMap">
		{CALL sp_ins_msn_alerta(#idSolicitud#, 
				#rut#,
				#dv#,
				#codigoMensaje#,
				#glosaMensaje#,
				#categoria#,
				#modulo#)}
	</procedure>
	<procedure id="obtenerVentasSolicitud" parameterClass="java.util.HashMap" resultMap="ventasDelPeriodo">
        {CALL sp_cns_ventas_solicitud(
            <isNull property="rut">NULL</isNull><isNotNull property="rut">#rut#</isNotNull>,
            <isNull property="numeroSolicitud">NULL</isNull><isNotNull property="numeroSolicitud">#numeroSolicitud#</isNotNull>
        )}
    </procedure>
    <procedure id="obtenerEstadoFinancieroSolicitud" parameterClass="java.util.HashMap" resultMap="estadoFinancieroSolicitante">
        {CALL sp_cns_estado_financiero(
            <isNull property="rut">NULL</isNull><isNotNull property="rut">#rut#</isNotNull>,
            <isNull property="numeroSolicitud">NULL</isNull><isNotNull property="numeroSolicitud">#numeroSolicitud#</isNotNull>
        )}
    </procedure>
    <procedure id="guardarJustificacionSolicitud" parameterClass="java.util.HashMap">
        {CALL sp_ins_justif_alert(
            #idSolicitud#,
            #rut#,
            #justificacion#
        )}
    </procedure>
    <resultMap id="resultFonoEjecutivo"	class="java.util.HashMap">
		<result property="fono"	   javaType="Long"   column="fono"   jdbcType="int"/>
    </resultMap>
    <procedure id="consultarFonoEjecutivo" parameterClass="java.util.HashMap" resultMap="resultFonoEjecutivo">
        {CALL sp_cns_fono_ejecutivo(
            <isNull property="rutEjecutivo">NULL</isNull><isNotNull property="rutEjecutivo">#rutEjecutivo#</isNotNull>
        )}
    </procedure>    
     <!-- Inicio Empresa -->
    
    <resultMap id="empresa" class="java.util.HashMap">
        <result property="rutEmpresa"           javaType="Integer"  column= "rut_empresa"       jdbcType="Integer"/>
        <result property="DV"                   javaType="String"   column= "dv"                jdbcType="char"/>
        <result property="nombreEmpresa"        javaType="String"   column= "nombre_empresa"    jdbcType="Varchar"/>
        <result property="rutMadre"             javaType="Integer"  column= "rut_madre"         jdbcType="Integer"/>
        <result property="esPrime"              javaType="String"   column= "es_prime"          jdbcType="char"/>
        <result property="tieneConvenio"        javaType="String"   column= "tiene_convenio"    jdbcType="char"/>
        <result property="esPublica"            javaType="String"   column= "es_publica"        jdbcType="char"/>
        <result property="tipoEmpresa"          javaType="String"   column= "tipo_empresa"      jdbcType="char"/>
        <result property="tipoCluster"          javaType="String"   column= "tipo_cluster"      jdbcType="Varchar"/>
        <result property="rubroEmpresa"         javaType="String"   column= "rubro"             jdbcType="Varchar"/>
        <result property="vigenciaEmpresa"      javaType="String"   column= "vigencia"          jdbcType="char"/>
    </resultMap>
    
    <procedure id="obtenerEmpresas" parameterClass="java.util.HashMap" resultMap="empresa">
        {CALL sp_solicitud_cns_empresas()}
    </procedure>
    
    <procedure id="agregarEmpresa" parameterClass="java.util.HashMap" resultMap="empresa">
        {CALL sp_suc_ins_empresa(#emp_rut#, #emp_dv#, #emp_nombre#, #emp_rut_madre#, #emp_es_prime#, #emp_tiene_convenio#, #emp_es_publica#, #emp_tipo_empresa#, #emp_tipo_cluster#, #emp_rubro#, #emp_vigencia#, #emp_user_mod#, #emp_fecha_mod#, #emp_tipo_mod# )}
    </procedure>
    
    <procedure id="modificarEmpresa" parameterClass="java.util.HashMap" resultMap="empresa">
        {CALL sp_suc_upd_empresa(#emp_rut#, #emp_dv#, #emp_nombre#, #emp_rut_madre#, #emp_es_prime#, #emp_tiene_convenio#, #emp_es_publica#, #emp_tipo_empresa#, #emp_tipo_cluster#, #emp_rubro#, #emp_vigencia#, #emp_user_mod#, #emp_fecha_mod#, #emp_tipo_mod# )}
    </procedure>
    
    <procedure id="eliminarEmpresa" parameterClass="java.util.HashMap" resultMap="empresa">
        {CALL sp_suc_del_empresa(#emp_rut#)}
    </procedure>
    <!-- Fin Empresa -->
    
    <!-- Inicio colaborador -->
    
    <resultMap id="colaborador" class="java.util.HashMap">
        <result property="rutColaborador"       javaType="Integer"  column= "col_rut"               jdbcType="Integer"/>
        <result property="dvColaborador"        javaType="String"   column= "col_dv"                jdbcType="char"/>
    </resultMap>
        
    <procedure id="obtenerColaboradores" parameterClass="java.util.HashMap" resultMap="colaborador">
        {CALL sp_solicitud_cns_colaboradores()}
    </procedure>    
    
    <procedure id="agregarColaborador" parameterClass="java.util.HashMap" resultMap="colaborador">
        {CALL sp_suc_ins_colaborador(#col_rut#, #col_dv#, #col_user_mod#, #col_fecha_mod#, #col_tipo_mod#)}
    </procedure>    
    
    <procedure id="modificarColaborador" parameterClass="java.util.HashMap" resultMap="colaborador">
        {CALL sp_suc_upd_colaborador(#col_rut#, #col_dv#, #col_user_mod#, #col_fecha_mod#, #col_tipo_mod#)}
    </procedure>    
    
    <procedure id="eliminarColaborador" parameterClass="java.util.HashMap" resultMap="colaborador">
        {CALL sp_suc_del_colaborador(#col_rut#)}
    </procedure>    
    <!-- fin colaborador -->
    
    
    <!-- Inicio Atribucion -->

    <resultMap id="atribucion" class="java.util.HashMap">
        <result property="jof"                  javaType="String"   column= "atr_cod_jof"           jdbcType="char"/>
        <result property="montoAtribucion"      javaType="Long"   column= "atr_mto_permitido_jof" jdbcType="decimal"/>
        <result property="montoAtribucionGarantia"      javaType="Long"   column= "atr_mto_garantia_jof" jdbcType="decimal"/>
    </resultMap>
    
        
    <procedure id="obtenerAtribuciones" parameterClass="java.util.HashMap" resultMap="atribucion">
        {CALL sp_solicitud_cns_atribuciones()}
    </procedure>    
    
    <procedure id="agregarAtribucion" parameterClass="java.util.HashMap" resultMap="atribucion">
        {CALL sp_suc_ins_atribucion(#atr_cod_jof#, #atr_mto_permitido_jof#, #atr_user_mod#, #atr_fecha_mod#, #atr_tipo_mod#, #atr_mto_garantia_jof#)}
    </procedure>    
    
    <procedure id="modificarAtribucion" parameterClass="java.util.HashMap" resultMap="atribucion">
        {CALL sp_suc_upd_atribucion(#atr_cod_jof#, #atr_mto_permitido_jof#, #atr_user_mod#, #atr_fecha_mod#, #atr_tipo_mod#,#atr_mto_garantia_jof#)}
    </procedure>    
    
    <procedure id="eliminarAtribucion" parameterClass="java.util.HashMap" resultMap="atribucion">
        {CALL sp_suc_del_atribucion(#atr_cod_jof#)}
    </procedure>    
    <!-- fin atribucion -->
    
    <!-- Inicio oficina riesgo -->

    <resultMap id="oficinaRiesgo" class="java.util.HashMap">
        <result property="nivelRiesgo"          javaType="String"   column= "ofi_nivel_riesgo"      jdbcType="char"/>
        <result property="codigoOficina"        javaType="String"   column= "id_oficina"            jdbcType="char"/>
    </resultMap>
    
    <!-- fin oficina riesgo -->
    
    
    <!-- Inicio nivel riesgo -->

    <resultMap id="nivelRiesgo" class="java.util.HashMap">
        <result property="nivelRiesgoJof"       javaType="String"   column= "nvl_nivel_riesgo"      jdbcType="varchar"/>
        <result property="codigoOficina"        javaType="String"   column= "id_oficina"            jdbcType="char"/>
        <result property="ejecutivo"            javaType="String"   column= "nvl_ejec"              jdbcType="char"/>
    </resultMap>
    
    <procedure id="obtenerNivelRiesgo" parameterClass="java.util.HashMap" resultMap="nivelRiesgo">
        {CALL sp_solicitud_cns_ejecutivos()}
    </procedure>
    
    <procedure id="agregarNivelRiesgo" parameterClass="java.util.HashMap" resultMap="oficinaRiesgo">
        {CALL sp_suc_ins_nivel_riesgo(#nvl_nivel_riesgo#, #id_oficina#, #nvl_ejec#, #nvl_user_mod#, #nvl_fecha_mod#, #nvl_tipo_mod#)}
    </procedure>    
    
    <procedure id="modificarNivelRiesgo" parameterClass="java.util.HashMap" resultMap="oficinaRiesgo">
        {CALL sp_suc_upd_nivel_riesgo(#nvl_nivel_riesgo#, #id_oficina#, #nvl_ejec#, #nvl_user_mod#, #nvl_fecha_mod#, #nvl_tipo_mod#)}
    </procedure>    
    
    <procedure id="eliminarNivelRiesgo" parameterClass="java.util.HashMap" resultMap="oficinaRiesgo">
        {CALL sp_suc_del_nivel_riesgo(#nvl_ejec#)}
    </procedure>    

    <procedure id="obtenerOfiRiesgos" parameterClass="java.util.HashMap" resultMap="oficinaRiesgo">
        {CALL sp_solicitud_cns_ofi_riesgo()}
    </procedure>
    
    <procedure id="agregarOficinaRiesgo" parameterClass="java.util.HashMap" resultMap="oficinaRiesgo">
        {CALL sp_suc_ins_oficina_riesgo(#ofi_nivel_riesgo#, #id_oficina#)}
    </procedure>    
    
    <procedure id="modificarOficinaRiesgo" parameterClass="java.util.HashMap" resultMap="oficinaRiesgo">
        {CALL sp_suc_upd_oficina_riesgo(#ofi_nivel_riesgo#, #id_oficina#)}
    </procedure>    
    
    <procedure id="eliminarOficinaRiesgo" parameterClass="java.util.HashMap" resultMap="oficinaRiesgo">
        {CALL sp_suc_del_oficina_riesgo(#id_oficina#)}
    </procedure>    
    
    <!-- fin nivel riesgo -->
    
    <!-- inicio check sujeto a -->
    
    <resultMap id="checkSujetoA" class="java.util.HashMap">
        <result property="numeroSolicitud"      javaType="long"     column= "chk_sol_id"            jdbcType="numeric"/>
        <result property="chkActRenta"          javaType="String"   column= "chk_act_renta"         jdbcType="char"/>
        <result property="chkAcrActivos"        javaType="String"   column= "chk_acr_activos"       jdbcType="char"/>
        <result property="chkAcrCancDeudas"     javaType="String"   column= "chk_acr_canc_deudas"   jdbcType="char"/>
        <result property="chkAcrAbono"          javaType="String"   column= "chk_acr_abono"         jdbcType="char"/>
        <result property="chkAcrContrato"       javaType="String"   column= "chk_acr_contrato"      jdbcType="char"/>
        <result property="chkAcrCuotaReal"      javaType="String"   column= "chk_acr_cuota_real"    jdbcType="char"/>
        <result property="chkAcrCertAfp"        javaType="String"   column= "chk_acr_cert_afp"      jdbcType="char"/>
        <result property="chkAcrDeudaEstudios"  javaType="String"   column= "chk_acr_deuda_est"     jdbcType="char"/>
        <result property="chkAcrSepHecho"       javaType="String"   column= "chk_acr_sep_hecho"     jdbcType="char"/>
        <result property="chkAcrDescSbif"       javaType="String"   column= "chk_acr_desc_sbif"     jdbcType="char"/>
        <result property="chkAcrVehiculo"       javaType="String"   column= "chk_acr_vehiculo"      jdbcType="char"/>
        <result property="chkAcrCurseCarrera"   javaType="String"   column= "chk_acr_curse_carrera" jdbcType="char"/>
    </resultMap>
    
    <procedure id="obtenerChecksSolicitud" parameterClass="java.util.HashMap" resultMap="checkSujetoA">
        {CALL sp_solicitud_cns_check_sujeto(#chk_sol_id#)}
    </procedure>


    <!-- fin check sujeto a -->

    <procedure id="consultaEstadoCDA" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_suc_cons_sol_estadocda (#id_solicitud#)}
    </procedure>
    
    <procedure id="consultaJOFCDA" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_suc_cons_ejec_jof (#codEjecutivo#)}
    </procedure>
    
    <procedure id="consultaNivelRiesgoXofi" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_suc_cons_nvl_riesgo_ofi (#oficina#)}
    </procedure>
    
    <procedure id="consultaNivelRiesgoXeje" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_suc_cons_nvl_riesgo_eje (#ejecutivo#)}
    </procedure>
   
    <resultMap id="datosAdicTblSuc" class="java.util.HashMap">
        <result property="nro_cuo_tot_con_nren"         javaType="Integer" column= "nro_cuo_tot_con_nren"           jdbcType="INT"/>
        <result property="nro_cuo_pag_con_nren"         javaType="Integer" column= "nro_cuo_pag_con_nren"           jdbcType="INT"/>
        <result property="nro_cuo_tot_con_ren"          javaType="Integer" column= "nro_cuo_tot_con_ren"            jdbcType="INT"/>
        <result property="nro_cuo_pag_con_ren"          javaType="Integer" column= "nro_cuo_pag_con_ren"            jdbcType="INT"/>
        <result property="cant_prt_vig_ff_bci"          javaType="Integer" column= "cant_prt_vig_ff_bci"            jdbcType="INT"/>
        <result property="cant_prt_vig_ff_sist"         javaType="Integer" column= "cant_prt_vig_ff_sist"           jdbcType="INT"/>
        <result property="rel_dd_hip_val_liq_gar"       javaType="Integer" column= "rel_dd_hip_val_liq_gar"         jdbcType="INT"/>
        <result property="rel_dd_tot_val_liq_gar"       javaType="Integer" column= "rel_dd_tot_val_liq_gar"         jdbcType="INT"/>
        <result property="tdc_num_ava_efec_1m"         javaType="Integer" column= "tdc_num_ava_efec_1m"           jdbcType="INT"/>
        <result property="tdc_num_ava_efec_2m"         javaType="Integer" column= "tdc_num_ava_efec_2m"           jdbcType="INT"/>
        <result property="tdc_num_ava_efec_3m"         javaType="Integer" column= "tdc_num_ava_efec_3m"           jdbcType="INT"/>
        <result property="mto_exc_gar"                  javaType="Integer" column= "mto_exc_gar"                    jdbcType="INT"/>
        <result property="sdo_prom_cct_1m"              javaType="Integer" column= "sdo_prom_cct_1m"                jdbcType="INT"/>
        <result property="sdo_prom_cct_2m"              javaType="Integer" column= "sdo_prom_cct_2m"                jdbcType="INT"/>
        <result property="sdo_prom_cct_3m"              javaType="Integer" column= "sdo_prom_cct_3m"                jdbcType="INT"/>
        <result property="nro_depo_cct_1m"              javaType="Integer" column= "nro_depo_cct_1m"                jdbcType="INT"/>
        <result property="mto_depo_cct_1m"              javaType="Integer" column= "mto_depo_cct_1m"                jdbcType="INT"/>
        <result property="nro_depo_cct_2m"              javaType="Integer" column= "nro_depo_cct_2m"                jdbcType="INT"/>
        <result property="mto_depo_cct_2m"              javaType="Integer" column= "mto_depo_cct_2m"                jdbcType="INT"/>
        <result property="nro_depo_cct_3m"              javaType="Integer" column= "nro_depo_cct_3m"                jdbcType="INT"/>
        <result property="mto_depo_cct_3m"              javaType="Integer" column= "mto_depo_cct_3m"                jdbcType="INT"/>
        <result property="por_pag_tdc_1m"               javaType="Integer" column= "por_pag_tdc_1m"                 jdbcType="INT"/>
        <result property="por_pag_tdc_2m"               javaType="Integer" column= "por_pag_tdc_2m"                 jdbcType="INT"/>
        <result property="por_pag_tdc_3m"               javaType="Integer" column= "por_pag_tdc_3m"                 jdbcType="INT"/>
        <result property="mto_trf_rem_1m"               javaType="Integer" column= "mto_trf_rem_1m"                 jdbcType="INT"/>
        <result property="mto_trf_rem_2m"               javaType="Integer" column= "mto_trf_rem_2m"                 jdbcType="INT"/>
        <result property="mto_trf_rem_3m"               javaType="Integer" column= "mto_trf_rem_3m"                 jdbcType="INT"/>
        <result property="mto_trf_rem_4m"               javaType="Integer" column= "mto_trf_rem_4m"                 jdbcType="INT"/>
        <result property="mto_trf_rem_5m"               javaType="Integer" column= "mto_trf_rem_5m"                 jdbcType="INT"/>
        <result property="mto_trf_rem_6m"               javaType="Integer" column= "mto_trf_rem_6m"                 jdbcType="INT"/>
        <result property="por_uti_lem_1M"               javaType="Integer" column= "por_uti_lem_1M"                 jdbcType="INT"/>
        <result property="por_uti_lem_2M"               javaType="Integer" column= "por_uti_lem_2M"                 jdbcType="INT"/>
        <result property="por_uti_lem_3M"               javaType="Integer" column= "por_uti_lem_3M"                 jdbcType="INT"/>
        <result property="por_uti_lsb_1M"               javaType="Integer" column= "por_uti_lsb_1M"                 jdbcType="INT"/>
        <result property="por_uti_lsb_2M"               javaType="Integer" column= "por_uti_lsb_2M"                 jdbcType="INT"/>
        <result property="por_uti_lsb_3M"               javaType="Integer" column= "por_uti_lsb_3M"                 jdbcType="INT"/>
        <result property="por_uti_tdc_1M"               javaType="Integer" column= "por_uti_tdc_1M"                 jdbcType="INT"/>
        <result property="por_uti_tdc_2M"               javaType="Integer" column= "por_uti_tdc_2M"                 jdbcType="INT"/>
        <result property="por_uti_tdc_3M"               javaType="Integer" column= "por_uti_tdc_3M"                 jdbcType="INT"/>
    </resultMap>
     <procedure id="consultaVarAdicTblSuc" parameterClass="java.util.HashMap" resultMap="datosAdicTblSuc">
        {CALL sp_cons_var_adic_tbl_suc (#rut_sol#)}
    </procedure>
    <!-- consulta Fechas deuda Sbif -->
     <resultMap id="datosSbif" class="java.util.HashMap">
        <result property="num_mes"      javaType="Integer" column= "Suc_Num_Mes"        jdbcType="INT"/>
        <result property="fecha_Sbif"   javaType="Date"    column= "Suc_fec_sbif"       jdbcType="datetime"/>
        <result property="deuda_con"    javaType="Integer" column= "Suc_deu_dir_con"    jdbcType="INT"/>
        <result property="deuda_com"    javaType="Integer" column= "Suc_deu_dir_com"    jdbcType="INT"/>
        <result property="deuda_hip"    javaType="Integer" column= "Suc_deu_dir_hip"    jdbcType="INT"/>
        <result property="deuda_mor"    javaType="Integer" column= "Suc_deu_dir_mor"    jdbcType="INT"/>
        <result property="deuda_vcd"    javaType="Integer" column= "Suc_deu_dir_vcd"    jdbcType="INT"/>
        <result property="deuda_cas"    javaType="Integer" column= "Suc_deu_dir_cas"    jdbcType="INT"/>
        <result property="linea_disp"   javaType="Integer" column= "Suc_linea_disp"     jdbcType="INT"/>
        <result property="num_acred"    javaType="Integer" column= "Suc_nro_int_acred"  jdbcType="INT"/>
    </resultMap>
    <procedure id="obtenerDeudaSbif" parameterClass="java.util.HashMap" resultMap="datosSbif">
        {CALL sp_solicitud_cns_deuda_sbif(#rut_cliente#)}
      </procedure>
    
    <procedure id="ingresarCargaRealDeuda" parameterClass="java.util.HashMap">
        {CALL sp_suc_ins_car_deuda(#rutSolicitante#, #conoce_carga#, #monto_crg_real#, #monto_crg_real_acr#, 
        #nroSolicitud#)}
    </procedure>
    <procedure id="consultarEmpresaPorRut" parameterClass="java.util.HashMap" resultMap="empresa" >
        {CALL sp_solicitud_cns_emp_rut(<isNotNull property="rutEmpresa">#rutEmpresa#</isNotNull><isNull property="rutEmpresa">NULL</isNull>)}
    </procedure>
    <procedure id="existeAtribucionJof" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
         {CALL sp_solicitud_cns_exi_atr(#jof#,#monto#)}
    </procedure>
    <procedure id="actualizarTotalGtiasLC" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_upd_gtias(
            #nro_solicitud#,
            #rut#
        )}
    </procedure>
    <procedure id="agregaCheckProductos" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_checks_prod(
            #idSolicitud#,
            #rut#,
            #producto#
        )}
    </procedure>
    
    <procedure id="existeClienteconSolicitudSinResolucion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
         {CALL sp_solicitud_cns_val_est(
            #rut#         
        )}
    </procedure>


<!-- INI SUC COLABORADOR HITO I -->
    <procedure id="obtenerSolicitudesColaboradorCiclo" resultMap="cicloSolicitudes" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_sol_cicl_c (
            #usuarioConsulta#, 
            <isNotNull property="idSolicitud">#idSolicitud#</isNotNull>
            <isNull property="idSolicitud">NULL</isNull>,
            <isNotNull property="estado">#estado#</isNotNull>
            <isNull property="estado">NULL</isNull>,
            <isNotNull property="fechaIngreso">#fechaIngreso#</isNotNull>
            <isNull property="fechaIngreso">NULL</isNull>,
            <isNotNull property="rutCliente">#rutCliente#</isNotNull>
            <isNull property="rutCliente">NULL</isNull>,
            <isNotNull property="ultimosDias">#ultimosDias#</isNotNull>
            <isNull property="ultimosDias">NULL</isNull>,
            #tipoBandeja#)}
    </procedure>
    <procedure id="obtenerSolicitudesColaboradorAsignacion" resultMap="asignacionSolicitudes" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_sol_asig_c (
            <isNotNull property="banca">#banca#</isNotNull><isNull property="banca">NULL</isNull>,
            <isNotNull property="regional">#regional#</isNotNull><isNull property="regional">NULL</isNull>,
            <isNotNull property="oficina">#oficina#</isNotNull><isNull property="oficina">NULL</isNull>,
            <isNotNull property="ordenarPor">#ordenarPor#</isNotNull><isNull property="ordenarPor">NULL</isNull>,
            <isNotNull property="orden">#orden#</isNotNull><isNull property="orden">NULL</isNull>,
			<isNotNull property="idMonto">#idMonto#</isNotNull><isNull property="idMonto">NULL</isNull>
        )}
    </procedure>
    <procedure id="obtenerBusquedaSolicitudesNoColaborador" resultMap="resultBusquedaSolicitudes" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_bus_sol_nc (
            <isNotNull property="idSolicitud">#idSolicitud#</isNotNull>
            <isNull property="idSolicitud">NULL</isNull>,
            <isNotNull property="estado">#estado#</isNotNull>
            <isNull property="estado">NULL</isNull>,
            <isNotNull property="fechaIngreso">#fechaIngreso#</isNotNull>
            <isNull property="fechaIngreso">NULL</isNull>,
            <isNotNull property="rutCliente">#rutCliente#</isNotNull>
            <isNull property="rutCliente">NULL</isNull>,
            <isNotNull property="ultimosDias">#ultimosDias#</isNotNull>
            <isNull property="ultimosDias">NULL</isNull>,
            #cant_registros#)}
    </procedure>
    <procedure id="obtenerBusquedaSolicitudesColaborador" resultMap="resultBusquedaSolicitudes" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_bus_sol_c (
            <isNotNull property="idSolicitud">#idSolicitud#</isNotNull>
            <isNull property="idSolicitud">NULL</isNull>,
            <isNotNull property="estado">#estado#</isNotNull>
            <isNull property="estado">NULL</isNull>,
            <isNotNull property="fechaIngreso">#fechaIngreso#</isNotNull>
            <isNull property="fechaIngreso">NULL</isNull>,
            <isNotNull property="rutCliente">#rutCliente#</isNotNull>
            <isNull property="rutCliente">NULL</isNull>,
            <isNotNull property="ultimosDias">#ultimosDias#</isNotNull>
            <isNull property="ultimosDias">NULL</isNull>,
            #cant_registros#)}
    </procedure>
    <procedure id="ingresarSolicitudColaborador" parameterClass="java.util.HashMap">
        {CALL sp_ins_sol_colab(
            #id_solicitud#,
            #id_ejecutivo#,
            #fecha_creacion#)}
    </procedure>
    <procedure id="verificarSolicitudColaborador" parameterClass="java.util.HashMap" resultClass="int">	
		{ CALL sp_cns_exist_sol_col(#id_solicitud#)}
	</procedure>
    <!-- FIN SUC COLABORADOR HITO I -->  
    <procedure id="guardarChecksResolucion" parameterClass="java.util.HashMap">
        {CALL sp_suc_ing_chk_res(
            #nro_solicitud#,
            #grupo#,
            #codigo#
        )}
    </procedure>
    <procedure id="validaSocioOtrasEmpresas" parameterClass="java.util.HashMap" resultClass="int">
         {CALL sp_solicitud_cns_soc_emp(
            #rut#,
            #tipoRelacion#
        )}
    </procedure>
    <!-- inicio consulta codigo SII -->
    <resultMap id="resultConsultaCodigoSII"	class="java.util.HashMap">
		<result property="descripcion"	           javaType="String"   column="descripcion"   jdbcType="char"/>
		<result property="tipo"	       			   javaType="String"   column="tipo"          jdbcType="char"/>
		<result property="subtipo"	       		   javaType="String"   column="subtipo"       jdbcType="char"/>
		<result property="cod_tipo"	   			   javaType="String"   column="cod_tipo"      jdbcType="char"/>
		<result property="vigente"   			   javaType="String"   column="vigente"   	  jdbcType="char"/>
    </resultMap>
    <procedure id="consultaCodigoSII" parameterClass="java.util.HashMap" resultMap="resultConsultaCodigoSII">
		{CALL sp_suc_cns_cod_sii(#codigo_sii#)}
    </procedure>
    <!-- fin consulta codigo SII -->
    <procedure id="guardarDatosBasicosClienteSolicitudEmpresario" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_ins_per_emp(
            #codigoEjecutivo#,
            #nro_solicitud#,
            #rut#,
            #cic#,
            #digito#,
            #nombres#,
            #apellidos#,
            #edad#,
            #renta_fija#,
            #renta_variable#,
            #renta_liquida#,
            <isNull property="periodo_renta_fija">NULL</isNull><isNotNull property="periodo_renta_fija">#periodo_renta_fija#</isNotNull>,
            <isNull property="periodo_renta_variable">NULL</isNull><isNotNull property="periodo_renta_variable">#periodo_renta_variable#</isNotNull>,
            <isNull property="rut_emp_trab">NULL</isNull><isNotNull property="rut_emp_trab">#rut_emp_trab#</isNotNull>,
            <isNull property="digito_emp_trab">NULL</isNull><isNotNull property="digito_emp_trab">#digito_emp_trab#</isNotNull>,
            #anno_ing_res_act#,
            #fecha_cta_cte_vig#,
            #fecha_nacimiento#,
            #banca#,
            #tipo_cliente#,
            #estado_civil#,
            #nivel_educacional#,
            #situacion_viv#,
            #oficina#,
            <isNull property="segmento">NULL</isNull><isNotNull property="segmento">#segmento#</isNotNull>,
            #nacionalidad#,
            <isNull property="tipo_plan">NULL</isNull><isNotNull property="tipo_plan">#tipo_plan#</isNotNull>,
            #sexo#,
            #actividad#,
            #situacion_laboral#,
            <isNull property="rut_conyuge">NULL</isNull><isNotNull property="rut_conyuge">#rut_conyuge#</isNotNull>,
            <isNull property="dv_conyuge">NULL</isNull><isNotNull property="dv_conyuge">#dv_conyuge#</isNotNull>,
            <isNull property="regimen_conyugal">NULL</isNull><isNotNull property="regimen_conyugal">#regimen_conyugal#</isNotNull>,
            #cod_actividad_sii#,
            #tipo_administracion#,
            #antiguedad_giro#,
            #sector_economico_emp#,
            #tipo_cliente_emp#,
            #actividad_cliente_emp#
        )}
    </procedure>

    <resultMap id="datosBasicosClienteEmpresario" class="java.util.HashMap">
        <result property="rut"                      column="rut"/>
        <result property="digito"                   column="digito"/>
        <result property="cic"                      column="cic"/>
        <result property="nombres"                  column="nombres"/>
        <result property="apellidos"                column="apellidos"/>
        <result property="edad"                     column="edad"/>
        <result property="renta_fija"               column="renta_fija"/>
        <result property="renta_variable"           column="renta_variable"/>
        <result property="renta_liquida"            column="renta_liquida"/>
        <result property="periodo_renta_fija"       column="periodo_renta_fija"/>
        <result property="periodo_renta_variable"   column="periodo_renta_variable"/>
        <result property="rut_emp_trab"             column="rut_emp_trab"/>
        <result property="digito_emp_trab"          column="digito_emp_trab"/>
        <result property="anno_ing_res_act"         column="anno_ing_res_act"/>
        <result property="fecha_cta_cte_vig"        column="fecha_cta_cte_vig"/>
        <result property="fecha_nacimiento"         column="fecha_nacimiento"/>
        <result property="banca"                    column="banca"/>
        <result property="tipo_cliente"             column="tipo_cliente"/>
        <result property="estado_civil"             column="estado_civil"/>
        <result property="nivel_educacional"        column="nivel_educacional"/>
        <result property="situacion_viv"            column="situacion_viv"/>
        <result property="oficina"                  column="oficina"/>
        <result property="segmento"                 column="segmento"/>
        <result property="nacionalidad"             column="nacionalidad"/>
        <result property="tipo_plan"                column="tipo_plan"/>
        <result property="sexo"                     column="sexo"/>
        <result property="actividad"                column="actividad"/>
        <result property="situacion_laboral"        column="situacion_laboral"/>
        <result property="desc_banca"               column="desc_banca"/>
        <result property="desc_tipo_cli"            column="desc_tipo_cli"/>
        <result property="desc_estado_civil"        column="desc_estado_civil"/>
        <result property="desc_nivel_educ"          column="desc_nivel_educ"/>
        <result property="desc_situacion_viv"       column="desc_situacion_viv"/>
        <result property="desc_oficina"             column="desc_oficina"/>
        <result property="desc_segmento"            column="desc_segmento"/>
        <result property="desc_nacionalidad"        column="desc_nacionalidad"/>
        <result property="desc_tipo_plan"           column="desc_tipo_plan"/>
        <result property="desc_sexo"                column="desc_sexo"/>
        <result property="desc_actividad"           column="desc_actividad"/>
        <result property="desc_sit_laboral"         column="desc_sit_laboral"/>
        <result property="rut_conyuge"              column="rut_conyuge"/>
        <result property="dv_conyuge"               column="dv_conyuge"/>
        <result property="regimen_conyugal"         column="regimen_conyugal"/>
        <result property="desc_regimen_cony"        column="desc_regimen_cony"/>
        <result property="desc_act_cda"             column="desc_act_cda"/>
        <result property="desc_cont_lab_cda"        column="desc_cont_lab_cda"/>
        <result property="desc_nac_cda"             column="desc_nac_cda"/>
        <result property="res_def_cda"              column="res_def_cda"/>
        <result property="cod_actividad_sii"        javaType="Long" column="cod_actividad_sii" jdbcType="numeric"/>
        <result property="tipo_administracion"      column="tipo_administracion"/>
        <result property="antiguedad_giro"          column="antiguedad_giro"/>
        <result property="sector_economico_emp"     column="sector_economico_emp"/>
        <result property="tipo_cliente_emp"         column="tipo_cliente_emp"/>
        <result property="actividad_cliente_emp"    column="actividad_cliente_emp"/>
    </resultMap>

    <procedure id="obtenerCienteSolicitudEmpresario" parameterClass="java.util.HashMap" resultMap="datosBasicosClienteEmpresario">
        {CALL sp_solicitud_cns_cli_per_emp(
            #nro_solicitud#,
            #rut_cliente#
        )}
    </procedure>

    <procedure id="obtenerEstadoCheckPyme" resultMap="parametro" parameterClass="java.util.HashMap">
        {CALL sp_solicitud_cns_check_pyme (#nro_solicitud#, #grupo#)}
    </procedure>
    
    <procedure id="eliminarPolitica" parameterClass="java.util.HashMap">
    {CALL sp_solicitud_elim_politica(
            #nro_solicitud#
        )}
    </procedure>
</sqlMap>
