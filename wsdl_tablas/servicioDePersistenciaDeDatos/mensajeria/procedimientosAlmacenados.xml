<?xml version="1.0" encoding="UTF-8" ?>	

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
	
<sqlMap namespace="mensajeria.procedimientosAlmacenados">


	<parameterMap id="setMensajesNoLeidos" class="java.util.HashMap">			
			<parameter property="idEjecutivo"        jdbcType="CHAR"      		javaType="String" />
			<parameter property="cantidadRegistros"  jdbcType="NUMERIC"      	javaType="java.lang.Integer" />
			<parameter property="indicador"  		 jdbcType="CHAR"  	    	javaType="String" />				
	</parameterMap>	
	<resultMap id="getMensajesNoLeidos" class="java.util.HashMap">
			<result property="idConversacion" 			column="Id_Conversacion"   			jdbcType="NUMERIC"    	javaType="String" />
			<result property="idMensaje"	 			column="Id_mensaje"		   			jdbcType="NUMERIC"    	javaType="String" />
			<result property="nombre"     				column="Nombre"						jdbcType="CHAR"    	 	javaType="String" />        	
			<result property="apellidoPaterno"     		column="Apellido_Paterno" 			jdbcType="CHAR"    	 	javaType="String"/>        	
			<result property="apellidoMaterno"			column="Apellido_Materno" 			jdbcType="CHAR"		   	javaType="String"/>        	
			<result property="fecha" 					column="Fecha_Modificacion" 		jdbcType="DATETIME"    	javaType="java.util.Date"/>			
	</resultMap>
	<procedure id="mensajesNoLeidos" parameterMap="setMensajesNoLeidos" resultMap="getMensajesNoLeidos">
			{ CALL spObtMenNoLeiRes (?, ?, ?) }
	</procedure>	
	
	
		<parameterMap id="setCantidadMensajesPorRut" class="java.util.HashMap">			
			<parameter property="rutCliente"        jdbcType="integer"      		javaType="java.lang.Long" />
	</parameterMap>	
	<procedure id="cantidadMensajesPorRut" parameterMap="setCantidadMensajesPorRut" resultClass="java.lang.Integer">
			{ CALL sp_cns_msj_rut (?) }
	</procedure>
	
	<parameterMap id="setVerificaUsuarioMuro" class="java.util.HashMap">			
			<parameter property="rutUsuario"    jdbcType="NUMERIC"	javaType="java.lang.Long" />
			<parameter property="dvUsuario"  	jdbcType="CHAR"     javaType="String" />
			<parameter property="identificador" jdbcType="CHAR"     javaType="String" />
			<parameter property="nombre" 		jdbcType="CHAR"     javaType="String" />
			<parameter property="apellidoPat"  	jdbcType="CHAR"     javaType="String" />
			<parameter property="apellidoMat"  	jdbcType="CHAR"     javaType="String" />
			<parameter property="nombreImagen"  jdbcType="CHAR"     javaType="String" />
			<parameter property="fechaIngreso"  jdbcType="DATETIME" javaType="java.util.Date"/>
			<parameter property="canal"  		jdbcType="CHAR"     javaType="String" />
			<parameter property="tipoUsuario"	jdbcType="CHAR"     javaType="String" />
	</parameterMap>	
	<procedure id="verificaUsuarioMuro" parameterMap="setVerificaUsuarioMuro" resultClass="java.lang.Integer">
			{ CALL sp_cns_cli_eje (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) }
	</procedure>
	
		<parameterMap id="setCambiaEstadoMensaje" class="java.util.HashMap">			
			<parameter property="idConversacion"    jdbcType="NUMERIC"	javaType="java.lang.Integer" />
			<parameter property="idMensaje"    		jdbcType="NUMERIC"	javaType="java.lang.Integer" />
			<parameter property="idLectura"  		jdbcType="CHAR"		javaType="String" />			
	</parameterMap>	
	<procedure id="cambiaEstadoMensaje" parameterMap="setCambiaEstadoMensaje" resultClass="java.lang.Integer">
			{ CALL spActLectMens (?, ?, ?) }
	</procedure>
	
	
	
	
	  	 
</sqlMap>
		