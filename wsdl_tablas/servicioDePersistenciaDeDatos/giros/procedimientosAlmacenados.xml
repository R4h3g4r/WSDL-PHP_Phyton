<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
	
<sqlMap namespace="giros.procedimientosAlmacenados">	

<resultMap id="deposito" class="java.util.HashMap">
		<result property="rutEmisor"      										column="per_idc_emi"								javaType="java.lang.Long"       jdbcType="INTEGER"/>
		<result property="rutReceptor"   										column="per_idc_rec"								javaType="java.lang.Long"       jdbcType="INTEGER"/>
		<result property="monto"   												column="dep_mon" 									javaType="java.lang.Long"       jdbcType="INTEGER"/>
		<result property="estado"        											column="dep_est" 										javaType="java.lang.String"     jdbcType="VARCHAR"/>
		<result property="codigoDeposito"           						column="dep_idd_dep" 							javaType="java.lang.Long"       jdbcType="INTEGER"/>
		<result property="fechaEmision" 								 	column="dep_fec_dep" 								javaType="Date"  />
		<result property="nombreCompletoEmisor"       		    column="nombreCompletoEmisor"		javaType="java.lang.String"     jdbcType="VARCHAR"/>
		<result property="usuarioOriginador"  							column="dep_usr" 										javaType="java.lang.String"     jdbcType="VARCHAR"/>
		<result property="pasaporteEmisor"    							column="dep_pst_emi"   			 				javaType="java.lang.String"     jdbcType="VARCHAR"/>
		<result property="pasaporteReceptor"    						column="dep_pst_rec"   			 				javaType="java.lang.String"     jdbcType="VARCHAR"/>
		<result property="sucursal"    											column="dep_ofi_gen"   			 				javaType="java.lang.String"     jdbcType="VARCHAR"/>
		<result property="oficinaGeneradora"    						column="dep_ofi_gen"   			 				javaType="java.lang.String"     jdbcType="VARCHAR"/>

</resultMap>


<resultMap id="depositosPorSucursal" class="java.util.HashMap">
		<result property="estado"      											column="estadoTicket"								javaType="java.lang.String"     jdbcType="VARCHAR"/>
		<result property="tipoTicketGenerado"   						column="tipoTicketGen"								javaType="java.lang.String"     jdbcType="VARCHAR"/>
		<result property="totalRegistros"   									column="totalRegistros" 							javaType="java.lang.Long"       jdbcType="INTEGER"/>
		<result property="monto"        											column="montoTotal" 								javaType="java.lang.Long"       jdbcType="INTEGER"/>
		<result property="fechaGeneracion" 								column="fechaGeneracion" 						javaType="java.lang.String"     jdbcType="VARCHAR"/>
		<result property="oficina"       		  									column="local"												javaType="java.lang.Long"       jdbcType="INTEGER"/>
		

</resultMap>





	<!--    elimina favorito  -->
	<procedure id="eliminaFavorito" parameterClass="java.util.HashMap">
		{CALL sp_del_dep(#lIdentificador#)}
    </procedure>


	<!--    traer por celular  -->
	<procedure id="traerDepositosVigentesPorCelularTomador" parameterClass="java.util.HashMap"  resultMap="deposito">
		{CALL sp_cns_dep_cel(#per_cel#)}
    </procedure>
	
	<!--    traer por sucursal  -->
	<procedure id="traerDetallePorLocalGirosElectronicos" parameterClass="java.util.HashMap"  resultMap="depositosPorSucursal"> 
		{CALL sp_tic_lcl(#tic_fec_ini#)}
    </procedure>

	<!-- SP QUE VA A LA TABLA DE SUCURSALES -->
	<procedure id="obtieneSucursales" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_suc_sel(#suc_ids#)}
    </procedure>
	

		
</sqlMap>	