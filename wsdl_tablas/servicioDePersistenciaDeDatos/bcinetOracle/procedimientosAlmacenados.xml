<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="bcinetOracle.procedimientosAlmacenados">

    <!-- Obtener sistemas -->
    <parameterMap id="setObtenerSistemasPorUsuarioPerfil" class="java.util.HashMap">
        <parameter property="cursorbuscar"  javaType="java.sql.ResultSet"   jdbcType="ORACLECURSOR" mode="OUT"/>
        <parameter property="idEjecutivo"   javaType="java.lang.String"     jdbcType="VARCHAR"/>
        <parameter property="perfil"        javaType="java.lang.String"     jdbcType="VARCHAR"/>
    </parameterMap>

    <resultMap id="getObtenerSistemasPorUsuarioPerfil" class="java.util.HashMap" >
        <result property="id"                   javaType="java.lang.String"     column="id"                 jdbcType="varchar" />
        <result property="nombre"               javaType="java.lang.String"     column="nombre"             jdbcType="varchar" />
        <result property="enlace"               javaType="java.lang.String"     column="enlace"             jdbcType="varchar" />
        <result property="tipoSistema"          javaType="java.lang.Integer"    column="tipoSistema"        jdbcType="int" />
        <result property="icono"                javaType="java.lang.String"     column="icono"              jdbcType="varchar" />
        <result property="orden"                javaType="java.lang.Integer"    column="orden"              jdbcType="int" />
        <result property="vista"                javaType="java.lang.String"     column="vista"              jdbcType="varchar" />
        <result property="accion"               javaType="java.lang.String"     column="accion"             jdbcType="varchar"/>
        <result property="tipoApertura"         javaType="java.lang.String"     column="tipoApertura"       jdbcType="varchar" />
        <result property="pivote"               javaType="Boolean"              column="pivote"             jdbcType="bit" />
        <result property="opcionesDeApertura"   javaType="java.lang.String"     column="opcionesDeApertura" jdbcType="varchar" />
        <result property="estado"               javaType="java.lang.String"     column="estado"             jdbcType="varchar" />
    </resultMap>

    <procedure id="obtenerSistemasPorUsuarioPerfil" parameterMap="setObtenerSistemasPorUsuarioPerfil" resultMap="getObtenerSistemasPorUsuarioPerfil"  resultClass="java.util.HashMap">
        {call BCINET.SP_SIST_POR_USUARIO_PERFIL(?,?,?)}
    </procedure>
    <!-- Fin Obtener sistemas -->
    <!-- INI Activar sistema -->
    <parameterMap id="setDatosActivarSistema" class="java.util.HashMap">
        <parameter property="idSistema"         javaType="java.lang.String"     jdbcType="varchar" />
        <parameter property="idEjecutivo"       javaType="java.lang.String"     jdbcType="varchar" />
    </parameterMap>
     <procedure id="activarSistema" parameterMap="setDatosActivarSistema" resultClass="java.util.HashMap">
        {call BCINET.SP_ACTIVAR_SISTEMA(?,?)}
    </procedure>
    <!-- FIN Activar sistema -->
    <!-- INI Desactivar sistema -->
    <parameterMap id="setDatosDesactivarSistema" class="java.util.HashMap">
        <parameter property="idSistema"         javaType="java.lang.String"     jdbcType="varchar" />
        <parameter property="idEjecutivo"       javaType="java.lang.String"     jdbcType="varchar" />
    </parameterMap>
     <procedure id="desactivarSistema" parameterMap="setDatosDesactivarSistema" resultClass="java.util.HashMap">
        {call BCINET.SP_DESACTIVAR_SISTEMA(?,?)}
    </procedure>
    <!-- FIN Desactivar sistema -->
    <!--  INI Obtener detalle de una accion activa -->
    <parameterMap id="setObtenerAccion" class="java.util.HashMap">
        <parameter property="cursorbuscar"  javaType="java.sql.ResultSet"   jdbcType="ORACLECURSOR" mode="OUT"/>
        <parameter property="perfil"        javaType="java.lang.String"     jdbcType="VARCHAR"/>
        <parameter property="idAccion"      javaType="java.lang.String"     jdbcType="VARCHAR"/>
    </parameterMap>
    <resultMap id="getObtenerAccion" class="java.util.HashMap" >
        <result property="idAccion"            javaType="java.lang.String"     column="acc_id_accion"             jdbcType="varchar" />
        <result property="descripcion"         javaType="java.lang.String"     column="acc_descripcion"           jdbcType="varchar" />
        <result property="tipo"                javaType="java.lang.String"     column="acc_tipo"                  jdbcType="varchar" />
        <result property="glosaPrincipal"      javaType="java.lang.String"     column="acc_glosaprincipal"        jdbcType="varchar" />
        <result property="glosa"               javaType="java.lang.String"     column="acc_glosa"                 jdbcType="varchar" />
        <result property="fecha"               javaType="java.util.Date"       column="acc_fecha"                 jdbcType="date" />
        <result property="prioridad"           javaType="java.lang.String"     column="acc_prioridad"             jdbcType="varchar" />
        <result property="valorPrincipal"      javaType="java.lang.Float"      column="acc_valor_principal"       jdbcType="float"/>
        <result property="enlace"              javaType="java.lang.String"     column="acc_enlace"                jdbcType="varchar" />
        <result property="idPadre"             javaType="java.lang.String"     column="acc_id_padre"              jdbcType="varchar" />
        <result property="datosPersistentes"   javaType="java.lang.Integer"    column="acc_datos_persistentes"    jdbcType="number" />
        <result property="tipoApertura"        javaType="java.lang.String"     column="acc_tipo_apertura"         jdbcType="varchar" />
        <result property="esPivote"            javaType="boolean"              column="acc_es_pivote"             jdbcType="number" />
        <result property="opcionesApertura"    javaType="java.lang.String"     column="acc_opciones_de_apertura"  jdbcType="varchar" />
        <result property="mensaje"             javaType="java.lang.String"     column="acc_mensaje"               jdbcType="varchar"/>
        <result property="parametrosURL"       javaType="java.lang.String"     column="acc_parametros_url"        jdbcType="varchar" />
        <result property="grupo"               javaType="java.lang.String"     column="per_acc_grupo"             jdbcType="varchar" />
     </resultMap>   
    <procedure id="obtenerAccion" parameterMap="setObtenerAccion" resultMap="getObtenerAccion"  resultClass="java.util.HashMap">
        {call BCINET.SP_CNS_ACCION(?,?,?)}
    </procedure>
    <!--  FIN Obtener detalle de una accion activa -->
    
    <!-- INI Favoritos ejecutivo --> 
    <!-- INI Obtener favoritos por perfil, idEjecutivo e id del favorito personalizado. -->
    <parameterMap id="setObtenerFavoritos" class="java.util.HashMap">
        <parameter property="cursorbuscar"            javaType="java.sql.ResultSet"   jdbcType="ORACLECURSOR" mode="OUT"/>
        <parameter property="ejecutivo"               javaType="java.lang.String"     jdbcType="VARCHAR"/>
        <parameter property="perfil"                  javaType="java.lang.String"     jdbcType="VARCHAR"/>
        <parameter property="idFavPersonalizado"      javaType="java.lang.Integer"    jdbcType="NUMERIC" />
    </parameterMap>
    <resultMap id="getObtenerFavoritos" class="java.util.HashMap" >
        <result property="idFavEstatico"       javaType="java.lang.String"     column="ID_FAV_ESTATICO"           jdbcType="varchar" />
        <result property="nombreEnlace"        javaType="java.lang.String"     column="NOMBREENLACE"              jdbcType="varchar" />
        <result property="enlace"              javaType="java.lang.String"     column="ENLACE"                    jdbcType="varchar" />
        <result property="orden"               javaType="java.lang.Integer"    column="ORDEN"                     jdbcType="number" />
        <result property="rutaImagen"          javaType="java.lang.String"     column="IMAGEN"                    jdbcType="varchar" />
        <result property="tipoApertura"        javaType="java.lang.String"     column="TIPO_APERTURA"             jdbcType="varchar" />
        <result property="esPivote"            javaType="boolean"              column="ES_PIVOTE"                 jdbcType="number" />
        <result property="opcionesApertura"    javaType="java.lang.String"     column="OPCIONES_APERTURA"         jdbcType="varchar"/>
        <result property="nombreSeguimientoGA" javaType="java.lang.String"     column="FAV_NOMBRE_GA"             jdbcType="varchar"/>
        <result property="idEjecutivo"         javaType="java.lang.String"     column="IDEJECUTIVO"               jdbcType="varchar" />
        <result property="idFavPersonalizado"  javaType="java.lang.Integer"    column="ID_FAV_PERSONALIZADO"      jdbcType="number" />
        <result property="esEliminable"        javaType="boolean"              column="ES_ELIMINABLE"             jdbcType="number" />
        <result property="tipo"                javaType="java.lang.String"     column="TIPO"                      jdbcType="varchar" />
    </resultMap>
    <procedure id="obtenerFavoritos" parameterMap="setObtenerFavoritos" resultMap="getObtenerFavoritos"  resultClass="java.util.HashMap">
        {call BCINET.SP_CNS_FAV_USUARIO_PERFIL(?,?,?,?)}
    </procedure>
    <!-- FIN Obtener favoritos por perfil, idEjecutivo e id del favorito personalizado. -->    
    <!-- INI Eliminar favorito personalizado -->
    <parameterMap id="setEliminarFavPersonalizado" class="java.util.HashMap">
        <parameter property="ejecutivo"         javaType="java.lang.String"     jdbcType="VARCHAR" />
        <parameter property="idFavorito"        javaType="java.lang.Integer"    jdbcType="NUMERIC" />
    </parameterMap>
     <procedure id="eliminarFavPersonalizado" parameterMap="setEliminarFavPersonalizado" resultClass="java.util.HashMap">
        {call BCINET.SP_ELIMINAR_FAV_PERSONALIZADO(?,?)}
    </procedure>
    <!-- FIN eliminar favorito personalizado -->
    <!-- INI agregar favorito personalizado -->
    <parameterMap id="setDatosAgregarFavPersonalizado" class="java.util.HashMap">
        <parameter property="url"             javaType="java.lang.String"     jdbcType="VARCHAR" />
        <parameter property="idEje"           javaType="java.lang.String"     jdbcType="VARCHAR" />
        <parameter property="nombreURL"       javaType="java.lang.String"     jdbcType="VARCHAR" />
    </parameterMap>
     <procedure id="agregarFavPersonalizado" parameterMap="setDatosAgregarFavPersonalizado" resultClass="java.util.HashMap">
        {call BCINET.SP_AGREGAR_FAVORITO(?,?,?)}
    </procedure>
    <!-- FIN agregar favorito personalizado -->
    <!-- INI actualizar favorito -->
    <parameterMap id="setActualizaFavPersonalizado" class="java.util.HashMap">
        <parameter property="ejecutivo"         javaType="java.lang.String"     jdbcType="VARCHAR" />
        <parameter property="idFavorito"        javaType="java.lang.Integer"    jdbcType="NUMERIC" />
        <parameter property="url"               javaType="java.lang.String"     jdbcType="VARCHAR" />
        <parameter property="nombreURL"         javaType="java.lang.String"     jdbcType="VARCHAR" />
    </parameterMap>
     <procedure id="actualizaFavPersonalizado" parameterMap="setActualizaFavPersonalizado" resultClass="java.util.HashMap">
        {call BCINET.SP_ACTUALIZA_FAV_PERSONALIZADO(?,?,?,?)}
    </procedure>    
    <!-- FIN actualizar favorito -->
    <!--  FIN Favoritos ejecutivo -->
</sqlMap>
