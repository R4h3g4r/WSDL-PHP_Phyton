<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="dps.procedimientosAlmacenados">

  <procedure id="insertarDPS" parameterClass="java.util.HashMap" resultClass="java.util.HashMap" >
    {call sp_ins_dps(
    #doc_cod_compania#,
    <isNull property="dps_des_estado">NULL</isNull><isNotNull property="dps_des_estado">#dps_des_estado#</isNotNull>,
    #dps_id_cia_aseg#,
    <isNull property="dps_des_sub_estado">NULL</isNull><isNotNull property="dps_des_sub_estado">#dps_des_sub_estado#</isNotNull>
    )}
  </procedure>
  
  
  <procedure id="insertarEjecutivoDPS" parameterClass="java.util.HashMap" resultClass="java.util.HashMap" >
    {call sp_ins_ejecutivo_dps(
    #eje_nombre#,
    #dps_id_dps#,
    <isNull property="eje_rut_ejecutivo">NULL</isNull><isNotNull property="eje_rut_ejecutivo">#eje_rut_ejecutivo#</isNotNull>,
    <isNull property="eje_dv_ejecutivo">NULL</isNull><isNotNull property="eje_dv_ejecutivo">#eje_dv_ejecutivo#</isNotNull>,
    <isNull property="eje_suc_banco">NULL</isNull><isNotNull property="eje_suc_banco">#eje_suc_banco#</isNotNull>,
    <isNull property="eje_mail_ejecutivo">NULL</isNull><isNotNull property="eje_mail_ejecutivo">#eje_mail_ejecutivo#</isNotNull>,
    <isNull property="eje_nom_ejecutivo">NULL</isNull><isNotNull property="eje_nom_ejecutivo">#eje_nom_ejecutivo#</isNotNull>)}
  </procedure> 
  
  <procedure id="insertarAsegurableDPS" parameterClass="java.util.HashMap" resultClass="java.util.HashMap" >
    {call sp_ins_asegurable(
    #dps_id_dps#,
    #ase_rut#,
    #ase_dv#,
    #ase_ape_paterno#,
    #ase_ape_materno#,
    #ase_nombres#,
    #ase_fec_nacimiento#,
    #ase_sexo#,
    <isNull property="ase_tpo_deudor">NULL</isNull><isNotNull property="ase_tpo_deudor">#ase_tpo_deudor#</isNotNull>,
    <isNull property="ase_edo_civil">NULL</isNull><isNotNull property="ase_edo_civil">#ase_edo_civil#</isNotNull>,
    <isNull property="ase_nom_isapre">NULL</isNull><isNotNull property="ase_nom_isapre">#ase_nom_isapre#</isNotNull>,
    <isNull property="ase_dir_calle_postal">NULL</isNull><isNotNull property="ase_dir_calle_postal">#ase_dir_calle_postal#</isNotNull>,
    <isNull property="ase_dir_nro_postal">NULL</isNull><isNotNull property="ase_dir_nro_postal">#ase_dir_nro_postal#</isNotNull>,
    <isNull property="ase_dir_referencia_postal">NULL</isNull><isNotNull property="ase_dir_referencia_postal">#ase_dir_referencia_postal#</isNotNull>,
    <isNull property="ase_dir_comuna_postal">NULL</isNull><isNotNull property="ase_dir_comuna_postal">#ase_dir_comuna_postal#</isNotNull>,
    <isNull property="ase_dir_ciudad_postal">NULL</isNull><isNotNull property="ase_dir_ciudad_postal">#ase_dir_ciudad_postal#</isNotNull>,
    <isNull property="ase_dir_region_postal">NULL</isNull><isNotNull property="ase_dir_region_postal">#ase_dir_region_postal#</isNotNull>,
    <isNull property="ase_dir_calle_comercial">NULL</isNull><isNotNull property="ase_dir_calle_comercial">#ase_dir_calle_comercial#</isNotNull>,
    <isNull property="ase_dir_nro_comercial">NULL</isNull><isNotNull property="ase_dir_nro_comercial">#ase_dir_nro_comercial#</isNotNull>,
    <isNull property="ase_dir_referencia_comercial">NULL</isNull><isNotNull property="ase_dir_referencia_comercial">#ase_dir_referencia_comercial#</isNotNull>,
    <isNull property="ase_dir_comuna_comercial">NULL</isNull><isNotNull property="ase_dir_comuna_comercial">#ase_dir_comuna_comercial#</isNotNull>,
    <isNull property="ase_dir_ciudad_comercial">NULL</isNull><isNotNull property="ase_dir_ciudad_comercial">#ase_dir_ciudad_comercial#</isNotNull>, 
     <isNull property="ase_dir_region_comercial">NULL</isNull><isNotNull property="ase_dir_region_comercial">#ase_dir_region_comercial#</isNotNull>,
        
    #ase_tlf_postal#,
    <isNull property="ase_tlf_comercial">NULL</isNull><isNotNull property="ase_tlf_comercial">#ase_tlf_comercial#</isNotNull>,
    <isNull property="ase_mail">NULL</isNull><isNotNull property="ase_mail">#ase_mail#</isNotNull>,
    #ase_tlf_movil#,
    #peso#,
    #estatura#
    )}
  </procedure>
  
  <procedure id="insertarCreditoDPS" parameterClass="java.util.HashMap" resultClass="java.util.HashMap" >
    {call sp_ins_credito_dps(
    #dps_id_dps#,
    #cre_mto_credito#,
    #cre_nom_moneda#,
    #cre_tpo_plazo#,
    #cre_plz_operacion#,
    #cre_recurse#,
    #cre_num_operacion_recurse#,
    <isNull property="cre_per_gracia">NULL</isNull><isNotNull property="cre_per_gracia">#cre_per_gracia#</isNotNull>)}
  </procedure>
  
  <procedure id="insertarRespuestaDPS" parameterClass="java.util.HashMap" resultClass="java.util.HashMap" >
    {call sp_ins_respuesta_dps(
    #dps_id_dps#,
    #pre_id#,
    #res_respuesta#,
    <isNull property="res_descripcion">NULL</isNull><isNotNull property="res_descripcion">#res_descripcion#</isNotNull>)}
  </procedure>
  
  <procedure id="actualizarEstadoDPS" parameterClass="java.util.HashMap" resultClass="java.util.HashMap" >
    {call sp_upt_estado_dps(
    #dps_id_dps#,
    #dps_des_estado#,
    <isNull property="dps_des_sub_estado">NULL</isNull><isNotNull property="dps_des_sub_estado">#dps_des_sub_estado#</isNotNull>
    )}
  </procedure>
  
  <procedure id="consultarPreguntaDPS" parameterClass="java.util.HashMap" resultClass="java.util.HashMap" >
    {call sp_cns_preguntas_dps()}
  </procedure>
  
  <procedure id="consultarDocumentoDPS" parameterClass="java.util.HashMap" resultClass="java.util.HashMap" >
    {call sp_cns_documento_dps(
    #doc_cod_compania#)}
  </procedure>

  <procedure id="consultarHistoricoDPS" parameterClass="java.util.HashMap" resultClass="java.util.HashMap" >
    {call sp_cns_hist_dps(
    <isNull property="dps_id">NULL</isNull><isNotNull property="dps_id">#dps_id#</isNotNull>,
    #ase_rut#,
    #ase_dv#,
    <isNull property="fecha_desde">NULL</isNull><isNotNull property="fecha_desde">#fecha_desde#</isNotNull>,
    <isNull property="fecha_hasta">NULL</isNull><isNotNull property="fecha_hasta">#fecha_hasta#</isNotNull>,
    <isNull property="estado_dps">NULL</isNull><isNotNull property="estado_dps">#estado_dps#</isNotNull>
    )}
  </procedure>
  
    <procedure id="consultarDeclaracionSalud" parameterClass="java.util.HashMap" resultClass="java.util.HashMap" >
    {call sp_cns_dps(#dps_id#)}
  </procedure>
  
   <procedure id="consultarRespuestas" parameterClass="java.util.HashMap" resultClass="java.util.HashMap" >
    {call sp_cns_respuestas_dps(#dps_id#)}
  </procedure>
  
   <procedure id="obtenerParametrosXGrupo" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
        {CALL sp_dps_cns_param_grp (
        #grupo#,
         <isNull property="codigo">NULL</isNull><isNotNull property="codigo">#codigo#</isNotNull>)}
    </procedure>

    <procedure id="actualizarDPS" resultClass="java.util.HashMap" parameterClass="java.util.HashMap" >
            {CALL sp_upt_declaracion_salud(
            #dps_id_dps#,
            #dps_des_estado#,
            <isNull property="dps_des_sub_estado">NULL</isNull><isNotNull property="dps_des_sub_estado">#dps_des_sub_estado#</isNotNull>,
            <isNull property="dps_ruta_resumen">NULL</isNull><isNotNull property="dps_ruta_resumen">#dps_ruta_resumen#</isNotNull>,
            <isNull property="dps_ruta_carta">NULL</isNull><isNotNull property="dps_ruta_carta">#dps_ruta_carta#</isNotNull>,
            <isNull property="dps_ruta_propuesta">NULL</isNull><isNotNull property="dps_ruta_propuesta">#dps_ruta_propuesta#</isNotNull>,
            <isNull property="dps_fecha_actualizacion">NULL</isNull><isNotNull property="dps_fecha_actualizacion">#dps_fecha_actualizacion#</isNotNull>
            )}
    </procedure>
  
  

</sqlMap>
