<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
    
<sqlMap namespace="Regulariza.procedimientosAlmacenados">
    
     <parameterMap id="setConsultaTiposRegularizacion" class="java.util.HashMap">
        <parameter property="codigoProducto"   jdbcType="VARCHAR"  javaType="String" />
    </parameterMap>
    <resultMap id="getConsultaTiposRegularizacion" class="java.util.HashMap">
        <result property="codigoTipoRegularizacion"        column="tip_cod_reg"        jdbcType="CHAR"          javaType="String"/>
        <result property="glosaTipoRegularizacion"      column="tip_gls_reg"        jdbcType="CHAR"          javaType="String"/>
        <result property="codigoProducto"               column="tip_cod_prod"       jdbcType="CHAR"          javaType="String"/>
        <result property="cuentaContrapartida"          column="tip_cta_ctp"        jdbcType="CHAR"          javaType="String" />
        <result property="transaccionTandem"             column="tip_tx"             jdbcType="CHAR"          javaType="String"/>
        <result property="codigoNemonico"                column="tip_cod_nmn"           jdbcType="CHAR"          javaType="String"/>
        <result property="codigoOperador"                column="tip_cod_ope"           jdbcType="CHAR"          javaType="String"/>
        <result property="codigoOficina"                column="tip_cod_ofi"           jdbcType="CHAR"          javaType="String"/>
    </resultMap>
    <procedure id="consultaTiposRegularizacion" parameterMap="setConsultaTiposRegularizacion" resultMap="getConsultaTiposRegularizacion">
            { CALL sp_obt_tip_reg(?) }
    </procedure>    
    
    <parameterMap id="setIngresarEncabezadoRegularizacion" class="java.util.HashMap">
        <parameter property="numeroRegularizacion"  jdbcType="INT"      javaType="int" />
        <parameter property="fechaCreacion"           jdbcType="DATETIME" javaType="String" />
        <parameter property="fechaPago"               jdbcType="DATETIME" javaType="String" />
        <parameter property="fechaTransaccion"       jdbcType="DATETIME" javaType="String" />
        <parameter property="codigoColaborador"       jdbcType="VARCHAR"  javaType="String" />
        <parameter property="estadoRegularizacion"  jdbcType="VARCHAR"  javaType="String" />
        <parameter property="codRechazo"               jdbcType="VARCHAR"  javaType="String" />
        <parameter property="codTipoRegularizacion" jdbcType="VARCHAR"  javaType="String" />
        <parameter property="nombreArchivo"           jdbcType="VARCHAR"  javaType="String" />
        <parameter property="glosaMotivo"           jdbcType="VARCHAR"  javaType="String" />
    </parameterMap>
    <procedure id="ingresarEncabezadoRegularizacion" parameterMap="setIngresarEncabezadoRegularizacion" resultClass="int">
            { CALL sp_ing_enc_reg(?,?,?,?,?,?,?,?,?,?) }
    </procedure>   
    
    
    <parameterMap id="setIngresarDetalleRegularizacion" class="java.util.HashMap">
        <parameter property="numeroRegularizacion"    jdbcType="INT"      javaType="int" />
        <parameter property="estado"                jdbcType="VARCHAR"     javaType="String" />
        <parameter property="codigoRechazoDetalle"    jdbcType="VARCHAR"     javaType="String" />
        <parameter property="monto"                    jdbcType="DECIMAL"  javaType="Double" />
        <parameter property="cuenta"                jdbcType="VARCHAR"     javaType="String" />
        <parameter property="rutCliente"            jdbcType="INT"      javaType="Long" />
        <parameter property="dvCliente"                jdbcType="VARCHAR"  javaType="String" />
        <parameter property="nombreCliente"            jdbcType="VARCHAR"  javaType="String" />
        <parameter property="numOperacion"            jdbcType="VARCHAR"  javaType="String" />
        <parameter property="numDetOperacion"        jdbcType="VARCHAR"  javaType="String" />
        <parameter property="numAuxOperacion"        jdbcType="VARCHAR"  javaType="String" />
        <parameter property="glosaMotivo"            jdbcType="VARCHAR"  javaType="String" />
    </parameterMap>
    <procedure id="ingresarDetalleRegularizacion" parameterMap="setIngresarDetalleRegularizacion" resultClass="int">
            { CALL sp_ing_det_reg(?,?,?,?,?,?,?,?,?,?,?,?) }
    </procedure> 
    
    <parameterMap id="setIngresarTotalesRegularizacion" class="java.util.HashMap">
        <parameter property="numeroRegularizacion"    jdbcType="INT"      javaType="int" />
    </parameterMap>
    <procedure id="ingresarTotalesRegularizacion" parameterMap="setIngresarTotalesRegularizacion" resultClass="int">
            { CALL sp_ing_top_reg(?) }
    </procedure>
    
    <parameterMap id="setIngresarAccionRegularizacion" class="java.util.HashMap">
        <parameter property="numeroRegularizacion"  jdbcType="INT"      javaType="int" />
        <parameter property="fechaEvento"           jdbcType="DATETIME" javaType="String" />
        <parameter property="codigoColaborador"       jdbcType="VARCHAR"  javaType="String" />
        <parameter property="codigoAccion"          jdbcType="VARCHAR"  javaType="String" />
        <parameter property="glosaAccion"              jdbcType="VARCHAR"  javaType="String" />
    </parameterMap>
    <procedure id="ingresarAccionRegularizacion" parameterMap="setIngresarAccionRegularizacion" resultClass="int">
            { CALL sp_ing_acc_reg(?,?,?,?,?) }
    </procedure>   
    
    <parameterMap id="setConsultarEncabezadoRegularizaciones" class="java.util.HashMap">
        <parameter property="numeroRegularizacion"  jdbcType="INT"      javaType="int" />
        <parameter property="estadoRegularizacion"  jdbcType="VARCHAR"  javaType="String" />
        <parameter property="fechaCreacionInicio"   jdbcType="DATETIME" javaType="String" />
        <parameter property="fechaCreacionFin"       jdbcType="DATETIME" javaType="String" />
        <parameter property="codTipoRegularizacion" jdbcType="VARCHAR"  javaType="String" />
    </parameterMap>
    <resultMap id="getConsultarEncabezadoRegularizaciones" class="java.util.HashMap">
        <result property="numeroRegularizacion"             column="reg_num"            jdbcType="INT"          javaType="int"/>
        <result property="fechaCreacion"                    column="reg_fec_cre"        jdbcType="DATETIME"     javaType="java.util.Date"/>
        <result property="fechaPago"                        column="reg_fec_pag"        jdbcType="DATETIME"     javaType="java.util.Date"/>
        <result property="fechaTransaccion"                 column="reg_fec_trx"        jdbcType="DATETIME"     javaType="java.util.Date"/>
        <result property="codigoColaborador"                column="reg_usr_ing"        jdbcType="CHAR"         javaType="String"/>
        <result property="estadoRegularizacion"             column="reg_cod_est"        jdbcType="CHAR"         javaType="String"/>
        <result property="codRechazo"                       column="reg_cod_rcz"        jdbcType="CHAR"         javaType="String"/>        
        <result property="codigoTipoRegularizacion"         column="tip_cod_reg"        jdbcType="CHAR"         javaType="String"/>
        <result property="glosaTipoRegularizacion"          column="tip_gls_reg"        jdbcType="CHAR"         javaType="String"/>
        <result property="codigoProductoTipoReg"            column="tip_cod_prod"       jdbcType="CHAR"         javaType="String"/>
        <result property="nombreArchivo"                    column="reg_nom_arc"        jdbcType="CHAR"         javaType="String"/>
        <result property="glosaMotivo"                      column="reg_gls_mot"        jdbcType="CHAR"         javaType="String"/>        
        <result property="cantidadRegularizaciones"         column="top_cnt_pag"        jdbcType="INT"          javaType="int"/>
        <result property="cantidadRegularizacionesAceptadas" column="top_cnt_pag_ace"    jdbcType="INT"          javaType="int"/>
        <result property="cantidadRegularizacionesRechazadas" column="top_cnt_pag_rec"    jdbcType="INT"          javaType="int"/>
        <result property="montoTotalReg"                    column="top_mto_pag"        jdbcType="DECIMAL"      javaType="java.lang.Double"/>
        <result property="montoTotalAceptado"               column="top_mto_pag_ace"    jdbcType="DECIMAL"      javaType="java.lang.Double"/>
        <result property="montoTotalRechazado"              column="top_mto_pag_rec"    jdbcType="DECIMAL"      javaType="java.lang.Double"/>
        <result property="cuentaContrapartida"              column="tip_cta_ctp"        jdbcType="CHAR"         javaType="String"/>
    </resultMap>
    <procedure id="consultarEncabezadoRegularizaciones" parameterMap="setConsultarEncabezadoRegularizaciones" resultMap="getConsultarEncabezadoRegularizaciones">
            { CALL sp_cons_enc_reg(?,?,?,?,?) }
    </procedure>     
     
     
     
     <parameterMap id="setModificarEncabezadoRegularizacion" class="java.util.HashMap">
        <parameter property="numeroRegularizacion"        jdbcType="INT"      javaType="int" />
        <parameter property="codigoEstado"                jdbcType="VARCHAR"  javaType="String" />
        <parameter property="codigoRechazo"               jdbcType="VARCHAR"  javaType="String" />
        <parameter property="fechaPago"                   jdbcType="DATETIME" javaType="String"/>
    </parameterMap>
    <procedure id="modificarEncabezadoRegularizacion" parameterMap="setModificarEncabezadoRegularizacion" resultClass="int">
            { CALL sp_act_enc_reg(?,?,?,?) }
    </procedure> 

    <parameterMap id="setEliminarRegularizacion" class="java.util.HashMap">
        <parameter property="numeroRegularizacion"        jdbcType="INT"      javaType="int" />
    </parameterMap>
    <procedure id="eliminarRegularizacion" parameterMap="setEliminarRegularizacion" resultClass="int">
         { CALL sp_eli_reg(?) }
    </procedure> 

<parameterMap id="setConsultarDetalleRegularizacion" class="java.util.HashMap">
        <parameter property="numeroRegularizacion"  jdbcType="INT"      javaType="int" />
    </parameterMap>
    <resultMap id="getConsultarDetalleRegularizacion" class="java.util.HashMap">
        <result property="numeroRegularizacion"  column="numeroRegularizacion"      jdbcType="INT"          javaType="int"/> 
        <result property="codigoDetalle"         column="codigoDetalle"             jdbcType="INT"          javaType="int"/> 
        <result property="codigoEstado"          column="codigoEstado"              jdbcType="CHAR"         javaType="String"/> 
        <result property="codigoRechazo"         column="codigoRechazo"             jdbcType="CHAR"         javaType="String"/> 
        <result property="montoDetalle"          column="montoDetalle"              jdbcType="DECIMAL"      javaType="java.lang.Double"/> 
        <result property="cuentaDetalle"         column="cuentaDetalle"             jdbcType="CHAR"         javaType="String"/> 
        <result property="rutCliente"            column="rutCliente"                jdbcType="INT"          javaType="int"/> 
        <result property="dvCliente"             column="dvCliente"                 jdbcType="CHAR"         javaType="String"/> 
        <result property="nombreCliente"         column="nombreCliente"             jdbcType="CHAR"         javaType="String"/> 
        <result property="idOperacion"           column="idOperacion"               jdbcType="CHAR"         javaType="String"/> 
        <result property="idOperacionDet"        column="idOperacionDet"            jdbcType="CHAR"         javaType="String"/> 
        <result property="idOperacionAux"        column="idOperacionAux"            jdbcType="CHAR"         javaType="String"/> 
        <result property="glosaMotivo"           column="glosaMotivo"               jdbcType="CHAR"         javaType="String"/>
    </resultMap>
    <procedure id="consultarDetalleRegularizacion" parameterMap="setConsultarDetalleRegularizacion" resultMap="getConsultarDetalleRegularizacion">
            { CALL sp_cons_det_reg(?) }
    </procedure>

    <parameterMap id="setConsultarEventosHistorialRegularizacion" class="java.util.HashMap">
        <parameter property="numeroRegularizacion"  jdbcType="INT"      javaType="int" />
    </parameterMap>
    <resultMap id="getConsultarEventosHistorialRegularizacion" class="java.util.HashMap">
        <result property="numeroRegularizacion"      column="numeroRegularizacion"   jdbcType="INT"        javaType="int"/> 
        <result property="fechaAccion"               column="fechaAccion"            jdbcType="DATETIME"   javaType="java.util.Date"/>
        <result property="codigoUsuario"             column="codigoUsuario"          jdbcType="CHAR"       javaType="String"/>
        <result property="codigoAccion"              column="codigoAccion"           jdbcType="CHAR"       javaType="String"/>
        <result property="glosaAccion"               column="glosaAccion"            jdbcType="CHAR"       javaType="String"/>
    </resultMap>
    <procedure id="consultarEventosHistorialRegularizacion" parameterMap="setConsultarEventosHistorialRegularizacion" resultMap="getConsultarEventosHistorialRegularizacion">
            { CALL sp_cons_hist_reg(?) }
    </procedure>
</sqlMap>