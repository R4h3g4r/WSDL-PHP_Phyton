<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap

    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"

    "http://ibatis.apache.org/dtd/sql-map-2.dtd">



<sqlMap namespace="prospectos.procedimientosAlmacenados">

    <parameterMap id="grabaEncabezadoCotizacionesMap" class="java.util.HashMap">

        <parameter property="rutCliente"            jdbcType="INTEGER"  javaType="Integer" />

        <parameter property="codigoViaje"           jdbcType="INTEGER"  javaType="Integer" />

        <parameter property="fechaConsulta"         jdbcType="DATE"     javaType="java.util.Date" />

        <parameter property="estadoRenta"           jdbcType="CHAR"     javaType="String" />

    </parameterMap>

    <procedure id="grabaEncabezadoCotizacion" parameterMap="grabaEncabezadoCotizacionesMap" resultClass="int">

        { CALL sp_ing_enc_cot(?, ?, ?, ?) }

    </procedure>



    <parameterMap id="actualizaEstadoEncabezadoCotizacionMap" class="java.util.HashMap">

        <parameter property="identificador"     jdbcType="INTEGER"     javaType="Integer" />

        <parameter property="estado"            jdbcType="CHAR"        javaType="String" />

    </parameterMap>

    <procedure id="actualizaEstadoEncabezadoCotizacion" parameterMap="actualizaEstadoEncabezadoCotizacionMap" resultClass="int">

        { CALL sp_act_est_enc_cot(?, ?) }

    </procedure>

    

    <parameterMap id="actualizaHistoricoEncabezadoCotizacionMap" class="java.util.HashMap">

        <parameter property="rutProspecto"                  jdbcType="INTEGER"     javaType="Integer" />

        <parameter property="codigoViaje"                   jdbcType="INTEGER"     javaType="Integer" />

        <parameter property="actualizaEnDGC"                jdbcType="INTEGER"     javaType="Integer" />

        <parameter property="actualizaEnSGC"                jdbcType="INTEGER"     javaType="Integer" />

        <parameter property="fechaActualizacion"            jdbcType="DATE"        javaType="java.util.Date" />

        <parameter property="fechaRentaVariable"            jdbcType="DATE"        javaType="java.util.Date" />

        <parameter property="firma"                         jdbcType="VARCHAR"     javaType="String" />

        <parameter property="folio"                         jdbcType="VARCHAR"     javaType="String" />

        <parameter property="fechaInformacionLegal"         jdbcType="DATE"        javaType="java.util.Date" />

	<parameter property="rentaFijaPropPrevired"         jdbcType="DECIMAL"     javaType="double" />

	<parameter property="rentaVarPropPrevired"          jdbcType="DECIMAL"     javaType="double" />

	<parameter property="rentaFijaCalculada"            jdbcType="FLOAT"       javaType="Double" />

	<parameter property="rentaVariable"                 jdbcType="FLOAT"       javaType="Double" />

		

    </parameterMap>

    <procedure id="actualizaEncabezadoCotizacion" parameterMap="actualizaHistoricoEncabezadoCotizacionMap" resultClass="int">

        { CALL sp_act_encabezado_coti(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) }

    </procedure>

    

    <parameterMap id="grabaDetalleCotizacionesMap" class="java.util.HashMap">    

        <parameter property="idEncabezado"              jdbcType="INTEGER"  javaType="Integer" />

        <parameter property="periodo"                   jdbcType="DATE"     javaType="Date" />

        <parameter property="remuneracionImponible"     jdbcType="DECIMAL"  javaType="double" />

        <parameter property="montoCotizado"             jdbcType="DECIMAL"  javaType="double" />

        <parameter property="fechaPago"                 jdbcType="DATE"     javaType="Date" />

        <parameter property="tipoMovimiento"            jdbcType="CHAR"     javaType="String" />

        <parameter property="rutEmpleador"              jdbcType="INTEGER"  javaType="Integer" />

        <parameter property="digitoVerificador"         jdbcType="CHAR"     javaType="String" />

        <parameter property="afp"                       jdbcType="CHAR"     javaType="String" />

    </parameterMap>

    <procedure id="grabaDetalleCotizacion" parameterMap="grabaDetalleCotizacionesMap" resultClass="int">

        { CALL sp_ing_det_cot(?, ?, ?, ?, ?, ?, ?, ?, ?) }

    </procedure>



    <parameterMap id="setIngresoRegistroRTA" class="java.util.HashMap">

        <parameter property="rut"                       jdbcType="INTEGER"  javaType="Integer" />

        <parameter property="rentaFijaCalculada"        jdbcType="FLOAT"    javaType="Double" />

        <parameter property="rentaVariableCalculada"    jdbcType="FLOAT"    javaType="Double" />

        <parameter property="rentaLiquidaCalculada"     jdbcType="FLOAT"    javaType="Double" />

        <parameter property="origen"                    jdbcType="CHAR"     javaType="String" />

        <parameter property="usuarioAct"                jdbcType="CHAR"     javaType="String" />

    </parameterMap>

    <procedure id="ingresoRegistroRTA" parameterMap="setIngresoRegistroRTA" resultClass="int">

        { CALL sp_ing_rta(?, ?, ?, ?, ?, ?) }

    </procedure>



    <parameterMap id="setIngresarTicketProspecto" class="java.util.HashMap">

        <parameter property="ticketId" jdbcType="NUMERIC" javaType="integer" />

        <parameter property="codViaje" jdbcType="NUMERIC" javaType="integer" />

        <parameter property="vigencia" jdbcType="VARCHAR" javaType="String" />

        <parameter property="tipoAutenticacion" jdbcType="VARCHAR" javaType="String" />    	

    </parameterMap>



    <procedure id="ingresarTicketProspecto" parameterMap="setIngresarTicketProspecto" resultClass="int">

        { CALL sp_ing_ticket_prospecto(?,?,?,?) }

    </procedure>

    <parameterMap id="setActualizarEtapaViaje" class="java.util.HashMap">

        <parameter property="rut" jdbcType="NUMERIC" javaType="long" />

        <parameter property="codEtapaActual" jdbcType="NUMERIC" javaType="integer" />

    </parameterMap>



    <procedure id="actualizarEtapaViaje" parameterMap="setActualizarEtapaViaje" resultClass="int">

        { CALL sp_upd_etp_vje_prospecto(?,?) }

    </procedure>



    <parameterMap id="setActualizarEstadoProspecto" class="java.util.HashMap">

        <parameter property="rut" jdbcType="NUMERIC" javaType="long" />

        <parameter property="estado" jdbcType="char" javaType="String" />

    </parameterMap>

    <procedure id="actualizarEstadoProspecto" parameterMap="setActualizarEstadoProspecto" resultClass="int">

        { CALL sp_upd_est_prospecto(?,?) }

    </procedure>



    <parameterMap id="setActualizarIntentosEnvioDatos" class="java.util.HashMap">

        <parameter property="rut" jdbcType="NUMERIC" javaType="long" />

    </parameterMap>

    <procedure id="actualizarIntentosEnvioDatos" parameterMap="setActualizarIntentosEnvioDatos" resultClass="int">

        { CALL sp_upd_intentos_reg_trf(?) }

    </procedure>



    <parameterMap id="setActualizarIntentosVerificacion" class="java.util.HashMap">

        <parameter property="rut" jdbcType="NUMERIC" javaType="long" />

    </parameterMap>

    <procedure id="actualizarIntentosVerificacion" parameterMap="setActualizarIntentosVerificacion" resultClass="int">

        { CALL sp_upd_intentos_vrf_trf(?) }

    </procedure>



    <parameterMap id="setIngresarDatosTransferencia" class="java.util.HashMap">

        <parameter property="vje_cod" jdbcType="NUMERIC" javaType="integer" />

        <parameter property="cta_ori" jdbcType="VARCHAR" javaType="String" />

        <parameter property="cta_dest" jdbcType="VARCHAR" javaType="String" />

        <parameter property="bco_dest" jdbcType="VARCHAR" javaType="String" />

        <parameter property="monto" jdbcType="NUMERIC" javaType="double" />

        <parameter property="email" jdbcType="VARCHAR" javaType="String" />

    </parameterMap>

    <procedure id="ingresarDatosTransferencia" parameterMap="setIngresarDatosTransferencia" resultClass="int">

        { CALL sp_ins_act_aut_prp(?,?,?,?,?,?) }

    </procedure>



    <!-- guardar datos autenticacion -->

    <parameterMap id="setGuardarDatosAutenticacion" class="java.util.HashMap">

        <parameter property="vje_cod" jdbcType="NUMERIC" javaType="integer" />

        <parameter property="cta_ori" jdbcType="VARCHAR" javaType="String" />

        <parameter property="cta_dest" jdbcType="VARCHAR" javaType="String" />

        <parameter property="bco_dest" jdbcType="VARCHAR" javaType="String" />

        <parameter property="monto" jdbcType="NUMERIC" javaType="double" />

        <parameter property="email" jdbcType="VARCHAR" javaType="String" />

    </parameterMap>

    <procedure id="guardarDatosAutenticacion" parameterMap="setGuardarDatosAutenticacion" resultClass="int">

        { CALL sp_ins_act_aut_prp(?,?,?,?,?,?) }

    </procedure>

    <!-- fin guardar datos autenticacion -->



    <!-- validar viaje prospecto -->

    <parameterMap id="setValidarViajeProspecto" class="java.util.HashMap">

        <parameter property="rut" jdbcType="NUMERIC" javaType="long" />

        <parameter property="vje_cod" jdbcType="NUMERIC" javaType="integer" />

        <parameter property="serv" jdbcType="VARCHAR" javaType="String" />

    </parameterMap>



    <resultMap id="getValidarViajeProspecto" class="java.util.HashMap">

        <result property="validacionRespuesta" column="respuesta" javaType="integer" />

    </resultMap>



    <procedure id="validarViajeProspecto" parameterMap="setValidarViajeProspecto" resultMap="getValidarViajeProspecto">

        { CALL sp_val_vje_prospecto(?,?,?) }

    </procedure>

    <!-- fin validar viaje prospecto -->



    <!-- consultar cuenta origen -->

    <resultMap id="getConsultarCuentaOrigen" class="java.util.HashMap">

        <result property="numeroCuenta" column="numero_cuenta" javaType="String" />

    </resultMap>



    <procedure id="consultarCuentaOrigen" resultMap="getConsultarCuentaOrigen">

        { CALL sp_obt_cta_ori_trf() }

    </procedure>

    <!-- fin consultar cuenta origen -->



    <!-- consulta intentos trf -->

    <parameterMap id="setConsultarIntentosEnvioDatos" class="java.util.HashMap">

        <parameter property="vjeCodigo" jdbcType="NUMERIC" javaType="int" />

    </parameterMap>



    <resultMap id="getConsultarIntentosEnvioDatos" class="java.util.HashMap">

        <result property="numeroIntentos" column="resultado" javaType="integer" />

    </resultMap>



    <procedure id="consultarIntentosEnvioDatos" parameterMap="setConsultarIntentosEnvioDatos" resultMap="getConsultarIntentosEnvioDatos">

        { CALL sp_cns_int_trf_vje(?) }

    </procedure>

    <!-- fin consulta intentos trf -->



    <!-- consulta intentos aut -->

    <parameterMap id="setConsultarIntentosAutenticacion" class="java.util.HashMap">

        <parameter property="vjeCodigo" jdbcType="NUMERIC" javaType="int" />

    </parameterMap>



    <resultMap id="getConsultarIntentosAutenticacion" class="java.util.HashMap">

        <result property="numeroIntentos" column="resultado" javaType="integer" />

    </resultMap>



    <procedure id="consultarIntentosAutenticacion" parameterMap="setConsultarIntentosAutenticacion" resultMap="getConsultarIntentosAutenticacion">

        { CALL sp_cns_int_aut_vje(?) }

    </procedure>

    <!-- fin consulta intentos aut -->



    <parameterMap id="setObtenerBancoProspectoResult" class="java.util.HashMap">

        <parameter property="rut" jdbcType="NUMERIC" javaType="long" />

    </parameterMap>



    <resultMap id="getObtenerBancoProspectoResult" class="java.util.HashMap">

        <result property="bcoDestino" column="aut_trf_bco_destino" javaType="String" />

    </resultMap>



    <procedure id="obtenerBancoProspecto" parameterMap="setObtenerBancoProspectoResult" resultMap="getObtenerBancoProspectoResult">

        {CALL sp_cns_banco(?)}

    </procedure>



    <!-- obtener datos para validar verificacion prospecto -->

    <parameterMap id="setObtenerDatosTransferencia" class="java.util.HashMap">

        <parameter property="rut" jdbcType="NUMERIC" javaType="long" />

        <parameter property="ctaOrigen" jdbcType="VARCHAR" javaType="String" />

        <parameter property="monto" jdbcType="NUMERIC" javaType="double" />

        <parameter property="dobleVerificacion" jdbcType="NUMERIC" javaType="integer" />

    </parameterMap>



    <resultMap id="getObtenerDatosTransferencia" class="java.util.HashMap">

        <result property="resultado" column="resultado" javaType="integer" />

        <result property="prp_email" column="prp_email" javaType="String" />

    </resultMap>



    <procedure id="obtenerDatosTransferencia" parameterMap="setObtenerDatosTransferencia" resultMap="getObtenerDatosTransferencia">

        { CALL sp_cns_datos_trf(?,?,?,?) }

    </procedure>

    <!-- obtener datos para validar verificacion prospecto -->



    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.ViajeTO" id="validaEstadoProspectoResult">

        <result property="etapaActual.codigo"       column="etp_codigo"     nullValue="0"/>

        <result property="etapaActual.nombre"       column="etp_nombre" />

        <result property="etapaActual.descripcion"  column="etp_descripcion" />

        <result property="estado"                   column="vje_estado" />

        <result property="codigo"                   column="vje_codigo" nullValue="0"/>

    </resultMap>



    <procedure id="validaEstadoProspecto" parameterClass="java.util.HashMap" resultMap="validaEstadoProspectoResult">

        {CALL sp_val_est_prospecto(#rutProspecto#)}

    </procedure>



    <procedure id="registrarProspecto" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_ins_prospecto( 

                    #rutProspecto#,

                    #dvProspecto#,

                    #apellidoPaterno#,

                    #apellidoMaterno#,

                    #nombres#,

                    #email#,

                    #codigoArea#,

                    #telefono#,

                    #montoRenta#,

                    #fechaNacimiento#,

                    #edad#,

                    #sexo#,

                    #estadoCivil#,

                    #codigoRegimen#,

                    #codigoBanca#,

                    #codigoSegmento#,

                    #codigoSituacionLaboral#,

                    #codigoActividad#,

                    #codigoNivelEducacional#,

                    #direccion#,

                    #ciudad#,

                    #comuna#,

                    #region#,

                    #autPrevired#,

                    #fechaAutPrevired#,

                    #usuarioActualiza#,

                    #estadoViaje#,

                    #motivoEstado#,

                    #idCanalIni#,

                    #idInteraccion#,

                    #planSeleccionado#,

                    #ejecutivoBciNet#,

                    #oficinaEjecutivoBciNet#,

                    #indicadorNacionalidad#,

                    #rutEmpresaConv#,

                    #codigoConvenio#,

                    #planConvenio#,

                    #flagTieneConvenio#,

                    #universidad#,

                    #carrera#,

                    #anoCurse#,

                    #esTablet#,

                    #serieCedulaIdentidad#,

                    #codigoSucursal#)}

    </procedure>

    

        <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.ProspectoTO" id="obtenerProspectoPlanesResult">

        <result property="rut"                              column="prp_rut"/>

        <result property="digitoVerificador"                column="prp_dv"/>

        <result property="apellidoPaterno"                  column="prp_ape_paterno"/>

        <result property="apellidoMaterno"                  column="prp_ape_materno"/>

        <result property="nombres"                          column="prp_nom"/>

        <result property="email"                            column="prp_email"/>

        <result property="codigoArea"                       column="prp_cod_area"/>

        <result property="telefono"                         column="prp_telefono"/>

        <result property="montoRenta"                       column="prp_mto_renta_ing"/>

        <result property="fechaNacimiento"                  column="prp_fec_nac"/>

        <result property="edad"                             column="prp_edad_ing" nullValue="0"/>

        <result property="sexo"                             column="prp_sexo"/>

        <result property="estadoCivil"                      column="prp_est_civil"/>

        <result property="codigoRegimen"                    column="prp_cod_regimen"/>

        <result property="codigoBanca"                      column="prp_cod_banca"/>

        <result property="codigoSegmento"                   column="prp_cod_segmento"/>

        <result property="situacionLaboral"                 column="prp_cod_sit_lab"/>

	    <result property="contratoLaboral"                  column="prp_sit_laboral"/>		

        <result property="codigoActividad"                  column="prp_cod_act"/>

        <result property="codigoNivelEducacional"           column="prp_cod_niv_edu"/>

        <result property="direccion"                        column="prp_direccion"/>

        <result property="ciudad"                           column="prp_ciudad"/>

        <result property="comuna"                           column="prp_comuna"/>

        <result property="region"                           column="prp_region" nullValue="0"/>

        <result property="direccionComercial"               column="prp_direccion_comercial"/>

        <result property="comunaComercial"                  column="prp_comuna_comercial"/>

        <result property="regionComercial"                  column="prp_region_comercial" nullValue="0" />

        <result property="autPrevired"                      column="prp_aut_previred"/>

        <result property="fechaAutPrevired"                 column="prp_fec_aut_previred"/>

        <result property="fechaHoraIngreso"                 column="prp_fec_hms_ingreso"/>

        <result property="fechaHoraActualizacion"           column="prp_fec_hms_actualiza"/>

        <result property="usuarioActualiza"                 column="prp_usuario_actualiza"/>

        <result property="paisNacimiento"                   column="prp_pais" />

        <result property="paisDobleNacionalidad"            column="prp_pais_doble_nac" />

        <result property="tributaEnUsa"                     column="prp_tributa_usa" />

        <result property="profesion"                        column="prp_profesion" />

        <result property="indicadorNacionalidad"            column="prp_indicador_nacionalidad" />

        <result property="tieneConvenio"                    column="prp_tiene_convenio" />

        <result property="rutEmpresa"                       column="cnv_emp_rut" nullValue="0" />

        <result property="codigoConvenio"                   column="cnv_emp_cod_convenio" />

        <result property="tipoConvenio"                     column="cnv_emp_plan_convenio" />

        <result property="codUniversidad"                   column="prp_cod_universidad" />

        <result property="codCarrera"                       column="prp_carrera" />

        <result property="codAnioCurso"                     column="prp_anio_curse" />

        <result property="viaje.codigo"                     column="vje_codigo"/>

        <result property="viaje.tipoViaje.codigo"           column="tpo_vje_codigo"/>

        <result property="viaje.etapaActual.codigo"         column="etp_codigo"/>

        <result property="viaje.estado"                     column="vje_estado"/>

        <result property="viaje.motivoEstado"               column="vje_motivo_estado"/>

        <result property="viaje.idCanalInicio"              column="vje_id_canal_ini"/>

        <result property="viaje.idCanalFin"                 column="vje_id_canal_fin"/>

        <result property="viaje.codigoInterno"              column="vje_cod_interno" nullValue="0"/>

        <result property="viaje.idInteraccionEpiphany"      column="vje_id_interaccion_epy"/>

        <result property="viaje.codigoSUC"                  column="vje_cod_suc" nullValue="0"/>

        <result property="viaje.codigoSucursal"             column="vje_cod_sucursal"/>

        <result property="viaje.ejecutivoAsignadoVenta"     column="vje_eje_asignado_venta"/>

        <result property="viaje.ejecutivoAsignadoSGC"       column="vje_eje_asignado_sgc"/>

        <result property="viaje.fechaEstimadaCierre"        column="vje_fec_est_cierre"/>

        <result property="viaje.fechaHoraIngreso"           column="vje_fec_hms_ingreso"/>

        <result property="viaje.fechaHoraActualizacion"     column="vje_fec_hms_actualiza"/>

        <result property="viaje.planSeleccionado"           column="vje_plan_seleccionado"/>

        <result property="viaje.planCalculado"              column="vje_plan_calculado"/>

        <result property="viaje.usuarioActualiza"           column="vje_usuario_actualiza"/>

        <result property="viaje.ejecutivoBciNet"            column="vje_cod_ejecutivo_bcinet"/>

        <result property="viaje.oficinaEjecutivoBciNet"     column="vje_cod_ofi_eje_bcinet"/>    

        <result property="conyuge.rut"                      column="cyg_rut"/>

        <result property="conyuge.nombres"                  column="cyg_nom"/>

        <result property="conyuge.apellidoPaterno"          column="cyg_ape_paterno"/>

        <result property="conyuge.apellidoMaterno"          column="cyg_ape_materno"/>

        <result property="viaje.cicCliente"                 column="vje_cic_cli"/>

        <result property="viaje.codigoJof"                  column="vje_jof_cod"/>

        <result property="viaje.nombreTalonario"            column="vje_nom_prosp_talonario"/>              

        <result property="viaje.entregaDomicilio"           column="vje_entrega_domicilio"/>

        <result property="viaje.entregaOtraDireccion"       column="vje_entrega_otra_direc"/>

        <result property="viaje.nuevaDireccion"             column="vje_entrega_nueva_direc"/>

        <result property="viaje.tipoIngreso"                column="vje_tipo_ingreso" nullValue="0"/>

        <result property="viaje.tablet"                     column="vje_es_tablet"/>

    </resultMap>

    

    <procedure id="obtenerProspectoPlanes" parameterClass="java.util.HashMap" resultMap="obtenerProspectoPlanesResult">

        {CALL sp_cns_prospecto_planes(#rutProspecto#,#codigoViaje#)}

    </procedure>



    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.ProspectoTO" id="obtenerProspectoResult">

        <result property="rut"                              column="prp_rut"/>

        <result property="digitoVerificador"                column="prp_dv"/>

        <result property="apellidoPaterno"                  column="prp_ape_paterno"/>

        <result property="apellidoMaterno"                  column="prp_ape_materno"/>

        <result property="nombres"                          column="prp_nom"/>

        <result property="email"                            column="prp_email"/>

        <result property="codigoArea"                       column="prp_cod_area"/>

        <result property="telefono"                         column="prp_telefono"/>

        <result property="montoRenta"                       column="prp_mto_renta_ing"/>

        <result property="fechaNacimiento"                  column="prp_fec_nac"/>

        <result property="edad"                             column="prp_edad_ing" nullValue="0"/>

        <result property="sexo"                             column="prp_sexo"/>

        <result property="estadoCivil"                      column="prp_est_civil"/>

        <result property="codigoRegimen"                    column="prp_cod_regimen"/>

        <result property="codigoBanca"                      column="prp_cod_banca"/>

        <result property="codigoSegmento"                   column="prp_cod_segmento"/>

        <result property="situacionLaboral"                 column="prp_cod_sit_lab"/>

        <result property="codigoActividad"                  column="prp_cod_act"/>

        <result property="codigoNivelEducacional"           column="prp_cod_niv_edu"/>

        <result property="direccion"                        column="prp_direccion"/>

        <result property="ciudad"                           column="prp_ciudad"/>

        <result property="comuna"                           column="prp_comuna"/>

        <result property="region"                           column="prp_region" nullValue="0"/>

        <result property="direccionComercial"               column="prp_direccion_comercial"/>

        <result property="comunaComercial"                  column="prp_comuna_comercial"/>

        <result property="regionComercial"                  column="prp_region_comercial" nullValue="0" />

        <result property="autPrevired"                      column="prp_aut_previred"/>

        <result property="fechaAutPrevired"                 column="prp_fec_aut_previred"/>

        <result property="fechaHoraIngreso"                 column="prp_fec_hms_ingreso"/>

        <result property="fechaHoraActualizacion"           column="prp_fec_hms_actualiza"/>

        <result property="usuarioActualiza"                 column="prp_usuario_actualiza"/>

        <result property="paisNacimiento"                   column="prp_pais" />

        <result property="paisDobleNacionalidad"            column="prp_pais_doble_nac" />

        <result property="tributaEnUsa"                     column="prp_tributa_usa" />

        <result property="profesion"                        column="prp_profesion" />

        <result property="indicadorNacionalidad"            column="prp_indicador_nacionalidad" />

        <result property="viaje.codigo"                     column="vje_codigo"/>

        <result property="viaje.tipoViaje.codigo"           column="tpo_vje_codigo"/>

        <result property="viaje.etapaActual.codigo"         column="etp_codigo"/>

        <result property="viaje.estado"                     column="vje_estado"/>

        <result property="viaje.motivoEstado"               column="vje_motivo_estado"/>

        <result property="viaje.idCanalInicio"              column="vje_id_canal_ini"/>

        <result property="viaje.idCanalFin"                 column="vje_id_canal_fin"/>

        <result property="viaje.codigoInterno"              column="vje_cod_interno" nullValue="0"/>

        <result property="viaje.idInteraccionEpiphany"      column="vje_id_interaccion_epy"/>

        <result property="viaje.codigoSUC"                  column="vje_cod_suc" nullValue="0"/>

        <result property="viaje.codigoSucursal"             column="vje_cod_sucursal"/>

        <result property="viaje.ejecutivoAsignadoVenta"     column="vje_eje_asignado_venta"/>

        <result property="viaje.ejecutivoAsignadoSGC"       column="vje_eje_asignado_sgc"/>

        <result property="viaje.fechaEstimadaCierre"        column="vje_fec_est_cierre"/>

        <result property="viaje.fechaHoraIngreso"           column="vje_fec_hms_ingreso"/>

        <result property="viaje.fechaHoraActualizacion"     column="vje_fec_hms_actualiza"/>

        <result property="viaje.planSeleccionado"           column="vje_plan_seleccionado"/>

        <result property="viaje.planCalculado"              column="vje_plan_calculado"/>

        <result property="viaje.usuarioActualiza"           column="vje_usuario_actualiza"/>

        <result property="viaje.ejecutivoBciNet"            column="vje_cod_ejecutivo_bcinet"/>

        <result property="viaje.oficinaEjecutivoBciNet"     column="vje_cod_ofi_eje_bcinet"/>

        <result property="conyuge.rut"                      column="cyg_rut"/>

        <result property="conyuge.nombres"                  column="cyg_nom"/>

        <result property="conyuge.apellidoPaterno"          column="cyg_ape_paterno"/>

        <result property="conyuge.apellidoMaterno"          column="cyg_ape_materno"/>

        <result property="viaje.cicCliente"                 column="vje_cic_cli"/>

        <result property="viaje.codigoJof"                  column="vje_jof_cod"/>

        <result property="viaje.nombreTalonario"            column="vje_nom_prosp_talonario"/>

        <result property="viaje.entregaDomicilio"           column="vje_entrega_domicilio"/>

        <result property="viaje.entregaOtraDireccion"       column="vje_entrega_otra_direc"/>

        <result property="viaje.nuevaDireccion"             column="vje_entrega_nueva_direc"/>

        <result property="viaje.tipoIngreso"                column="vje_tipo_ingreso" nullValue="0"/>

    </resultMap>



    <procedure id="obtenerProspecto" parameterClass="java.util.HashMap" resultMap="obtenerProspectoResult">

        {CALL sp_cns_prospecto(#rutProspecto#,#codigoViaje#)}

    </procedure>



    <!-- verificar ticket viaje prospecto -->

    <parameterMap id="setVerificarTicketViajeProspecto" class="java.util.HashMap">

        <parameter property="rut"     jdbcType="NUMERIC" javaType="long" />

        <parameter property="vje_cod" jdbcType="NUMERIC" javaType="integer" />

    </parameterMap>



    <resultMap id="getVerificarTicketViajeProspecto" class="java.util.HashMap">

        <result property="validacionRespuesta" column="respuesta" javaType="integer" />

    </resultMap>



    <procedure id="verificarTicketViajeProspecto" parameterMap="setVerificarTicketViajeProspecto" resultMap="getVerificarTicketViajeProspecto">

        { CALL sp_cons_ticket_vje_prospecto(?,?) }

    </procedure>

    <!-- fin verificar ticket viaje prospecto -->



    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.TicketProspectoTO" id="validarTicketResult">

        <result property="rutProspecto"            column="prp_rut"/>

        <result property="nombres"                 column="prp_nom"/>

        <result property="apellidoPaterno"         column="prp_ape_paterno"/>

        <result property="apellidoMaterno"         column="prp_ape_materno"/>

        <result property="codigoViaje"             column="vje_codigo"/>

        <result property="etapaActual"             column="etp_codigo"  nullValue="0"/>

        <result property="codigoPlanSeleccionado"  column="vje_plan_seleccionado"/>

        <result property="idTicketAtencion"        column="tck_atn_codigo"  nullValue="0"/>

        <result property="estadoViaje"             column="vje_estado" />

        <result property="numeroSerieCedula"       column="prp_serie_cedula_id" />

        <result property="digitoVerificador"       column="prp_dv"/>

        <result property="rentaIngresada"          column="prp_mto_renta_ing"/>

    </resultMap>



    <procedure id="validarTicket" parameterClass="java.util.HashMap" resultMap="validarTicketResult">

        {CALL sp_cns_ticketprospecto(#rutProspecto#,#idTicketAtencion#)}

    </procedure>



    <resultMap id="resultadoObtenerSolicitudAbreviadaProspecto" class="java.util.HashMap">

        <result property="vje_sol_cda"    column="vje_sol_cda" jdbcType="BINARY"/>

    </resultMap>



    <parameterMap class="java.util.HashMap" id="parametrosObtenerSolicitudAbreviadaProspecto">

        <parameter property="codViaje"   jdbcType="INT"       javaType="Integer"/>

    </parameterMap>



    <procedure id="obtenerSolicitudAbreviadaProspecto" parameterMap="parametrosObtenerSolicitudAbreviadaProspecto" resultMap="resultadoObtenerSolicitudAbreviadaProspecto">

        SELECT vje_sol_cda from viaje WHERE vje_codigo = ?

    </procedure>



    <parameterMap class="java.util.HashMap" id="parametrosActualizarSolicitudAbreviadaProspecto">

        <parameter property="data"       jdbcType="BINARY"/>

        <parameter property="codViaje"   jdbcType="INT"       javaType="Integer"/>

    </parameterMap>



    <procedure id="actualizarSolicitudAbreviadaProspecto" parameterMap="parametrosActualizarSolicitudAbreviadaProspecto" parameterClass="java.util.HashMap">

        UPDATE viaje set vje_sol_cda = ? where vje_codigo=?

    </procedure>



    <procedure id="actualizarViajePorPlan" parameterClass="java.util.HashMap">

        {CALL sp_upd_viaje_por_plan(#codigoViaje#,#codPlan#,#tipoIngreso#)}

    </procedure>



    <resultMap id="resultadoValidarTicketAtencion" class="java.util.HashMap">

        <result property="ticket_codigo"   column="ticket_codigo" jdbcType="Integer"/>

        <result property="vje_codigo"      column="vje_codigo"    jdbcType="Integer"/>

    </resultMap>



    <procedure id="validarProspectoPorTicket" parameterClass="java.util.HashMap" resultMap="resultadoValidarTicketAtencion">

        { CALL sp_cns_val_prp_por_ticket(#codTicket#,#rutProspecto#) }

    </procedure>



    <procedure id="ingresarConyugeProspecto" parameterClass="java.util.HashMap">

        { CALL sp_ins_conyuge_prp(#rutProspecto#,#rutConyuge#,

                                  #dvConyuge#, #nombres#,

                                  #apeMaterno#,#apePaterno#,

                                  #usuarioActualiza#,#regimenConyugal#) }

    </procedure>



    <procedure id="actualizarProspectoCompPerfil" parameterClass="java.util.HashMap">

        {CALL sp_upd_prp_comp_perfil(#rut#,#estadoCivil#,#actividad#,#profesion#,#nivelEducacional#,#situacionLaboral#

                                     ,#regimenConyugal#,#direccion#,#comuna#,

                                     <isNull property="region">0</isNull><isNotNull property="region">#region#</isNotNull>,

                                     #direccionComercial#,#comunaComercial#,

                                     <isNull property="regionComercial">0</isNull><isNotNull property="regionComercial">#regionComercial#</isNotNull>,

                                     #codSegmento#,

                                     #pais#, #paisDobleNacionalidad#, #tributaEEUU# , #codigoBanca#, #codigoViaje#, 

                                     #cambioDireccion#, #glosaSituacionLaboral#)}

    </procedure>

    <parameterMap id="setObtenerRentaProspecto" class="java.util.HashMap">

        <parameter property="rut" jdbcType="NUMERIC" javaType="long" />

    </parameterMap>



    <resultMap id="getObtenerRentaProspecto" class="java.util.HashMap" >

        <result property="id"               column="rta_id"/>

        <result property="renta_fija"       column="rta_rfi_cal" nullValue="0"/>

        <result property="renta_liquida"    column="rta_cal_liq" nullValue="0"/>

        <result property="renta_variable"   column="rta_rvr_cal" nullValue="0"/>

        <result property="rut"              column="prp_rut"/>

        <result property="usuario"          column="rta_usr_act"/>

        <result property="renta_origen"     column="rta_ori"/>

        <result property="fecha_actualizacion" column="rta_fec_act" />

    </resultMap>



    <procedure id="obtenerRentaProspecto" parameterMap="setObtenerRentaProspecto" resultMap="getObtenerRentaProspecto">

        { CALL sp_consultar_renta_prospecto(?) }

    </procedure>



    <parameterMap id="setActualizarViajeClienteSolicitud" class="java.util.HashMap">

        <parameter property="codViaje" jdbcType="INTEGER"  javaType="Integer"  />

        <parameter property="idSolicitud" jdbcType="NUMERIC" javaType="long" />

    </parameterMap>



    <resultMap id="getActualizarViajeClienteSolicitud" class="java.util.HashMap">

        <result property="actualizacionRespuesta" column="resultado" javaType="integer" />

    </resultMap>



    <procedure id="actualizarViajeClienteSolicitud" parameterMap="setActualizarViajeClienteSolicitud" resultMap="getActualizarViajeClienteSolicitud">

        { CALL sp_upd_viaje_solicitud(?,?) }

    </procedure>

    <procedure id="actualizarEtapaPorViaje" parameterClass="java.util.HashMap">

        {CALL sp_upd_etapa_viaje(#codViaje#,#etapa#)}

    </procedure>



    <!-- validar cuenta destino sean diferentas a las ctas de origen del banco en BD -->

    <parameterMap id="setValidarCuentaDestino" class="java.util.HashMap">

        <parameter property="cuentaDestino" jdbcType="VARCHAR" javaType="String" />

    </parameterMap>



    <resultMap id="getValidarCuentaDestino" class="java.util.HashMap">

        <result property="validacionRespuesta" column="res_cant_cta" javaType="integer" />

    </resultMap>



     <procedure id="validarCuentaDestino" parameterMap="setValidarCuentaDestino" resultMap="getValidarCuentaDestino">

        { CALL sp_cns_val_cta_destino(?) }

    </procedure>

    <!-- fin validar cuenta destino sean diferentas a las cuentas de origen del banco en BD -->



    <parameterMap id="registrarOfertaMap" class="java.util.HashMap" >

        <parameter property="vje_cod"       jdbcType="INT" javaType="Integer"/>

        <parameter property="codigo"        jdbcType="VARCHAR"  javaType="String"/>

        <parameter property="nombre"        jdbcType="VARCHAR"  javaType="String"/>

        <parameter property="ind_borrado"   jdbcType="INT"      javaType="Integer"/>

    </parameterMap>

    <procedure id="registrarOferta" parameterMap="registrarOfertaMap" resultClass="int">

        { CALL sp_ing_oferta_prospecto(?,?,?,?) }

    </procedure>

    <parameterMap class="java.util.HashMap" id="parametrosActualizarNombreTalonario">

        <parameter property="nombreTalonario" jdbcType="VARCHAR" javaType="String"/>

        <parameter property="vje_cod"         jdbcType="INT"     javaType="Integer"/>

        <parameter property="rutProspecto"    jdbcType="VARCHAR" javaType="long"/>

    </parameterMap>

    <procedure id="actualizarNombreTalonario" parameterMap="parametrosActualizarNombreTalonario">

        UPDATE viaje set vje_nom_prosp_talonario = ? where vje_codigo=? AND prp_rut = ?

    </procedure>



    <!-- Inicio: Registrar cupos tarjeta -->

    <procedure id="registrarCuposTarjeta" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_upd_prd_cupos(#codigoViaje#,

                               #codigoTarjeta#,

                               #cupoNacional#,

                               #cupoInternacional#)}

    </procedure>

    <!-- Fin: Registrar cupos tarjeta -->



    <!-- Inicio: Confirmar Viaje Plan -->

    <procedure id="confirmarViajePlan" parameterClass="java.util.HashMap">

        {CALL sp_confirm_datos_viaje_plan(#rutProsp#,

                                          #dvProsp#,

                                          #nombresProsp#,

                                          #apPaternoProsp#,

                                          #apMaternoProsp#,

                                          #emailProsp#,

                                          #telefonoProsp#,

                                          #codigoViaje#,

                                          #codOfiSelec#,

                                          #cicClienteCreado#,

                                          #codigoJof#,

                                          #nombresJof#,

                                          #apPaternoJof#,

                                          #apMaternoJof#,

                                          #entregaDomicilio#,

                                          #entregaOtraDireccion#,

                                          #nuevaDireccion#,

                                          #retiroEnRegiones#,

                                          #codigoEtapaViaje#

                                          #origenRentaProspecto#,

                                          #ticketAtencion#,

                                          #rentaProspecto#,

                                          #canalInicio#)}

    </procedure>

    <!-- Fin: Confirmar Viaje Plan -->



    <!-- Inicio: Consultar Detalle Viaje -->

    <resultMap id="getConsultarDetalleViaje" class="java.util.HashMap" >

        <result property="direccionProspecto"            column="prp_direccion"/>

        <result property="comunaProspecto"               column="prp_comuna"/>

        <result property="ciudadProspecto"               column="prp_ciudad"/>

        <result property="codRegionProspecto"            column="prp_region"/>

        <result property="codSucursalProspecto"          column="vje_cod_sucursal"/>

        <result property="entregaDomicilio"              column="vje_entrega_domicilio" nullValue="0"/>

        <result property="entregaOtroDomicilio"          column="vje_entrega_otra_direc" nullValue="0"/>

        <result property="nuevaDireccionEntrega"         column="vje_entrega_nueva_direc"/>

        <result property="nombrePersonalizadoTalonario"  column="vje_nom_prosp_talonario"/>

    </resultMap>

    <procedure id="consultarDetalleViaje" parameterClass="java.util.HashMap" resultMap="getConsultarDetalleViaje">

        {CALL sp_cns_detalle_viaje(#rut#, #codigoViaje#)}

    </procedure>

    <!-- Fin: Consultar Detalle Viaje -->



    <!-- Inicio: Consultar Tarjetas Seleccionadas -->

    <resultMap id="getTarjetasSeleccionadas" class="java.util.HashMap">

        <result property="codigoTarjeta"     column="codigo" />

        <result property="nombreTarjeta"     column="nombre" />

    </resultMap>

    <procedure id="consultarTarjetasSeleccionadas" resultMap="getTarjetasSeleccionadas">

        {CALL sp_cns_tdc_selec(#codigoViaje#)}

    </procedure>

    <!-- Fin: Consultar Tarjetas Seleccionadas -->



    <parameterMap id="setRegistroCallMeBack" class="java.util.HashMap">

        <parameter property="rutProspecto" jdbcType="NUMERIC" javaType="long" />

        <parameter property="idTicketAtencion" jdbcType="NUMERIC" javaType="long" />

        <parameter property="numeroTelefono" jdbcType="VARCHAR" javaType="String" />

    </parameterMap>



    <resultMap id="getRegistroCallMeBack" class="java.util.HashMap">

        <result property="registroCallMeBack" column="resultado" javaType="integer" />

    </resultMap>



    <procedure id="registrarCallMeBack" parameterMap="setRegistroCallMeBack" resultMap="getRegistroCallMeBack">

        { CALL sp_upd_callmeback(?,?,?) }

    </procedure>



	<parameterMap id="setInsertarProcesoViajeBatch" class="java.util.HashMap">

	     <parameter property="prp_rut" jdbcType="NUMERIC" javaType="Integer" />

	     <parameter property="prp_dv" jdbcType="CHAR" javaType="String" />

	     <parameter property="prp_ape_paterno" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="prp_ape_materno" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="prp_nom" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="tck_atn_codigo" jdbcType="INTEGER" javaType="Integer" />

	     <parameter property="prp_email" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="prp_telefono" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="etp_descripcion" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="ciudad_prospecto" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="plan_seleccionado" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="estado_civil" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="prp_edad" jdbcType="INTEGER" javaType="Integer" />

	     <parameter property="renta_liquida" jdbcType="FLOAT" javaType="Double" />

	     <parameter property="prp_sexo" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="id_destino_proceso" jdbcType="INTEGER" javaType="Integer" />

	     <parameter property="aux1" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="aux2" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="aux3" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="aux4" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="aux5" jdbcType="VARCHAR" javaType="String" />

	     <parameter property="pvb_fec_nacimiento" jdbcType="DATE" javaType="Date" />

	     <parameter property="pvb_ind_nacionalidad" jdbcType="VARCHAR" javaType="String" />

	</parameterMap>

	

	<procedure id="insertarProcesoViajeBatch" parameterMap="setInsertarProcesoViajeBatch" resultClass="int">

	     {CALL sp_ins_prospecto_batch(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)}

	</procedure>

    

    <resultMap id="getConsultarDatosConyuge" class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.ConyugeProspectoTO" >

        <result property="rut"                   column="cyg_rut"/>

        <result property="digitoVerificador"     column="cyg_dv"/>

        <result property="apellidoPaterno"       column="cyg_ape_paterno"/>

        <result property="apellidoMaterno"       column="cyg_ape_materno"/>

        <result property="nombres"               column="cyg_nom"/>

        <result property="fechaNacimiento"       column="cyg_fec_nac"/>

        <result property="numeroCargas"          column="cyg_cnt_cargas"      javaType="int"  nullValue="0"/>

    </resultMap>

    <procedure id="consultaDatosConyuge" parameterClass="java.util.HashMap" resultMap="getConsultarDatosConyuge">

        {CALL sp_cns_info_conyuge(#rut#)}

    </procedure>

    <resultMap id="getConsultaCupoTarjeta"      class="java.util.HashMap">

        <result property="codigoTarjeta"        column="codigo" />

        <result property="nombreTarjeta"        column="nombre"/>

        <result property="cupoNacional"         column="cupo_nac" javaType="double" nullValue="0"/>

        <result property="cupoInternacional"    column="cupo_int" javaType="double" nullValue="0"/>

    </resultMap>

    <procedure id="consultaCupoTarjeta" resultMap="getConsultaCupoTarjeta">

       {CALL sp_cns_cupo_tarjeta(#codigoViaje#)}

    </procedure>

 

    <procedure id="registrarEstadosViaje" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_ins_estados_viaje( 

                    #codigoViaje#,

                    #estadoCuenta#,

                    #estadoMargen#,

                    #estadoLineaSobregiro#,

                    #estadoPerfilCartola#,

                    #estadoRelacionCuenta#,

                    #estadoTarjetaDebito#)}

    </procedure>



    <!--Consulta finalizar viaje JHJ 04-05-2016  -->

    <resultMap id="getconsultafinalizarviaje" class="java.util.HashMap">

        <result property="codigoViaje"           column="vje_codigo" nullValue="0"/>

        <result property="estadoCuenta"          column="fvje_est_cta" nullValue="0"/>

        <result property="estadoMargen"          column="fvje_est_margen" nullValue="0"/>

        <result property="estadoLineaSobregiro"  column="fvje_est_lineasob" nullValue="0"/>

        <result property="estadoPerfilCartola"   column="fvje_est_perfilcart" nullValue="0"/>

        <result property="estadoRelacionCuenta"  column="fvje_est_relplan" nullValue="0"/>

        <result property="estadoTarjetaDebito"   column="fvje_est_tar_deb" nullValue="0"/>

    </resultMap>

    <procedure id="consultaFinalizarViaje" parameterClass="java.util.HashMap" resultMap="getconsultafinalizarviaje">

        { CALL sp_cns_est_finaliza_viaje(#codigoViaje#) }

    </procedure>

    <!--Consulta finalizar viaje JHJ 04-05-2016  -->



    <procedure id="validaMontoDireccion" parameterClass="java.util.HashMap" resultClass="int">

        { CALL sp_cns_est_renta_dir(#rutProspecto#,#idTicketAtencion#) }

    </procedure>



    <resultMap id="resultadoValidarViaje" class="java.util.HashMap">

        <result property="ticket_codigo"   column="ticket_codigo" jdbcType="Integer"/>

        <result property="vje_codigo"      column="vje_codigo"    jdbcType="Integer"/>

    </resultMap>



    <procedure id="validarProspectoPorViaje" parameterClass="java.util.HashMap" resultMap="resultadoValidarViaje">

        { CALL sp_cns_val_prp_por_viaje(#codigoViaje#,#rutProspecto#) }

    </procedure>



   <!-- consultar si existe transferencia -->

    <procedure id="existeTransferencia" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_cns_existe_transferencia(#codigoViaje#)}

    </procedure>

    <!-- fin consultar si existe transferencia -->



    <!-- consultar datos transferencia -->

    <resultMap id="getConsultarTransferencia" class="java.util.HashMap">

        <result property="cta_destino" column="cuentaDestino" javaType="String" />

        <result property="bco_destino" column="bancoDestino"  javaType="String" />

        <result property="cta_ori" column="cuentaOrigen"  javaType="String" />

    </resultMap>



    <procedure id="consultarTransferencia" parameterClass="java.util.HashMap" resultMap="getConsultarTransferencia">

        {CALL sp_cns_transferencia(#codigoViaje#)}

    </procedure>

    <!-- fin consultar datos transferencia -->



    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.ViajeTO" id="consultarViajeResult">

        <result property="etapaActual.codigo"   column="etp_codigo"     nullValue="0"/>

        <result property="estado"               column="vje_estado" />

    </resultMap>



    <procedure id="consultarViaje" parameterClass="java.util.HashMap" resultMap="consultarViajeResult">

        {CALL sp_cns_est_viaje(#codigoViaje#)}

    </procedure>



    <procedure id="origenRenta" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_cns_ori_renta(#rut#)}

    </procedure>

    

    <procedure id="actualizarConvenioProspecto" parameterClass="java.util.HashMap">

        {CALL sp_upd_conv_prosp(#rutProspecto#,#flagTieneConvenio#)}

    </procedure>

    

    <procedure id="actualizarPlanSeleccionado" parameterClass="java.util.HashMap">

        {CALL sp_upd_plan_selec(#rutProspecto#,#planSeleccionado#)}

    </procedure>

    

    <procedure id="insertarOActualizarPlanConvenio" parameterClass="java.util.HashMap">

        {CALL sp_ins_plan_convenio(#codigoViaje#,#rutEmpresaConv#,#codigoConvenio#,#planConvenio#)}

    </procedure>

	

	<resultMap id="getConsultaInformacionConvenio" class="java.util.HashMap">

       <result property="rutEmpleador" column="emc_emp_rut" javaType="Integer" />

       <result property="dvEmpleador" column="emc_conv_dv" javaType="String"/>

       <result property="nombreEmpresa" column="emc_conv_nombre_emp" javaType="String" />

       <result property="descripcionConvenio" column="emc_desc_convenio" javaType="String" />

       <result property="ejecutivoAsociado" column="emc_ejecutivo_asoc" javaType="String" />

       <result property="tipoConvenio" column="emc_desc_tipo_conv" javaType="String" />

       <result property="esCostoCero" column="emc_camp_costo_cero" javaType="String" />

       <result property="prioridad" column="emc_prioridad" javaType="String" />

       <result property="planVigente" column="emc_plan_vigente" javaType="Integer" />

    </resultMap>

	

    <procedure id="consultaInformacionConvenio" parameterClass="java.util.HashMap" resultMap="getConsultaInformacionConvenio">

        {CALL sp_cns_empresa_conv(#rut#)}

    </procedure>

   

    <!--Sprint 8 LEAD Mobile  -->

    <procedure id="actualizarLeadRenta" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_upd_lead_mob_renta(#rut#,#renta#)}

    </procedure>



    <procedure id="actualizarLeadContacto" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_upd_lead_mobile(#rut#,#correo#,#telefono#)}

    </procedure>

    

    <!-- Sprint 9 Planes-->

    <resultMap id="getConsultaInformacionLeadMovile" class="java.util.HashMap">

	   <result property="rutEmpleador"        column="prp_rut"             javaType="Integer" />

	   <result property="dvEmpleador"         column="prp_dv"              javaType="String" />

	   <result property="apellidoPat"         column="prp_ape_paterno"     javaType="String" />

	   <result property="apellidoMat"         column="prp_ape_materno"     javaType="String" />

	   <result property="nombre"              column="prp_nom"             javaType="String" />

	   <result property="ticket"              column="tck_atn_codigo"      javaType="Integer" />

	   <result property="correo"              column="prp_email"           javaType="String" />

	   <result property="fono"                column="prp_telefono"        javaType="String" />

	   <result property="descripcion"         column="etp_descripcion"     javaType="String" />

	   <result property="ciudad"              column="ciudad_prospecto"    javaType="String" />

	   <result property="plan"                column="plan_seleccionado"   javaType="String" />

	   <result property="estadoCivil"          column="estado_civil"        javaType="String" />

	   <result property="edad"                column="prp_edad"            javaType="Integer" />

	   <result property="renta"               column="renta_liquida"       javaType="double" />

	   <result property="sexo"                column="prp_sexo"            javaType="String" />

	   <result property="destinoProc"         column="id_destino_proceso"  javaType="Integer" />

	   <result property="estadoProc"          column="id_estado_proceso"   javaType="Integer" />

	   <result property="fecha"               column="fecha_carga"         javaType="Date" />

	   <result property="auxiliar1"           column="aux1"                javaType="String" />

	   <result property="auxiliar2"           column="aux2"                javaType="String"/>

	   <result property="auxiliar3"           column="aux3"                javaType="String" />

	   <result property="auxiliar4"           column="aux4"                javaType="String" />

	   <result property="auxiliar5"           column="aux5"                javaType="String" />

	   <result property="fechanac"            column="pvb_fec_nacimiento"  javaType="Date" />

	   <result property="indnacionalidad"     column="pvb_ind_nacionalidad" javaType="String" />

    </resultMap>    

    

    <procedure id="consultaInformacionLeadMovile" parameterClass="java.util.HashMap" resultMap="getConsultaInformacionLeadMovile">

        {CALL sp_cns_lead_movil(#rut#,#tipoLead#)}

    </procedure>



    <parameterMap id="setIngresarTicketViajePlanes" class="java.util.HashMap">

        <parameter property="ticketId" jdbcType="NUMERIC" javaType="integer" />

        <parameter property="codViaje" jdbcType="NUMERIC" javaType="integer" />

        <parameter property="vigencia" jdbcType="VARCHAR" javaType="String" />   	

    </parameterMap>



    <procedure id="ingresarTicketViajePlanes" parameterMap="setIngresarTicketViajePlanes" resultClass="int">

        { CALL sp_ing_ticket_vje_planes(?,?,?) }

    </procedure>



    <parameterMap id="setActualizarIndicadorValidadorRenta" class="java.util.HashMap">

        <parameter property="codViaje" jdbcType="NUMERIC" javaType="integer" />

        <parameter property="tipoAutenticacion" jdbcType="VARCHAR" javaType="String" />

    </parameterMap>



    <procedure id="actualizarIndicadorValidadorRenta" parameterMap="setActualizarIndicadorValidadorRenta" resultClass="int">

        { CALL sp_upd_valida_rta_viaje(?,?) }

    </procedure>



    <parameterMap id="setActualizaRespuestaEquifax" class="java.util.HashMap">

        <parameter property="codViaje" jdbcType="NUMERIC" javaType="integer" />

        <parameter property="respuestaEquifax" jdbcType="NUMERIC" javaType="integer" />

    </parameterMap>



    <procedure id="actualizaRespuestaEquifax" parameterMap="setActualizaRespuestaEquifax" resultClass="int">

        { CALL sp_upd_respuesta_equifax(?,?) }

    </procedure>

	

    <resultMap id="getRespuestaEquifax" class="java.util.HashMap" >

        <result property="codViaje" column="vje_codigo" javaType="Integer" />

        <result property="respuestaEquifax" column="vje_resp_equifax" javaType="Integer" />

    </resultMap>



    <procedure id="obtenerResultadoEquifax" parameterClass="java.util.HashMap" resultMap="getRespuestaEquifax">

        { CALL sp_cns_respuesta_equifax(#codigoViaje#) }

    </procedure>



    <resultMap id="getRespuestaTicket" class="java.util.HashMap" >

        <result property="ticketAtencion" column="tck_atn_codigo" javaType="Integer" />

    </resultMap>



   <procedure id="obtenerTicketViajePlan" parameterClass="java.util.HashMap" resultMap="getRespuestaTicket">

        { CALL sp_cns_ticket_viaje(#rutProspecto#,#codigoViaje#) }

    </procedure>



    <procedure id="actualizarComplementoProspectoMovil" parameterClass="java.util.HashMap">

        {CALL sp_upd_compl_movil(#codSegmento#,#codTipoBanca#,#rut#,#sitLaboral#,#nivEducacional#)}

    </procedure>



    <!-- Sprint 9 Planes-->



    <procedure id="actualizarTipoIngreso" parameterClass="java.util.HashMap">

        {CALL sp_upd_tipo_ingreso(#codigoViaje#,#tipoIngreso#)}

    </procedure>

    <!-- Sprint 16 Planes-->

    <procedure id="insertarRegistroMobile" parameterClass="java.util.HashMap">

        {CALL sp_ins_det_vje_mobile(#codViaje#,#detalleLlave#)}

    </procedure>

    

    <!-- Sprint 16 Planes   JHJ-->

    <!-- IMPORTANTE: De aca hacia arriba es viaje Planes ! -->



    <parameterMap id="setActualizarSucViajeCHIP" class="java.util.HashMap">

        <parameter property="cod_suc"     jdbcType="NUMERIC"  javaType="long"  />

        <parameter property="rut_cli"     jdbcType="NUMERIC"  javaType="long" />

        <parameter property="tpo_vje_cod" jdbcType="INTEGER"  javaType="Integer"  /> 

    </parameterMap>



    <resultMap id="getActualizarSucViajeCHIP" class="java.util.HashMap">

        <result property="validacionRespuesta" column="resultado" javaType="Integer" />

    </resultMap>



    <procedure id="actualizarSucViajeCHIP" parameterMap="setActualizarSucViajeCHIP" resultMap="getActualizarSucViajeCHIP">

        { CALL sp_upd_suc_viaje_chip(?,?,?) }

    </procedure>



    <parameterMap id="setConsultarSucViajeCHIP" class="java.util.HashMap">

        <parameter property="rut_cli"     jdbcType="NUMERIC"  javaType="long" />

        <parameter property="tpo_vje_cod" jdbcType="INTEGER"  javaType="Integer"  /> 

    </parameterMap>



    <resultMap id="getConsultarSucViajeCHIP" class="java.util.HashMap">

        <result property="codSUC" column="cod_suc" javaType="Long" />

    </resultMap>



    <procedure id="consultarSucViajeCHIP" parameterMap="setConsultarSucViajeCHIP" resultMap="getConsultarSucViajeCHIP">

        { CALL sp_cns_cod_suc_vje(?,?) }

    </procedure>



    <procedure id="registrarViviendaSeguro" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_ins_vivienda_seguro_chip( 

                    #rut#,

                    #codigoViaje#,

                    #direccion#,

                    #comuna#,

                    #region#,

                    #glosa_region#,

                    #condominio#,

                    #direcNro#,

                    #direcRef#)}

    </procedure>



    <!-- Inicio Registrar Prospecto Hipotecario -->

    <procedure id="registrarProspectoHipotecario" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_ins_prosp_hipotecario(

                      #rutProspecto#,

                      #dvProspecto#,

                      #apellidoPaterno#,

                      #apellidoMaterno#,

                      #nombres#,

                      #fechaNacimiento#,

                      #email#,

                      #telefono#,

                      #montoRenta#,

                      #estadoViaje#,

                      #codTipoViaje#,

                      #codEtapaViaje#,

                      #motivoEstado#,

                      #idCanalIni#,

                      #usuarioActualiza#,

                      #eje_cta#,

                      #do_anos_tasa_fija#,

                      #do_cod_mes_excl#,

                      #do_cod_moneda#,

                      #do_cod_seg#,

                      #do_ind_prepago#,

                      #do_ind_reprog#,

                      #do_dia_venc#,

                      #do_ind_dfl2#,

                      #do_ind_pac#,

                      #do_canal_id#,

                      #do_negociacion#,

                      #do_comision#,

                      #do_cto_fondo#,

                      #do_ind_mto_cont#,

                      #do_meses_gracia#,

                      #do_mto_cont#,

                      #do_seg_hogar_cont#,

                      #do_seg_ces#,

                      #do_seg_enf_grave#,

                      #do_seg_hosp#,

                      #do_tasa_seg_inc#,

                      #do_tasa_seg_desg#,

                      #do_codeu#,

                      #do_codeu_seg_desg#,

                      #do_mto_robo#,

                      #do_seg_ces_serviu#,

                      #do_seg_ces_dob_prot#,

                      #do_seg_desg_tit#,

                      #do_fecha_nac_tit#,

                      #do_fecha_nac_codeu#,

                      #do_tasa_simulacion#,

                      #do_incluye_comp#,

                      #do_cod_prod_comp#,

                      #do_tasa_sim_comp#,

                      #do_tiene_reprog#,

                      #do_tramo#,

                      #do_seg_cod#,

                      #do_mto_valor_aseg#,

                      #do_pje_seg_desg_cli#,

                      #do_pje_seg_desg_co#,

                      #do_plazo#,

                      #do_pie_UF#,

                      #do_renta#,

                      #do_cod_objetivo#,

                      #do_cod_antiguedad#,

                      #do_cod_prod#,

                      #do_region_prop#,

                      #do_comuna_prop#,

                      #do_valor_prop_UF#,

                      #do_valor_prop_peso#,

                      #do_pie_peso#,

                      #do_mto_credito_peso#,

                      #do_mto_credito_UF#,

                      #do_cod_tipo_bien#,

                      #do_email_cli#,

                      #do_fono_cliente#,

                      #do_ciudad_prop#,

                      #do_tipo_financ#,

                      #do_pje_financ#,

                      #do_fecha_compra#,

                      #ss_plazo#,

                      #ss_tramo#,

                      #ss_tasa#,

                      #ss_valor_reducido#,

                      #ss_div#,

                      #ss_mto_seg_desg#,

                      #ss_mto_seg_inc_sis#,

                      #ss_div_tot#,

                      #ss_div_tot_peso#,

                      #ss_tasa_base#,

                      #ss_tasa_spread#,

                      #ss_tasa_inc#,

                      #ss_tasa_desg#,

                      #ss_tasa_min#,

                      #ss_tasa_max#,

                      #ss_tot_min#,

                      #ss_tot_max#,

                      #ss_prima_min#,

                      #ss_prima_max#,

                      #ss_tasa_seg_desg_b#,

                      #ss_tasa_seg_desg_f#,

                      #ss_tasa_seg_desg_p#,

                      #ss_prm_seg_desg_b#,

                      #ss_prm_seg_desg_f#,

                      #ss_prm_seg_desg_p#,

                      #ss_comp_conv#,

                      #ss_tasacion_UF#,

                      #ss_est_tit_UF#,

                      #ss_borr_escr_UF#,

                      #ss_notariales_UF#,

                      #ss_imp_mutuo_UF#,

                      #ss_ins_cons_UF#,

                      #ss_gestoria_UF#,

                      #ss_tot_gastos_UF#,

                      #ss_tasacion_peso#,

                      #ss_est_tit_peso#,

                      #ss_borr_escr_peso#,

                      #ss_notariales_peso#,

                      #ss_imp_mutuo_peso#,

                      #ss_ins_cons_peso#,

                      #ss_gestoria_peso#,

                      #ss_tot_gastos_peso#,

                      #ss_tasa_cae#,

                      #ss_cto_tot#,

                      #ss_tot_int#,

                      #ss_tot_seg_inc_sis#,

                      #ss_tot_seg_desg#,

                      #ss_tipo_tasa#,

                      #ss_tasa_cae_min#,

                      #ss_cto_tot_min#,

                      #ss_tasa_cae_max#,

                      #ss_cto_tot_max#,

                      #do_gls_codObjetivo#,

                      #do_gls_codProducto#,

                      #do_gls_codAntiguedad#,

                      #do_gls_codSeguro#)}

    </procedure>

    <!-- Fin Registrar Prospecto Hipotecario -->



    <parameterMap id="setActualizarEtapaViajeGenerico" class="java.util.HashMap">

        <parameter property="rut" jdbcType="NUMERIC" javaType="long" />

        <parameter property="codEtapaActual" jdbcType="NUMERIC" javaType="integer" />

        <parameter property="estado_viaje"           jdbcType="CHAR"     javaType="String" />

        <parameter property="tipo_viaje" jdbcType="NUMERIC" javaType="integer" />

    </parameterMap>



    <procedure id="actualizarEtapaViajeGenerico" parameterMap="setActualizarEtapaViajeGenerico" resultClass="int">

        { CALL sp_upd_etp_vje_prosp_generico(?,?,?,?) }

    </procedure>



    <parameterMap id="setActualizarEstadoProspectoGenerico" class="java.util.HashMap">

        <parameter property="rut" jdbcType="NUMERIC" javaType="long" />

        <parameter property="estado" jdbcType="char" javaType="String" />

        <parameter property="tipo_viaje" jdbcType="NUMERIC" javaType="integer" />

    </parameterMap>



    <procedure id="actualizarEstadoProspectoGenerico" parameterMap="setActualizarEstadoProspectoGenerico" resultClass="int">

        { CALL sp_upd_est_prospecto_generico(?,?,?) }

    </procedure>

    <parameterMap id="setConsultarDetalleViajeCHIPSimulacionSeleccionada" class="java.util.HashMap">

        <parameter property="codigoTicket" jdbcType="INTEGER"  javaType="Integer"  /> 

    </parameterMap>



    <resultMap id="getConsultarDetalleViajeCHIPSimulacionSeleccionada" class="java.util.HashMap">

        <result property="plazo"                        column="ss_plazo_sim"               javaType="int"/>

        <result property="tramo"                        column="ss_tramo_sim"               javaType="String"/>

        <result property="tasa"                         column="ss_tasa_sim"                javaType="double"/>

        <result property="valorReducido"                column="ss_valorReducido"           javaType="double"/>

        <result property="dividendo"                    column="ss_dividendo"               javaType="double"/>

        <result property="montoSegDesg"                 column="ss_montoSegDesg"            javaType="double"/>

        <result property="montoSegIncSis"               column="ss_montoSegIncSis"          javaType="double"/>

        <result property="dividendoTotal"               column="ss_dividendoTotal"          javaType="double"/>

        <result property="dividendoTotalPesos"          column="ss_dividendoTotalPesos"     javaType="double"/>

        <result property="tasaBase"                     column="ss_tasaBase"                javaType="double"/>

        <result property="tasaSpread"                   column="ss_tasaSpread"              javaType="double"/>

        <result property="tasaIncendio"                 column="ss_tasaIncendio"            javaType="double"/>

        <result property="tasaDesgravamen"              column="ss_tasaDesgravamen"         javaType="double"/>

        <result property="tasaOfertaMinima"             column="ss_tasaOfertaMinima"        javaType="double"/>

        <result property="tasaOfertaMaxima"             column="ss_tasaOfertaMaxima"        javaType="double"/>

        <result property="totalOfertaMinima"            column="ss_totalOfertaMinima"       javaType="double"/>

        <result property="totalOfertaMaxima"            column="ss_totalOfertaMaxima"       javaType="double"/>

        <result property="primaOfertaMinima"            column="ss_primaOfertaMinima"       javaType="double"/>

        <result property="primaOfertaMaxima"            column="ss_primaOfertaMaxima"       javaType="double"/>

        <result property="tasaSeguroDesgravamenBasico"  column="ss_tasasegDesgravBasico"    javaType="double"/>

        <result property="tasaSeguroDesgravamenFull"    column="ss_tasasegDesgravFull"      javaType="double"/>

        <result property="tasaSeguroDesgravamenPlus"    column="ss_tasasegDesgravPlus"      javaType="double"/>

        <result property="primaSeguroDesgravamenBasico" column="ss_primasegDesgraBasico"    javaType="double"/>

        <result property="primaSeguroDesgravamenFull"   column="ss_primasegDesgraFull"      javaType="double"/>

        <result property="primaSeguroDesgravamenPlus"   column="ss_primasegDesgraPlus"      javaType="double"/>

        <result property="comparacionConveniencia"      column="ss_comparacionConveniencia" javaType="boolean"/>

        <result property="fechaSimulacion"              column="ss_fechaSimulacion"         javaType="java.util.Date"/>

        <result property="tasacionUF"                   column="guf_tasacion"               javaType="double"/>

        <result property="estudioTitulosUF"             column="guf_estudioTitulos"         javaType="double"/>

        <result property="borradorEscrituraUF"          column="guf_borradorEscritura"      javaType="double"/>

        <result property="notarialesUF"                 column="guf_notariales"             javaType="double"/>

        <result property="imptoAlMutuoUF"               column="guf_imptoAlMutuo"           javaType="double"/>

        <result property="inscripcionConservadorUF"     column="guf_inscripcionConservador" javaType="double"/>

        <result property="gestoriaUF"                   column="guf_gestoria"               javaType="double"/>

        <result property="tasacionPesos"                column="gp_tasacionPeso"            javaType="double"/>

        <result property="estudioTitulosPesos"          column="gp_estudioTitulosPeso"      javaType="double"/>

        <result property="borradorEscrituraPesos"       column="gp_borradorEscrituraPeso"   javaType="double"/>

        <result property="notarialesPesos"              column="gp_notarialesPeso"          javaType="double"/>

        <result property="imptoAlMutuoPesos"            column="gp_imptoAlMutuoPeso"        javaType="double"/>

        <result property="inscripcionConservadorPesos"  column="gp_inscConservadorPesos"    javaType="double"/>

        <result property="gestoriaPesos"                column="gp_gestoriaPeso"            javaType="double"/>

        <result property="tasaCAE"                      column="cae_tasaCAE"                javaType="double"/>

        <result property="costoTotal"                   column="cae_costoTotal"             javaType="double"/>

        <result property="totalInteres"                 column="cae_totalInteres"           javaType="double"/>

        <result property="totalSeguroIncendioSismo"     column="cae_totalsegIncendioSismo"  javaType="double"/>

        <result property="totalSeguroDesgravamen"       column="cae_totalsegDesgravamen"    javaType="double"/>

        <result property="tipoTasa"                     column="cae_tipoTasa"               javaType="String"/>

        <result property="tasaCAEOfertaMinima"          column="cae_tasaCAEOfertaMinima"    javaType="double"/>

        <result property="costoTotalOfertaMinima"       column="cae_costoTotalOfertaMinima" javaType="double"/>

        <result property="tasaCAEOfertaMaxima"          column="cae_tasaCAEOfertaMaxima"    javaType="double"/>

        <result property="costoTotalOfertaMaxima"       column="cae_costoTotalOfertaMaxima" javaType="double"/>

    </resultMap>



    <procedure id="consultarDetalleViajeCHIPSimulacionSeleccionada" parameterMap="setConsultarDetalleViajeCHIPSimulacionSeleccionada" resultMap="getConsultarDetalleViajeCHIPSimulacionSeleccionada">

        { CALL sp_cns_det_vje_chip_sim(?) }

    </procedure>



    <parameterMap id="setConsultarDetalleViajeCHIPDatosOperacionales" class="java.util.HashMap">

        <parameter property="codigoTicket" jdbcType="INTEGER"  javaType="Integer"  /> 

    </parameterMap>



    <resultMap id="getConsultarDetalleViajeCHIPDatosOperacionales" class="wcorp.hipotecario.to.DatosOperacionTO">

        <result property="anosTasaFija"                     column="do_anosTasaFija"/>

        <result property="codMesExclusion"                  column="do_codMesExclusion"/>

        <result property="codMoneda"                        column="do_codMoneda"/>

        <result property="codSeguro"                        column="do_codSeguro"/>

        <result property="indPrepago"                       column="do_indPrepago"/>

        <result property="indicadorReprogramacion"          column="do_indReprogramacion"/>

        <result property="diaVencimiento"                   column="do_diaVencimiento"/>

        <result property="indDfl2"                          column="do_indDfl2"/>

        <result property="indPAC"                           column="do_indPAC"/>

        <result property="canalId"                          column="do_canalId"/>

        <result property="negociacion"                      column="do_negociacion"/>

        <result property="comision"                         column="do_comision"/>

        <result property="costoFondo"                       column="do_costoFondo"/>

        <result property="indMontoContenido"                column="do_indMontoContenido"/>

        <result property="mesesGracia"                      column="do_mesesGracia"/>

        <result property="montoContenido"                   column="do_montoContenido"/>

        <result property="seguroHogarContenido"             column="do_segHogarContenido"/>

        <result property="seguroCesantia"                   column="do_segCesantia"/>

        <result property="seguroEnfermedadGrave"            column="do_segEnfermedadGrave"/>

        <result property="seguroHospitalizacion"            column="do_segHospitalizacion"/>

        <result property="tasaSegIncendio"                  column="do_tasaSegIncendio"/>

        <result property="tasaSegDesgravamen"               column="do_tasaSegDesgravamen"/>

        <result property="codeudor"                         column="do_codeudor"/>

        <result property="codeudorConSeguroDesgravamen"     column="do_codeudorSegDesgravamen"/>

        <result property="montoRobo"                        column="do_montoRobo"/>

        <result property="seguroCesantiaServiu"             column="do_segCesantiaServiu"/>

        <result property="seguroCesantiaDobleProtecion"     column="do_segCesanDobleProtecion"/>

        <result property="seguroDesgravamenTitular"         column="do_segDesgravamenTitular"/>

        <result property="fechaNacimientoTitular"           column="do_fNacTitular"/>

        <result property="fechaNacimientoCodeudor"          column="do_fNacCodeudor"/>

        <result property="tasaSimulacion"                   column="do_tasaSimulacion"/>

        <result property="incluyeComparacion"               column="do_incluyeComparacion"/>

        <result property="codigoProductoComparacion"        column="do_codProductoComparacion"/>

        <result property="tasaSimulacionComparacion"        column="do_tasaSimulacComparac"/>

        <result property="tieneReprogramacion"              column="do_tieneReprogramacion"/>

        <result property="tramo"                            column="do_tramo"/>

        <result property="segcod"                           column="do_segcod"/>

        <result property="montoValorAsegurable"             column="do_montoValorAsegurable"/>

        <result property="porcentajeSegDesgravamenCliente"  column="do_porcSegDesgravCliente"/>

        <result property="porcentajeSegDesgravamenCodeudor" column="do_porcSegDesgravCodeudor"/>

        <result property="plazo"                            column="do_plazo"/>

        <result property="pieUf"                            column="do_pieUf"/>

        <result property="renta"                            column="do_renta"/>

        <result property="codObjetivo"                      column="do_codObjetivo"/>

        <result property="codAntiguedad"                    column="do_codAntiguedad"/>

        <result property="codProducto"                      column="do_codProducto"/>

        <result property="region"                           column="do_region"/>

        <result property="comuna"                           column="do_comuna"/>

        <result property="valorPropiedadUf"                 column="do_valorPropiedadUf"/>

        <result property="valorPropiedadPesos"              column="do_valorPropiedadPesos"/>

        <result property="piePesos"                         column="do_piePesos"/>

        <result property="montoCreditoPesos"                column="do_montoCreditoPesos"/>

        <result property="montoCreditoUf"                   column="do_montoCreditoUf"/>

        <result property="codTipoBienRaiz"                  column="do_codTipoBienRaiz"/>

        <result property="emailCliente"                     column="do_emailCliente"/>

        <result property="fonoCliente"   nullValue="0"      column="do_fonoCliente"/>

        <result property="ciudad"                           column="do_ciudad"/>

        <result property="tipoFinanciamento"                column="do_tipoFinanciamento"/>

        <result property="pjeFinanciamiento"                column="do_pjeFinanciamiento"/>

        <result property="rutCliente"                       column="rutCliente"/>

        <result property="anoCompra"     nullValue="0"      column="do_anoCompra"/>

        <result property="mesCompra"     nullValue=""       column="do_mesCompra"/>

    </resultMap>



    <procedure id="consultarDetalleViajeCHIPDatosOperacionales" parameterMap="setConsultarDetalleViajeCHIPDatosOperacionales" resultMap="getConsultarDetalleViajeCHIPDatosOperacionales">

        { CALL sp_cns_det_vje_chip_dat_ope(?) }

    </procedure>



    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.ViajeHipotecarioTO" id="getViajeProspectoTipo">

        <result property="etapaActual.codigo"   column="etp_codigo" nullValue="0"/>

        <result property="etapaActual.nombre"   column="etp_nombre" />

        <result property="ticketProspecto.idTicketAtencion" column="tck_atn_codigo"/>

    </resultMap>



    <procedure id="consultarViajeProspectoTipo" parameterClass="java.util.HashMap" resultMap="getViajeProspectoTipo">

        {CALL sp_cns_viaje_tipo(#rut#, #tipoViaje#)}

    </procedure>



    <procedure id="actualizarDatosContactoProspecto" parameterClass="java.util.HashMap">

        {CALL sp_act_datos_contacto(#rut#, #email#, #fono#, #nombres#, #apellidoPaterno#, #apellidoMaterno#)}

    </procedure>



    <procedure id="avanzaEtapaViaje" parameterClass="java.util.HashMap">

        {CALL sp_avanza_etp_vje(#rut#, #ticketAtencion#)}

    </procedure>



    <procedure id="insertarTicketAtencion" parameterClass="java.util.HashMap" resultClass="Integer">

        { CALL sp_ins_ticket_atn(#numeroTicket#, #codigoViaje#) }

    </procedure>



    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.ViajeHipotecarioTO" id="getConsultarViaje">

        <result property="codigo"                      column="vje_codigo"/>

        <result property="tipoViaje.codigo"            column="tpo_vje_codigo"/>

        <result property="etapaActual.codigo"          column="etp_codigo" nullValue="0"/>

        <result property="estado"                      column="vje_estado"/>

        <result property="motivoEstado"                column="vje_motivo_estado"/>

        <result property="idCanalInicio"               column="vje_id_canal_ini"/>

        <result property="idCanalFin"                  column="vje_id_canal_fin"/>

        <result property="codigoInterno"               column="vje_cod_interno"/>

        <result property="idInteraccionEpiphany"       column="vje_id_interaccion_epy"/>

        <result property="codigoSUC"                   column="vje_cod_suc"/>

        <result property="codigoSucursal"              column="vje_cod_sucursal"/>

        <result property="ejecutivoAsignadoVenta"      column="vje_eje_asignado_venta"/>

        <result property="ejecutivoAsignadoSGC"        column="vje_eje_asignado_sgc"/>

        <result property="fechaEstimadaCierre"         column="vje_fec_est_cierre"/>

        <result property="fechaHoraIngreso"            column="vje_fec_hms_ingreso"/>

        <result property="fechaHoraActualizacion"      column="vje_fec_hms_actualiza"/>

        <result property="usuarioActualiza"            column="vje_usuario_actualiza"/>

        <result property="cicCliente"                  column="vje_cic_cli"/>

        <result property="codigoJof"                   column="vje_jof_cod"/>

        <result property="ejecutivoBciNet"             column="vje_cod_ejecutivo_bcinet"/>

        <result property="oficinaEjecutivoBciNet"      column="vje_cod_ofi_eje_bcinet"/>

    </resultMap>

    <procedure id="consultarViajeTicket" resultMap="getConsultarViaje">

        {CALL sp_cns_vje_tck(#numeroTicket#)}

    </procedure>



    <!-- Rechazar estado  Cliente CHIP -->

    <procedure id="rechazoViajeCliente">

        {CALL sp_upd_estado_vje(#rut#, #ticketAtencion#,#codigoRechazo#,#motivo#)}

    </procedure>

    <!-- Rechazar estado  Cliente CHIP -->



<!-- Obtener solo Codigo del viaje para CHIP --> 

    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.ViajeHipotecarioTO" id="getObtenerCodigoViajeMap">

       <result property="codigo"               column="vje_codigo"/>

    </resultMap>



    <procedure id="obtenerViajeProspecto" parameterClass="java.util.HashMap" resultMap="getObtenerCodigoViajeMap">

        {CALL sp_cns_viaje_codigo(#rutProspecto#,#codTipoViaje#)}

    </procedure>



    <!-- Obtener codigo Situacion laboral  Cliente CHIP -->

    <resultMap id="getconsultarSituacionLaboral" class="java.util.HashMap">

        <result property="situacionLaboral"       column="prp_cod_sit_lab"   javaType="String"/>

    </resultMap>

 

    <procedure id="consultarSituacionLaboral" parameterClass="java.util.HashMap" resultMap="getconsultarSituacionLaboral">

        { CALL sp_cns_situacion_laboral(#rutProspecto#) }

    </procedure>



     <resultMap id="getporcFinanciamiento" class="java.util.HashMap">

        <result property="pctjeFinanciam"       column="dtl_do_pjeFinanciamiento"   javaType="int"/>

    </resultMap>

 

    <procedure id="porcFinanciamiento" parameterClass="java.util.HashMap" resultMap="getporcFinanciamiento">

        { CALL sp_cns_porc_financiamiento(#viajeCodigo#) }

    </procedure>



    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.ListadoViajeTO" id="getViajeProspectoTipo">

        <result property="etapaNombre"     column="etp_nombre"/>

        <result property="ticketAtencion"  column="tck_atn_codigo"/>

        <result property="viajeEstado"     column="vje_estado"/>

    </resultMap>



    <procedure id="consultarListaViajePpto" parameterClass="java.util.HashMap" resultMap="getViajeProspectoTipo">

        {CALL sp_cns_vje_obtieneestados(#rut#, #tipoViaje#)}

    </procedure>



    <!-- Inicio: Consultar datos para la solicitud de tasacion -->

    <parameterMap id="setConsultarDatosSolicitudDeTasacion" class="java.util.HashMap">

        <parameter property="idTicketAtencion"       jdbcType="INTEGER"              javaType="Integer"  />

    </parameterMap>



    <resultMap id="getConsultarDatosSolicitudDeTasacion" class="java.util.HashMap">

        <result property="codigoViaje"               column="vje_codigo"        javaType="String"/>

        <result property="rut"                       column="rut"               javaType="String"/>

        <result property="dv"                        column="dv"                javaType="String"/>

        <result property="nombres"                   column="nombres"           javaType="String"/>

        <result property="apellidoPaterno"           column="apellido_paterno"  javaType="String"/>

        <result property="apellidoMaterno"           column="apellido_materno"  javaType="String"/>

        <result property="domicilio"                 column="direccion"         javaType="String"/>

        <result property="comuna"                    column="comuna"            javaType="String"/>

        <result property="region"                    column="region"            javaType="String"/>

        <result property="telefono"                  column="telefono"          javaType="String"/>

        <result property="tipoBien"                  column="tipo_bien"         javaType="String"/>

        <result property="estadoBien"                column="estado_bien"       javaType="String"/>

        <result property="propiedadDireccion"        column="viv_direccion"     javaType="String"/>

        <result property="propiedadDireccionNumero"  column="viv_direccion_nro" javaType="String"/>

        <result property="propiedadComuna"           column="viv_comuna"        javaType="String"/>

        <result property="propiedadRegion"           column="viv_region"        javaType="String"/>

        <result property="referenciaPropiedadDirec"  column="dir_des"           javaType="String"/>

        <result property="condominio"                column="sot_condominio"    javaType="String"/>

        <result property="idSolicitud"               column="sol_id"            javaType="String"/>

        <result property="tipoTasacion"              column="tipo"              javaType="String"/>

        <result property="numeroCtaCte"              column="for_pago_des"      javaType="String"/>

        <result property="codOficina"                column="ofi_pago"          javaType="String"/>

        <result property="objetivoTasacion"          column="obs_obj"           javaType="String"/>

        <result property="nombrePropietario"         column="nom_pro"           javaType="String"/>

        <result property="rutPropietario"            column="rut_pro"           javaType="String"/>

        <result property="dvPropietario"             column="digv_pro"          javaType="String"/>

        <result property="tipoContacto"              column="tipo_contacto"     javaType="String"/>

        <result property="nombreContacto"            column="nom_contacto"      javaType="String"/>

        <result property="apellidoContacto"          column="ape_contacto"      javaType="String"/>

        <result property="fonoContacto"              column="fono_contacto"     javaType="String"/>

        <result property="mailContacto"              column="mail_contacto"     javaType="String"/>

        <result property="rolPropiedad"              column="rol"               javaType="String"/>

        <result property="bloque"                    column="bloque"            javaType="String"/>

        <result property="fechaAgenda"               column="fecha_agenda"      javaType="Date"/>

        <result property="proyectoConvenio"          column="pry_convenio"      javaType="String"/>

        <result property="codObjetivoCredito"        column="cod_objetivo"      javaType="String"/>

        <result property="indDfl2"                   column="indicadorDFL2"     javaType="Integer"/>

        <result property="fechaIngreso"              column="fecha_ingreso"     javaType="Date"/>

        <result property="fechatasacion"             column="fecha_tasacion"    javaType="Date"/>

    </resultMap>



    <procedure id="consultarDatosSolicitudDeTasacion" parameterMap="setConsultarDatosSolicitudDeTasacion" resultMap="getConsultarDatosSolicitudDeTasacion">

        { CALL sp_cns_prosp_vivienda_tasac(?) }

    </procedure>

    <!-- Fin: Consultar datos para la solicitud de tasacion -->



    <!-- Inicio: Registrar datos solicitud de tasacion -->

    <procedure id="registrarDatosViviendaSolicitudDeTasacion" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_ins_vivienda_tasacion_chip(#tck_atn#,#sol_id#, #tipo#, #for_pago_des#, #ofi_pago#, #obs_obj#,

                                            #nom_pro#, #rut_pro#, #digv_pro#, #tipo_bien#,#dir_pro#, #dir_pro_nro#,

                                            #dir_des#, #condominio#, #comuna#, #region#, #ciudad#, #tipo_contacto#,

                                            #nom_contacto#, #ape_contacto#, #fono_contacto#, #mail_contacto#, #rol#, #dfl2#, #estado#)}

    </procedure>

    <!-- Fin: Registrar datos solicitud de tasacion -->



    <!-- Inicio: Actualizar antecedentes prospecto -->

    <procedure id="actualizarAntecedentesProspecto" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_upd_prp_dts_vje(#rut#,

                                 #situacionLaboral#,

                                 #antiguedadLaboral#,

                                 #estadoCivil#,

                                 #paisNacimiento#,

                                 #totalPatrimonio#,

                                 #codigoViaje#,

                                 #nacionalidad#,

                                 #contratoLaboral#)}

    </procedure>

    <!-- Fin: Actualizar antecedentes prospecto -->



    <procedure id="validacionEtapaServicio" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_cns_etapa_viaje_chip(#tck_cod#, #rut_cli#, #nom_etapa#)}

    </procedure>



    <procedure id="firmarMandato">

        {CALL sp_ins_firma_mandato(#rut#, #ticketAtencion#, #fecha#, #nroCuenta#, #diaCargo#)}

    </procedure>



    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.ViajeTO" id="consultaViajeGenericoResult">

         <result property="ticketProspecto.idTicketAtencion"    column="tck_atn_codigo"     nullValue="0"/>

         <result property="codigo"                              column="vje_codigo"/>

         <result property="estado"                              column="vje_estado"/>

         <result property="motivoEstado"                        column="vje_motivo_estado"/>

         <result property="etapaActual.codigo"                  column="etp_codigo"         nullValue="0"/>

         <result property="tipoViaje.codigo"                    column="tpo_vje_codigo"     nullValue="0"/>

         <result property="tipoViaje.nombre."                   column="tpo_vje_nombre" />

         <result property="tipoViaje.vigencia"                  column="tpo_vje_vigencia"/>

    </resultMap>



    <procedure id="consultaViajeGenerico" parameterClass="java.util.HashMap" resultMap="consultaViajeGenericoResult">

        {CALL sp_cns_viaje_generico(#rutProspecto#, #idTicketAtencion#)}

    </procedure>

    <resultMap class="java.util.HashMap" id="getConsultarSolicitudHipotecaria">

        <result property="etapa" column="etapa" javaType="String"/>

        <result property="estadoDatosContacto" column="estado_datos_contacto" javaType="String"/>

        <result property="estadoRenta" column="estado_renta" javaType="String"/>

        <result property="estadoDatosPersonales" column="estado_datos_personales" javaType="String"/>

        <result property="estadoAceptaCondicionesCredito" column="estado_acepta_cond_cred" javaType="String"/>

        <result property="mostrarRefinanciamiento" column="mostrar_refinanciamiento" javaType="String"/>

        <result property="estadoRefinanciamiento" column="estado_refinanciamiento" javaType="String"/>

        <result property="mostrarDocumentosRenta" column="mostrar_doc_renta" javaType="String"/>

        <result property="estadoDocumentosRenta" column="estado_doc_renta" javaType="String"/>

        <result property="mostrarDocumentosPatrimonio" column="mostrar_doc_patr" javaType="String"/>

        <result property="estadoDocumentosPatrimonio" column="estado_doc_patr" javaType="String"/>

        <result property="mostrarCertMatri" column="mostrar_cert_matri" javaType="String"/>

        <result property="estadoCertMatri" column="estado_cert_matri" javaType="String"/>

        <result property="mostrarTasacion" column="mostrar_tasacion" javaType="String"/>

        <result property="estadoTasacion" column="estado_tasacion" javaType="String"/>

        <result property="mostrarMandato" column="mostrar_mandato" javaType="String"/>

        <result property="estadoMandato" column="estado_mandato" javaType="String"/>

        <result property="mostrarSeguros" column="mostrar_seguros" javaType="String"/>

        <result property="estadoSeguros" column="estado_seguros" javaType="String"/>

        <result property="mostrarDps" column="mostrar_dps" javaType="String"/>

        <result property="estadoDps" column="estado_dps" javaType="String"/>

        <result property="mostrarAceptaCondicionesFinales" column="mostrar_acepta_cond_fin" javaType="String"/>

        <result property="estadoAceptaCondicionesFinales" column="estado_acepta_cond_fin" javaType="String"/>

        <result property="mostrarPromesaCompraventa" column="mostrar_promesa_cv" javaType="String"/>

        <result property="estadoPromesaCompraventa" column="estado_promesa_cv" javaType="String"/>

        <result property="mostrarDocRutVendedor" column="mostrar_doc_rut_ven" javaType="String"/>

        <result property="estadoDocRutVendedor" column="estado_doc_rut_ven" javaType="String"/>

        <result property="mostrarEscritura" column="mostrar_escritura" javaType="String"/>

        <result property="estadoEscritura" column="estado_escritura" javaType="String"/>

        <result property="mostrarCertInscDominio" column="mostrar_cert_dom" javaType="String"/>

        <result property="estadoCertInscDominio" column="estado_cert_dom" javaType="String"/>

        <result property="mostrarCertHipGra" column="mostrar_cert_hip_gra" javaType="String"/>

        <result property="estadoCertHipGra" column="estado_cert_hip_gra" javaType="String"/>

        <result property="mostrarCertExpro" column="mostrar_cert_exp" javaType="String"/>

        <result property="estadoCertExpro" column="estado_cert_exp" javaType="String"/>

        <result property="mostrarCertLey20130" column="mostrar_cert_l20130" javaType="String"/>

        <result property="estadoCertLey20130" column="estado_cert_l20130" javaType="String"/>

        <result property="mostrarLiqPrepago" column="mostrar_liq_prepago" javaType="String"/>

        <result property="estadoLiqPrepago" column="estado_liq_prepago" javaType="String"/>

        <result property="mostrarGenerarContrato" column="mostrar_generar_contrato" javaType="String"/>

        <result property="estadoGenerarContrato" column="estado_generar_contrato" javaType="String"/>

        <result property="estadoDocumentosPropiedad" column="estado_doc_prop" javaType="String"/>

        <result property="mostrarDetalleConvenio" column="mostrar_det_convenio" javaType="String"/>

        <result property="estadoDetalleConvenio" column="estado_det_convenio" javaType="String"/>

        <result property="mostrarRutCliente" column="mostrar_rut_cliente" javaType="String"/>

        <result property="estadoRutCliente" column="estado_rut_cliente" javaType="String"/>

    </resultMap>



    <procedure id="consultarSolicitudHipotecaria" resultMap="getConsultarSolicitudHipotecaria">

        {CALL sp_cns_cond_vje_asicom(#rut#, #ticketAtencion#)}

    </procedure>



    <!-- Insertar/Actualizar Documento -->



     <procedure id="insertarDocumento" parameterClass="java.util.HashMap" resultClass="Integer">

       { CALL sp_ins_documento(#tipoDocumento#,#codigoViaje#,#nombreDocumento#,#rutaDocumento#,#mimeDocumento#) }

     </procedure>

 

     <!-- Consultar Documento -->

    <resultMap id="consultarDocumentoOUT" class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.DocumentoProspectoTO">

        <result property="codigoDocumento"          column="doc_codigo"/>

        <result property="tipoDocumento.codigo"     column="tdoc_codigo"/>

        <result property="tipoDocumento.nombre"     column="tdoc_nombre"/>

        <result property="codigoViaje"              column="vje_codigo"/>

        <result property="nombreDocumento"          column="doc_nombre"/>

        <result property="rutaDocumento"            column="doc_ruta_acc"/>

        <result property="mimeTypeDocumento"        column="doc_mime_type"/>

        <result property="fechaIngreso"             column="doc_fec_hms_ingreso"/>

        <result property="fechaActualizacion"       column="doc_fec_hms_actualiza"/>

    </resultMap>

    <procedure id="consultarDocumento" parameterClass="java.util.HashMap" resultMap="consultarDocumentoOUT">

        { CALL sp_cns_documento(#codigoDocumento#,) }

    </procedure>

    <procedure id="consultarDocumentoPorTipo" parameterClass="java.util.HashMap" resultMap="consultarDocumentoOUT">

        { CALL sp_cns_doc_por_tipo(#codigoViaje#, #codigoTipoDocumento#) }

    </procedure>



    <procedure id="eliminarRegistroDocumentoPorTipo" parameterClass="java.util.HashMap" resultClass="int">

        { CALL sp_del_doc_por_tipo(#codigoViaje#, #codigoTipoDocumento#)}

    </procedure>



    <!-- Consultar Documentos Cargados-->

    <resultMap id="consultarDocumentoCargadoOUT"     class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.DocumentoProspectoTO">

        <result property="codigoDocumento"      column="doc_codigo"/>

        <result property="codigoViaje"          column="vje_codigo"/>

        <result property="tipoDocumento.codigo" column="tdoc_codigo"/>

        <result property="tipoDocumento.nombre" column="tdoc_nombre"/>

        <result property="nombreDocumento"      column="doc_nombre"/>

        <result property="rutaDocumento"        column="doc_ruta_acc"/>

        <result property="mimeTypeDocumento"    column="doc_mime_type"/>

    </resultMap>

    <procedure id="consultarDocumentosCargados" parameterClass="java.util.HashMap" resultMap="consultarDocumentoCargadoOUT">

        { CALL sp_cns_documento_cargados(#ticket#) }

    </procedure>



    <procedure id="eliminarDetallePatrimonio" parameterClass="java.util.HashMap" resultClass="int">

        { CALL sp_del_detalle_pat(#codigoViaje#)}

    </procedure>



    <procedure id="registrarDetallePatrimonio" parameterClass="java.util.HashMap" resultClass="int">

        { CALL sp_ins_detalle_pat(#codigoViaje#,#tipoPatrimonio#,#valorPatrimonio#)}

    </procedure>



    <procedure id="defineViajeContinuar">

        {CALL sp_define_vje_cont(#rut#, #ticketAtencion#)}

    </procedure>



    <!-- Inicio Registrar Simulacion Hipotecario -->

    <procedure id="registrarSimulacionHipotecario" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_reg_nva_simulacion(

                      #ticketAtencion#,

                      #do_anos_tasa_fija#,

                      #do_cod_mes_excl#,

                      #do_cod_moneda#,

                      #do_cod_seg#,

                      #do_ind_prepago#,

                      #do_ind_reprog#,

                      #do_dia_venc#,

                      #do_ind_dfl2#,

                      #do_ind_pac#,

                      #do_canal_id#,

                      #do_negociacion#,

                      #do_comision#,

                      #do_cto_fondo#,

                      #do_ind_mto_cont#,

                      #do_meses_gracia#,

                      #do_mto_cont#,

                      #do_seg_hogar_cont#,

                      #do_seg_ces#,

                      #do_seg_enf_grave#,

                      #do_seg_hosp#,

                      #do_tasa_seg_inc#,

                      #do_tasa_seg_desg#,

                      #do_codeu#,

                      #do_codeu_seg_desg#,

                      #do_mto_robo#,

                      #do_seg_ces_serviu#,

                      #do_seg_ces_dob_prot#,

                      #do_seg_desg_tit#,

                      #do_fecha_nac_tit#,

                      #do_fecha_nac_codeu#,

                      #do_tasa_simulacion#,

                      #do_incluye_comp#,

                      #do_cod_prod_comp#,

                      #do_tasa_sim_comp#,

                      #do_tiene_reprog#,

                      #do_tramo#,

                      #do_seg_cod#,

                      #do_mto_valor_aseg#,

                      #do_pje_seg_desg_cli#,

                      #do_pje_seg_desg_co#,

                      #do_plazo#,

                      #do_pie_UF#,

                      #do_renta#,

                      #do_cod_objetivo#,

                      #do_cod_antiguedad#,

                      #do_cod_prod#,

                      #do_region_prop#,

                      #do_comuna_prop#,

                      #do_valor_prop_UF#,

                      #do_valor_prop_peso#,

                      #do_pie_peso#,

                      #do_mto_credito_peso#,

                      #do_mto_credito_UF#,

                      #do_cod_tipo_bien#,

                      #do_email_cli#,

                      #do_fono_cliente#,

                      #do_ciudad_prop#,

                      #do_tipo_financ#,

                      #do_pje_financ#,

                      #do_fecha_compra#,

                      #ss_plazo#,

                      #ss_tramo#,

                      #ss_tasa#,

                      #ss_valor_reducido#,

                      #ss_div#,

                      #ss_mto_seg_desg#,

                      #ss_mto_seg_inc_sis#,

                      #ss_div_tot#,

                      #ss_div_tot_peso#,

                      #ss_tasa_base#,

                      #ss_tasa_spread#,

                      #ss_tasa_inc#,

                      #ss_tasa_desg#,

                      #ss_tasa_min#,

                      #ss_tasa_max#,

                      #ss_tot_min#,

                      #ss_tot_max#,

                      #ss_prima_min#,

                      #ss_prima_max#,

                      #ss_tasa_seg_desg_b#,

                      #ss_tasa_seg_desg_f#,

                      #ss_tasa_seg_desg_p#,

                      #ss_prm_seg_desg_b#,

                      #ss_prm_seg_desg_f#,

                      #ss_prm_seg_desg_p#,

                      #ss_comp_conv#,

                      #ss_tasacion_UF#,

                      #ss_est_tit_UF#,

                      #ss_borr_escr_UF#,

                      #ss_notariales_UF#,

                      #ss_imp_mutuo_UF#,

                      #ss_ins_cons_UF#,

                      #ss_gestoria_UF#,

                      #ss_tot_gastos_UF#,

                      #ss_tasacion_peso#,

                      #ss_est_tit_peso#,

                      #ss_borr_escr_peso#,

                      #ss_notariales_peso#,

                      #ss_imp_mutuo_peso#,

                      #ss_ins_cons_peso#,

                      #ss_gestoria_peso#,

                      #ss_tot_gastos_peso#,

                      #ss_tasa_cae#,

                      #ss_cto_tot#,

                      #ss_tot_int#,

                      #ss_tot_seg_inc_sis#,

                      #ss_tot_seg_desg#,

                      #ss_tipo_tasa#,

                      #ss_tasa_cae_min#,

                      #ss_cto_tot_min#,

                      #ss_tasa_cae_max#,

                      #ss_cto_tot_max#,

                      #codigoEstado#)}

    </procedure>

    <!-- Fin Registrar Simulacion Hipotecario -->



    <!-- Inicio Actualizar Estado Simulacion Hipotecario -->

    <procedure id="actualizarEstadoSimulacion" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_upd_simulac_hipotecario(

                      #ticketAtencion#,

                      #estadoActual#,

                      #nuevoEstado#)}

    </procedure>

    <!-- Fin Actualizar Estado Simulacion Hipotecario -->



    <procedure id="guardarFormularioDps" resultClass="Integer">

        { CALL sp_ins_dps_form(#ticket_atencion#,#nro_dps#,#est_respta_dps#,#est_prop_indv#,#est_prop_colt#,#fec_hms_ingreso#,#nom_contratante#,#rut_contratante#,#dv_contratante#,#nombre_ejecutivo#,#sucursal#,#nom_aseg#,#rut_aseg#,#dv_aseg#,#sexo_aseg#,#fecha_nac_aseg#,#estado_civil_aseg#,#direc_aseg#,#ciudad_aseg#,#comuna_aseg#,#fono_aseg#,#email_aseg#,#peso_aseg#,#talla_aseg#,#nro_poliza#,#monto_credito#,#plazo_credito#,#prima_uf_credito#,#envio_pdf_ok#,#dps_cnl_envio#)}

    </procedure>



    <procedure id="guardarDetalleFormularioDps" resultClass="Integer">

        { CALL sp_ins_detalle_dps_form(#codigo#,#cod_pregunta#,#glosa_pregunta#,#respuesta#,#respuesta_txt_ad#)}

    </procedure>



    <procedure id="detalleViajePorclave" parameterClass="java.util.HashMap" resultClass="String">

        { CALL sp_cns_det_vje_por_clave(#ticketAtencion#,#llave#)}

    </procedure>



    <procedure id="guardarAprobacionViaje" parameterClass="java.util.HashMap" resultClass="Integer">

        { CALL sp_ins_det_aprobacion_chip(#ticketAtencion#)}

    </procedure>



    <resultMap id="getDetalleAprobacion" class="java.util.HashMap">

        <result property="codigoViaje"     column="vje_codigo" javaType="integer"/>

        <result property="fechaAprobacion" column="dtl_vje_valor" javaType="String"/>

    </resultMap>



    <procedure id="consultarAprobacionViaje" parameterClass="java.util.HashMap" resultMap="getDetalleAprobacion">

        {CALL sp_cns_aprobacion_vje_chip(#ticketAtencion#)}

    </procedure>



    <!-- Inicio Obtener cuenta corriente Cargo Hipotecario -->

    <resultMap id="getDetalleCuentaCargo" class="java.util.HashMap">

        <result property="ctactePac"   column="cta_cte"   javaType="String"/>

        <result property="diaPac"      column="dia_pac"   javaType="Integer"/>

        <result property="fechaPac"    column="fec_pac"   javaType="java.util.Date"/>

    </resultMap>



    <procedure id="consultarCuentaCargo" parameterClass="java.util.HashMap" resultMap="getDetalleCuentaCargo">

        {CALL sp_cns_cuenta_cargo_chip(#ticketAtencion#)}

    </procedure>

     <!-- Fin Obtener cuenta corriente Cargo Hipotecario -->

     

    <procedure id="actualizarDocumento" parameterClass="java.util.HashMap" resultClass="int">

       { CALL sp_upd_documento(#tipoDocumento#,#codigoViaje#,#nombreDocumento#,#mimeDocumento#) }

    </procedure>



    <resultMap id="getRegistroCondiciones" class="java.util.HashMap">

        <result property="fechaSimulacion" column="fecha_simulacion" javaType="java.util.Date"/>

        <result property="idWorkflow"      column="id_workflow"      javaType="String"/>

        <result property="fechaAprobacion" column="fecha_aprobacion" javaType="java.util.Date"/>

        <result property="bloqueoPorProyecto" column="proy_bloqueado" javaType="String"/>

    </resultMap>



    <procedure id="consultarRegistroCondiciones" parameterClass="java.util.HashMap" resultMap="getRegistroCondiciones">

        {CALL sp_cns_reg_condiciones(#ticketAtencion#)}

    </procedure>

    

    <procedure id="insertarWorkflowHipotecario" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_ins_workflow_chip(#ticketAtencion#,#numeroSolicitud#,#estadoInyeccion#,#usuarioFormalizador#,#emailFormalizador#)}

    </procedure>



    <resultMap id="getIngresarSolicitudPechTO" class="java.util.HashMap">

        <result property="numeroSolicitud" column="wf_num_solicitud"       javaType="String"/>

        <result property="codigoEstado"    column="wf_estado_inyeccion"    javaType="String"/>

        <result property="formalizador"    column="ws_usu_formalizador"    javaType="String"/>

        <result property="email"           column="wf_email_formalizador"  javaType="String"/>

    </resultMap>

    

    <procedure id="consultaWorkflowHipotecario" parameterClass="java.util.HashMap" resultMap="getIngresarSolicitudPechTO">

        {CALL sp_cons_workflow_chip(#ticketAtencion#)}

    </procedure>

    

    <procedure id="insertarSolicitudAgendamientoTasacion" parameterClass="java.util.HashMap">

        {CALL sp_ins_sol_agd_tas(#ticketAtencion#, #bloque#, #fechaAgenda#)}

    </procedure>

    

    <!-- Inicio: Consultar Resultado Tasacion -->

    <resultMap id="getConsultarResultadoTasacion" class="java.util.HashMap">

        <result property="idSolicitud"        column="solicitud"       javaType="Integer"/>

        <result property="estadoTasacion"     column="estado"          javaType="String"/>

        <result property="nombreTasador"      column="tasador"         javaType="String"/>

        <result property="fechaTasacion"      column="fecha"           javaType="java.util.Date"/>

        <result property="superficie"         column="superficie"      javaType="Integer"/>

        <result property="valorComercialUF"   column="monto_com"       javaType="Integer"/>

        <result property="valorLiquidadoUF"   column="monto_liq"       javaType="Integer"/>

    </resultMap>



    <procedure id="consultarResultadoTasacion" parameterClass="java.util.HashMap" resultMap="getConsultarResultadoTasacion">

        {CALL sp_cns_valor_tasacion_chip(#ticketAtencion#)}

    </procedure>

    <!-- Fin: Consultar Resultado Tasacion -->

        

    <procedure id="registrarProyectoInmobiliario" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_ins_datos_inmobiliaria(#ticketAtencion#, #nombreProyecto#, #rutInmobiliaria#, #dvInmobiliaria#, #nombreInmobiliaria#, #fechaEntrega#, #comuna#, #proyectoConvenio#, #forzarRegistro#, #flgEstrategico#, #recepcionMunicipal#)}

    </procedure>



    <!-- Inicio Actualizar Estado Tasacion Hipotecaria -->

    <procedure id="actualizarEstadoTasacion" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_upd_estado_tasaciones(

                      #idSolicitud#,

                      #estadoAct#,

                      #tasador#,

                      #fechaTas#,

                      #superficie#,

                      #valorComercial#,

                      #valorLiquidado#,

                      #estadoFin#)}

    </procedure>

    <!-- Fin: Actualizar Estado Tasacion -->

    

    <procedure id="registrarEventoViaje" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_ins_eve_viaje(#codigoViaje#,

                            #tipoEvento#,

                            #numeroSolicitud#,

                            #codigoTipoSolicitud#,

                            #codigoTipoProducto#,

                            #canal#,

                            #codigoUsuario#,

                            #cantidadParametros#,

                            #parametro1#,

                            #parametro2#,

                            #parametro3#,

                            #parametro4#,

                            #numeroRegistros1#,

                            #numeroRegistros2#,

                            #numeroRegistros3#,

                            #numeroRegistros4#,

                            #tipoRequerimiento#,

                            #comentario#,

                            #descripcion#,

                            #ejecutivoIngreso#,

                            #ejecutivoAsignado#,

                            #areaOrigen#,

                            #areaDestino#,

                            #tipo#,

                            #subTarea#,

                            #tarea#,

                            #fechaMaterializa#,

                            #fechaFin#,

                            #fechaCompromiso#,

                            #tiempoEstimado#,

                            #rolDestino#,

                            #rolOrigen#,

                            #oficinaIngreso#,

                            #subTipoEvento#,

                            #comentario1#,

                            #comentario2#,

                            #comentario3#,

                            #comentario4#,

                            #comentario5#,

                            #comentario6#,

                            #comentario7#,

                            #comentario8#,

                            #comentario9#) }

    </procedure>

    

    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.EventoViajeTO" id="resultConsultaEventoPorTipo">

        <result column="evn_codigo"             property="codigoEvento"/>

        <result column="vje_codigo"             property="codigoViaje"/>

        <result column="evn_tipo"               property="tipoEvento"/>

        <result column="num_solicitud"          property="numeroSolicitud"/>

        <result column="cod_tipo_sol"           property="codigoTipoSolicitud"/>

        <result column="cod_tipo_pro"           property="codigoTipoProducto"/>

        <result column="cnl_ing"                property="canal"/>

        <result column="cod_usu"                property="codigoUsuario"/>

        <result column="num_dato"               property="cantidadParametros"/>

        <result column="sol_dato1"              property="parametro1"/>

        <result column="sol_dato2"              property="parametro2"/>

        <result column="sol_dato3"              property="parametro3"/>

        <result column="sol_dato4"              property="parametro4"/>

        <result column="num_recs1"              property="numeroRegistros1"/>

        <result column="num_recs2"              property="numeroRegistros2"/>

        <result column="num_recs3"              property="numeroRegistros3"/>

        <result column="num_recs4"              property="numeroRegistros4"/>

        <result column="req_tipo"               property="tipoRequerimiento"/>

        <result column="est_com"                property="comentario"/>

        <result column="ref_gls"                property="descripcion"/>

        <result column="ref_cod_eje_org"        property="ejecutivoIngreso"/>

        <result column="ref_cod_eje_dst"        property="ejecutivoAsignado"/>

        <result column="ref_cod_ara_org"        property="areaOrigen"/>

        <result column="ref_cod_ara_dst"        property="areaDestino"/>

        <result column="ref_niv_uno"            property="tipo"/>

        <result column="ref_niv_dos"            property="subTarea"/>

        <result column="ref_niv_tres"           property="tarea"/>

        <result column="ref_fec_sol"            property="fechaMaterializa"/>

        <result column="ref_fec_cie"            property="fechaFin"/>

        <result column="ref_fec_sol_prm"        property="fechaCompromiso"/>

        <result column="ref_tmp_sol"            property="tiempoEstimado"/>

        <result column="ref_cod_cgo_dst"        property="rolDestino"/>

        <result column="tod_cod_rol_ori"        property="rolOrigen"/>

        <result column="ofi_org"                property="oficinaIngreso"/>

        <result column="ref_niv_cua"            property="subTipoEvento"/>

        <result column="comentario1"            property="comentario1"/>

        <result column="comentario2"            property="comentario2"/>

        <result column="comentario3"            property="comentario3"/>

        <result column="comentario4"            property="comentario4"/>

        <result column="comentario5"            property="comentario5"/>

        <result column="comentario6"            property="comentario6"/>

        <result column="comentario7"            property="comentario7"/>

        <result column="comentario8"            property="comentario8"/>

        <result column="comentario9"            property="comentario9"/>

    </resultMap>

    <procedure id="consultaEventoPorTipo" parameterClass="java.util.HashMap" resultMap="resultConsultaEventoPorTipo">

        {CALL sp_cns_eve_viaje(#codigoViaje#,#tipoEvento#)}

    </procedure>

    

    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.ProspectoHipotecarioTO" id="resultConsultarViajesChip">

        <result column="prp_rut"                property="rut"/>

        <result column="prp_dv"                 property="digitoVerificador"/>

        <result column="prp_nom"                property="nombres"/>

        <result column="prp_ape_paterno"        property="apellidoPaterno"/>

        <result column="prp_ape_materno"        property="apellidoMaterno"/>

        <result column="prp_email"              property="email"/>

        <result column="vje_codigo"             property="viajeHipotecario.codigo"/>

        <result column="etp_codigo"             property="viajeHipotecario.etapaActual.codigo"/>

        <result column="vje_estado"             property="viajeHipotecario.estado"/>

        <result column="tck_atn_codigo"         property="viajeHipotecario.ticketProspecto.idTicketAtencion"/>

        <result column="vje_fec_hms_ingreso"    property="viajeHipotecario.fechaHoraIngreso"/>

        <result column="vje_id_canal_ini"       property="viajeHipotecario.idCanalInicio"/>

        <result column="vje_usuario_actualiza"  property="viajeHipotecario.usuarioActualiza"/>

        <result column="dtl_do_montoCreditoUf"  property="viajeHipotecario.detalleSimulacionHipotecario.datosOperacion.montoCreditoUf"/>

        <result column="vje_motivo_estado"      property="viajeHipotecario.motivoEstado"/>

        <result column="do_anoCompra"           property="viajeHipotecario.detalleSimulacionHipotecario.datosOperacion.anoCompra" nullValue="0"/>

        <result column="do_mesCompra"           property="viajeHipotecario.detalleSimulacionHipotecario.datosOperacion.mesCompra" nullValue=""/>

    </resultMap>

    <procedure id="consultarViajesChip" parameterClass="java.util.HashMap" resultMap="resultConsultarViajesChip">

        {CALL sp_cns_vjes_chip(#codigoEjecutivo#,#rutProspecto#,#fechaInicio#,#fechaFin#)}

    </procedure>

    

    <!-- Inicio: Consultar Resumen Dashboard -->

    <resultMap id="getConsultarResumenDashboard" class="java.util.HashMap">

        <result property="renta"        column="rta_cal_liq"      javaType="Integer"    nullValue="0"/>

        <result property="idSuc"        column="vje_cod_suc"      javaType="String"     nullValue=""/>

        <result property="idTasacion"   column="sot_sol_id"       javaType="String"     nullValue=""/>

        <result property="idDps"        column="dps_nro_dps"      javaType="String"     nullValue=""/>

        <result property="idWorkflow"   column="wf_num_solicitud" javaType="String"     nullValue=""/>

        <result property="motivoEstado" column="vje_motivo_estado" javaType="String"    nullValue=""/>

    </resultMap>



    <procedure id="consultarResumenDashboard" parameterClass="java.util.HashMap" resultMap="getConsultarResumenDashboard">

        {CALL sp_cns_res_dsh(#ticketAtencion#)}

    </procedure>

    <!-- Fin: Consultar Resumen Dashboard -->

    

    <procedure id="guardarResultadoVisacion" parameterClass="java.util.HashMap">

        {CALL sp_ins_res_visacion(#ticketAtencion#,#resultadoVisacion#)}

    </procedure>



    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.ProspectoHipotecarioTO" id="obtenerProspectoPorTicketResult">

        <result property="rut"                              column="prp_rut"/>

        <result property="digitoVerificador"                column="prp_dv"/>

        <result property="apellidoPaterno"                  column="prp_ape_paterno"/>

        <result property="apellidoMaterno"                  column="prp_ape_materno"/>

        <result property="nombres"                          column="prp_nom"/>

        <result property="situacionLaboral"                 column="prp_cod_sit_lab"/>

        <result property="contratoLaboral"                  column="prp_sit_laboral"/>

        <result property="antiguedadLaboral"                column="prp_antiguedad_laboral" nullValue="0"/>

        <result property="paisNacimiento"                   column="prp_pais"/>

        <result property="email"                            column="prp_email"/>

        <result property="telefono"                         column="prp_telefono"/>

        <result property="fechaHoraIngreso"                 column="prp_fec_hms_ingreso"/>

        <result property="fechaHoraActualizacion"           column="prp_fec_hms_actualiza"/>

        <result property="usuarioActualiza"                 column="prp_usuario_actualiza"/>

        <result property="fechaNacimiento"                  column="prp_fec_nac"/>

        <result property="sexo"                             column="prp_sexo"/>

        <result property="estadoCivil"                      column="prp_est_civil"/>

        <result property="viaje.codigo"                     column="vje_codigo"/>

        <result property="viaje.tipoViaje.codigo"           column="tpo_vje_codigo"/>

        <result property="viaje.etapaActual.codigo"         column="etp_codigo"/>

        <result property="viaje.estado"                     column="vje_estado"/>

        <result property="viaje.motivoEstado"               column="vje_motivo_estado"/>

        <result property="viaje.idCanalInicio"              column="vje_id_canal_ini"/>

        <result property="viaje.idCanalFin"                 column="vje_id_canal_fin"/>

        <result property="viaje.codigoSUC"                  column="vje_cod_suc"/>

        <result property="viaje.ejecutivoAsignadoSGC"       column="vje_eje_asignado_sgc"/>

        <result property="viaje.fechaHoraIngreso"           column="vje_fec_hms_ingreso"/>

        <result property="viaje.fechaHoraActualizacion"     column="vje_fec_hms_actualiza"/>

        <result property="viaje.planSeleccionado"           column="vje_plan_seleccionado"/>

        <result property="viaje.planCalculado"              column="vje_plan_calculado"/>

        <result property="viaje.usuarioActualiza"           column="vje_usuario_actualiza"/>

    </resultMap>



    <procedure id="obtenerProspectoPorTicket" parameterClass="java.util.HashMap" resultMap="obtenerProspectoPorTicketResult">

        {CALL sp_cns_prospecto_ticket(#ticketAtencion#)}

    </procedure>

    

    <procedure id="registrarInstitucionRefinanciamiento" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_ins_inst_refin(#ticketAtencion#,#codigoInstitucion#,#montoCredito#)}

    </procedure>



    <resultMap id="getConsultarTasacionPiloto" class="java.util.HashMap">

        <result property="nota"     column="notaPiloto"       javaType="String"   nullValue="NA"/>

        <result property="precio"   column="valorPropiedad"   javaType="double"   nullValue="0"/>

    </resultMap>



    <procedure id="consultarTasacionPiloto" parameterClass="java.util.HashMap" resultMap="getConsultarTasacionPiloto">

        {CALL sp_cns_tasacion_piloto_chip(#ticketAtencion#)}

    </procedure>

       

    <resultMap id="getConsultarProyectoInmobiliario" class="java.util.HashMap">

        <result property="proyecto"           column="nom_proyecto"     javaType="String"   nullValue="-1/NA"/>

        <result property="rutInmobiliaria"    column="rut_inmobiliaria" javaType="String"   nullValue="0"/>

        <result property="dvInmobiliaria"     column="dv_inmobiliaria"  javaType="String"   nullValue="0"/>

        <result property="inmobiliaria"       column="nom_inmobiliaria" javaType="String"   nullValue="NA"/>

        <result property="fechaEntrega"       column="fecha_entrega"    javaType="String"   nullValue="0/0"/>

        <result property="comuna"             column="pry_comuna"       javaType="String"   nullValue="0"/>

        <result property="convenio"           column="pry_convenio"     javaType="String"   nullValue="0"/>

        <result property="estrategico"        column="pry_estrategico"  javaType="String"   nullValue="0"/>

        <result property="recepcionMunicipal" column="recep_municipal"  javaType="String"   nullValue="0"/>

    </resultMap>



    <procedure id="consultarProyectoInmobiliario" parameterClass="java.util.HashMap" resultMap="getConsultarProyectoInmobiliario">

        {CALL sp_cns_pry_inmobiliario(#ticketAtencion#)}

    </procedure>

    

    <resultMap class="java.util.HashMap" id="getFormularioDps">

        <result property="codigoDps"   column="dps_codigo"     javaType="Integer" />

        <result property="codigoViaje"   column="vje_codigo"     javaType="Integer" />

        <result property="numeroDps"   column="dps_nro_dps"     javaType="Integer" />

        <result property="estadoRespuestaDps"   column="dps_est_respta_dps"     javaType="String" />

        <result property="estadoSeguroIndividual"   column="dps_est_prop_indv"     javaType="String" />

        <result property="estadoSeguroColectivo"   column="dps_est_prop_colt"     javaType="String" />

        <result property="nombreContratante"   column="dps_nom_contratante"     javaType="String" />

        <result property="rutContratante"   column="dps_rut_contratante"     javaType="Long" />

        <result property="dvContratante"   column="dps_dv_contratante"     javaType="String" />

        <result property="nombreEjecutivo"   column="dps_nombre_ejecutivo"     javaType="String" />

        <result property="sucursal"   column="dps_sucursal"     javaType="String" />

        <result property="nombreAsegurado"   column="dps_nom_aseg"     javaType="String" />

        <result property="rutAsegurado"   column="dps_rut_aseg"     javaType="Long" />

        <result property="dvAsegurado"   column="dps_dv_aseg"     javaType="String" />

        <result property="sexoAsegurado"   column="dps_sexo_aseg"     javaType="String" />

        <result property="estadoCivilAsegurado"   column="dps_estado_civil_aseg"     javaType="String" />

        <result property="direccionAsegurado"   column="dps_direc_aseg"     javaType="String" />

        <result property="ciudadAsegurado"   column="dps_ciudad_aseg"     javaType="String" />

        <result property="comunaAsegurado"   column="dps_comuna_aseg"     javaType="String" />

        <result property="fonoAsegurado"   column="dps_fono_aseg"     javaType="String" />

        <result property="emailAsegurado"   column="dps_email_aseg"     javaType="String" />

        <result property="pesoAsegurado"   column="dps_peso_aseg"     javaType="Integer" />

        <result property="tallaAsegurado"   column="dps_talla_aseg"     javaType="Integer" />

        <result property="numeroPoliza"   column="dps_nro_poliza"     javaType="Integer" />

        <result property="montoCredito"   column="dps_monto_credito"     javaType="Double" />

        <result property="plazoCredito"   column="dps_plazo_credito"     javaType="Integer" />

        <result property="primaUF"   column="dps_prima_uf_credito"     javaType="Double" />

        <result property="fechaIngreso"   column="dps_fec_hms_ingreso"     javaType="Date" />

        <result property="fechaNacAsegurado"   column="dps_fecha_nac_aseg"     javaType="Date" />

    </resultMap>

    

    <procedure id="consultarFormularioDps" resultMap="getFormularioDps" >

        {CALL sp_cns_formulario_dps(#ticketAtencion#)}

    </procedure>

    

    <resultMap class="java.util.HashMap" id="getDetalleFormularioDps">

        <result property="codigoPregunta"   column="ddps_cod_pregunta"     javaType="Integer" />

        <result property="glosaPregunta"   column="ddps_glosa_pregunta"     javaType="String" />

        <result property="respuesta"   column="ddps_respuesta"     javaType="String" />

        <result property="respuestaAdicional"   column="ddps_respuesta_txt_ad"     javaType="String" />

    </resultMap>

    

    <procedure id="consultarDetalleFormularioDps" resultMap="getDetalleFormularioDps" >

        {CALL sp_cns_cuestionario_dps(#codigoDps#)}

    </procedure>

    

    <resultMap class="java.util.HashMap" id="consultaEncabezadoRentaResult">

        <result property="idRegistro"   column="cot_enc_id_reg"     javaType="Integer" />

        <result property="fechaConsulta"   column="cot_enc_fec_consulta"     javaType="Date" />

        <result property="estadoRenta"   column="cot_enc_cod_est_renta"     javaType="Integer" />

        <result property="actualizaDGC"   column="cot_enc_actualizaDGC"     javaType="Integer" />

        <result property="actualizaSGC"   column="cot_enc_actualizaSGC"     javaType="Integer" />

        <result property="fechaActualiza"   column="cot_enc_fec_actualiza"     javaType="Date" />

        <result property="fechaRentaVariable"   column="cot_enc_fec_rta_var"     javaType="Date" />

        <result property="folio"   column="cot_enc_folio"     javaType="String" />

        <result property="firma"   column="cot_enc_txt_firma"     javaType="String" />

        <result property="fechaInformacionLegal"   column="cot_enc_fec_inf_legal"     javaType="Date" />

        <result property="rentaFijaProporcionalPrevired"  column="cot_enc_rta_fij_prop_prev"   jdbcType="DECIMAL" javaType="Double" />

        <result property="rentaVariableProporcionalPrevired" column="cot_enc_rta_var_prop_prev" jdbcType="DECIMAL" javaType="Double" />

        <result property="rentaFijaCalculada" column="cot_enc_rta_rfi_cal" jdbcType="FLOAT"    javaType="Double" />

        <result property="rentaVariableCalculada"  column="cot_enc_rta_rvr_cal" jdbcType="FLOAT"    javaType="Double" />

    </resultMap>

    

    <procedure id="consultaEncabezadoRenta" parameterClass="java.util.HashMap" 

        resultMap="consultaEncabezadoRentaResult">

     {CALL sp_cns_cotizaciones_enc(#rutProspecto#,#codigoViaje#)}

    </procedure>

     

    <resultMap class="java.util.HashMap" id="consultaDetalleRentaResult">

        <result property="idRegistro"   column="cot_enc_id_reg"     javaType="Integer" />

        <result property="idCotizacion"   column="cre_id_cotizacion"     javaType="Integer" />

        <result property="fechaMes"   column="cre_fec_mes"     javaType="Date" />

        <result property="montoRemuneracion"   column="cre_mto_remun"     javaType="Integer" />

        <result property="montoCotizacion"   column="cre_mto_cotizacion"     javaType="Integer" />

        <result property="fechaPago"   column="cre_fec_pago"     javaType="Date" />

        <result property="descripcionTipo"   column="cre_des_tipo"     javaType="String" />

        <result property="rutEmpleador"   column="cre_rut_empleador"     javaType="Integer" />

        <result property="dvEmpleador"   column="cre_dv_empleador"     jdbcType="CHAR"     javaType="String" />

        <result property="nombreAfp"   column="cre_nom_afp"     javaType="String" />

    </resultMap>

    

    <procedure id="consultaDetalleRenta" parameterClass="java.util.HashMap" 

        resultMap="consultaDetalleRentaResult">

     {CALL sp_cns_cotizacion_detalle(#idRegistro#)}

    </procedure>

    <procedure id="registrarSituacionLaboral">

        {CALL sp_upd_reg_sit_laboral(#rut#, #codSituacionLaboral#)}

    </procedure>



    <resultMap class="java.util.HashMap" id="getCliRentaDesactualizada">

        <result property="codViaje"                 column="vje_cod"            javaType="Integer" />

        <result property="nombre"                   column="nombre"             javaType="String" />

        <result property="apellidoPaterno"          column="apellido_paterno"   javaType="String" />

        <result property="apellidoMaterno"          column="apellido_materno"   javaType="String" />

        <result property="rut"                      column="rut"                javaType="Long" />

        <result property="dv"                       column="dv"                 javaType="String" />

        <result property="canal"                    column="canal"              javaType="Integer" />

        <result property="subCanal"                 column="sub_canal"          javaType="Integer" />

        <result property="fechaUltimaSimulacion"    column="f_ult_simulacion"   javaType="java.sql.Date" />

        <result property="renta"                    column="renta"              javaType="Long" />

    </resultMap>



    <procedure id="consultarCliRentaDesactualizada" resultMap="getCliRentaDesactualizada" >

        {CALL sp_cns_cli_rent_desact(#cod_ejecutivo#,#desde#,#hasta#)}

    </procedure>

    

    <procedure id="aumentarNumeroIntentosPrevired" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_upd_intentos_previred(#ticketAtencion#)}

    </procedure>

    

    <procedure id="registrarFlagCodeudor" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_ins_flag_codeudor_hip(#codigoViaje#,#poseeCodeudor#)}

    </procedure>



    <resultMap class="java.util.HashMap" id="getClienteSucAprob">

        <result property="codViaje"          column="codigo_viaje"       javaType="Integer" />

        <result property="nombre"            column="nombre"             javaType="String" />

        <result property="apellidoPaterno"   column="apellido_paterno"   javaType="String" />

        <result property="apellidoMaterno"   column="apellido_materno"   javaType="String" />

        <result property="rut"               column="rut"                javaType="Long" />

        <result property="dv"                column="dv"                 javaType="String" />

        <result property="canal"             column="canal"              javaType="Integer" />

        <result property="subCanal"          column="sub_canal"          javaType="Integer" />

        <result property="fechaSimulacion"   column="fecha_simulacion"   javaType="java.sql.Date" />

        <result property="codSuc"            column="suc_aprobada"       javaType="Long" />

    </resultMap>



    <procedure id="consultarClienteSucAprobada" resultMap="getClienteSucAprob" >

        {CALL sp_cns_cli_suc_aprob(#cod_ejecutivo#,#desde#,#hasta#)}

    </procedure>



    <procedure id="actualizarEstadoViaje" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_upd_estado_vje(#rut#, #ticketAtencion#,#nuevoEstado#,#motivoEstado#)}

    </procedure>

    

    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.ProspectoHipotecarioTO" id="obtenerProspectoCodeudorResult">

        <result property="rut"                              column="prp_rut"/>

        <result property="digitoVerificador"                column="prp_dv"/>

        <result property="apellidoPaterno"                  column="prp_ape_paterno"/>

        <result property="apellidoMaterno"                  column="prp_ape_materno"/>

        <result property="nombres"                          column="prp_nom"/>

        <result property="situacionLaboral"                 column="prp_cod_sit_lab"/>

        <result property="antiguedadLaboral"                column="prp_antiguedad_laboral" nullValue="0"/>

        <result property="paisNacimiento"                   column="prp_pais"/>

        <result property="email"                            column="prp_email"/>

        <result property="telefono"                         column="prp_telefono"/>

        <result property="fechaHoraIngreso"                 column="prp_fec_hms_ingreso"/>

        <result property="fechaHoraActualizacion"           column="prp_fec_hms_actualiza"/>

        <result property="usuarioActualiza"                 column="prp_usuario_actualiza"/>

        <result property="fechaNacimiento"                  column="prp_fec_nac"/>

        <result property="viaje.codigo"                     column="vje_codigo"/>

        <result property="viaje.tipoViaje.codigo"           column="tpo_vje_codigo"/>

        <result property="viaje.etapaActual.codigo"         column="etp_codigo"/>

        <result property="viaje.estado"                     column="vje_estado"/>

        <result property="viaje.motivoEstado"               column="vje_motivo_estado"/>

        <result property="viaje.idCanalInicio"              column="vje_id_canal_ini"/>

        <result property="viaje.idCanalFin"                 column="vje_id_canal_fin"/>

        <result property="viaje.codigoSUC"                  column="vje_cod_suc"/>

        <result property="viaje.ejecutivoAsignadoSGC"       column="vje_eje_asignado_sgc"/>

        <result property="viaje.fechaHoraIngreso"           column="vje_fec_hms_ingreso"/>

        <result property="viaje.fechaHoraActualizacion"     column="vje_fec_hms_actualiza"/>

        <result property="viaje.planSeleccionado"           column="vje_plan_seleccionado"/>

        <result property="viaje.planCalculado"              column="vje_plan_calculado"/>

        <result property="viaje.usuarioActualiza"           column="vje_usuario_actualiza"/>

    </resultMap>



    <procedure id="obtenerProspectoCodeudor" parameterClass="java.util.HashMap" resultMap="obtenerProspectoCodeudorResult">

        {CALL sp_cns_prospecto_codeudor(#ticketAtencion#)}

    </procedure>

    

    <procedure id="creaActualizaProspectoCodeudor">

        {CALL sp_ins_actualiza_codeudor_hip(#ticket#,#rut#,#dv#,#nombres#,

        #apellidoPaterno#,#apellidoMaterno#,#fechaNacimiento#,#email#,#telefono#,#usuarioActualiza#)}

    </procedure>

    

    <procedure id="actualizaEstadoDPS" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_upd_estados_dps(#numeroDPS#, #estadoDps#, #motivoEstadoDps#)}

    </procedure>

	

	 <procedure id="insertarFechaDeSucEnMargen">

        {CALL sp_ins_suc_margen(#ticketAtencion#, #fechaUltimoIntento#)}

    </procedure>

    <procedure id="insertarCierreNegocio" parameterClass="java.util.HashMap">

       {CALL sp_ins_cierre_negocio(#rut#, #ticketAtencion#, #fecha#, #valor#)}

   </procedure>

    <procedure id="insertarAceptacionComercial" parameterClass="java.util.HashMap">

        {CALL sp_ins_aceptacion_comercial(#rut#, #ticketAtencion#)}

    </procedure>

    <procedure id="insertarDetalleViaje" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_ins_det_vje_chip(#codViaje#, #llaveDetalle#, #valorDetalle#, #ticketAtencion#)}

    </procedure>



    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.DetalleViajeTO" id="getDetallesViaje">

        <result property="codViaje" column="vje_codigo" javaType="integer" />

        <result property="llaveDetalleViaje" column="dtl_vje_llave" javaType="string" />

        <result property="detalleValor" column="dtl_vje_valor" javaType="string" />

    </resultMap>



    <procedure id="obtenerDetallesViaje" parameterClass="java.util.HashMap" resultMap="getDetallesViaje">

        {CALL sp_cns_det_vje_chip(#ticketAtencion#)}

    </procedure>

	

	<procedure id="updEstadoEnvioMail" parameterClass="java.util.HashMap">

        {CALL sp_upd_estado_envio_mail(#rut#)}

    </procedure>

	

	<procedure id="insertarDetalleViajePlanes" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_ins_det_viaje_plan(#codViaje#,#llaveDetalle#,#valorDetalle#)}

    </procedure>

	

	<resultMap id="getRespuestaDetalleViaje" class="java.util.HashMap" >

        <result property="idDetalleCodigo" column="dtl_vje_cod" javaType="Integer" />

		<result property="codigoViaje" column="vje_codigo" javaType="Integer" />

		<result property="llaveDetalle" column="dtl_vje_llave" javaType="String" />

		<result property="valorDetalle" column="dtl_vje_valor" javaType="String" />

    </resultMap>

	

	<procedure id="obtenerDetalleViaje" parameterClass="java.util.HashMap" resultMap="getRespuestaDetalleViaje">

        {CALL sp_cns_det_vje_plan(#codigoViaje#,#detViajeLlave#)}

    </procedure>

		

	<resultMap id="getRespuestaObtenerInformacionCorreoPlanes" class="java.util.HashMap" >

        <result property="rutProspecto" column="prp_rut" javaType="Integer" />

		<result property="nombre" column="prp_nom" javaType="String" />

		<result property="apellidoPaterno" column="prp_ape_paterno" javaType="String" />

		<result property="apellidoMaterno" column="prp_ape_materno" javaType="String" />

		<result property="codigoViaje" column="vje_codigo" javaType="Integer" />

		<result property="emailProspecto" column="prp_email" javaType="String" />

		<result property="ticketAtencion" column="tck_atn_codigo" javaType="Integer" />

    </resultMap>

	

	<procedure id="obtenerInformacionCorreoPlanes" parameterClass="java.util.HashMap" 

	resultMap="getRespuestaObtenerInformacionCorreoPlanes">

        {CALL sp_cns_info_email_vje_plan(#rutPropecto#)}

    </procedure>

	

	



    <procedure id="insertarPersonaTasacion" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_ins_persona_tasacion(#ticketAtencion#, #codigoTipoPersona#, #nombres#, #apellidos#, #rut#, #dv#, #telefono#, #email#,#esPersonaContacto#)}

    </procedure>



    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.TipoPersonaTasacionTO" id="getTiposPersona">

        <result property="codigo" column="tpt_codigo" javaType="integer" />

        <result property="glosa" column="tpt_glosa" javaType="string" />

        <result property="descripcion" column="tpt_descripcion" javaType="string" />

    </resultMap>



    <procedure id="obtenerTiposPersona" resultMap="getTiposPersona">

        {CALL sp_cns_tipo_persona_tasacion()}

    </procedure>



    <resultMap class="wcorp.aplicaciones.atenciondecliente.venta.oportunidad.to.PersonaTasacionHipotecarioTO" id="getPersonasTasacion">

        <result property="codigoTipoPersona" column="tpt_codigo" javaType="integer" />

        <result property="nombres" column="pth_nombres" javaType="string" />

        <result property="apellidoPaterno" column="pth_apellido_pat" javaType="string" />

        <result property="rut" column="pth_rut" javaType="integer" />

        <result property="digitoVerificador" column="pth_dv" javaType="string" />

        <result property="telefono" column="pth_tel_contacto" javaType="string" />

        <result property="email" column="pth_email_contacto" javaType="string" />

        <result property="esPersonaContacto" column="pth_es_persona_contacto" javaType="boolean" />

    </resultMap>



    <procedure id="obtenerPersonasTasacion" parameterClass="java.util.HashMap" resultMap="getPersonasTasacion">

        {CALL sp_cns_personas_tasacion(#ticketAtencion#)}

    </procedure>



    <procedure id="eliminarPersonasTasacion" parameterClass="java.util.HashMap" resultClass="int">

        { CALL sp_del_personas_tasacion(#ticketAtencion#)}

    </procedure>



    <procedure id="obtenerVendedoresTasacion" parameterClass="java.util.HashMap" resultMap="getPersonasTasacion">

        {CALL sp_cns_vendedores_tasacion(#ticketAtencion#)}

    </procedure>
	
    <procedure id="actualizarViajePorPlanSeleccionado" parameterClass="java.util.HashMap" resultClass="int">

        {CALL sp_upd_viaje_por_plan_seleccionado(#idTicket#,#codPlan#)}
    </procedure>

    <procedure id="insertarResultadoSolicitudChip" parameterClass="java.util.HashMap" resultClass="int">
        {CALL sp_ins_res_suc_chip(#ticketAtencion#,#numeroSolicitud#,#estadoSolicitud#,#mensajeResolucion#,#montoResolucion#, #plazoResolucion#)}
    </procedure>

   <procedure id="eliminaProspectoViaje" parameterClass="java.util.HashMap" resultClass="int">
        { CALL sp_del_prospecto_viaje(#rutProspecto#)}
   </procedure>
   
	<procedure id="calculaExpiracionViaje" parameterClass="java.util.HashMap" resultClass="int">
		{ CALL sp_calc_exp_viaje(#rutProspecto#,#ticketAtencion#,#diasMax#)}
	</procedure>
    <!-- consultar codigo ticket viaje cliente -->

    <resultMap id="getCodigoTickViajeCli" class="java.util.HashMap">
        <result property="ticketAtencion" column="codTickViajeCli" javaType="String" />
    </resultMap>

    <procedure id="codigoTickViajeCli" resultMap="getCodigoTickViajeCli">
        { CALL sp_cn_viaje_rut(#rutCliente#) }
    </procedure>

    <!-- fin consultar cuenta origen -->
</sqlMap>
