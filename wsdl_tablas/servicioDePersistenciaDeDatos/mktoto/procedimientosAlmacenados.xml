<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
    
<sqlMap namespace="mktoto.procedimientosAlmacenados">
    
<!-- SECCION BANCARIZACION DE CAMPANAS - NIVEL JERARQUICO-->

    <resultMap id="usuario" class="java.util.HashMap">
        <result property="usuario" javaType="String" column="userid" jdbcType="char" />
        <result property="rut" javaType="String" column="rut" jdbcType="char" />
        <result property="nombre" javaType="String" column="nombre" jdbcType="char" />
        <result property="oficinaGestion" javaType="String" column="ofi_gj" jdbcType="char" />
        <result property="codigoDeBanca" javaType="String" column="bca_gj" jdbcType="char" />
        <result property="nombreDeCargo" javaType="String" column="desc_cargo" jdbcType="char" />
        <result property="oficina" javaType="String" column="oficina" jdbcType="char" />
        <result property="codigoDeCargo" javaType="String" column="id_pst" jdbcType="char" />
        <result property="codigoPrecedencia" javaType="String" column="precedencia" jdbcType="char" />
        <result property="tipoDeEjecutivo" javaType="String" column="tip_eje" jdbcType="char" />
        <result property="regionalPersona" javaType="String" column="regional_per" jdbcType="char" />
        <result property="oficinaPersona" javaType="String" column="oficina_per" jdbcType="char" />
        <result property="regionalEmpresa" javaType="String" column="regional_emp" jdbcType="char" />
        <result property="plataforma" javaType="String" column="plataforma" jdbcType="char" />
        <result property="codigoZonalPersona" javaType="String" column="cod_zonal_per" jdbcType="char" />
        <result property="descripcionZonalPersona" javaType="String" column="desc_zonal_per" jdbcType="char" />
    </resultMap>

    <resultMap id="zonal" class="java.util.HashMap">
        <result property="codigoZonal" javaType="String" column="codigoZonal" jdbcType="char" />
        <result property="descripcionZonal" javaType="String" column="descripcionZonal" jdbcType="char" />
    </resultMap>

    <resultMap id="regional" class="java.util.HashMap">
        <result property="codigoRegional" javaType="String" column="grupo3" jdbcType="char" />
        <result property="descripcionRegional" javaType="String" column="desc_grupo3" jdbcType="char" />
    </resultMap>

    <resultMap id="subBanca" class="java.util.HashMap">
        <result property="codigoRegional" javaType="String" column="cod_sub_bca" jdbcType="char" />
        <result property="descripcionRegional" javaType="String" column="sub_bca_desc" jdbcType="char" />
    </resultMap>

    <resultMap id="subBancaEmpresa" class="java.util.HashMap">
        <result property="codigoZonal" javaType="String" column="cod_sub_bca" jdbcType="char" />
        <result property="descripcionZonal" javaType="String" column="sub_bca_desc" jdbcType="char" />
    </resultMap>

    <resultMap id="plataforma" class="java.util.HashMap">
        <result property="codigoPlataforma" javaType="String" column="grupo4" jdbcType="char" />
        <result property="descripcionPlataforma" javaType="String" column="plataforma" jdbcType="char" />
    </resultMap>
    
    <resultMap id="oficina" class="java.util.HashMap">
        <result property="codigoOficina" javaType="String" column="oficina" jdbcType="char" />
        <result property="descripcionOficina" javaType="String" column="ofi_des" jdbcType="char" />
    </resultMap>
    
    <resultMap id="oficinaD" class="java.util.HashMap">
        <result property="codOficinaD" javaType="String" column="cod_ofi_d" jdbcType="char" />
        <result property="codigoOficina" javaType="String" column="oficina" jdbcType="char" />
    <result property="descripcionOficina" javaType="String" column="ofi_des" jdbcType="char" />
    </resultMap>
    
    <resultMap id="ejecutivo" class="java.util.HashMap">
        <result property="usuario" javaType="String" column="userid" jdbcType="char" />
        <result property="rut" javaType="String" column="rut" jdbcType="char" />
        <result property="nombre" javaType="String" column="nombre" jdbcType="char" />
    </resultMap>

    <resultMap id="centro" class="java.util.HashMap">
        <result property="codigoCentroEmpresario" javaType="String" column="id_centro" jdbcType="char" />
        <result property="descripcionCentroEmpresario" javaType="String" column="descripcion_centro" jdbcType="char" />
    </resultMap>
    <resultMap id="centroEmpresario" class="java.util.HashMap">
        <result property="codigoCentroEmpresario" javaType="String" column="id_centro" jdbcType="char" />
        <result property="descripcionCentroEmpresario" javaType="String" column="descripcion_centro" jdbcType="char" />
        <result property="codigoRegional" javaType="String" column="cod_regional" jdbcType="char" />
    </resultMap>
    <resultMap id="unidad" class="java.util.HashMap">
        <result property="codigoDeCargo" javaType="String" column="id_pst" jdbcType="char" />
        <result property="nombreDeCargo" javaType="String" column="desc_cargo" jdbcType="char" />
    </resultMap>

    <!-- sp_cns_usu(@@usr_idn) -->
    <procedure id="consultaUsuario" parameterClass="java.util.HashMap" resultMap="usuario">
        {CALL sp_cns_usu(#identificador#)}
    </procedure>

    <!-- sp_cns_gtz_p() -->
    <procedure id="consultaZonalesPersona" resultMap="zonal">
        {CALL sp_cns_gtz_p()}
    </procedure>

    <procedure id="consultaZonalesInversiones" resultMap="zonal">
        {CALL sp_cns_gtz_inv()}
    </procedure>

    <!-- sp_cns_gtr_p() -->
    <procedure id="consultaRegionalesPersona" resultMap="regional">
        {CALL sp_cns_gtr_p(#codigoZonal#)}
    </procedure>
    
     <procedure id="consultaSubBancaEmpresa" resultMap="subBancaEmpresa">
        {CALL sp_cns_sub_bca(#codigoBanca#)}
    </procedure>
    <procedure id="consultaRegionalesInversiones" resultMap="regional">
        {CALL sp_cns_gtr_inv(#codigoZonal#)}
    </procedure>
    
    <procedure id="consultaSubBanca" resultMap="subBanca">
        {CALL sp_cns_sub_bca(#codigoBanca#)}
    </procedure>

    <procedure id="consultaGerentesComercialesProservice" resultMap="regional">
        {CALL sp_cns_ger_pro()}
    </procedure>
    
    <!-- sp_cns_jof_p(@cod_reg) -->
    <procedure id="consultaOficinasPersona" parameterClass="java.util.HashMap" resultMap="oficina">
        {CALL sp_cns_jof_p(#codigoRegional#)}
    </procedure>
    
    <procedure id="obtenerOficinasD" parameterClass="java.util.HashMap" resultMap="oficina">
        {CALL sp_cns_ofi_d()}
    </procedure>
    
    <procedure id="obtenerPlaraformasPersonas" parameterClass="java.util.HashMap" resultMap="oficina">
        {CALL sp_cns_pla_p()}
    </procedure>
    
<!-- sp_cns_jof_tbanc(@cod_reg) -->
 
<procedure id="consultaOficinasTbanc" parameterClass="java.util.HashMap" resultMap="oficina">
        {CALL sp_cns_jof_tbanc(#codigoRegional#)}
    </procedure>
   <procedure id="consultaOficinasInversiones" parameterClass="java.util.HashMap" resultMap="oficina">
        {CALL sp_cns_jof_inv(#codigoRegional#)}
    </procedure>
    
    <procedure id="consultaJefesEspecialistas" parameterClass="java.util.HashMap" resultMap="oficina">
        {CALL sp_cns_jof_esp(#codigoRegional#)}
    </procedure>
    
    <procedure id="consultaJefesFuerzaDeVenta" parameterClass="java.util.HashMap" resultMap="oficina">
        {CALL sp_cns_jof_fvt()}
    </procedure>
    
    <procedure id="consultaJefesProservice" parameterClass="java.util.HashMap" resultMap="oficina">
        {CALL sp_cns_jof_pro(#codigoRegional#)}
    </procedure>
    
    
    <!-- sp_cns_eje_p(@cod_ofi) -->
    <procedure id="consultaEjecutivosPersona" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_p(#codigoNivel#)}
    </procedure>
    
    <procedure id="consultarEjecutivosEspecialistas" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_esp(#codigoNivel#)}
    </procedure>
    
    <procedure id="consultarEjecutivosProservice" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_pro(#codigoNivel#)}
    </procedure>
    
    <procedure id="consultarEjecutivosFuerzaDeVenta" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_fvt(#codigoNivel#)}
    </procedure>
    
    <!-- sp_cns_rgl_e() -->
    <procedure id="consultaRegionalesEmpresa" resultMap="regional">
        {CALL sp_cns_rgl_e(#codigoZonal#)}
    </procedure>
    
    <!-- sp_cns_pla_e(@cod_reg) -->
    <procedure id="consultaPlataformasEmpresa" parameterClass="java.util.HashMap" resultMap="plataforma">
        {CALL sp_cns_pla_e(#codigoRegional#)}
    </procedure>

    <!-- sp_cns_pla_tbanc() -->
    <procedure id="consultaPlataformasTbanc" parameterClass="java.util.HashMap" resultMap="oficina">
        {CALL sp_cns_pla_tbanc(#codigoBanca#)}
    </procedure>

    <!-- sp_cns_eje_tbanc(@cod_plat) -->
    <procedure id="consultarEjecutivosTbanc" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_tbanc(#codigoNivel#)}
    </procedure>

    <procedure id="consultarEjecutivosInversiones" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_inv(#codigoNivel#)}
    </procedure>

    <!-- sp_cns_eje_e(@cod_plt) -->
    <procedure id="consultaEjecutivosEmpresa" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_e(#codigoPlataforma#)}
    </procedure>

    <!-- sp_cns_cem_pm() -->
    <procedure id="consultaCentrosEmprendedores" resultMap="centro">
        {CALL sp_cns_cem_pm()}
    </procedure>

    <!-- sp_cns_eje_pm (cod_cem char(15)) -->
    <procedure id="consultaEjecutivosEmprendedores" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_pm(#codigoCentroEmpresario#)}
    </procedure>

    <!-- sp_cns_rgl_epm() -->
    <procedure id="consultaRegionalesEmpresario" resultMap="regional">
        {CALL sp_cns_rgl_epm()}
    </procedure>

    <!-- sp_cns_cem_epm() -->
    <procedure id="consultaCentrosEmpresario" resultMap="centro">
        {CALL sp_cns_cem_epm(#codigoRegional#)}
    </procedure>

    <!-- sp_cns_eje_epm (cod_cem char(15)) -->
    <procedure id="consultaEjecutivosEmpresario" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_epm(#codigoCentroEmpresario#)}
    </procedure>

    <!-- sp_cns_uni_lea() -->
    <procedure id="consultaUnidadesLeasing" resultMap="unidad">
        {CALL sp_cns_uni_lea()}
    </procedure>

    <!-- sp_cns_usu_pre(in cod_uni varchar(15)) -->
    <procedure id="consultaEjecutivosLeasing" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_usu_pre(#codigoNivel#)}
    </procedure>

    <!-- sp_cns_uni_fct() -->
    <procedure id="consultaUnidadesFactoring" resultMap="unidad">
        {CALL sp_cns_uni_fct()}
    </procedure>
    
    <!-- sp_cns_usu_pre(in cod_uni varchar(15)) -->
    <procedure id="consultaEjecutivosFactoring" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_usu_pre(#codigoNivel#)}
    </procedure>

    
    <!-- sp_cns_eje_pbp(@cod_ofi varchar(15)) -->
    <procedure id="consultarEjecutivosBancaPreferencial" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_pbp(#codigoNivel#)}
    </procedure>

<!-- TERMINO SECCION BANCARIZACION DE CAMPANAS - NIVEL JERARQUICO-->


<!-- SECCION INFORME CAMPANAS -->
    
    <resultMap id="listadoNivel" class="java.util.HashMap">
        <result property="codigo" javaType="String" column="codigo"/>
        <result property="descripcion" javaType="String" column="nivel"/>
    </resultMap>
    
    <resultMap id="listadoProductos" class="java.util.HashMap">
        <result property="codigo" javaType="String" column="codigo"/>
        <result property="descripcion" javaType="String" column="producto"/>
    </resultMap>
    
    <resultMap id="listadoCampanas" class="java.util.HashMap">
        <result property="codigo" javaType="String" column="codigo"/>
        <result property="descripcion" javaType="String" column="campana"/>
    </resultMap>
    
    <resultMap id="gestionTotal" class="java.util.HashMap">
        <result property="nivelSeleccionado" javaType="String" column="niv_sel"/>
        <result property="nivelSiguiente" javaType="String" column="niv_sgte"/>
        <result property="codigoEjecutivo" javaType="String" column="cod_eje"/>
        <result property="cantidadEjecutivos" column="cant_eje"/>
    <result property="cantidadDiasTrabajados" column="cant_dias_trab"/>
        <result property="rutContactoEfectivo" javaType="String" column="rut_cnt_efect"/>
        <result property="contactoEfectivo" javaType="String" column="cnt_efect"/>
        <result property="totalProductosGestionados" javaType="long" column="gest_total"/>
        <result property="autogeneradas" javaType="long" column="autogenerado"/>
        <result property="campanas" javaType="long" column="campania"/>
        <result property="aceptadas" javaType="long" column="aceptada"/>
        <result property="agendadosAlDia" javaType="long" column="agn_al_dia"/>
        <result property="agendadasAtrasadas" javaType="long" column="agn_atrazado"/>
        <result property="totalAgendados" javaType="long" column="total_agn"/>
        <result property="rechazoCliente" javaType="long" column="rch_cliente"/>
        <result property="rechazoBanco" javaType="long" column="rch_banco"/>
        <result property="noUbicable" javaType="long" column="no_ubicable"/>
        <result property="productosActivados" javaType="long" column="prd_activado"/>
        <result property="porcentajeUsoHerramienta" javaType="long" column="pcj_uso"/>
        <result property="leadPorGestionar" javaType="long" column="lead_no_gest"/>
    </resultMap>
    
    <resultMap id="winRate" class="java.util.HashMap">
        <result property="nivelSeleccionado" javaType="String" column="niv_sel"/>
        <result property="nivelSiguiente" javaType="String" column="niv_sgte"/>
        <result property="ejecutivo" javaType="String" column="cod_eje"/>
        <result property="numeroEjecutivos" javaType="String" column="cant_eje"/>
        <result property="tasaAceptacion" javaType="long" column="tacp"/>
        <result property="tasaActivacion" javaType="long" column="tact"/>
        <result property="productosAceptados" javaType="long" column="acept"/>
        <result property="productosActivados" javaType="long" column="activ"/>
        <result property="contactoEfectivo" javaType="long" column="cont_efect"/>
        <result property="campanasAceptadas" javaType="long" column="camp_acept"/>
    </resultMap>
    
    <resultMap id="evolutivo" class="java.util.HashMap">
        <result property="nivelSeleccionado" javaType="String" column="niv_sel"/>
        <result property="nivelSiguiente" javaType="String" column="niv_sgte"/>
        <result property="ejecutivo" javaType="String" column="cod_eje"/>
        <result property="numeroEjecutivos" column="cant_eje"/>
        <result property="fecha1"  javaType="long" column="fecha1"/>
        <result property="fecha2"  javaType="long" column="fecha2"/>
        <result property="fecha3"  javaType="long" column="fecha3"/>
        <result property="fecha4"  javaType="long" column="fecha4"/>
        <result property="fecha5"  javaType="long" column="fecha5"/>
        <result property="fecha6"  javaType="long" column="fecha6"/>
        <result property="fecha7"  javaType="long" column="fecha7"/>
        <result property="fecha8"  javaType="long" column="fecha8"/>
        <result property="fecha9"  javaType="long" column="fecha9"/>
        <result property="fecha10" javaType="long" column="fecha10"/>
        <result property="fecha11" javaType="long" column="fecha11"/>
        <result property="fecha12" javaType="long" column="fecha12"/>
    </resultMap>
    
    <procedure id="obtenerListadoZonal" parameterClass="java.util.HashMap" resultMap="listadoNivel">
        {CALL sp_inf_cmp_cns_ger(#banca#)}
    </procedure>
    
    <procedure id="obtenerListadoRegional" parameterClass="java.util.HashMap" resultMap="listadoNivel">
        {CALL sp_inf_cmp_cns_reg(#banca#,#nivel#)}
    </procedure>
    
    <procedure id="obtenerListadoOficina" parameterClass="java.util.HashMap" resultMap="listadoNivel">
        {CALL sp_inf_cmp_cns_ofi(#banca#,#nivel#)}
    </procedure>
    
    <procedure id="obtenerListadoEjecutivo" parameterClass="java.util.HashMap" resultMap="listadoNivel">
        {CALL sp_inf_cmp_cns_eje(#banca#,#nivel#)}
    </procedure>
    
    <procedure id="obtenerProductos" parameterClass="java.util.HashMap" resultMap="listadoProductos">
        {CALL sp_inf_cmp_cns_prod()}
    </procedure>
    
    <procedure id="obtenerCampanas" parameterClass="java.util.HashMap" resultMap="listadoCampanas">
        {CALL sp_inf_cmp_cns_cmp(#producto#)}
    </procedure>
    
    <procedure id="obtenerGestionTotal" parameterClass="java.util.HashMap" resultMap="gestionTotal">
        
        {CALL sp_inf_cmp_ges_tot(
        <isNotNull property="banca">#banca#</isNotNull>
        <isNull property="banca">NULL</isNull>
        ,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
        <isNull property="nivel_uno">NULL</isNull>
        ,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
        <isNull property="nivel_dos">NULL</isNull>
        ,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
        <isNull property="nivel_tres">NULL</isNull>
        ,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
        <isNull property="ejecutivo">NULL</isNull>
        ,#tipo#
        ,#fecha_inicio#
        ,#fecha_fin#
        ,<isNotNull property="producto">#producto#</isNotNull>
        <isNull property="producto">NULL</isNull>
        ,<isNotNull property="campana">#campana#</isNotNull>
        <isNull property="campana">NULL</isNull>)} 
        
    </procedure>
    
    <procedure id="obtenerWinRate" parameterClass="java.util.HashMap" resultMap="winRate">
        
        {CALL sp_inf_cmp_win_rte(
        <isNotNull property="banca">#banca#</isNotNull>
        <isNull property="banca">NULL</isNull>
        ,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
        <isNull property="nivel_uno">NULL</isNull>
        ,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
        <isNull property="nivel_dos">NULL</isNull>
        ,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
        <isNull property="nivel_tres">NULL</isNull>
        ,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
        <isNull property="ejecutivo">NULL</isNull>
        ,#tipo#
        ,#fecha_inicio#
        ,#fecha_fin#
        ,<isNotNull property="producto">#producto#</isNotNull>
        <isNull property="producto">NULL</isNull>
        ,<isNotNull property="campana">#campana#</isNotNull>
        <isNull property="campana">NULL</isNull>)} 
        
    </procedure>

    <procedure id="obtenerEvolutivoProductosActivados" parameterClass="java.util.HashMap" resultMap="evolutivo">
        
        {CALL sp_inf_cmp_evol_pact(
        <isNotNull property="banca">#banca#</isNotNull>
        <isNull property="banca">NULL</isNull>
        ,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
        <isNull property="nivel_uno">NULL</isNull>
        ,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
        <isNull property="nivel_dos">NULL</isNull>
        ,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
        <isNull property="nivel_tres">NULL</isNull>
        ,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
        <isNull property="ejecutivo">NULL</isNull>
        ,#tipo#
        ,#fecha#
        ,<isNotNull property="producto">#producto#</isNotNull>
        <isNull property="producto">NULL</isNull>
        ,<isNotNull property="campana">#campana#</isNotNull>
        <isNull property="campana">NULL</isNull>)} 
        
    </procedure>

    <procedure id="obtenerEvolutivoPromediosContactos" parameterClass="java.util.HashMap" resultMap="evolutivo">
        
        {CALL sp_inf_cmp_evol_cont(
        <isNotNull property="banca">#banca#</isNotNull>
        <isNull property="banca">NULL</isNull>
        ,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
        <isNull property="nivel_uno">NULL</isNull>
        ,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
        <isNull property="nivel_dos">NULL</isNull>
        ,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
        <isNull property="nivel_tres">NULL</isNull>
        ,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
        <isNull property="ejecutivo">NULL</isNull>
        ,#tipo#
        ,#fecha#
        ,<isNotNull property="producto">#producto#</isNotNull>
        <isNull property="producto">NULL</isNull>
        ,<isNotNull property="campana">#campana#</isNotNull>
        <isNull property="campana">NULL</isNull>)} 
        
    </procedure>

    <procedure id="obtenerEvolutivoPromediosProductosAceptados" parameterClass="java.util.HashMap" resultMap="evolutivo">
        
        {CALL sp_inf_cmp_evol_acp(
        <isNotNull property="banca">#banca#</isNotNull>
        <isNull property="banca">NULL</isNull>
        ,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
        <isNull property="nivel_uno">NULL</isNull>
        ,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
        <isNull property="nivel_dos">NULL</isNull>
        ,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
        <isNull property="nivel_tres">NULL</isNull>
        ,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
        <isNull property="ejecutivo">NULL</isNull>
        ,#tipo#
        ,#fecha#
        ,<isNotNull property="producto">#producto#</isNotNull>
        <isNull property="producto">NULL</isNull>
        ,<isNotNull property="campana">#campana#</isNotNull>
        <isNull property="campana">NULL</isNull>)} 
        
    </procedure>
    
    <procedure id="obtenerEvolutivoTasaDeAceptacion" parameterClass="java.util.HashMap" resultMap="evolutivo">
        
        {CALL sp_inf_cmp_evol_tacp(
        <isNotNull property="banca">#banca#</isNotNull>
        <isNull property="banca">NULL</isNull>
        ,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
        <isNull property="nivel_uno">NULL</isNull>
        ,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
        <isNull property="nivel_dos">NULL</isNull>
        ,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
        <isNull property="nivel_tres">NULL</isNull>
        ,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
        <isNull property="ejecutivo">NULL</isNull>
        ,#tipo#
        ,#fecha#
        ,<isNotNull property="producto">#producto#</isNotNull>
        <isNull property="producto">NULL</isNull>
        ,<isNotNull property="campana">#campana#</isNotNull>
        <isNull property="campana">NULL</isNull>)} 
        
    </procedure>
    
    <procedure id="obtenerEvolutivoTasaDeActivacion" parameterClass="java.util.HashMap" resultMap="evolutivo">
        
        {CALL sp_inf_cmp_evol_tact(
        <isNotNull property="banca">#banca#</isNotNull>
        <isNull property="banca">NULL</isNull>
        ,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
        <isNull property="nivel_uno">NULL</isNull>
        ,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
        <isNull property="nivel_dos">NULL</isNull>
        ,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
        <isNull property="nivel_tres">NULL</isNull>
        ,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
        <isNull property="ejecutivo">NULL</isNull>
        ,#tipo#
        ,#fecha#
        ,<isNotNull property="producto">#producto#</isNotNull>
        <isNull property="producto">NULL</isNull>
        ,<isNotNull property="campana">#campana#</isNotNull>
        <isNull property="campana">NULL</isNull>)} 
        
    </procedure>

<!-- FIN SECCION INFORME CAMPANAS  -->

    <resultMap id="banca" class="java.util.HashMap">
        <result property="codigo" javaType="String" column="bca_cod" jdbcType="char" />
        <result property="nombre" javaType="String" column="bca_nom" jdbcType="char" />
        <result property="descripcion" javaType="String" column="bca_des" jdbcType="char" />
    </resultMap>
    
    <resultMap id="salidaOfertasCliente" class="java.util.HashMap">
        <result property="idCampana"            javaType="String"  column="ofe_cod"     jdbcType="char" />
        <result property="correlativoOferta"    javaType="String"  column="ofc_crr"     jdbcType="char" />
        <result property="nombreOferta"         javaType="String"  column="ofe_des"     jdbcType="char" />
        <result property="estadoOferta"         javaType="String"  column="tro_cod"     jdbcType="char" />
        <result property="codEjecutivo"         javaType="String"  column="ofc_eje_cab" jdbcType="char" />
        <result property="mejorProximaOferta"   javaType="int"     column="mpo_prd"     jdbcType="int"  />
        <result property="tipoProducto"         javaType="String"  column="tpo_cod"     jdbcType="char" />
        <result property="codigoBanca"          javaType="String"  column="bca_cod"     jdbcType="char" />
        <result property="responsable"          javaType="String"  column="tip_age"     jdbcType="char" />
        <result property="subTipoProducto"      javaType="String"  column="sub_tpo_cod" jdbcType="char" />
        <result property="nomCliente"      javaType="String"  column="nom_cli" jdbcType="char" />
        <result property="apePaterno"      javaType="String"  column="ape_pat" jdbcType="char" />
        <result property="apeMaterno"      javaType="String"  column="ape_mat" jdbcType="char" />
    </resultMap>

    <resultMap id="UnidadYFamiliaProducto" class="java.util.HashMap">
        <result property="unidadDeNegocio" javaType="String" column="unidad" jdbcType="varchar"/>
        <result property="familiaDeProducto" javaType="String" column="familia" jdbcType="varchar"/>
    </resultMap>
    
    <resultMap id="tipoInyeccion" class="java.util.HashMap">
        <result property="codigoTipoInyeccion" column="codIny"/>
        <result property="codigoEtapaInyeccion" column="codEtp"/>
    </resultMap>

    <resultMap id="productoSubProducto" class="java.util.HashMap">
        <result property="codigoProducto" column="producto"/>
        <result property="codigoSubProducto" column="subProducto"/>
    </resultMap>    

    <!-- sp_cns_bca() -->
    <procedure id="consultaBancas" resultMap="banca">
        {CALL sp_cns_bca()}
    </procedure>

    <!-- sp_cns_ofe_cli(@@rut_cliente, @@ofe_cod) -->
    <procedure id="consultaOfertasCliente" parameterClass="java.util.HashMap" resultMap="salidaOfertasCliente">
        {CALL sp_cns_ofe_cli(#rut#, #idCampana#)}
    </procedure>
    
    <resultMap id="unidadDeNegocio" class="java.util.HashMap">
        <result property="codigoUnidadDeNegocio" column="und_neg_cod"/>
        <result property="unidadDeNegocio" column="un_neg_des"/>
        <result property="tipoCodigo" column="tpo_cod"/>
        <result property="codigoBanca" column="bca_cod"/>
    </resultMap>
    
    <resultMap id="familiaDeProducto" class="java.util.HashMap">
        <result property="codigoUnidadDeNegocio" column="und_neg_cod"/>
        <result property="codigoFamiliaDeProducto" column="fm_prod_cod"/>
        <result property="familiaDeProducto" column="fm_prod_des"/>
    </resultMap>
    
    <resultMap id="bancaAsociada" class="java.util.HashMap">
        <result property="codigoBanca" column="codigo_banca"/>
    </resultMap>
    
    <resultMap id="etapaInyeccion" class="java.util.HashMap">
        <result property="codigoEtapa" column="codigo_etapa"/>
    </resultMap>
    
    <resultMap id="InyeccionCNU" class="java.util.HashMap">
        <result property="numeroNoUbicableOferta" column="numeroNoUbicableOferta"/>
        <result property="numeroMaxNoUbicableOferta" column="numeroMaxNoUbicableOferta"/>
    </resultMap>
    
    <resultMap id="empresasPorEjecutivo" class="java.util.HashMap">
        <result property="RutEmpresa" column="rut_emp"/>
        <result property="NombreEmpresa" column="rut_nom"/>
    </resultMap>

    <resultMap id="salidaCampanasPriorizadas" class="java.util.HashMap">
        <result property="codigoCampana" javaType="String" column="ofe_cod" jdbcType="char" />
        <result property="correlativoOferta" javaType="String"  column="ofc_crr" jdbcType="char" />
        <result property="nombreCampana" javaType="String"  column="ofe_des" jdbcType="char" />
        <result property="rutCliente" javaType="String" column="cli_rut" jdbcType="char"/>
        <result property="nomCliente" javaType="String" column="cli_nom" jdbcType="char"/>
        <result property="numeroDiasGestionar" javaType="int" column="ofc_dia_ges" jdbcType="int"/>
        <result property="codigoMoneda" javaType="String" column="ofc_mon" jdbcType="char"/>
        <result property="montoSumado" javaType="Long" column="mto_sum" jdbcType="numeric"/>
        <result property="montoNormal" javaType="Long" column="mto_nor" jdbcType="numeric"/>
        <result property="tipoProducto" javaType="String" column="tpo_cod" jdbcType="char"/>
        <result property="descripcionProducto" javaType="String" column="tpo_des" jdbcType="char"/>
        <result property="rutEmpresa" javaType="String" column="emp_rut" jdbcType="char"/>
        <result property="nombreEmpresa" javaType="String" column="emp_nom" jdbcType="char"/>
        <result property="regPorGestionar" javaType="Integer" column="total_gest" jdbcType="numeric"/>
    </resultMap>

    <resultMap id="salidaReemplazados" class="java.util.HashMap">
        <result property="idReemplazos" javaType="Integer" column="id_reemplazos" jdbcType="int" />
        <result property="ejecutivoReemplazante" javaType="String" column="eje_reemplazante" jdbcType="char" />
        <result property="ejecutivoReemplazado" javaType="String" column="eje_reemplazado" jdbcType="char" />
        <result property="fechaInicio" javaType="java.util.Calendar" column="fecha_ini_reemplazo" jdbcType="DATE" typeHandler="cl.bci.middleware.aplicacion.persistencia.handler.CalendarTypeHandler"/>
        <result property="fechaFin" javaType="java.util.Calendar" column="fecha_fin_reemplazo" jdbcType="DATE" typeHandler="cl.bci.middleware.aplicacion.persistencia.handler.CalendarTypeHandler"/>
        <result property="idVig" javaType="String" column="id_vig" jdbcType="char" />
        <result property="idMotivoReemplazo" javaType="String" column="id_mot_reemplazo" jdbcType="char" />
        <result property="glosaMotReemplazo" javaType="String" column="glosa_mot_reemplazo" jdbcType="char" />
        <result property="codigoDeUnidad" javaType="String" column="uni_gst" jdbcType="char" />
    </resultMap>

    <resultMap id="salidaClientesAgendados" class="java.util.HashMap">
        <result property="nombreCampana" javaType="String" column="nom_camp" jdbcType="char" />
        <result property="rutCliente" javaType="String" column="ru_cliente" jdbcType="char" />
        <result property="nomCliente" javaType="String" column="nombre_cliente" jdbcType="char" />
        <result property="fechaInicio" javaType="String" column="fecha_agendada" jdbcType="char" />
        <result property="codigoCampana" javaType="String" column="cod_camp" jdbcType="char" />
        <result property="correlativoOferta" javaType="String" column="correlativo" jdbcType="char" />
        <result property="logEjecutivo" javaType="String" column="rof_eje" jdbcType="char" />
        <result property="tipoProducto" javaType="String" column="tpo_cod" jdbcType="char" />
        <result property="descripcionProducto" javaType="String" column="tpo_des" jdbcType="char" />
        <result property="rutEmpresa" javaType="String" column="emp_rut" jdbcType="char"/>
        <result property="nombreEmpresa" javaType="String" column="emp_nom" jdbcType="char"/>
        <result property="nombresCliente" javaType="String" column="nombres_cli" jdbcType="char"/>
        <result property="apellidosCliente" javaType="String" column="apellidos_cli" jdbcType="char"/>
        <result property="fechaHoraAgendamiento" javaType="String" column="fecha_hora" jdbcType="char"/>
    </resultMap>

    <resultMap id="salidaProductos" class="java.util.HashMap">
        <result property="nombreProducto" javaType="String" column="tpo_des" jdbcType="char"/>
        <result property="idProducto" javaType="String" column="tpo_cod" jdbcType="char"/>
    </resultMap>
    <resultMap id="salidaOfertas" class="java.util.HashMap">
        <result property="codigoOferta" javaType="String" column="ofe_cod" jdbcType="char" /> 
        <result property="descripcionOferta" javaType="String" column="ofe_des" jdbcType="char" /> 
    </resultMap>
    <resultMap id="SalidaSubProductos" class="java.util.HashMap">
        <result property="codigoSubproducto" javaType="String" column="sub_tpo_cod" jdbcType="char"/>
        <result property="descripcionSubproducto" javaType="String" column="sub_tpo_des" jdbcType="char"/>
    </resultMap>

    <resultMap id="consultarRespuestasClientes" class="java.util.HashMap">
        <result property="correlativo" column="det_tro_crr"/>
        <result property="texto" column="det_tro_txt"/>
    </resultMap>
    
    <resultMap id="respuestasCausalesClientes" class="java.util.HashMap">
        <result property="correlativo" column="det_tro_crr"/>
        <result property="texto" column="det_tro_txt"/>
        <result property="codigoRespuesta" column="tro_cod"/>
        <result property="descripcionRespuesta" column="tro_des"/>
    </resultMap>

    <resultMap id="ingresarNuevaRespuesta" class="java.util.HashMap">
        <result property="codigoRespuesta" column="codigo"/>
    </resultMap>

    <resultMap id="salidaCambioCartera" class="java.util.HashMap">
        <result property="idCambio" javaType="Integer" column="cmb_id" jdbcType="int" />
        <result property="ejecutivoSalida" javaType="String" column="eje_old" jdbcType="char" />
        <result property="ejecutivoEntrante" javaType="String" column="eje_new" jdbcType="char" />
        <result property="fechaCambio" javaType="java.util.Calendar" column="fec_cmb" jdbcType="DATE" typeHandler="cl.bci.middleware.aplicacion.persistencia.handler.CalendarTypeHandler"/>
        <result property="jofCambio" javaType="String" column="jof_cmb" jdbcType="char" />
        <result property="motivoCambio" javaType="String" column="mot_cmb" jdbcType="char" />
        <result property="idVig" javaType="String" column="vig_cmb" jdbcType="char" />
    </resultMap>

    <resultMap id="empresasAsocClienteCampana" class="java.util.HashMap">
        
        <result property="CodCampana" column="ofe_cod"/>
        <result property="DescCampana" column="ofe_des"/>
        <result property="RutCliente" column="cli_rut"/>
        <result property="NombreCliente" column="cli_nom"/>
        <result property="RutEmpresa" column="rut_emp"/>
        <result property="NombreEmpresa" column="rut_nom"/>
    </resultMap>

    <procedure id="obtieneUnidadYFamiliaDeProducto" resultMap="UnidadYFamiliaProducto" parameterClass="java.util.HashMap">
        {CALL sp_cns_uni_fam(#codigoOferta#)}
    </procedure>
    
    <procedure id="consultaTipoInyeccion" resultMap="tipoInyeccion" parameterClass="java.util.HashMap">
        {CALL sp_cns_iny(#respuestaOferta#, #codigoOferta#)}
    </procedure>
    
    <procedure id="obtieneProductoSubProducto" resultMap="productoSubProducto" parameterClass="java.util.HashMap">
        {CALL sp_cns_tpo_subtpo(#codigoOferta#)}
    </procedure>
    
    <procedure id="consultarUnidadesDeNegocio" resultMap="unidadDeNegocio" parameterClass="java.util.HashMap">
        {CALL sp_cns_und_neg(#bca_cod#)}
    </procedure>
    
    <procedure id="consultarFamiliasDeProducto" resultMap="familiaDeProducto" parameterClass="java.util.HashMap">
        {CALL sp_cns_fml_prod(#und_neg_cod#)}
    </procedure>
    
    <procedure id="consultarBancaPorCodigoOferta" resultMap="bancaAsociada" parameterClass="java.util.HashMap">
        {CALL sp_cns_cod_bca(#cod_ofe#)}
    </procedure>
    
    <procedure id="consultarEtapaInyeccion" resultMap="etapaInyeccion" parameterClass="java.util.HashMap">
        {CALL sp_cns_etapa_iny(#banca#,#ofe_cod#,
        <isNotNull property="respuestaOferta">#respuestaOferta#</isNotNull>
    <isNull property="respuestaOferta">NULL</isNull>
            
        )}
    </procedure>
    
    <procedure id="consultarNumeroInyeccion" resultMap="InyeccionCNU" parameterClass="java.util.HashMap">
        {CALL sp_cns_iny_cnu(#codigoOferta#,#correlativoOferta#)}
    </procedure>
    
    <procedure id="unidadYFamiliaPersonaNoCliente" resultMap="UnidadYFamiliaProducto" parameterClass="java.util.HashMap">
        {CALL sp_cns_uyf_per(#banca#,#ofe_cod#)}
    </procedure>
    
    <procedure id="unidadYFamiliaPersonaOfeAutogen" resultMap="UnidadYFamiliaProducto" parameterClass="java.util.HashMap">
        {CALL sp_cns_uni_fam_aut(#cod_bca#,#cod_pro#)}
    </procedure>

    <parameterMap id="setInsertarCliente" class="java.util.HashMap">
        <parameter property="codOferta"          jdbcType="CHAR"      javaType="String" />
        <parameter property="rutCliente"         jdbcType="CHAR"      javaType="String" />
        <parameter property="dvCliente"          jdbcType="CHAR"      javaType="String" />
        <parameter property="estado"         jdbcType="CHAR"      javaType="String" />
    </parameterMap>

    <procedure id="insertarCliente" parameterMap="setInsertarCliente" resultClass="int">
        { CALL sp_ins_ofc(?,?,?,?) }
    </procedure>
    
    <parameterMap id="setActualizarFecha" class="java.util.HashMap">
        <parameter property="codRegistro"        jdbcType="CHAR"      javaType="String" />
        <parameter property="rutCliente"         jdbcType="CHAR"      javaType="String" />
        <parameter property="dvCliente"          jdbcType="CHAR"      javaType="String" />
        <parameter property="fecha"          jdbcType="DATE"      javaType="java.util.Calendar" typeHandler="cl.bci.middleware.aplicacion.persistencia.handler.CalendarTypeHandler" />
    </parameterMap>
    <procedure id="actualizarFecha" parameterMap="setActualizarFecha" resultClass="int">
        { CALL sp_upd_fec_ofc(?,?,?,?) }
    </procedure>    

    <procedure id="consultarEmpresasPorEjecutivo" resultMap="empresasPorEjecutivo" parameterClass="java.util.HashMap">
        {CALL sp_camp_buscaEmpEje(#cod_eje#)}
    </procedure>

    <procedure id="consultarEmpresasAsocClienteCampana" resultMap="empresasAsocClienteCampana" parameterClass="java.util.HashMap">
        {CALL sp_cns_cmp_cli_aso_emp(#cod_eje#)}
    </procedure>

    <procedure id="sp_cns_dato_solicitud" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
        {CALL sp_cns_dato_solicitud(#rut#,#campana_aprobada#,#campana_preaprobada#)}
    </procedure>

    <!-- DBA.sp_cns_uni_rpl(@uni_gst) -->
    <procedure id="obtenerEjecutivosReemplazadosUnidad" parameterClass="java.util.HashMap" resultClass="string">
        {CALL sp_cns_uni_rpl(#codigoUnidad#)}
    </procedure>

    <!-- DBA.sp_cns_eje_rpl(@reemplazante) -->
    <procedure id="obtenerReemplazadosPorEjecutivo" parameterClass="java.util.HashMap" resultMap="salidaReemplazados">
        {CALL sp_cns_eje_rpl(#codigoEjecutivo#)}
    </procedure>

    <!-- DBA.sp_cns_rpl_eje(@eje_reemplazado) -->
    <procedure id="obtenerReemplazosParaEjecutivo" parameterClass="java.util.HashMap" resultMap="salidaReemplazados">
        {CALL sp_cns_rpl_eje(#codigoEjecutivo#)}
    </procedure>

    <!-- DBA.sp_cns_rpl(@id_reemplazos) -->
    <procedure id="obtenerReemplazo" parameterClass="java.util.HashMap" resultMap="salidaReemplazados">
        {CALL sp_cns_rpl(#idReemplazos#)}
    </procedure>

    <!-- DBA.sp_ins_rpl(
            @eje_reemplazante,
            @eje_reemplazado,
            @fecha_ini_reemplazo,
            @fecha_fin_reemplazo,
            @id_vig,
            @id_mot_reemplazo,
            @glosa_mot_reemplazo,
            @uni_gst,
            @eje_ingreso) -->
    <procedure id="ingresarReemplazo" parameterClass="java.util.HashMap">
        {CALL sp_ins_rpl (
            #ejecutivoReemplazante#,
            #ejecutivoReemplazado#,
            #inicioDelPeriodoDeReemplazo#,
            #terminoDelPeriodoDeReemplazo#,
            #idVig#,
            #idMotivoReemplazo#,
            #glosaMotReemplazo#,
            #codigoDeUnidad#,
            #ejecutivoIngreso#)}
    </procedure>

    <!-- DBA.sp_upd_rpl(
            @id_reemplazos
            @eje_reemplazante,
            @fecha_ini_reemplazo,
            @fecha_fin_reemplazo,
            @id_mot_reemplazo,
            @glosa_mot_reemplazo) -->
    <procedure id="modificarReemplazo" parameterClass="java.util.HashMap">
        {CALL sp_upd_rpl (
            #idReemplazos#
            #ejecutivoReemplazante#,
            #inicioDelPeriodoDeReemplazo#,
            #terminoDelPeriodoDeReemplazo#,
            #idMotivoReemplazo#,
            #glosaMotReemplazo#)}
    </procedure>

    <!-- DBA.sp_cns_cli_prz_suc(@idproducto, @loginejecutivo, @stock, @ofc_suc_eje_cab, @uni_gst, , @subProducto char(3)) -->
    <procedure id="obtenerCampanasPriorizadasSucursal" parameterClass="java.util.HashMap" resultMap="salidaCampanasPriorizadas">
        {CALL sp_cns_cli_prz_suc(#tipoProducto#, #logEjecutivo#, #maximoRegistros#, #codigoOficina#, #codigoUnidad#, #ofe_cod#, #emp_rut#, #subProducto#, <isNull property="codigoDeBanca">NULL</isNull><isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull>)}
    </procedure>

    <!-- sp_cns_clientes_agendados (@idproducto char(3), @loginejecutivo char(12), @ofe_cod char(8), @emp_rut char (10), @subProducto char(3) ) -->
    <procedure id="obtenerClientesAgendados" parameterClass="java.util.HashMap" resultMap="salidaClientesAgendados">
        {CALL sp_cns_clientes_agendados(#producto#, #ejecutivo#, #ofe_cod#, #emp_rut#, #subProducto#, #fechaInicio#, #fechaFin#, <isNull property="codigoDeBanca">NULL</isNull><isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull>)}
    </procedure>

    <!-- sp_cns_tpo_bca( @bca_cod char(3)) -->
    <procedure id="obtenerProductosPorBanca" parameterClass="java.util.HashMap" resultMap="salidaProductos">
        {CALL sp_cns_tpo_bca(#codigoBanca#)}
    </procedure>
    
    <!-- CAMPANAS 2010 --> 
    
    <!--  DBA.sp_cns_cli_prz(@idproducto, @loginejecutivo, @stock, , @subProducto char(3)) --> 
    <procedure id="obtenerCampanasPriorizadas" parameterClass="java.util.HashMap" resultMap="salidaCampanasPriorizadas">
        {CALL sp_cns_cli_prz(#tipoProducto#, #logEjecutivo#, #maximoRegistros#, #ofe_cod#, #emp_rut#, #subProducto#, 
         <isNull property="codigoDeBanca">NULL</isNull> 
         <isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull> 
        )} 
    </procedure>
    
    <resultMap id="salidaCampanasPriorizadasAgrupado" class="java.util.HashMap">
        <result property="codigoCampana" javaType="String" column="ofe_cod" jdbcType="char" />
        <result property="correlativoOferta" javaType="String"  column="ofc_crr" jdbcType="char" />
        <result property="nombreCampana" javaType="String"  column="ofe_des" jdbcType="char" />
        <result property="rutCliente" javaType="String" column="cli_rut" jdbcType="char"/>
        <result property="dv" javaType="String" column="cli_dv" jdbcType="char"/>
        <result property="nomCliente" javaType="String" column="cli_nom" jdbcType="char"/>
        <result property="apellidoPaterno" javaType="String" column="cli_ape" jdbcType="char"/>
        <result property="numeroDiasGestionar" javaType="int" column="ofc_dia_ges" jdbcType="int"/>
        <result property="codigoMoneda" javaType="String" column="ofc_mon" jdbcType="char"/>
        <result property="montoSumado" javaType="Long" column="mto_sum" jdbcType="numeric"/>
        <result property="montoNormal" javaType="Long" column="mto_nor" jdbcType="numeric"/>
        <result property="tipoProducto" javaType="String" column="tpo_cod" jdbcType="char"/>
        <result property="descripcionProducto" javaType="String" column="tpo_des" jdbcType="char"/>
        <result property="rutEmpresa" javaType="String" column="emp_rut" jdbcType="char"/>
        <result property="nombreEmpresa" javaType="String" column="emp_nom" jdbcType="char"/>
        <result property="regPorGestionar" javaType="Integer" column="total_gest" jdbcType="numeric"/>
        <result property="fechaInicio" javaType="String" column="ofe_fec_ini" jdbcType="DATE"/>
        <result property="fechaFin" javaType="String" column="ofe_fec_ter" jdbcType="DATE"/>
        <result property="subTipoProducto" javaType="String" column="sub_tpo_cod" jdbcType="char"/>
        <result property="descripcionSubProducto" javaType="String" column="sub_tpo_des" jdbcType="char"/>
    </resultMap>
    
    <!--  DBA.sp_cns_cli_prz_agrupado(@idproducto, @loginejecutivo, , @subProducto char(3)) --> 
    <procedure id="obtenerCampanasPriorizadasAgrupado" parameterClass="java.util.HashMap" resultMap="salidaCampanasPriorizadasAgrupado">
        {CALL sp_cns_cli_prz_agrupado(#tipoProducto#, #logEjecutivo#, #ofe_cod#, #emp_rut#, #subProducto#, 
         <isNull property="codigoDeBanca">NULL</isNull> 
         <isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull> 
        )} 
    </procedure>

    <resultMap id="salidaParametrosPorCampanaCliente" class="java.util.HashMap">
        <result property="codPlantilla" javaType="String" column="plt_cod" jdbcType="char"/>
        <result property="codigo" javaType="String" column="par_cod" jdbcType="char" />
        <result property="glosa" javaType="String"  column="plp_glosa" jdbcType="char" />
        <result property="monto" javaType="Long"  column="vpo_val_num" jdbcType="numeric" />
        <result property="tipoValor" javaType="String" column="plp_tvl" jdbcType="char"/>
        <result property="tipoMoneda" javaType="String" column="par_gls_mon" jdbcType="char"/>
        <result property="valorVpo" javaType="String" column="vpo_val_str" jdbcType="char"/>
    </resultMap>
    
    <!--  DBA.sp_cns_plp_ofe(@codigoOferta, @correlativo, ) --> 
    <procedure id="obtenerParametrosPorCampanaCliente" parameterClass="java.util.HashMap" resultMap="salidaParametrosPorCampanaCliente">
        {CALL sp_cns_plp_ofe(#codigoCampana#, #correlativo#)} 
    </procedure>

    <!--  sp_cns_cli_ofe_tpo_eje(@idproducto char(3), @subProducto char(3), @loginejecutivo char(12)) --> 
    <procedure id="obtenerOfertasPorProducto" parameterClass="java.util.HashMap" resultMap="salidaOfertas">{CALL sp_cns_cli_ofe_tpo_eje(#producto#, #subproducto#, #ejecutivo#)}</procedure> 

    <procedure id="obtenerOfertasPorProductoProservice" parameterClass="java.util.HashMap" resultMap="salidaOfertas">{CALL sp_cns_cli_ofe_tpo_eje_pserv(#producto#, #subproducto#, #ejecutivo#)}</procedure> 
    
    <!--  sp_cns_tpo_bca2( @bca_cod char(3), @loginejecutivo char(12)) --> 
    <procedure id="obtenerProductosPorCampana" parameterClass="java.util.HashMap" resultMap="salidaProductos">{CALL sp_cns_tpo_vig(#codigoBanca#, #logEjecutivo#)}</procedure> 

    <procedure id="obtenerProductosPorCampanaProservice" parameterClass="java.util.HashMap" resultMap="salidaProductos">{CALL sp_cns_tpo_vig_pserv(#codigoBanca#, #logEjecutivo#)}</procedure> 
    
    <!--  sp_cns_sub_prod(@codigoProducto char(3), @loginejecutivo char(12)) --> 
    <procedure id="obtenerSubProductoPorCampana" parameterClass="java.util.HashMap" resultMap="SalidaSubProductos">{CALL sp_cns_sub_prod_vig(#codigoProducto#, #logEjecutivo#)}</procedure> 

    <procedure id="obtenerSubProductoPorCampanaProservice" parameterClass="java.util.HashMap" resultMap="SalidaSubProductos">{CALL sp_cns_sub_prod_vig_pserv(#codigoProducto#, #logEjecutivo#)}</procedure> 
  
    <resultMap id="salidaOfertasProservice" class="java.util.HashMap">
        <result property="codigoOferta" javaType="String" column="ofe_cod" jdbcType="char" /> 
        <result property="descripcion" javaType="String" column="ofe_des" jdbcType="char" /> 
        <result property="fechaInicio" javaType="String" column="ofe_fec_ini" jdbcType="char" /> 
        <result property="fechaFin" javaType="String" column="ofe_fec_ter" jdbcType="char" /> 
        <result property="codEstado" javaType="String" column="eof_cod" jdbcType="char" /> 
        <result property="descEstado" javaType="String" column="eof_des" jdbcType="char" /> 
        <result property="codProducto" javaType="String" column="tpo_cod" jdbcType="char" /> 
        <result property="producto" javaType="String" column="tpo_des" jdbcType="char" /> 
        <result property="codSubproducto" javaType="String" column="sub_tpo_cod" jdbcType="char" /> 
        <result property="descripcion2" javaType="String" column="sub_tpo_des" jdbcType="char" /> 
    </resultMap>
    
    <!--  sp_cns_ofe_pserv (@eof_cod char(3), @tpo_cod char(3),@subProducto char(3), @fec_ini datetime, @fec_ter datetime) --> 
    <procedure id="obtenerOfertasProservice" parameterClass="java.util.HashMap" resultMap="salidaOfertasProservice">{CALL sp_cns_ofe_pserv(#codigoEstado#,#codigoProducto#,#codigoSubProducto#,#fechaInicio#,#fechaTermino#)}</procedure> 
 
    <!--  sp_ins_telefono (@cli_rut char(8),@cli_dv char(1),@cod_eje char(12),@tipo_fono char(10),@fono char(10)) --> 
    <procedure id="ingresarFono" parameterClass="java.util.HashMap">{CALL sp_ins_telefono(#rutCliente#,#rutDv#,#codEjecutivo#,#tipoFono#,#fono#)}</procedure> 
    
    <!--  sp_upd_telefono (@cli_rut char(8),@cli_dv char(1),@cod_eje char(12),@tipo_fono char(10),@fono char(10)) --> 
    <procedure id="modificarFono" parameterClass="java.util.HashMap">{CALL sp_upd_telefono(#rutCliente#,#rutDv#,#codEjecutivo#,#tipoFono#,#fono#,#est#)}</procedure> 
    
    <!--  sp_ins_fono_dce(@ofc_cod char(8),@ofc_crr int,@idcv char(5),@contenido char(250)) --> 
  
    <procedure id="ingresarFonoCampana" parameterClass="java.util.HashMap">{CALL sp_ins_fono_dce(#ofc_cod#,#ofc_crr#,#idcv#,#contenido#)}</procedure> 
    
    <!-- sp_cns_pla_p(@cod_ofi) -->
    <procedure id="consultaPlataformasPersona" parameterClass="java.util.HashMap" resultMap="plataforma">
        {CALL sp_cns_pla_p(#codigoOficina#)}
    </procedure>
    <!-- sp_cns_pla_epm(@cod_ofi) -->
    <procedure id="consultaPlataformasEmpresario" parameterClass="java.util.HashMap" resultMap="plataforma">
        {CALL sp_cns_pla_epm(#codigoOficina#)}
    </procedure>
    <!-- sp_cns_eje_per_ofi_cnt(@cod_pla, @cod_ofi) -->
    <procedure id="consultaEjecutivosPersonaOfCentral" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_per_ofi_cnt(#codigoPlataforma#, #codigoOficina#)}
    </procedure>
    <!-- sp_cns_eje_fza_vta(@cod_ofi) -->
    <procedure id="consultarEjecutivoFuerzaVenta" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_fza_vta(#codEjecutivo#)}
    </procedure>
    <!-- sp_cns_eje_fza_vta_ofi(@cod_ofi) -->
    <procedure id="consultaEjecutivosFuerzaVenta" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_fza_vta_ofi(#codigoOficina#)}
    </procedure>
    <!-- sp_cns_eje_prsv(@cod_ofi) -->
    <procedure id="consultaEjecutivosProservice" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_prsv(#codigoOficina#)}
    </procedure>
    <!-- sp_cns_reg_cnt_epm(@cod_cnt) -->
    <procedure id="consultaRegionalCentroEmpresario" parameterClass="java.util.HashMap" resultMap="centroEmpresario">
        {CALL sp_cns_reg_cnt_epm(#codigoCentro#)}
    </procedure>

    <!-- FIN CAMPANAS 2010 -->
    
    <!-- sp_cns_sub_prod(@codigoProducto char(3)) -->
    <procedure id="consultarSubProducto" parameterClass="java.util.HashMap" resultMap="SalidaSubProductos">
        {CALL sp_cns_sub_prod(#codigoProducto#)}
    </procedure>
    
    <procedure id="consultarRespuestasClientes" parameterClass="java.util.HashMap" resultMap="consultarRespuestasClientes">
        {CALL sp_cns_det_tro(#codigoProducto#, #codigoSubProducto#, #codigoRespuesta#)}
    </procedure>

    <procedure id="respuestasCausalesClientes" parameterClass="java.util.HashMap" resultMap="respuestasCausalesClientes">
        {CALL sp_cns_causales_respuestas(#codigoProducto#, #codigoSubProducto#, #codigoRespuesta#)}
    </procedure>

    <procedure id="ingresarNuevaRespuesta" parameterClass="java.util.HashMap" resultMap="ingresarNuevaRespuesta">
        {CALL sp_ins_respuesta_subproducto(#respuesta#)}
    </procedure>
    
    <resultMap id="salidaObtenerComentariosHistoricos" class="java.util.HashMap">
        <result property="nombreProducto"       javaType="String"  column="tpo_des"           jdbcType="char" />
        <result property="nombreSubProducto" javaType="String"  column="sub_tpo_des"   jdbcType="char" />
        <result property="nombreCampana"      javaType="String"  column="ofe_des"           jdbcType="char" />
        <result property="ejecutivo"                  javaType="String"  column="obs_ets"            jdbcType="char" />
        <result property="fecha"                        javaType="String"  column="obs_fec"           jdbcType="char" />
        <result property="texto"                        javaType="String"  column="obs_txt"           jdbcType="char" />
        <result property="estadoCampana"       javaType="String"  column="eof_des"          jdbcType="char" />
        <result property="estado"                      javaType="String"  column="tro_des"          jdbcType="char" />
        <result property="fechaInicio"                      javaType="Date"  column="ofe_fec_ini"          jdbcType="DATETIME" />
        <result property="fechaTermino"                      javaType="Date"  column="ofe_fec_ter"          jdbcType="DATETIME" />
        <result property="idCampana"       javaType="String"  column="ofe_cod"           jdbcType="char" />
        <result property="correlativo"     javaType="String"  column="ofc_crr"     jdbcType="char" />
    </resultMap>
    
    <!-- dbo.sp_cns_lis_obs_hist (@rut numeric(8) , @can_reg int) -->
    <procedure id="obtenerComentariosHistoricos" parameterClass="java.util.HashMap" resultMap="salidaObtenerComentariosHistoricos">
        {CALL sp_cns_lis_obs_hist(#rutCliente#, #cantidadRegistros#)}
    </procedure>    

<!-- SECCION CAMPANAS PROSERVICE -->

    <resultMap id="salidaSiguienteOfertaProservice" class="java.util.HashMap">
        <result property="codigoOferta" javaType="Integer" column="ofe_cod" jdbcType="int" />
    </resultMap> 
    
    <!-- sp_acp_gen_ofe_cod_pserv () -->
    <procedure id="obtieneSiguienteCodigoOfertaProservice" resultMap="salidaSiguienteOfertaProservice">
        {CALL sp_acp_gen_ofe_cod_pserv()}
    </procedure>   
    
    <resultMap id="salidaCampanasPriorizadasProservice" class="java.util.HashMap">
        <result property="codigoCampana" javaType="String" column="ofe_cod" jdbcType="char" />
        <result property="correlativoOferta" javaType="String"  column="ofc_crr" jdbcType="char" />
        <result property="nombreCampana" javaType="String"  column="ofe_des" jdbcType="char" />
        <result property="rutCliente" javaType="String" column="cli_rut" jdbcType="char"/>
        <result property="nomCliente" javaType="String" column="cli_nom" jdbcType="char"/>
        <result property="numeroDiasGestionar" javaType="int" column="ofc_dia_ges" jdbcType="int"/>
        <result property="codigoMoneda" javaType="String" column="ofc_mon" jdbcType="char"/>
        <result property="montoSumado" javaType="Long" column="mto_sum" jdbcType="numeric"/>
        <result property="montoNormal" javaType="Long" column="mto_nor" jdbcType="numeric"/>
        <result property="tipoProducto" javaType="String" column="tpo_cod" jdbcType="char"/>
        <result property="descripcionProducto" javaType="String" column="tpo_des" jdbcType="char"/>
        <result property="rutEmpresa" javaType="String" column="emp_rut" jdbcType="char"/>
        <result property="nombreEmpresa" javaType="String" column="emp_nom" jdbcType="char"/>
        <result property="regPorGestionar" javaType="Integer" column="total_gest" jdbcType="numeric"/>
    </resultMap>
    
    <!-- DBA.sp_cns_cli_prz_pserv(@idproducto, @loginejecutivo, @stock, , @subProducto char(3)) -->
    <procedure id="obtenerCampanasPriorizadasProservice" parameterClass="java.util.HashMap" resultMap="salidaCampanasPriorizadasProservice">
        {CALL sp_cns_cli_prz_pserv(#tipoProducto#, #logEjecutivo#, #maximoRegistros#, #ofe_cod#, #emp_rut#, #subProducto#, <isNull property="codigoDeBanca">NULL</isNull><isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull>)}
    </procedure>
    
    
    <!-- DBA.sp_cns_cli_prz_suc_pserv(@idproducto, @loginejecutivo, @stock, @ofc_suc_eje_cab, @uni_gst, , @subProducto char(3)) -->
    <procedure id="obtenerCampanasPriorizadasSucursalProservice" parameterClass="java.util.HashMap" resultMap="salidaCampanasPriorizadasProservice">
        {CALL sp_cns_cli_prz_suc_pserv(#tipoProducto#, #logEjecutivo#, #maximoRegistros#, #codigoOficina#, #codigoUnidad#, #ofe_cod#, #emp_rut#, #subProducto#, <isNull property="codigoDeBanca">NULL</isNull><isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull>)}
    </procedure>    
        
    <resultMap id="salidaClientesAgendadosProservice" class="java.util.HashMap">
        <result property="nombreCampana" javaType="String" column="nom_camp" jdbcType="char" />
        <result property="rutCliente" javaType="String" column="ru_cliente" jdbcType="char" />
        <result property="nomCliente" javaType="String" column="nombre_cliente" jdbcType="char" />
        <result property="fechaInicio" javaType="String" column="fecha_agendada" jdbcType="char" />
        <result property="codigoCampana" javaType="String" column="cod_camp" jdbcType="char" />
        <result property="correlativoOferta" javaType="String" column="correlativo" jdbcType="char" />
        <result property="logEjecutivo" javaType="String" column="rof_eje" jdbcType="char" />
        <result property="tipoProducto" javaType="String" column="tpo_cod" jdbcType="char" />
        <result property="descripcionProducto" javaType="String" column="tpo_des" jdbcType="char" />
        <result property="rutEmpresa" javaType="String" column="emp_rut" jdbcType="char"/>
        <result property="nombreEmpresa" javaType="String" column="emp_nom" jdbcType="char"/>
    </resultMap>
        
    <!-- sp_cns_cli_agendados_pserv (@idproducto char(3), @loginejecutivo   char(12), @ofe_cod char(8), @emp_rut char (10)) -->
    <procedure id="obtenerClientesAgendadosProservice" parameterClass="java.util.HashMap" resultMap="salidaClientesAgendadosProservice">
        {CALL sp_cns_cli_agendados_pserv(#producto#, #ejecutivo#, #ofe_cod#, #emp_rut#, #subProducto#, #fechaInicio#, #fechaFin#, <isNull property="codigoDeBanca">NULL</isNull><isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull>)}
    </procedure> 

    <resultMap id="salidaClientesGestionadosProservice" class="java.util.HashMap">
        <result property="rutCliente" javaType="String" column="rut_cliente" jdbcType="char" />
        <result property="nomCliente" javaType="String" column="nom_cliente" jdbcType="char" />
        <result property="nombreCampana" javaType="String" column="campana" jdbcType="char" />
        <result property="logEjecutivo" javaType="String" column="ejecutivo" jdbcType="char" />
        <result property="estadoOferta" javaType="String" column="respuesta" jdbcType="char" />
        <result property="fechaDeGestion" javaType="String" column="fec_gestion" jdbcType="char" />
        <result property="tipoDeCanalDeGestion" javaType="String" column="cnl_gestion" jdbcType="char" />
        <result property="codigoCampana" javaType="String" column="cod_campana" jdbcType="char" />
        <result property="correlativoOferta" javaType="Integer" column="cod_correlativo" jdbcType="int" />
        <result property="totalRegistros" javaType="Integer" column="reg_tot" jdbcType="int" />
        <result property="idProducto" javaType="String" column="idProducto" jdbcType="char" />
        <result property="descripcionProducto" javaType="String" column="producto" jdbcType="char" />
        <result property="rutEmpresa" javaType="String" column="emp_rut" jdbcType="char" />
        <result property="nombreEmpresa" javaType="String" column="emp_nom" jdbcType="char" />
    </resultMap>  
    
    <!-- sp_cns_cli_gestionados_pserv (@tro_cod char(3), @fec_ini_char char(10), @fec_fin_char char(10), 
            @rof_eje char(12), @tpo_cod char(3), @num_reg int, @num_pag int, @ofe_cod char(8),
            @emp_rut char(10), @subProducto char(3), @codigoDeBanca char(3)) -->
    <procedure id="obtenerClientesGestionadosProservice" parameterClass="java.util.HashMap" resultMap="salidaClientesGestionadosProservice">
        {CALL sp_cns_cli_gestionados_pserv(#codRespuesta#, #fechaInicio#, #fechaFin#, #codEjecutivo#, #idProducto#, #numeroRegistros#, #indicadorPagina#, #codOferta#, #rutEmpresa#, #codSubProd#, <isNull property="codigoDeBanca">NULL</isNull><isNotNull property="codigoDeBanca">#codBanca#</isNotNull>)}
    </procedure>       
    
    <resultMap id="salidaClientesGestionados" class="java.util.HashMap">
        <result property="rutCliente" javaType="String" column="rut_cliente" jdbcType="char" />
        <result property="nomCliente" javaType="String" column="nom_cliente" jdbcType="char" />
        <result property="nombreCampana" javaType="String" column="campana" jdbcType="char" />
        <result property="logEjecutivo" javaType="String" column="ejecutivo" jdbcType="char" />
        <result property="codRespuesta" javaType="String" column="respuesta" jdbcType="char" />
        <result property="fechaDeGestion" javaType="String" column="fec_gestion" jdbcType="char" />
        <result property="tipoDeCanalDeGestion" javaType="String" column="cnl_gestion" jdbcType="char" />
        <result property="codigoCampana" javaType="String" column="cod_campana" jdbcType="char" />
        <result property="correlativoOferta" javaType="Integer" column="cod_correlativo" jdbcType="int" />
        <result property="totalRegistros" javaType="Integer" column="reg_tot" jdbcType="int" />
        <result property="idProducto" javaType="String" column="idProducto" jdbcType="char" />
        <result property="descripcionProducto" javaType="String" column="producto" jdbcType="char" />
        <result property="rutEmpresa" javaType="String" column="emp_rut" jdbcType="char" />
        <result property="nombreEmpresa" javaType="String" column="emp_nom" jdbcType="char" />
        <result property="nombresCliente" javaType="String" column="nombres_cli" jdbcType="char" />
        <result property="apellidosCliente" javaType="String" column="apellidos_cli" jdbcType="char" />
    </resultMap>  
    
    <procedure id="obtenerClientesGestionados" parameterClass="java.util.HashMap" resultMap="salidaClientesGestionados">
        {CALL sp_cns_clientes_gest_bcinet(#codRespuesta#, #fechaInicio#, #fechaFin#, #codEjecutivo#, #idProducto#, #numeroRegistros#, #indicadorPagina#, #codOferta#, #rutEmpresa#, #codSubProd#, #codBanca#, #tipoGestion#)}
    </procedure>
    
    <resultMap id="salidaOfertasClienteProservice" class="java.util.HashMap">
        <result property="idCampana"            javaType="String"  column="ofe_cod"     jdbcType="char" />
        <result property="correlativoOferta"    javaType="String"  column="ofc_crr"     jdbcType="char" />
        <result property="nombreOferta"         javaType="String"  column="ofe_des"     jdbcType="char" />
        <result property="estadoOferta"         javaType="String"  column="tro_cod"     jdbcType="char" />
        <result property="codEjecutivo"         javaType="String"  column="ofc_eje_cab" jdbcType="char" />
        <result property="mejorProximaOferta"   javaType="int"     column="mpo_prd"     jdbcType="int"  />
        <result property="tipoProducto"         javaType="String"  column="tpo_cod"     jdbcType="char" />
        <result property="codigoBanca"          javaType="String"  column="bca_cod"     jdbcType="char" />
        <result property="responsable"          javaType="String"  column="tip_age"     jdbcType="char" />
        <result property="subTipoProducto"      javaType="String"  column="sub_tpo_cod" jdbcType="char" />
        <result property="nomCliente"      javaType="String"  column="nom_cli" jdbcType="char" />
        <result property="apePaterno"      javaType="String"  column="ape_pat" jdbcType="char" />
        <result property="apeMaterno"      javaType="String"  column="ape_mat" jdbcType="char" />
    </resultMap>
        
    <!-- sp_cns_ofe_cli_pserv ( @rut_cliente char(8), @ofe_cod char(8)) -->
    <procedure id="consultaOfertasClienteProservice" parameterClass="java.util.HashMap" resultMap="salidaOfertasClienteProservice">
        {CALL sp_cns_ofe_cli_pserv(#rut#, #idCampana#)}
    </procedure>
    
    <resultMap id="salidaObtenerCampanasVencidaPorClientePserv" class="java.util.HashMap">
        <result property="idCampana"            javaType="String"  column="ofe_cod"     jdbcType="char" />
        <result property="correlativoOferta"    javaType="String"  column="ofc_crr"     jdbcType="char" />
        <result property="nombreOferta"         javaType="String"  column="ofe_des"     jdbcType="char" />
        <result property="estadoOferta"         javaType="String"  column="tro_cod"     jdbcType="char" />
    </resultMap>
        
    <!-- sp_cns_ofe_venc_pserv ( @rut_cliente char(8)) -->
    <procedure id="obtenerlistadoCampanasVencidaPorClienteProservice" parameterClass="java.util.HashMap" resultMap="salidaObtenerCampanasVencidaPorClientePserv">
        {CALL sp_cns_ofe_venc_pserv(#rutCliente#)}
    </procedure>    

    <resultMap id="salidaFiltrarOfertasProservicePorProducto" class="java.util.HashMap">
        <result property="codigoOferta"         javaType="String"  column="ofe_cod"       jdbcType="char" />
        <result property="descripcion"          javaType="String"  column="ofe_des"       jdbcType="char" />
        <result property="fechaInicio"          javaType="String"  column="ofe_fec_ini"   jdbcType="char" />
        <result property="fechaFin"             javaType="String"  column="ofe_fec_ter"   jdbcType="char" />
        <result property="codEstado"            javaType="String"  column="eof_cod"       jdbcType="char" />
        <result property="descEstado"           javaType="String"  column="eof_des"       jdbcType="char" />
        <result property="codProducto"          javaType="String"  column="tpo_cod"       jdbcType="char" />
        <result property="producto"             javaType="String"  column="tpo_des"       jdbcType="char" />
        <result property="codSubproducto"       javaType="String"  column="sub_tpo_cod"   jdbcType="char" />
        <result property="descripcion2"         javaType="String"  column="sub_tpo_des"   jdbcType="char" />
    </resultMap>
        
    <!-- sp_acp_lis_ofe_pserv (@eof_cod char(3), @tpo_cod char(3), @fec_ini datetime, @fec_ter datetime) -->
    <procedure id="filtrarOfertasProservicePorProducto" parameterClass="java.util.HashMap" resultMap="salidaFiltrarOfertasProservicePorProducto">
        {CALL sp_acp_lis_ofe_pserv(#codigoEstado#,#codigoProducto#,#fechaInicio#,#fechaTermino#)}
    </procedure>      

<!-- TERMINO SECCION CAMPANAS PROSERVICE -->
    <parameterMap id="inTieneCampanas" class="java.util.HashMap">
        <parameter property="rutCliente" jdbcType="VARCHAR" javaType="String" />
        <parameter property="codigoCanal" jdbcType="VARCHAR" javaType="String" />   
    </parameterMap>
    <resultMap id="outTieneCampanas" class="java.util.HashMap">
        <result  property="respuesta" jdbcType="INTEGER"  javaType="java.lang.Integer" />
    </resultMap>
    <procedure id="tieneCampanas" parameterMap="inTieneCampanas" resultMap="outTieneCampanas">
       {CALL sp_tiene_cam_ivr(?, ?)}
    </procedure>
    
    <!-- PROYECTO AGENDA ABIERTA -->
    <resultMap id="AgendaTO" class="java.util.HashMap">
        <result property="codigoDeEstado"             column="agn_cod_est"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="codigoEjecutivo"            column="agn_cod_eje"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="comentario"                 column="agn_com"        javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="fechaFinAgendamiento"       column="agn_fec_fin"    javaType="Date"/>           
        <result property="fechaInicioAgendamiento"    column="agn_fec_ini"    javaType="Date"/>             
        <result property="motivoDelAgendamiento"      column="mot_cod_mot"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="rutBackupDelAgendamiento"   column="agn_rut_bkp"    javaType="java.lang.Long"    jdbcType="INTEGER"/>
        <result property="rutCliente"                 column="cli_rut_cli"    javaType="java.lang.Long"    jdbcType="INTEGER"/>
        <result property="tipoDeNotificacion"         column="agn_tip_not"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="nombreDelEjecutivo"         column="NOMBRE"         javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="descripcionDelMotivo"       column="mot_des_mot"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="codigoDeOficina"            column="agn_cod_ofi"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
    <result property="ejecutivoInversiones"       column="agn_sol_eje"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
    </resultMap>
    
    <resultMap id="ClienteTO" class="java.util.HashMap">
        <result property="email"              column="cli_dir_eml"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="rut"                column="cli_rut_cli"    javaType="java.lang.Long"      jdbcType="INTEGER"/>             
        <result property="telefonoCelular"    column="cli_tel_cel"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="telefonoFijo"       column="cli_tel_fjo"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
    </resultMap>
    
    <resultMap id="EjecutivoTO" class="java.util.HashMap">
        <result property="nombre"  column="NOMBRE"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="codigo"  column="USERID"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="oficina" column="OFICINA"   javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="banca"   column="BCA_GJ"    javaType="java.lang.String"    jdbcType="VARCHAR"/>           
        <result property="cargo"   column="ID_PST"    javaType="java.lang.String"    jdbcType="VARCHAR"/>             
    </resultMap>
    
    <resultMap id="EvaluacionReunionTO" class="java.util.HashMap">
        <result property="cumpleHoraAgendada"     column="cld_hra_agn"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="comentarioHoraAgendada" column="cld_hra_com"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="cumpleExpectativas"     column="cld_exp_agn"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="comentarioExpectativas" column="cld_exp_com"    javaType="java.lang.String"    jdbcType="VARCHAR"/>           
        <result property="notaCita"               column="cld_nta_agn"    javaType="java.lang.String"    jdbcType="VARCHAR"/>             
    <result property="codigoDelEjecutivo"     column="agn_cod_eje"    javaType="java.lang.String"    jdbcType="VARCHAR"/>             
    <result property="fechaDeInicio"          column="agn_fec_ini"    javaType="Date"                jdbcType="VARCHAR"/>             
    <result property="rutDelCliente"          column="cli_rut_cli"    javaType="java.lang.Long"      jdbcType="VARCHAR"/>             
    <result property="motivoReunion"          column="mot_cod_mot"    javaType="java.lang.String"    jdbcType="VARCHAR"/>             
    </resultMap>
    
    <procedure id="actualizar" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_mod_agn(#agn_cod_eje#,#agn_fec_ini#,#cli_rut_cli#,#agn_fec_fin#,#agn_cod_est#,#agn_com#,#mot_cod_mot#,#agn_rut_bkp#, #agn_tip_not#, #agn_cod_ofi#, #agn_cod_cnl#, #agn_sol_eje#)}
    </procedure>
    
    <procedure id="traerAgendaEjecutivo" parameterClass="java.util.HashMap" resultMap="AgendaTO">
        {CALL sp_cns_agn_eje(#cod_eje#,#fec_ini#,#fec_fin#)}
    </procedure>
    
    <procedure id="traerAgendaCliente" parameterClass="java.util.HashMap" resultMap="AgendaTO">
        {CALL sp_cns_agn_cli(#cli_rut_cli#,#agn_fec_ini#,#agn_fec_fin#)}
    </procedure>
    
    <procedure id="bloqueoYDesbloqueoDeAgenda" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_blq_agn_fec(#agn_cod_eje#,#fec_ini#,#fec_fin#,#agn_cod_est#,#agn_com#,#mot_cod_mot#,#agn_cod_cnl#)}
    </procedure>
    
    <procedure id="actualizarCliente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_mod_cli(#cli_rut_cli#,#cli_dir_eml#,#cli_tel_cel#,#cli_tel_fjo#)}
    </procedure>
    
    <procedure id="traerDatosDeContacto" parameterClass="java.util.HashMap" resultMap="ClienteTO">
        {CALL sp_cns_cli(#cli_rut_cli#)}
    </procedure>
    
    <procedure id="agregarGestion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_ins_ges(#ges_fec_ges#,#ges_cod_usu#,#ges_pst_ges#,#ges_cod_mot#,#ges_cod_est#,#ges_cod_ofi#,#ges_fec_ini#,#ges_fec_fin#,#ges_rut_cli#,#ges_cod_eje#)}
    </procedure>
    
    <procedure id="traerMotivos" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_mot(#mot_tip_mot#)}
    </procedure>
    
    <procedure id="traerDisponibles" parameterClass="java.util.HashMap" resultMap="AgendaTO">
        {CALL sp_cns_agn_dsp(#agn_cod_eje#,#agn_fec_ini#,#agn_fec_fin#)}
    </procedure>
    
    <procedure id="existeCitaEnRangoDeFechas" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_cta_per(#cli_rut_cli#, #fecha_agn#, #dias#)}
    </procedure>
    
    <procedure id="existenHorasAgendadas" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_agn_per(#cod_eje#,#fecha_ini#,#fecha_fin#)}
    </procedure>
    
    <procedure id="traerOficinasPiloto" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_ofi_pil()}
    </procedure>
    
    <procedure id="evaluarReunion" parameterClass="java.util.HashMap" >
        {CALL sp_ins_cld_srv(#agn_cod_eje#, #agn_fec_ini#, #cli_rut_cli#, #cld_nta_agn#, #cld_exp_com#, #cld_exp_agn#, #cld_hra_com#, #cld_hra_agn#, #mot_cod_mot#)}
    </procedure>
    
    <procedure id="traerEvaluacion" parameterClass="java.util.HashMap" resultMap="EvaluacionReunionTO">
        {CALL sp_cns_cld_srv(#agn_cod_eje#, #agn_fec_ini#, #cli_rut_cli#)}
    </procedure>
    
    <!-- EJECUTIVO  AGENDA ABIERTA-->
    <procedure id="consultarEjecutivo" parameterClass="java.util.HashMap" resultMap="EjecutivoTO">
        {CALL sp_cns_dat_eje(#cod_eje#)}
    </procedure>
    
    <procedure id="consultarJefeDeOficina" parameterClass="java.util.HashMap" resultMap="EjecutivoTO">
        {CALL sp_cns_jof(#cod_ofi#)}
    </procedure>
    
    <procedure id="consultarEjecutivosbancaPremier" parameterClass="java.util.HashMap" resultMap="EjecutivoTO">
        {CALL sp_cns_eje_prm(#cod_ofi#)}
    </procedure>

<!-- Procedimientos de pagina de apoyo --> 
    <procedure id="proc_crea_url" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
        {CALL proc_crea_url(#codigo#,#descripcion#,#url#,#tipo#)}
    </procedure>

    <procedure id="proc_obtiene_tipo_url" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
        {CALL proc_obtiene_tipo_url()}
    </procedure>

    <procedure id="proc_obtiene_urls" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
        {CALL proc_obtiene_urls()}
    </procedure>

    <procedure id="proc_obtiene_url" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
        {CALL proc_obtiene_url(#codigo#)}
    </procedure>

    <procedure id="proc_upd_url" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
        {CALL proc_upd_url(#codigo#,#descripcion#,#url#,#tipo#)}
    </procedure>

    <procedure id="proc_elimina_url" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
        {CALL proc_elimina_url(#codigo#)}
    </procedure>
<!-- Inicio ResultMap y Procedure para Integracion Cobranza Normaliza -->
    <resultMap id="resultadoObtenerOficinasGerentesNormaliza" class="java.util.HashMap">
         <result property="codigo" javaType="String" column="cod_oficina" jdbcType="varchar"/>
         <result property="glosa" javaType="String" column="glosa_oficina" jdbcType="varchar"/>
    </resultMap>
  
    <procedure id="obtenerOficinasGerentesNormaliza" parameterClass="java.util.HashMap" resultMap="resultadoObtenerOficinasGerentesNormaliza">
        {CALL sp_cns_ofi_gerentes_normaliza(#usuario#)}
    </procedure>
<!-- FIN ResultMap y Procedure para Integracion Cobranza Normaliza -->

    
<!-- SECCION CARTERA CLIENTES PERSONA  -->

    <resultMap id="salidaConsultarEjecutivoCarteraPersona" class="java.util.HashMap">
        <result property="codRegional"        javaType="String"     column="cod_regional"     jdbcType="char" />
        <result property="descRegional"      javaType="String"     column="desc_regional"   jdbcType="char" />
        <result property="codOficina"          javaType="String"      column="cod_oficina"       jdbcType="char" />
        <result property="descOficina"        javaType="String"      column="desc_oficina"     jdbcType="char" />
        <result property="ejecutivo"           javaType="String"       column="ejecutivo"          jdbcType="char" />     
    </resultMap>       

    <!-- dbo.sp_cns_usu_car_cli_per (@cod_eje char(12)) -->
    <procedure id="consultarEjecutivoCarteraPersona" parameterClass="java.util.HashMap" resultMap="salidaConsultarEjecutivoCarteraPersona">
        {CALL sp_cns_usu_car_cli_per(#usuario#)}
    </procedure>    
    
<!-- TERMINO  SECCION CARTERA CLIENTES PERSONA -->

<!-- Inicio ResultMap y Procedure para Mega Marketing one to one -->

    <resultMap id="cargarOferta" class="java.util.HashMap">
        <result property="codigo" column="cod"/>
        <result property="descripcion" column="des"/>
    </resultMap>

    <resultMap id="consultarOferta" class="java.util.HashMap">
        <result property="id" column="id"/>
        <result property="codigo" column="ofe_cod"/>
        <result property="fechaInicio" column="ofe_fec_ini"/>
        <result property="descripcion" column="ofe_des"/>
        <result property="codigoEstado" column="eof_cod"/>
        <result property="descEstado" column="eof_des"/>
        <result property="fechaTermino" column="ofe_fec_ter"/>
        <result property="prioridad" column="ofe_prd"/>
        <result property="codigoTipo" column="ofe_tip"/>
        <result property="descrTipo" column="gto_des"/>
        <result property="totalOfertas" column="total_ofe"/>
        <result property="pagina" column="pag"/>
    </resultMap>

    <resultMap id="paginacionOferta" class="java.util.HashMap">
        <result property="codigo" column="ofe_cod"/>
        <result property="fechaInicio" column="ofe_fec_ini"/>
        <result property="descripcion" column="ofe_des"/>
        <result property="codigoEstado" column="eof_cod"/>
        <result property="descEstado" column="eof_des"/>
        <result property="fechaTermino" column="ofe_fec_ter"/>
        <result property="prioridad" column="ofe_prd"/>
        <result property="codigoTipo" column="ofe_tip"/>
        <result property="descrTipo" column="gto_des"/>
    </resultMap>

    <resultMap id="consultarEstadistica" class="java.util.HashMap">
        <result property="ofe_tip" column="ofe_tip"/>
        <result property="clientesCargados" column="clientesCargados"/>
        <result property="clientesBloqueados" column="clientesBloqueados"/>
        <result property="clientesClickOferta" column="clientesClickOferta"/>
    </resultMap>

    <resultMap id="clientesBloqueados" class="java.util.HashMap">
        <result property="rutCliente" column="cli_rut"/>
        <result property="estadoCliente" column="blq_des"/>
    </resultMap>

    <resultMap id="cargarOfertaModificar" class="java.util.HashMap">
        <result property="codigo" column="codigoOferta"/>
        <result property="fechaInicio" column="fechaInicio"/>
        <result property="descripcion" column="descripcionOferta"/>
        <result property="codigoEstado" column="codigoEstado"/>
        <result property="descEstado" column="descripcionEstado"/>
        <result property="codigoTipo" column="codigoTipoOferta"/>
        <result property="descrTipo" column="descripcionTipoOferta"/>
        <result property="fechaTermino" column="fechaTermino"/>
        <result property="prioridad" column="prioridad"/>
        <result property="nombreUrlDeServicio" column="nombreUrlDeServicio"/>
        <result property="urlCampoDeAccion" column="urlCampoDeAccion"/>
        <result property="codigoCampoAccion" column="codigoCampoAccion"/>
        <result property="textoVariable" column="textoVariable"/>
        <result property="codigoTextoVariable" column="codigoTextoVariable"/>
        <result property="recursoWEB" column="recursoWEB"/>
        <result property="frasePagina" column="frasePagina"/>
        <result property="codigoURLServicio" column="codigoURLServicio"/>
        <result property="codigoTipoProducto" column="tpo_cod"/>
        <result property="codigoSubTipoProducto" column="sub_tpo_cod"/>
    </resultMap>
    
    <resultMap id="conjuntoLinkServicio" class="java.util.HashMap">
        <result property="codigo_Link" column="url_cod"/>
        <result property="descripcion_Link" column="url_dsc"/>
    </resultMap>
    
    <resultMap id="resultadoInsercionOferta" class="java.util.HashMap">
        <result property="codigoOferta" column="codigoOferta"/>
        <result property="codigoUrl" column="codigoUrl"/>
        <result property="codigoPlantilla" column="codigoPlantilla"/>
        <result property="codigoTextoVariable" column="codigoTextoVariable"/>
    </resultMap>
    
    <resultMap id="plantilla" class="java.util.HashMap">
        <result property="plantillaHtml" column="pag_htm"/>
    </resultMap>
    
     <resultMap id="parametrosTextoVariable" class="java.util.HashMap">
        <result property="codigoParametros" column="codigoParametros"/>
        <result property="descripcionParametros" column="descripcionParametros"/>
    </resultMap>
    
    <resultMap id="paginaPublicitaria" class="java.util.HashMap">
        <result property="codigoOferta" column="ofe_cod"/>
        <result property="tipoOferta" column="ofe_tip"/>
        <result property="urlRecurso" column="url_pp_desc"/>
        <result property="textoVariable" column="txt_des"/>
        <result property="urlDeServicio" column="url_arc"/>
        <result property="nombreUrlServ" column="txt_nom"/>
        <result property="urlCampoAccion" column="url_acc"/>
    </resultMap>

    <resultMap id="paginaPublicitariaADesplegar" class="java.util.HashMap">
        <result property="codigoOferta" column="COD_OFERTA"/>
        <result property="plantilla" column="PLANTILLA_PAGINA_PUBLICITARIA"/>
        <result property="textoVariable" column="TEXTO_VARIABLE"/>
        <result property="tipoOferta" column="TIPO_PP"/>
        <result property="urlServicio" column="URL_LINK_DE_SERVICIO"/>
        <result property="nombreUrlServicio" column="NOMBRE_URL_DE_SERVICIO"/>
        <result property="urlRecurso" column="URL_RECURSO"/>
        <result property="urlCampoAccion" column="URL_CAMPO_ACCION"/>
        <result property="URL_CLICK_CAMPO_ACCION" column="URL_CLICK_CAMPO_ACCION"/>
    </resultMap>

    <resultMap id="obtenerCamposDeAccion" class="java.util.HashMap">
        <result property="cantidad" column="cantidad"/>
        <result property="codigo" column="codigo"/>
        <result property="nombre" column="nombre"/>
        <result property="url" column="url"/>
        <result property="cli" column="cli"/>
    </resultMap>

    <resultMap id="verificacionDeClientes" class="java.util.HashMap">
        <result property="cantidad" column="cantidad"/>
    </resultMap>
    
    <resultMap id="TipoProducto" class="java.util.HashMap">
        <result property="codigoProducto" column="tpo_cod"/>
        <result property="detalleProducto" column="tpo_des"/>
    </resultMap>
    
    <resultMap id="SubTipoProducto" class="java.util.HashMap">
        <result property="codigoSubProducto" column="sub_tpo_cod"/>
        <result property="descripcionSubProducto" column="sub_tpo_des"/>
    </resultMap>
    
    <procedure id="obtenerOfertaADesplegar" resultMap="paginaPublicitariaADesplegar" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_cns_ofe_cli(#cli_rut#,#canal#,#prod#)}
    </procedure>

    <procedure id="ingresarDatosDespliegueOferta" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_ins_tdesp(#rut#,#codigoOferta#,#respuestaCliente#)}
   </procedure>

    <procedure id="ingresarEstadisticaRespuestaClietne" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_ins_est_respcli(#rutCliente#,#digitoVerificador#,#codigoOferta#,#urlRedireccion#)}
   </procedure>

    <procedure id="cargarOferta" resultMap="cargarOferta" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_crg_ofe(#tpo_cns#)}
    </procedure>

    <procedure id="consultarOferta" resultMap="consultarOferta" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_cns_ofe(#canal_ofe#, #estado_ofe#, #tipo_ofe#, #cantidad#, #paginasolicitada#)}
    </procedure>

    <procedure id="consultarEstadistica" resultMap="consultarEstadistica" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_cns_est()}
    </procedure>

    <procedure id="obtieneClientesBloqueados" resultMap="clientesBloqueados" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_cns_blq_cli(#rutCliente#)}
    </procedure>

    <procedure id="bloquearCliente"  parameterClass="java.util.HashMap">
        {CALL sp_mmkt_blq_cli(#rutCliente#)}
    </procedure>

    <procedure id="desBloquearCliente"  parameterClass="java.util.HashMap">
        {CALL sp_mmkt_des_blq_cli(#rutCliente#)}
    </procedure>

    <procedure id="finalizarOferta"  parameterClass="java.util.HashMap">
        {CALL sp_mmkt_fin_ofe(#codOferta#)}
    </procedure>

    <procedure id="obtenerLinkServicio"  resultMap="conjuntoLinkServicio"  parameterClass="java.util.HashMap">
        {CALL sp_mmkt_cns_lnk_srv}
    </procedure>

    <procedure id="insertarOferta"  resultMap="resultadoInsercionOferta" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_ins_ofe(#nombrePP#,#nombreImagen#,#nombreTextoVariable#,#tipoPP#,#responsable#,#url_desc#,#url_arc#,#plt_cod#,#ele_url#,#url_cod#,#nombreArchivoPP#,
        #textoVariable#,#cod_txt_var#,#campoAccion#, #codigoTipoProducto#, #codigoSubTipoProducto#)}
    </procedure>
    
    <procedure id="obtenerPlantilla"  resultMap="plantilla" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_cns_plt(#tipoPlantilla#)}
    </procedure>

    <procedure id="obtenerParametros"  resultMap="parametrosTextoVariable" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_cns_par()}
    </procedure>

    <procedure id="obtenerPaginaPublicitaria"  resultMap="paginaPublicitaria" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_cns_pre_vis_pps(#codigoOferta#)}
    </procedure>

    <procedure id="publicarOferta"  parameterClass="java.util.HashMap">
        {CALL sp_mmkt_pub_ofe(#canal#, #codigo#, #fechaCreacion#, #fechaTermino#, #prioridad#)}
    </procedure>
    
    <procedure id="republicarOferta"  parameterClass="java.util.HashMap">
        {CALL sp_mmkt_upd_est_ofe(#codigo#, #fechaCreacion#, #fechaTermino#, #prioridad#)}
    </procedure>

    <procedure id="eliminarOferta"  parameterClass="java.util.HashMap">
        {CALL sp_mmkt_eli_ofe(#codOferta#, #tipoOferta#)}
    </procedure>
    
    <procedure id="cargarOfertaModificar" resultMap="cargarOfertaModificar" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_crg_ofe_mod(#codigo#)}
    </procedure>

    <procedure id="obtenerCamposDeAccion" resultMap="obtenerCamposDeAccion" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_cns_acc(#accion#,#codigo#,#nombre#,#url#, #cli#)}
    </procedure>

    <procedure id="verificacionDeClientes" resultMap="verificacionDeClientes" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_ver_cli(#codigoOferta#)}
    </procedure>
    
    <procedure id="modificarOferta" parameterClass="java.util.HashMap">
           {CALL sp_mmkt_upd_ofe (#codigoOferta#, #descripcionOferta#, #recursoWEB#, #codigoCampoAccion#, #textoVariable#, #frasePagina#, #codigolinkDeServicio#, #urlLinkServicio#, #nombreLinkServicio#, #codigoTipoProducto#, #codigoSubTipoProducto#)}
    </procedure>
    
    <procedure id="obtenerParametrosDeOferta"  resultMap="parametrosTextoVariable" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_cns_nom_par_ofe(#codigoOferta#)}
    </procedure>
    
    <procedure id="obtenerTipoProducto"  resultMap="TipoProducto" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_cns_tpo()}
    </procedure>
    
    <procedure id="obtenerSubTipoProducto"  resultMap="SubTipoProducto" parameterClass="java.util.HashMap">
        {CALL sp_mmkt_cns_sub_tpo(#codigoProducto#)}
    </procedure>
    
    <!-- DBA.sp_cns_rpl_eje_fec(@eje_reemplazado, @eje_reemplazante, @fecha_ini, @fecha_fin) -->
    <procedure id="obtenerReemplazosEjecutivoPorFecha" parameterClass="java.util.HashMap" resultMap="salidaReemplazados">
        {CALL sp_cns_rpl_eje_fec(
        <isNull property="codigoEjecutivo">NULL</isNull>
        <isNotNull property="codigoEjecutivo">#codigoEjecutivo#</isNotNull>
        ,<isNull property="codigoReemplazante">NULL</isNull>
        <isNotNull property="codigoReemplazante">#codigoReemplazante#</isNotNull>
        ,<isNull property="fechaInicio">NULL</isNull>
        <isNotNull property="fechaInicio">#fechaInicio#</isNotNull>
        ,<isNull property="fechaFin">NULL</isNull>
        <isNotNull property="fechaFin">#fechaFin#</isNotNull>
        ,<isNull property="tipoBusqueda">NULL</isNull>
        <isNotNull property="tipoBusqueda">#tipoBusqueda#</isNotNull>)}
    </procedure>
    <!-- DBA.sp_ins_cambio_cartera(@eje_old, @eje_new, @fec_cmb, @jof_cmb, @mot_cmb) -->
    <procedure id="ingresarCambioCartera" parameterClass="java.util.HashMap">
        {CALL sp_ins_cambio_cartera (
            #ejecutivoReemplazado#,
            #ejecutivoReemplazante#,            
            #fechaCambio#,
            #jofCambio#,
            <isNull property="motivoCambio">NULL</isNull>
            <isNotNull property="motivoCambio">#motivoCambio#</isNotNull>)}
    </procedure>
    <!-- DBA.sp_cns_cambio_cartera(@eje_reemplazado) -->
    <procedure id="obtenerCambiosCarteraParaEjecutivo" parameterClass="java.util.HashMap" resultMap="salidaCambioCartera">
        {CALL sp_cns_cambio_cartera(#codigoEjecutivo#)}
    </procedure>
    <!-- DBA.sp_ing_est_ofer(@ofe_cod, @ofc_crr, @rof_eje, @tro_cod, @monto, @cod_moneda, @tasa, @mot_rechazo,
                @vpr_val_fec, @vpr_val_nom, @vpr_val_rut, @mct_cod, @fono_casa, @fono_celular, @fono_oficina,
                @codigo_oficina, @can_ges, @in_out, @com_cod) -->
    <procedure id="ingresarGestionOferta" parameterClass="java.util.HashMap">
        {CALL sp_ing_est_ofer (
            #codigoOferta#,
            #ejecutivoReemplazado#,
            #inicioDelPeriodoDeReemplazo#,
            #terminoDelPeriodoDeReemplazo#,
            #idVig#,
            #idMotivoReemplazo#,
            #glosaMotReemplazo#,
            #codigoDeUnidad#,
            #ejecutivoIngreso#)}
    </procedure>
<!-- FIN ResultMap y Procedure para Mega Marketing one to one -->
<!-- Autoservicio -->
    <resultMap id="salidaConsultaOfertaPriorizadaPorCliente" class="java.util.HashMap">
        <result property="descripcionOferta" javaType="String" column="ofe_des"/>
        <result property="codigoOferta" javaType="String" column="ofe_cod"/>
        <result property="codigoProducto" javaType="String" column="tpo_cod"/>
        <result property="codigoSubProducto" javaType="String" column="sub_tpo_cod"/>
    </resultMap>
    <procedure id="consultaOfertaPriorizadaPorCliente" resultMap="salidaConsultaOfertaPriorizadaPorCliente" parameterClass="java.util.HashMap">
        {CALL sp_cns_ofe_priorizada(#rutCliente#, #tipoOferta#)}
    </procedure>
<!-- Fin Autoservicio -->
<!-- INTEGRACION ETE - EPIPHANY -->
    <resultMap id="camposPlanillaOferta" class="java.util.HashMap">
        <result property="glosa"        javaType="String"     column="plp_glosa"     jdbcType="VARCHAR" />
        <result property="tipoMoneda"      javaType="String"     column="par_gls_mon"   jdbcType="VARCHAR" />
        <result property="codigo"          javaType="String"      column="par_cod"       jdbcType="VARCHAR" />
        <result property="valor"        javaType="String"      column="vpo_val_str"     jdbcType="VARCHAR" />
        <result property="valorNumerico"  javaType="Double"       column="vpo_val_num"          jdbcType="DECIMAL" />
        <result property="tipoValor"        javaType="String"      column="tipo_valor"     jdbcType="VARCHAR" />     
    </resultMap>       
    
    <procedure id="consultarCamposPlantillaOferta" parameterClass="java.util.HashMap" resultMap="camposPlanillaOferta">
        {CALL sp_cns_val_plant_ofe(#codigoOferta#,
        <isNotNull property="corrOferta">#corrOferta#</isNotNull>
        <isNull property="corrOferta">NULL</isNull>)}
    </procedure>
    
    <procedure id="consultarInyeccionEpiphany" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_iny_ofe(#codigoOferta#)}
    </procedure>
    
    <procedure id="guardarResultadoOferta" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_ins_val_camp_vpo(#codigoOferta#, #correlativoOferta#,
            <isNotNull property="codigo1">#codigo1#</isNotNull><isNull property="codigo1">NULL</isNull>,
            <isNotNull property="valor1">#valor1#</isNotNull><isNull property="valor1">NULL</isNull>,
            <isNotNull property="codigo2">#codigo2#</isNotNull><isNull property="codigo2">NULL</isNull>,
            <isNotNull property="valor2">#valor2#</isNotNull><isNull property="valor2">NULL</isNull>,
            <isNotNull property="codigo3">#codigo3#</isNotNull><isNull property="codigo3">NULL</isNull>,
            <isNotNull property="valor3">#valor3#</isNotNull><isNull property="valor3">NULL</isNull>,
            <isNotNull property="codigo4">#codigo4#</isNotNull><isNull property="codigo4">NULL</isNull>,
            <isNotNull property="valor4">#valor4#</isNotNull><isNull property="valor4">NULL</isNull>,
            <isNotNull property="codigo5">#codigo5#</isNotNull><isNull property="codigo5">NULL</isNull>,
            <isNotNull property="valor5">#valor5#</isNotNull><isNull property="valor5">NULL</isNull>,
            <isNotNull property="codigo6">#codigo6#</isNotNull><isNull property="codigo6">NULL</isNull>,
            <isNotNull property="valor6">#valor6#</isNotNull><isNull property="valor6">NULL</isNull>,
            <isNotNull property="codigo7">#codigo7#</isNotNull><isNull property="codigo7">NULL</isNull>,
            <isNotNull property="valor7">#valor7#</isNotNull><isNull property="valor7">NULL</isNull>,
            <isNotNull property="codigo8">#codigo8#</isNotNull><isNull property="codigo8">NULL</isNull>,
            <isNotNull property="valor8">#valor8#</isNotNull><isNull property="valor8">NULL</isNull>,
            <isNotNull property="codigo9">#codigo9#</isNotNull><isNull property="codigo9">NULL</isNull>,
            <isNotNull property="valor9">#valor9#</isNotNull><isNull property="valor9">NULL</isNull>,
            <isNotNull property="codigo10">#codigo10#</isNotNull><isNull property="codigo10">NULL</isNull>,
            <isNotNull property="valor10">#valor10#</isNotNull><isNull property="valor10">NULL</isNull>,
            <isNotNull property="codigo11">#codigo11#</isNotNull><isNull property="codigo11">NULL</isNull>,
            <isNotNull property="valor11">#valor11#</isNotNull><isNull property="valor11">NULL</isNull>,
            <isNotNull property="codigo12">#codigo12#</isNotNull><isNull property="codigo12">NULL</isNull>,
            <isNotNull property="valor12">#valor12#</isNotNull><isNull property="valor12">NULL</isNull>,
            <isNotNull property="codigo13">#codigo13#</isNotNull><isNull property="codigo13">NULL</isNull>,
            <isNotNull property="valor13">#valor13#</isNotNull><isNull property="valor13">NULL</isNull>,
            <isNotNull property="codigo14">#codigo14#</isNotNull><isNull property="codigo14">NULL</isNull>,
            <isNotNull property="valor14">#valor14#</isNotNull><isNull property="valor14">NULL</isNull>,
            <isNotNull property="codigo15">#codigo15#</isNotNull><isNull property="codigo15">NULL</isNull>,
            <isNotNull property="valor15">#valor15#</isNotNull><isNull property="valor15">NULL</isNull>
        )}
    </procedure>
    
<!-- FIN INTEGRACION ETE - EPIPHANY -->

    <procedure id="traerDependenciasEjecutivos" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_eje_pst_vig(#ID_PST#)}
    </procedure>

<!-- INICIO GESTION HISTORIAL CAMPANAS -->
    <resultMap id="getObtenerListadoTelefonosNoValidos" class="java.util.HashMap">
        <result property="fono_id" javaType="java.lang.Float" column="fono_id"/>
        <result property="rutCliente" javaType="String" column="cli_rut"/>
        <result property="dvCliente" javaType="String" column="cli_dv"/>
        <result property="codEjecutivo" javaType="String" column="cod_eje"/>
        <result property="tipo" javaType="String" column="tipo_fono"/>
        <result property="fono" javaType="String" column="fono"/>
        <result property="estado" javaType="String" column="estado"/>
        <result property="fec_cre" javaType="String" column="fec_cre"/>
    </resultMap>
    <procedure id="obtenerListadoTelefonosNoValidos" resultMap="getObtenerListadoTelefonosNoValidos" parameterClass="java.util.HashMap">
        {CALL sp_cns_tel_inv(#rutCliente#, #dvCliente#, #fecha#)}
    </procedure>
<!-- FIN GESTION HISTORIAL CAMPANAS -->    

    <parameterMap class="java.util.HashMap" id="setCstMtoMaxDisp">
        <parameter property="rutCliente" jdbcType="INT" javaType="Long"/>
        <parameter property="idProducto" jdbcType="CHAR" javaType="String"/>
        <parameter property="idSubProducto" jdbcType="CHAR" javaType="String"/>
    </parameterMap>
    
    <procedure id="cstMtoMaxDisp" resultClass="java.lang.Integer" parameterMap="setCstMtoMaxDisp" >
        {CALL sp_cns_mnt_comp_cart(?, ?, ?)}
    </procedure>
    
    <parameterMap class="java.util.HashMap" id="setUptMtoMaxDisp">
        <parameter property="rutCliente" jdbcType="INT" javaType="Long"/>
        <parameter property="monto" jdbcType="INT" javaType="Integer"/>
        <parameter property="idProducto" jdbcType="CHAR" javaType="String"/>
        <parameter property="idSubProducto" jdbcType="CHAR" javaType="String"/>
    </parameterMap>
    
    <procedure id="uptMtoMaxDisp" resultClass="java.lang.Integer" parameterMap="setUptMtoMaxDisp" >
        {CALL sp_upd_mnt_comp_cart(?, ?, ?, ?)}
    </procedure>

<!-- CUPO CAMPANA ONE TO ONE -->
    <resultMap id="getObtenerCupoTDCCampana" class="java.util.HashMap">
        <result property="codigo" javaType="String" column="par_cod"/>
        <result property="valor" javaType="String" column="vlr_par"/>
    </resultMap>
    <procedure id="obtenerCupoTDCCampana" resultMap="getObtenerCupoTDCCampana" parameterClass="java.util.HashMap">
        {CALL sp_cns_cupo_tdc(#rutCliente#, #idCampana#)}
    </procedure>

<!-- CAMPANAS ATM -->
    
    <resultMap id="salidaSiguienteOfertaATM" class="java.util.HashMap">
        <result property="codigoOferta" javaType="Integer" column="ofe_cod" jdbcType="int" />
    </resultMap> 
    <resultMap id="salidaOfertasATM" class="java.util.HashMap">
        <result property="codigoOferta"             javaType="String"   column="ofe_cod"       jdbcType="varchar"/>
        <result property="descripcion"              javaType="String"   column="ofe_des"        jdbcType="varchar"/>
        <result property="fechaInicio"              javaType="Date"     column="ofe_fec_ini"    jdbcType="DATE" />
        <result property="fechaFin"                 javaType="Date"     column="ofe_fec_ter"    jdbcType="DATE" />
        <result property="pagina"                   javaType="Integer"     column="pagina"         jdbcType="numeric" />
        <result property="totalRegistros"           javaType="Integer"     column="total_registros"          jdbcType="numeric" />
    </resultMap> 
    
    <procedure id="obtieneSiguienteCodigoOfertaATM" resultMap="salidaSiguienteOfertaATM">
        {CALL sp_acp_gen_ofe_cod_atm()}
    </procedure>
    
    <procedure id="obtieneOfertasATM" resultMap="salidaOfertasATM">
        {CALL sp_acp_cns_inf_ofe_atm(
            <isNotNull property="codigoOferta">#codigoOferta#</isNotNull><isNull property="codigoOferta">NULL</isNull>,
            #pagina#,
            #registrosPagina#
            )}
    </procedure>   

    <resultMap id="getObtieneOfertasPorEstadoYCanal" class="java.util.HashMap">
        <result property="codigoOferta"             javaType="String"   column="ofe_cod"       jdbcType="varchar"/>
        <result property="descripcion"              javaType="String"   column="ofe_des"       jdbcType="varchar"/>
        <result property="fechaInicio"              javaType="Date"     column="ofe_fec_ini"   jdbcType="DATE" />
        <result property="fechaFin"                 javaType="Date"     column="ofe_fec_ter"   jdbcType="DATE" />
        <result property="codEstado"                javaType="String"   column="eof_cod"       jdbcType="varchar" />
        <result property="descEstado"               javaType="String"   column="eof_des"       jdbcType="varchar" />
        <result property="idProducto"               javaType="String"   column="tpo_cod"       jdbcType="varchar" />
        <result property="producto"                 javaType="String"   column="tpo_des"       jdbcType="varchar" />
        <result property="producto2"                javaType="String"   column="sub_tpo_cod"   jdbcType="varchar" />
        <result property="descripcion2"             javaType="String"   column="sub_tpo_des"   jdbcType="varchar" />
        <result property="fechaIngreso"             javaType="Date"     column="ofe_fec_ing"   jdbcType="DATE" />
    </resultMap> 
    
    <procedure id="obtieneOfertasPorEstadoYCanal" resultMap="getObtieneOfertasPorEstadoYCanal">
        {CALL sp_acp_lis_ofe_atm(#codEstado#, #fechaInicio#, #fechaFin#)}
    </procedure>

    <procedure id="eliminarOfertaATM" resultClass="int">
        {CALL sp_acp_del_ofe_atm(#codigoOferta#, #estado#)}
    </procedure>

<!-- FIN CAMPANAS ATM -->

    <resultMap id="listadoJof" class="java.util.HashMap">
        <result property="nombreJof" javaType="String" column="NOMBRE"/>
        <result property="userIdJof" javaType="String" column="USERID"/>
        <result property="codigoOficinaJof" javaType="String" column="OFICINA"/>
        <result property="codigoBancaJof" javaType="String" column="BCA_GJ"/>
        <result property="idPstJof" javaType="String" column="ID_PST"/>
		<result property="nomPuestoJof" javaType="String" column="N_PUESTO"/>
        <result property="desCargoJof" javaType="String" column="DESC_CARGO"/>
        
    </resultMap>
    <procedure id="obtener_jof_por_oficina" parameterClass="java.util.HashMap" resultMap="listadoJof">
    {CALL sp_cns_jof_seg_oficina(#codOficina#)}
    </procedure>

<!-- INICIO CONSULTA DETALLE OFERTA UPGRADE TDC -->
    <parameterMap class="java.util.HashMap" id="setConsultaDetalleOferta">
        <parameter property="rutCliente" jdbcType="CHAR" javaType="String"/>
        <parameter property="campoBusqueda1" jdbcType="CHAR" javaType="String"/>
        <parameter property="campoBusqueda2" jdbcType="CHAR" javaType="String"/>
    <parameter property="codOferta" jdbcType="CHAR" javaType="String"/>
    </parameterMap>
    
    <resultMap id="getConsultaDetalleOferta" class="java.util.HashMap">
        <result property="contenido1" javaType="String" column="Contenido_Ca1"/>
        <result property="contenido2" javaType="String" column="Contenido_Ca2"/>
    </resultMap>
    
    <procedure id="consultaDetalleOferta" resultMap="getConsultaDetalleOferta" parameterMap="setConsultaDetalleOferta" >
        {CALL sp_cns_det_ofe(?, ?, ?, ?)}
    </procedure>
<!-- FIN CONSULTA DETALLE OFERTA UPGRADE TDC -->    

    <parameterMap id="setConsCodPltOFe" class="java.util.HashMap">
        <parameter property="idOferta"      jdbcType="Varchar" javaType="String" />
    </parameterMap>

    <resultMap id="getConsCodPltOFe" class="java.util.HashMap">
       <result  property="codigoPlantilla"      jdbcType="Varchar"   javaType="String" />                                               
    </resultMap>

    <procedure id="consCodPltOfe" parameterMap="setConsCodPltOFe" resultMap="getConsCodPltOFe">
       {CALL sp_cons_cod_plt_ofe(?)}
    </procedure>
    
<!-- INICIO CONSULTA NO CLIENTE ASOCIADO A UNA CAMPANA -->  
    <parameterMap id="setcampanasNoCliente" class="java.util.HashMap">
        <parameter property="rutCliente" jdbcType="CHAR" javaType="java.lang.String" />
    </parameterMap>

    <resultMap id="getcampanasNoCliente" class="java.util.HashMap">
        <result  property="cli_rut"         jdbcType="char"       javaType="String" />                                              
        <result  property="cli_dv"      jdbcType="char"       javaType="String" />                                              
        <result  property="cli_nom"         jdbcType="Varchar"    javaType="String" />
        <result  property="cli_ape"         jdbcType="Varchar"    javaType="String" />
        <result  property="ofe_des"         jdbcType="char"       javaType="String" />                                              
        <result  property="ofe_cod"         jdbcType="char"       javaType="String" />
        <result  property="ofc_crr"         jdbcType="int"        javaType="int" />
        <result  property="ofe_fec_ini"     jdbcType="datetime"   javaType="String" />                                              
        <result  property="ofc_eje_cab"     jdbcType="char"       javaType="String" />                                                     
        <result  property="ofe_fec_ter"     jdbcType="datetime"   javaType="String" />                                              
    </resultMap>

    <procedure id="campanasNoCliente" parameterMap="setcampanasNoCliente" resultMap="getcampanasNoCliente">
       {CALL sp_cns_ofe_ofc_cli(?)}
    </procedure>
    
<!-- FIN CONSULTA NO CLIENTE ASOCIADO A UNA CAMPANA --> 

<!-- INICIO CONSULTA RESUMEN CAMPANAS GESTIONADAS Y PRIORIZADAS POR EJECUTIVO -->
    <parameterMap id="setcampanasCodigoEjecutivo" class="java.util.HashMap">
        <parameter property="codigoEjecutivo" jdbcType="varchar" javaType="java.lang.String" />
        <parameter property="codigoBanca" jdbcType="varchar" javaType="java.lang.String" />
    </parameterMap>

    <resultMap id="getcampanasResumenGestionadosPriorizados" class="java.util.HashMap">
    	<result  property="codigoOferta"       jdbcType="Varchar"      javaType="String" column="codigoOferta"   />
        <result  property="campana"         jdbcType="Varchar"      javaType="String" column="campana" />                                              
        <result  property="leads"           jdbcType="int"          javaType="int" column="leads" />                                              
        <result  property="codigo"          jdbcType="Varchar"      javaType="String" column="codigo" />
        <result  property="fechaEstado"  jdbcType="date"      javaType="java.util.Date" column="fechaCambioEstado" />
        <result  property="fecha_termino"   jdbcType="datetime"     javaType="String" column="fecha_termino" />                                              
        <result  property="estado"          jdbcType="Varchar"      javaType="String" column="estado"  />    
        <result  property="producto"        jdbcType="Varchar"      javaType="String" column="producto" />
        <result  property="productoCodigo"  jdbcType="Varchar"      javaType="String" column="producto_cod" />
    </resultMap>

    <procedure id="campanasResumenGestionadosPriorizados" parameterMap="setcampanasCodigoEjecutivo" 
            resultMap="getcampanasResumenGestionadosPriorizados">
       {CALL sp_cns_resumen_campanas(?, ?)}
    </procedure>
<!-- FIN CONSULTA RESUMEN CAMPANAS GESTIONADAS Y PRIORIZADAS POR EJECUTIVO -->
<!-- INICIO ALMACENAMIENTO POR PERSISTENCIA DE REGISTRO COMUNICACION CLIENTE (AGENDAMIENTO FECHA/HORA) -->
    
    <procedure id="guardarEstadoOferta" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_ing_est_ofer(
                #codigo#, 
                #correlativo#, 
                #ejecutivo#, 
                #estado#, 
                #monto#, 
                <isNotNull property="moneda">#moneda#</isNotNull><isNull property="moneda"></isNull>, 
                #tasaPeriodo#, 
                #codRechazo#, 
                <isNotNull property="fechaEstado">#fechaEstado#</isNotNull><isNull property="fechaEstado"></isNull>, 
                #nombre#, 
                #rut#, 
                #fuente#, 
                <isNotNull property="fonoCelular">#fonoCelular#</isNotNull><isNull property="fonoCelular"></isNull>, 
                <isNotNull property="fonoAdicional">#fonoAdicional#</isNotNull><isNull property="fonoAdicional"></isNull>, 
                <isNotNull property="fonoTrabajo">#fonoTrabajo#</isNotNull><isNull property="fonoTrabajo"></isNull>, 
                #codigoOficina#, 
                #canalContacto#,
        #idLlamada#,
                #codSupervisor#)} 

    </procedure>
<!-- INICIO ALMACENAMIENTO POR PERSISTENCIA DE REGISTRO COMUNICACION CLIENTE (AGENDAMIENTO FECHA/HORA) -->
<!-- INICIO Obtener campanas vigentes cliente -->
    <parameterMap id="setCampanasVigentesCliente" class="java.util.HashMap">
        <parameter property="rut"           jdbcType="Varchar" javaType="String" />
        <parameter property="codOferta"     jdbcType="Varchar" javaType="String" />
    </parameterMap>

    <resultMap id="getCampanasVigentesCliente" class="java.util.HashMap">
        <result  property="codigo"          jdbcType="Varchar"   javaType="String" />
        <result  property="correlativo"     jdbcType="Numeric"   javaType="Integer" />
        <result  property="oferNombre"      jdbcType="Varchar"   javaType="String" />
        <result  property="estadoOfer"      jdbcType="Varchar"   javaType="String" />
        <result  property="ejecutivo"       jdbcType="Varchar"   javaType="String" />
        <result  property="montoPre"        jdbcType="Numeric"   javaType="Long" />
        <result  property="fechInicio"      jdbcType="datetime"  javaType="String" />
        <result  property="fechFin"         jdbcType="datetime"  javaType="String" />
        <result  property="codBanca"        jdbcType="Varchar"  javaType="String" />
        <result  property="tipoAgendamiento" jdbcType="Varchar"  javaType="String" />
    </resultMap>

    <procedure id="campanasVigentesCliente" parameterMap="setCampanasVigentesCliente" 
            resultMap="getCampanasVigentesCliente">
       {CALL sp_cons_ofe_clte_campana(?, ?)}
    </procedure>
<!-- FIN Obtener campanas vigentes cliente -->
<!--  INICIO OBTENCION DE CAMPANAS PARA COMBO-->
    <parameterMap id="setCmbCampanasGestionadas"   class="java.util.HashMap">
        <parameter property="cod_bco"   jdbcType="Varchar"  javaType="String" />
    </parameterMap>
    <resultMap id="getCmbCampanasGestionadas"  class="java.util.HashMap">
        <result property="codigoProducto"           javaType="String"   column="tpo_cod"        jdbcType="char" />
        <result property="descripcionProducto"      javaType="String"   column="tpo_des"        jdbcType="varchar" />
        <result property="codigoSubProducto"        javaType="String"   column="sub_tpo_cod"    jdbcType="char" />
        <result property="descripcionSubProducto"   javaType="String"   column="sub_tpo_des"    jdbcType="char" />
        <result property="codigoOferta"             javaType="String"   column="ofe_cod"        jdbcType="varchar" />
        <result property="descripcionOferta"        javaType="String"   column="ofe_des"        jdbcType="varchar" />
    </resultMap>
    <procedure id="obtenerComboCampanasGestionadas" parameterMap="setCmbCampanasGestionadas" 
            resultMap="getCmbCampanasGestionadas">
       {CALL sp_cns_cmb_ges(?)}
    </procedure>

    <parameterMap id="setCmbCampanasPriorizadas"   class="java.util.HashMap">
        <parameter property="cod_eje"   jdbcType="Varchar"  javaType="String" />
        <parameter property="bca_cod"   jdbcType="Varchar"  javaType="String" />
    </parameterMap>
    <resultMap id="getCmbCampanasPriorizadas"  class="java.util.HashMap">
        <result property="codigoProducto"           javaType="String"   column="tpo_cod"        jdbcType="char" />
        <result property="descripcionProducto"      javaType="String"   column="tpo_des"        jdbcType="varchar" />
        <result property="codigoSubProducto"        javaType="String"   column="sub_tpo_cod"    jdbcType="char" />
        <result property="descripcionSubProducto"   javaType="String"   column="sub_tpo_des"    jdbcType="char" />
        <result property="codigoOferta"             javaType="String"   column="ofe_cod"        jdbcType="varchar" />
        <result property="descripcionOferta"        javaType="String"   column="ofe_des"        jdbcType="varchar" />
    </resultMap>
    <procedure id="obtenerComboCampanasPriorizadas" parameterMap="setCmbCampanasPriorizadas" 
            resultMap="getCmbCampanasPriorizadas">
       {CALL sp_cns_cmb_prz(?,?)}
    </procedure>

    <parameterMap id="setCmbCampanasAgendadas"   class="java.util.HashMap">
        <parameter property="cod_bco"   jdbcType="Varchar"  javaType="String" />
    </parameterMap>
    <resultMap id="getCmbCampanasAgendadas"  class="java.util.HashMap">
        <result property="codigoProducto"           javaType="String"   column="tpo_cod"        jdbcType="char" />
        <result property="descripcionProducto"      javaType="String"   column="tpo_des"        jdbcType="varchar" />
        <result property="codigoSubProducto"        javaType="String"   column="sub_tpo_cod"    jdbcType="char" />
        <result property="descripcionSubProducto"   javaType="String"   column="sub_tpo_des"    jdbcType="char" />
        <result property="codigoOferta"             javaType="String"   column="ofe_cod"        jdbcType="varchar" />
        <result property="descripcionOferta"        javaType="String"   column="ofe_des"        jdbcType="varchar" />
    </resultMap>
    <procedure id="obtenerComboCampanasAgendadas" parameterMap="setCmbCampanasAgendadas" 
            resultMap="getCmbCampanasAgendadas">
       {CALL sp_cns_cmb_age(?)}
    </procedure>
<!--  FIN OBTENCION CAMPANAS PARA COMBO -->

    <!-- INI: SP insert campaNas autogeneradas -->
    <parameterMap id="insertCampanaAutogeneradaParams"   class="java.util.HashMap">
        <parameter property="codigo"            jdbcType="Varchar"  javaType="String" />
        <parameter property="cic_cliente"       jdbcType="Varchar"  javaType="String" />
        <parameter property="rut"               jdbcType="Varchar"  javaType="String" />
        <parameter property="ejecutivo"         jdbcType="Varchar"  javaType="String" />
        <parameter property="dv"                jdbcType="Varchar"  javaType="String" />
        <parameter property="nombre"            jdbcType="Varchar"  javaType="String" />
        <parameter property="apellido_paterno"  jdbcType="Varchar"  javaType="String" />
        <parameter property="ranking"           jdbcType="Numeric"  javaType="Integer" />
        <parameter property="codigo_2"          jdbcType="Numeric"  javaType="Integer" />
        <parameter property="codigo_oficina"    jdbcType="Varchar"  javaType="String" />
        <parameter property="codigo_ubicacion"  jdbcType="Numeric"  javaType="Integer" />
        <parameter property="dia"               jdbcType="Numeric"  javaType="Integer" />
        <parameter property="apellido_materno"  jdbcType="Varchar"  javaType="String" />
        <parameter property="codigo_3"          jdbcType="Varchar"  javaType="String" />
        <parameter property="monto"             jdbcType="Numeric"  javaType="Integer" />
        <parameter property="des_ejecutivo"     jdbcType="Varchar"  javaType="String" />
        <parameter property="estado"            jdbcType="Varchar"  javaType="String" />
        <parameter property="monto_final"       jdbcType="Numeric"  javaType="Integer" />
        <parameter property="moneda"            jdbcType="Varchar"  javaType="String" />
        <parameter property="tasa_periodo"      jdbcType="Numeric"  javaType="Integer" />
        <parameter property="codigo_rechazo"    jdbcType="Numeric"  javaType="Integer" />
        <parameter property="fecha_estado"      jdbcType="datetime" javaType="String" />
        <parameter property="nombre_titular"    jdbcType="Varchar"  javaType="String" />
        <parameter property="rut_cliente"       jdbcType="Varchar"  javaType="String" />
        <parameter property="fuente"            jdbcType="Varchar"  javaType="String" />
        <parameter property="fono_celular"      jdbcType="Varchar"  javaType="String" />
        <parameter property="fono_contacto"     jdbcType="Varchar"  javaType="String" />
        <parameter property="fono_trabajo"      jdbcType="Varchar"  javaType="String" />
        <parameter property="oficina_ingreso"   jdbcType="Varchar"  javaType="String" />
        <parameter property="canal_contacto"    jdbcType="Varchar"  javaType="String" />
        <parameter property="texto"             jdbcType="Varchar"  javaType="String" />
        <parameter property="id_llamada"        jdbcType="Varchar"  javaType="String" />
        <parameter property="codigo_supervisor" jdbcType="Varchar"  javaType="String" />
    </parameterMap>
    <resultMap id="insertCampanaAutogeneradaResult"  class="java.util.HashMap">
        <result property="correlativo"           javaType="Integer"  column="correlativo"    jdbcType="Numeric" />
    </resultMap>
    <procedure id="insertarCampanaAutogenerada" parameterMap="insertCampanaAutogeneradaParams" resultMap="insertCampanaAutogeneradaResult">
       {CALL sp_ins_camp_auto(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)}
    </procedure>
    <!-- FIN: SP Insert campanas autogeneradas -->
    <parameterMap id="setcampanasPorClienteProducto" class="java.util.HashMap">
        <parameter property="rutCliente" 	jdbcType="varchar" javaType="java.lang.String" />
        <parameter property="codProducto" 	jdbcType="varchar" javaType="java.lang.String" />
        <parameter property="codSubProducto" jdbcType="varchar" javaType="java.lang.String" />
    </parameterMap>
   <resultMap id="getcampanasPorClienteProducto" class="java.util.HashMap">
        <result  property="ofeCod"       javaType="String" column="ofe_cod"   	jdbcType="varchar" />
        <result  property="correlativo"  javaType="String" column="ofc_crr"   	jdbcType="varchar" />
        <result  property="descripcion"  javaType="String" column="ofe_des"   	jdbcType="varchar" />
        <result  property="troCod"       javaType="String" column="tro_cod"   	jdbcType="varchar" />
        <result  property="ejeCab"       javaType="String" column="ofc_eje_cab" jdbcType="varchar" />                                              
    </resultMap>
    <procedure id="campanasPorClienteProducto" parameterMap="setcampanasPorClienteProducto" 
            resultMap="getcampanasPorClienteProducto">
       {CALL sp_cns_camp_rut_prod(?, ?, ?)}
    </procedure>

    <resultMap id="salidaParametrosCampanas" class="java.util.HashMap">
        <result property="codPlantilla" javaType="String" column="plt_cod" jdbcType="char"/>
        <result property="codigo" javaType="String" column="par_cod" jdbcType="char" />
        <result property="glosa" javaType="String"  column="plp_glosa" jdbcType="char" />
        <result property="monto" javaType="Long"  column="vpo_val_num" jdbcType="numeric" />
        <result property="tipoValor" javaType="String" column="plp_tvl" jdbcType="char"/>
        <result property="tipoMoneda" javaType="String" column="par_gls_mon" jdbcType="char"/>
        <result property="valorVpo" javaType="String" column="vpo_val_str" jdbcType="char"/>
        <result property="codigoOferta" javaType="String" column="codigoOferta" jdbcType="char"/>
        <result property="correlativo" javaType="Integer" column="correlativo" jdbcType="Numeric"/>
    </resultMap>
    
 
    <procedure id="obtenerParametrosCampanas" parameterClass="java.util.HashMap" resultMap="salidaParametrosCampanas">
        {CALL sp_cns_params_leads(#listaCampanas#)} 
    </procedure>
<!-- INICIO CANTIDAD CAMPANAS -->
    <resultMap id="cantidadCampanas" class="java.util.HashMap">
        <result property="ofeCod"    javaType="String"   column="ofe_cod"   jdbcType="VARCHAR" />
        <result property="ofeDes"    javaType="String"   column="ofe_des"   jdbcType="VARCHAR" />
        <result property="ofePend"   javaType="int"      column="ofe_pend"  jdbcType="INT" />
        <result property="ofeAgen"   javaType="int"      column="ofe_agen"  jdbcType="INT" />
        <result property="ofeAcep"   javaType="int"      column="ofe_acep"  jdbcType="INT" />
        <result property="ofeRech"   javaType="int"      column="ofe_rech"  jdbcType="INT" />
        <result property="ofeOtro"   javaType="int"      column="ofe_otro"  jdbcType="INT" />
    </resultMap>

    <procedure id="consultarCantidadCampanas" parameterClass="java.util.HashMap" resultMap="cantidadCampanas">
        {CALL sp_cons_est_ofe_eje(#idEjecutivo#)}
    </procedure>
<!-- FIN CANTIDAD CAMPANAS -->
<!-- INICIO DE OFERTA CLIENTE CAMPANA -->
    <resultMap id="setObtenerOfertaVigenteCliente" class="java.util.HashMap">
        <result property="montoCampanaCca"  javaType="String"  column="monto_campana_cca"  jdbcType="char" />
        <result property="nombreCampana"    javaType="String"  column="nombre_campana"     jdbcType="char" />
        <result property="montoCampanaLd"   javaType="String"  column="monto_campana_ld"   jdbcType="char" />
        <result property="vigenciaCampana"  javaType="String"  column="vigencia_campana"   jdbcType="DATE" />
        <result property="codOferta"        javaType="String"  column="cod_Oferta"         jdbcType="char" />
    </resultMap>   
    
	<procedure id="obtenerOfertaVigenteCliente" parameterClass="java.util.HashMap" resultMap="setObtenerOfertaVigenteCliente">
        {CALL sp_cns_oferta_cliente_suc(#rutCliente#,#vigente#,#nuevo#)}
    </procedure>
	
<!-- FIN OFERTA CLIENTE CAMPANA -->  
<!-- INICIO TIPO CAMPANAS -->
    <resultMap id="tiposCampana" class="java.util.HashMap">
        <result property="tpo_cod"    javaType="String"   column="tpo_cod"   jdbcType="CHAR" />
        <result property="sub_tpo_cod"    javaType="String"   column="sub_tpo_cod"   jdbcType="CHAR" />
    </resultMap>

    <procedure id="obtenerTiposCampana" parameterClass="java.util.HashMap" resultMap="tiposCampana">
        {CALL sp_cons_tipo_camp(#codigoOferta#)}
    </procedure>
<!-- FIN TIPO CAMPANAS -->
<!-- INICIO CAMPANAS VIGENTES INTEGRALES CLIENTE -->
    <resultMap id="getCampanasVigentesClienteIntegral" class="java.util.HashMap">
        <result  property="codigo"             column="ofe_cod"           jdbcType="CHAR"      javaType="java.lang.String" />
        <result  property="correlativo"        column="ofc_crr"           jdbcType="INT"       javaType="java.lang.Integer" />
        <result  property="oferNombre"         column="ofe_des"           jdbcType="CHAR"      javaType="java.lang.String" />
        <result  property="estadoOfer"         column="tro_cod"           jdbcType="CHAR"      javaType="java.lang.String" />
        <result  property="ejecutivo"          column="ofc_eje_cab"       jdbcType="CHAR"      javaType="java.lang.String" />
        <result  property="fechInicio"         column="ofe_fec_ini"       jdbcType="datetime"  javaType="java.lang.String" />
        <result  property="fechFin"            column="ofe_fec_ter"       jdbcType="datetime"  javaType="java.lang.String" />
        <result  property="tipoProducto"       column="tpo_cod"           jdbcType="CHAR"      javaType="java.lang.String" />
        <result  property="descripcionSubProducto"       column="sub_tpo_des"           jdbcType="varchar"      javaType="java.lang.String" />
        <result  property="subTipoProducto"    column="sub_tpo_cod"       jdbcType="CHAR"      javaType="java.lang.String" />
        <result  property="inyeccionEpiphany"  column="ofe_iny_epiphany"  jdbcType="varchar"   javaType="java.lang.String" />
        <result  property="nombreCliente"      column="cli_nom"           jdbcType="varchar"   javaType="java.lang.String" />
        <result  property="apPaternoCliente"   column="cli_ape_pat"       jdbcType="varchar"   javaType="java.lang.String" />
        <result  property="apMaternoCliente"   column="cli_ape_mat"       jdbcType="varchar"   javaType="java.lang.String" />
        <result  property="codigoBanca"   		column="bca_cod"       jdbcType="varchar"   javaType="java.lang.String" />
        <result  property="responsableOferta"   column="tip_age"       jdbcType="varchar"   javaType="java.lang.String" />
        <result  property="ultimoComentario"   column="obs_txt"       jdbcType="varchar"   javaType="java.lang.String" />
        <result  property="codigoRechazo"        column="mtr_cod"           jdbcType="INT"       javaType="java.lang.Integer" />
    </resultMap>
          
    <procedure id="campanasVigentesClienteIntegral" parameterClass="java.util.HashMap" resultMap="getCampanasVigentesClienteIntegral">
       { CALL sp_cons_ofe_clte_camp_int(#rutCliente#) }
    </procedure>
<!-- FIN CAMPANAS VIGENTES INTEGRALES CLIENTE -->

<!-- INI SET COMENTARIO INTEGRAL -->
	<parameterMap id="insertComentarioIntegralMap" class="java.util.HashMap">     	
        <parameter property="rutCliente"          	jdbcType="INT"      javaType="java.lang.Long" />
        <parameter property="dvCliente"         	jdbcType="CHAR"      javaType="String" />
        <parameter property="fechaGestion"          jdbcType="DATE"      javaType="java.util.Date" />
        <parameter property="ejecutivo"          	jdbcType="CHAR"      javaType="String" />
        <parameter property="comentarioIntegral"    jdbcType="VARCHAR"      javaType="String" />
    </parameterMap>

    <procedure id="insertComentarioIntegral" parameterMap="insertComentarioIntegralMap" resultClass="int">
        { CALL sp_ins_comentario_integral(?,?,?,?,?) }
    </procedure>
<!-- FIN SET COMENTARIO INTEGRAL -->

<!-- INI GET COMENTARIO INTEGRAL -->
  <parameterMap id="setConsultarComentarioIntegral" class="java.util.HashMap">
        <parameter property="rutCliente" 	jdbcType="int" javaType="long" />
    </parameterMap>
   <resultMap id="getConsultarComentarioIntegral" class="java.util.HashMap">
        <result  property="fechaComentario"     javaType="Date" column="Fec_Comentario"   	jdbcType="date" />
        <result  property="codEjecutivo"  javaType="String" column="Cod_Ejecutivo"   	jdbcType="varchar" />
        <result  property="comentarioIntegral"  javaType="String" column="Des_Comentario_Integral"   	jdbcType="varchar" />
    </resultMap>
    <procedure id="consultarComentarioIntegral" parameterMap="setConsultarComentarioIntegral" 
            resultMap="getConsultarComentarioIntegral">
       {CALL sp_cns_comentario_integral(?)}
    </procedure>
<!-- FIN GET COMENTARIO INTEGRAL -->
<!-- INICIO CONTADORES CAMPANAS -->
    <resultMap id="resultContCampPriorizadas" class="java.util.HashMap">
        <result property="contador"           javaType="int"  column="contadorN"    jdbcType="Numeric" />
    </resultMap>

    <procedure id="contadorCampanasPriorizadas" parameterClass="java.util.HashMap" resultMap="resultContCampPriorizadas">
        {CALL sp_cont_cli_prz(#idEjecutivo#)}
    </procedure>
    
    
    <resultMap id="resultContCampGestionadas" class="java.util.HashMap">
        <result property="contador"           javaType="int"  column="contadorN"    jdbcType="Numeric" />
    </resultMap>

    <procedure id="contadorCampanasGestionadas" parameterClass="java.util.HashMap" resultMap="resultContCampGestionadas">
        {CALL sp_cont_clientes_gest_su(#tipoRespuesta#,#fechaDesde#,#fechaHasta#,#idEjecutivo#,#fechaActual#)}
    </procedure>    
<!-- FIN CONTADORES CAMPANAS -->

<!-- inicio campanas CRM -->
<resultMap id="getObtenerCampanasCRM" class="java.util.HashMap">
        <result property="codigoCampana" javaType="String" column="ofe_cod" jdbcType="char" />
        <result property="correlativoOferta" javaType="String"  column="ofc_crr" jdbcType="char" />
        <result property="nombreCampana" javaType="String"  column="ofe_des" jdbcType="char" />
        <result property="rutCliente" javaType="String" column="cli_rut" jdbcType="char"/>
        <result property="dv" javaType="String" column="cli_dv" jdbcType="char"/>
        <result property="nomCliente" javaType="String" column="cli_nom" jdbcType="char"/>
        <result property="apellidoPaterno" javaType="String" column="cli_ape" jdbcType="char"/>
        <result property="numeroDiasGestionar" javaType="int" column="ofc_dia_ges" jdbcType="int"/>
        <result property="codigoMoneda" javaType="String" column="ofc_mon" jdbcType="char"/>
        <result property="montoSumado" javaType="Long" column="mto_sum" jdbcType="numeric"/>
        <result property="montoNormal" javaType="Long" column="mto_nor" jdbcType="numeric"/>
        <result property="tipoProducto" javaType="String" column="tpo_cod" jdbcType="char"/>
        <result property="descripcionProducto" javaType="String" column="tpo_des" jdbcType="char"/>
        <result property="rutEmpresa" javaType="String" column="emp_rut" jdbcType="char"/>
        <result property="nombreEmpresa" javaType="String" column="emp_nom" jdbcType="char"/>
        <result property="regPorGestionar" javaType="Integer" column="total_gest" jdbcType="numeric"/>
        <result property="fechaInicio" javaType="String" column="ofe_fec_ini" jdbcType="DATE"/>
        <result property="fechaFin" javaType="String" column="ofe_fec_ter" jdbcType="DATE"/>
        <result property="subTipoProducto" javaType="String" column="sub_tpo_cod" jdbcType="char"/>
        <result property="descripcionSubProducto" javaType="String" column="sub_tpo_des" jdbcType="char"/>
    </resultMap>
    
    <procedure id="obtenerCampanasCRM" parameterClass="java.util.HashMap" resultMap="getObtenerCampanasCRM">
        {CALL sp_cns_cli_crm(#tipoProducto#, #logEjecutivo#, #ofe_cod#, #emp_rut#, #subProducto#, 
         <isNull property="codigoDeBanca">NULL</isNull> 
         <isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull> 
        )} 
    </procedure>

       <procedure id="guardarEstadoCampana" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_ing_est_camp(
                #codigo#, 
                #correlativo#, 
                #ejecutivo#, 
                #estado#, 
                #monto#, 
                <isNotNull property="moneda">#moneda#</isNotNull><isNull property="moneda"></isNull>, 
                #tasaPeriodo#, 
                #codRechazo#, 
                <isNotNull property="fechaEstado">#fechaEstado#</isNotNull><isNull property="fechaEstado"></isNull>, 
                #nombre#, 
                #rut#, 
                #fuente#, 
                <isNotNull property="fonoCelular">#fonoCelular#</isNotNull><isNull property="fonoCelular"></isNull>, 
                <isNotNull property="fonoAdicional">#fonoAdicional#</isNotNull><isNull property="fonoAdicional"></isNull>, 
                <isNotNull property="fonoTrabajo">#fonoTrabajo#</isNotNull><isNull property="fonoTrabajo"></isNull>, 
                #codigoOficina#, 
                #canalContacto#,
        #idLlamada#,
                #codSupervisor#)} 

    </procedure>

	<procedure id="consultarCampanaRiesgo" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
	   {CALL sp_cns_campana_riesgo(#rutCliente#,#codCampana#)}
	</procedure>
	<procedure id="consultarCampanaConsumo" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
	   {CALL sp_cns_campana_consumo(#rutCliente#,#nomCampana#)}
	</procedure>
</sqlMap>    