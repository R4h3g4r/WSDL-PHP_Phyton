<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
	
<sqlMap namespace="pagossvp.procedimientosAlmacenados">	

	<procedure id="agregarComprobanteDePago" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_ins_com_pgo(#com_num_bol#, #com_idc_uni#, #com_idc_cli#, #com_cod_srv#, #com_cod_emp#, #com_mto_pag#,
                     #com_fec_vto#, #com_fec_gen#, #com_fec_pgo#, #com_cod_est#, #com_rut_emp#, #com_dig_vrf_emp#, 
					 #com_rut_pag#, #com_dig_vrf_pag#, #com_idc_suc#, #com_idc_caj#, #com_cod_cnl#)}
    </procedure>
	
	
	<resultMap id="comprobante" class = "java.util.HashMap">
    	<result property = "identificadorDelComprobante"		column = "com_idc_com"/>
	    <result property = "numeroDeLaBoleta"	    			column = "com_num_bol"/>
	    <result property = "identificadorUnicoDelCliente"	    column = "com_idc_uni"/>
	    <result property = "identificadorDelCliente"	    	column = "com_idc_cli"/>
	    <result property = "codigoDelBiller"		       		column = "com_cod_emp"/>
	    <result property = "codigoDelServicio"		    		column = "com_cod_srv"/>
	    <result property = "montoAPagar"	       				column = "com_mto_pag"/>
	    <result property = "fechaDeVencimiento"	       			column = "com_fec_vto"  	javaType="Date"/>
	    <result property = "fechaDeGeneracion"		       		column = "com_fec_gen"  	javaType="Date"/>
	    <result property = "fechaDePago"	        			column = "com_fec_pgo"  	javaType="Date"/>
	    <result property = "estado"	        					column = "com_cod_est"/>
	    <result property = "rutEmpresaGestora"		        	column = "com_rut_emp"  	javaType="long"/>
	    <result property = "digitoVerificadorEmpresaGestora"	column = "com_dig_vrf_emp"/>
	    <result property = "rutPagador"	       					column = "com_rut_pag"		javaType="long"/>
	    <result property = "digitoVerificadorPagador"	       	column = "com_dig_vrf_pag"/>
	    <result property = "nombreDelCanal"	        			column = "com_cod_cnl"/>
	    <result property = "identificadorDeLaSucursal"		    column = "com_idc_suc"/>
	    <result property = "identificadorDeLaCaja" 				column = "com_idc_caj"/>
	</resultMap>
	<procedure id="traerComprobanteDePago" parameterClass="java.util.HashMap" resultMap="comprobante">
        {CALL sp_cns_com_pgo(#com_idc_com#)}
    </procedure>
	
	
	<procedure id="actualizarComprobanteDePago" parameterClass="java.util.HashMap">
        {CALL sp_mod_com_pgo(#com_idc_com#, #com_num_bol#, #com_idc_uni#, #com_idc_cli#, #com_cod_srv#, #com_cod_emp#, #com_mto_pag#,
                     		#com_fec_vto#, #com_fec_gen#, #com_fec_pgo#, #com_cod_est#, #com_rut_emp#, #com_dig_vrf_emp#, 
					 		#com_rut_pag#, #com_dig_vrf_pag#, #com_idc_suc#, #com_idc_caj#, #com_cod_cnl#)}
    </procedure>
	
	
	<procedure id="agregarRegistroDeGestion" parameterClass="java.util.HashMap">
        {CALL sp_ins_reg_ges(#ges_tip_srv#, #ges_idc_srv#, #ges_est_srv#, #ges_cod_cnl#)}
    </procedure>
	
</sqlMap>	