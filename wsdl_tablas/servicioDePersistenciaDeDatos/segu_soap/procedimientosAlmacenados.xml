<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="segu_soap.procedimientosAlmacenados">
	
	<resultMap id="getCotizarSoap" class="java.util.HashMap">
	    <result property="prd_mto_precio" 		   column="prd_mto_precio"		    jdbcType="MONEY" javaType="java.lang.Double" />
	</resultMap>
	<parameterMap id="setCotizarSoap" class="java.util.HashMap">
	    <parameter property="prd_id_campania" jdbcType="NUMERIC" javaType="java.lang.Integer" />
	    <parameter property="prd_des_tipo_vehiculo_soap" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_id_canal" jdbcType="NUMERIC" javaType="java.lang.Integer" />
	</parameterMap>
	<procedure id="cotizarSoap" parameterMap="setCotizarSoap" resultMap="getCotizarSoap">
	    { CALL sp_CotizarSoap( ?,?,? ) }
	</procedure>
	
	<parameterMap id="setRegistrarCompra" class="java.util.HashMap">
	    <parameter property="prd_txt_folio" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_mto_prima" jdbcType="MONEY" javaType="java.lang.Double" />
	    <parameter property="prd_txt_poliza" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_fec_hms_venta" jdbcType="DATETIME" javaType="java.util.Date" />
	    <parameter property="prd_url_pdf_poliza" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_id_campania" jdbcType="NUMERIC" javaType="java.lang.Integer" />
	    <parameter property="prd_des_tipo_vehiculo_soap" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_id_canal" jdbcType="NUMERIC" javaType="java.lang.Integer" />
	    <parameter property="prd_txt_patente" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_des_anio_fabricacion" jdbcType="NUMERIC" javaType="java.lang.Integer" />
	    <parameter property="prd_txt_marca" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_txt_modelo" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_txt_numero_motor" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_rut_cliente" jdbcType="NUMERIC" javaType="java.lang.Long" />
	    <parameter property="prd_rut_asegurado" jdbcType="NUMERIC" javaType="java.lang.Long" />
	    <parameter property="prd_nom_apellido_paterno" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_nom_apellido_materno" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_nom_nombre" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_monto_envio_domicilio" jdbcType="MONEY" javaType="java.lang.Double" />
		<parameter property="prd_dv_rut_cliente" jdbcType="CHAR" javaType="string" />
		<parameter property="prd_dv_rut_asegurado" jdbcType="CHAR" javaType="string" />	
	</parameterMap>
	<procedure id="registrarCompra" parameterMap="setRegistrarCompra" resultClass="int">
	    { CALL sp_RegistrarCompra( ?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,? ) }
	</procedure>
	
	<parameterMap id="setRegistrarError" class="java.util.HashMap">
	    <parameter property="prd_gls_detalle_error" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_cod_tipo_error" jdbcType="VARCHAR" javaType="string"  />
	    <parameter property="prd_fec_hms_consulta" jdbcType="DATETIME" javaType="java.util.Date" />
	    <parameter property="prd_rut_cliente" jdbcType="NUMERIC" javaType="java.lang.Long" />
	    <parameter property="prd_rut_asegurado" jdbcType="NUMERIC" javaType="java.lang.Long" />
	    <parameter property="prd_txt_patente" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_cod_error" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_txt_poliza" jdbcType="VARCHAR" javaType="string" />
	    <parameter property="prd_txt_folio" jdbcType="VARCHAR" javaType="string" />
		<parameter property="prd_dv_rut_asegurado" jdbcType="CHAR" javaType="string" />
		<parameter property="prd_dv_rut_cliente" jdbcType="CHAR" javaType="string" />
	</parameterMap>
	<procedure id="registrarError" parameterMap="setRegistrarError" resultClass="int">
	    { CALL sp_RegistrarError( ?,?,?,?,?,?,?,?,?,?,?) }
	</procedure>
	
	<resultMap id="getConsultarSoapPorRut" class="java.util.HashMap">
	    <result property="prd_fec_hms_venta" column="prd_fec_hms_venta" jdbcType="DATETIME" javaType="java.util.Date" />
	    <result property="prd_txt_patente" column="prd_txt_patente" jdbcType="VARCHAR" javaType="string" />
	    <result property="prd_txt_poliza" column="prd_txt_poliza" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_txt_folio" column="prd_txt_folio" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_rut_asegurado" column="prd_rut_asegurado" jdbcType="NUMERIC" javaType="java.lang.Long" />
			<result property="prd_nom_nombre" column="prd_nom_nombre" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_nom_apellido_paterno" column="prd_nom_apellido_paterno" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_nom_apellido_materno" column="prd_nom_apellido_materno" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_url_pdf_poliza" column="prd_url_pdf_poliza" jdbcType="VARCHAR" javaType="string" />
	</resultMap>
	<parameterMap id="setConsultarSoapPorRut" class="java.util.HashMap">
	    <parameter property="prd_id_campania" jdbcType="NUMERIC" javaType="java.lang.Long" />
	    <parameter property="prd_rut_cliente" jdbcType="NUMERIC" javaType="java.lang.Long" />
	    <parameter property="prd_rut_asegurado" jdbcType="NUMERIC" javaType="java.lang.Long" />
	</parameterMap>
	<procedure id="consultarSoapPorRut" parameterMap="setConsultarSoapPorRut" resultMap="getConsultarSoapPorRut">
	    { CALL sp_ConsultarSoapPorRut( ?,?,? ) }
	</procedure>
	
	<resultMap id="getConsultarSoapPorPatente" class="java.util.HashMap">
	    <result property="prd_fec_hms_venta" column="prd_fec_hms_venta" jdbcType="DATETIME" javaType="java.util.Date" />
	    <result property="prd_txt_patente" column="prd_txt_patente" jdbcType="VARCHAR" javaType="string" />
	    <result property="prd_txt_poliza" column="prd_txt_poliza" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_txt_folio" column="prd_txt_folio" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_rut_asegurado" column="prd_rut_asegurado" jdbcType="NUMERIC" javaType="java.lang.Long" />
			<result property="prd_nom_nombre" column="prd_nom_nombre" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_nom_apellido_paterno" column="prd_nom_apellido_paterno" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_nom_apellido_materno" column="prd_nom_apellido_materno" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_url_pdf_poliza" column="prd_url_pdf_poliza" jdbcType="VARCHAR" javaType="string" />
	</resultMap>
	<parameterMap id="setConsultarSoapPorPatente" class="java.util.HashMap">
	    <parameter property="prd_id_campania" jdbcType="NUMERIC" javaType="java.lang.Long" />
	    <parameter property="prd_rut_cliente" jdbcType="NUMERIC" javaType="java.lang.Long" />
	    <parameter property="prd_txt_patente" jdbcType="VARCHAR" javaType="string" />
	</parameterMap>
	<procedure id="consultarSoapPorPatente" parameterMap="setConsultarSoapPorPatente" resultMap="getConsultarSoapPorPatente">
	    { CALL sp_ConsultarSoapPorPatente( ?,?,? ) }
	</procedure>
	
	<resultMap id="getConsultarSoapPorPoliza" class="java.util.HashMap">
	    <result property="prd_fec_hms_venta" column="prd_fec_hms_venta" jdbcType="DATETIME" javaType="java.util.Date" />
	    <result property="prd_txt_patente" column="prd_txt_patente" jdbcType="VARCHAR" javaType="string" />
	    <result property="prd_txt_poliza" column="prd_txt_poliza" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_txt_folio" column="prd_txt_folio" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_rut_asegurado" column="prd_rut_asegurado" jdbcType="NUMERIC" javaType="java.lang.Long" />
			<result property="prd_nom_nombre" column="prd_nom_nombre" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_nom_apellido_paterno" column="prd_nom_apellido_paterno" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_nom_apellido_materno" column="prd_nom_apellido_materno" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_url_pdf_poliza" column="prd_url_pdf_poliza" jdbcType="VARCHAR" javaType="string" />
	</resultMap>
	<parameterMap id="setConsultarSoapPorPoliza" class="java.util.HashMap">
	    <parameter property="prd_id_campania" jdbcType="NUMERIC" javaType="java.lang.Long" />
	    <parameter property="prd_rut_cliente" jdbcType="NUMERIC" javaType="java.lang.Long" />
	    <parameter property="prd_txt_poliza" jdbcType="VARCHAR" javaType="string" />
	</parameterMap>
	<procedure id="consultarSoapPorPoliza" parameterMap="setConsultarSoapPorPoliza" resultMap="getConsultarSoapPorPoliza">
	    { CALL sp_ConsultarSoapPorPoliza( ?,?,? ) }
	</procedure>
	
	<resultMap id="getConsultarSoapPorFolio" class="java.util.HashMap">
	    <result property="prd_fec_hms_venta" column="prd_fec_hms_venta" jdbcType="DATETIME" javaType="java.util.Date" />
	    <result property="prd_txt_patente" column="prd_txt_patente" jdbcType="VARCHAR" javaType="string" />
	    <result property="prd_txt_poliza" column="prd_txt_poliza" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_txt_folio" column="prd_txt_folio" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_rut_asegurado" column="prd_rut_asegurado" jdbcType="NUMERIC" javaType="java.lang.Long" />
			<result property="prd_nom_nombre" column="prd_nom_nombre" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_nom_apellido_paterno" column="prd_nom_apellido_paterno" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_nom_apellido_materno" column="prd_nom_apellido_materno" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_url_pdf_poliza" column="prd_url_pdf_poliza" jdbcType="VARCHAR" javaType="string" />
	</resultMap>
	<parameterMap id="setConsultarSoapPorFolio" class="java.util.HashMap">
	    <parameter property="prd_id_campania" jdbcType="NUMERIC" javaType="java.lang.Long" />
	    <parameter property="prd_rut_cliente" jdbcType="NUMERIC" javaType="java.lang.Long" />
	    <parameter property="prd_txt_folio" jdbcType="VARCHAR" javaType="string" />
	</parameterMap>
	<procedure id="consultarSoapPorFolio" parameterMap="setConsultarSoapPorFolio" resultMap="getConsultarSoapPorFolio">
	    { CALL sp_ConsultarSoapPorFolio( ?,?,? ) }
	</procedure>
	
	
	<parameterMap id="setObtenerTiposVehiculosSoap" class="java.util.HashMap">
	    <parameter property="prd_id_campania" jdbcType="NUMERIC" javaType="java.lang.Integer" />
	    <parameter property="prd_id_canal" jdbcType="NUMERIC" javaType="java.lang.Integer" />
	</parameterMap>
	<resultMap id="getObtenerTiposVehiculosSoap" class="java.util.HashMap">
	    <result property="prd_des_tipo_vehiculo_soap" column="prd_des_tipo_vehiculo_soap" jdbcType="VARCHAR" javaType="string" />
	    <result property="prd_mto_precio" column="prd_mto_precio" jdbcType="MONEY" javaType="java.lang.Double" />
	</resultMap>
	<procedure id="obtenerTiposVehiculosSoap" resultMap="getObtenerTiposVehiculosSoap" parameterMap="setObtenerTiposVehiculosSoap" >
	    { CALL sp_ObtenerTiposVehiculosSoap(?,?) }
	</procedure>
	
	<resultMap id="getObtenerDatosCampaniaActual" class="java.util.HashMap">
	    <result property="prd_id_campania" column="prd_id_campania" jdbcType="NUMERIC" javaType="java.lang.Integer" />
	    <result property="prd_fec_fin_campania" column="prd_fec_fin_campania" jdbcType="DATETIME" javaType="java.util.Date" />
			<result property="prd_txt_mes_campania" column="prd_txt_mes_campania" jdbcType="VARCHAR" javaType="string" />
			<result property="prd_fec_inicio_campania" column="prd_fec_inicio_campania" jdbcType="DATETIME" javaType="java.util.Date" />
	</resultMap>
	<procedure id="obtenerDatosCampaniaActual" resultMap="getObtenerDatosCampaniaActual">
	    { CALL sp_ObtenerDatosCampaniaActual() }
	</procedure>
	
	<resultMap id="getObtenerCostoEnvio" class="java.util.HashMap">
	    <result property="prd_mto_envio_domicilio" column="prd_mto_envio_domicilio" jdbcType="NUMERIC" javaType="java.lang.Double" />
	</resultMap>
	<parameterMap id="setObtenerCostoEnvio" class="java.util.HashMap">
	    <parameter property="prd_id_campania" jdbcType="NUMERIC" javaType="java.lang.Integer" />
	    <parameter property="prd_id_canal" jdbcType="NUMERIC" javaType="java.lang.Integer" />
	</parameterMap>
	<procedure id="obtenerCostoEnvio" resultMap="getObtenerCostoEnvio" parameterMap="setObtenerCostoEnvio" >
	    { CALL sp_ObtenerCostoEnvio(?,?) }
	</procedure>
	
	<resultMap id="getSoapPorPatenteExistente" class="java.util.HashMap">
	    <result property="conteo" column="conteo" jdbcType="NUMERIC" javaType="java.lang.Integer" />
	</resultMap>
	<parameterMap id="setSoapPorPatenteExistente" class="java.util.HashMap">
	    <parameter property="prd_id_campania" jdbcType="NUMERIC" javaType="java.lang.Long" />
	    <parameter property="prd_txt_patente" jdbcType="VARCHAR" javaType="string" />
	</parameterMap>
	<procedure id="soapPorPatenteExistente" parameterMap="setSoapPorPatenteExistente" resultMap="getSoapPorPatenteExistente">
	    { CALL sp_SoapPorPatenteExistente( ?,? ) }
	</procedure>
	<parameterMap id="setRegistrarVentaSoap" class="java.util.HashMap">
		<parameter property="rvs_rut_cliente" jdbcType="INTEGER" javaType="Long" />
		<parameter property="rvs_dv_cliente" jdbcType="CHAR" javaType="String" />
		<parameter property="rvs_cnl_id" jdbcType="CHAR" javaType="String" />
		<parameter property="rvs_cod_forma_pago" jdbcType="CHAR" javaType="String" />
		<parameter property="rvs_id_documento_pago" jdbcType="VARCHAR" javaType="String" />
		<parameter property="rvs_fec_venc_doc_pago" jdbcType="VARCHAR" javaType="String" />
		<parameter property="rvs_mto_soap" jdbcType="DECIMAL" javaType="Double" />
		<parameter property="rvs_cnt_cuotas" jdbcType="INTEGER" javaType="Integer" />
		<parameter property="rvs_patente" jdbcType="CHAR" javaType="String" />
		<parameter property="rvs_des_tipo_vehiculo" jdbcType="VARCHAR" javaType="String" />
		<parameter property="rvs_des_marca" jdbcType="VARCHAR" javaType="String" />
		<parameter property="rvs_des_modelo" jdbcType="VARCHAR" javaType="String" />
		<parameter property="rvs_rut_propietario" jdbcType="INTEGER" javaType="Long" />
		<parameter property="rvs_dv_propietario" jdbcType="CHAR" javaType="String" />
		<parameter property="rvs_nom_propietario" jdbcType="VARCHAR" javaType="String" />
		<parameter property="rvs_ape_paterno_propietario" jdbcType="VARCHAR" javaType="String" />
		<parameter property="rvs_ape_materno_propietario" jdbcType="VARCHAR" javaType="String" />
	</parameterMap>
	<procedure id="registrarVentaSoap" parameterMap="setRegistrarVentaSoap" resultClass="Long">
		{ CALL sp_registrar_venta_soap( ?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,? ) }
	</procedure>
	<parameterMap id="setActualizarEstadoVentaSoap" class="java.util.HashMap">
		<parameter property="rvs_id" jdbcType="NUMERIC" javaType="Long" />
		<parameter property="rvs_cod_estado" jdbcType="CHAR" javaType="String" />
	</parameterMap>
	<procedure id="actualizarEstadoVentaSoap" parameterMap="setActualizarEstadoVentaSoap" resultClass="Integer">
		{ CALL sp_upd_estado_venta_soap( ?,? ) }
	</procedure>
</sqlMap>