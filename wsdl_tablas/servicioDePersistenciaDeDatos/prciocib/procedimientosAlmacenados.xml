<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap 
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="prciocib.procedimientosAlmacenados">	
	
	<procedure id="consultaPerfiles" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_perf(#perId#)}
	</procedure>

	<procedure id="obtenerCliente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_cli(#cliRut#,#usuPlat#)}
	</procedure>

	<procedure id="obtenerSistemas" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_sis()}
	</procedure>
	
	<procedure id="consultaProductosSistema" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_sis_pro(#sisId#)}
	</procedure>

	<procedure id="consultaPropuestasCliente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_sis_prop_ins(#cliRut#,#sisId#,#prpmModCondLic#)}
	</procedure>
	
	<procedure id="consultaPropuestasCashCliente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_prop(#cliRut#,#idConvenio#)}
    </procedure>
	
	<procedure id="consultaPropuestasClienteModificacion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_sis_prop_mod(#cliRut#,#prpModId#)}
	</procedure>
	
	<procedure id="consultaRegularizacionClienteModificacion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_sis_reg_mod(#cliRut#,#regTarId#)}
	</procedure>
	
	<procedure id="consultarParametros" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_param(#parTip#)}
	</procedure>
	
	<procedure id="consultarReciprocidades" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_rec()}
	</procedure>
	
	<procedure id="guardarReciprocidad" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_ins_rec(#idReciprocidad#,#descripcion#,#estado#)}
	</procedure>
	
	<procedure id="guardarPropuesta" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_ins_prop(#usuario#, #rut#, #usuarioAprobador#, #comentario#, #estado#)}
	</procedure>
	
	<procedure id="guardarDetallePropuesta" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_ins_prop_prod(#idSistema#, #idProducto#, #numeroPropuesta#, #tarifaAprobada#, #vencimientoTarifaAprobada#, #condicionLicitacion#)}
	</procedure>
	
	<procedure id="consultarListadoPropuestas" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_lis_prop(#cliRazSoc#, #cliRut#, #idBanq#, #idGer#, #prpModFecCur#, #prpModEst#, #usuPlat#)}
	</procedure>
	
	<procedure id="consultarListadoOtrosPrecios" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_lis_reg_tar(#cliRazSoc#, #cliRut#, #idBanq#, #regTarFecSol#, #regTarEst#, #regTarTip#, #usuPlat#)}
	</procedure>
	
	<procedure id="consultarIndicadorGestion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_ind_ges()}
	</procedure>
	
	<procedure id="modificarIndicadorGestion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_mod_ind_ges(#idIndicador#,#estado#)}
	</procedure>
	
	<procedure id="consultarAprobadoresUsuario" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_apro(#usuId#)}
	</procedure>
	
	<procedure id="consultarAtribucionUsuario" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_atr_usu(#usuId#)}
	</procedure>
	
	<procedure id="consultarGrupoEconomicoUsuario" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_cli_grp(#grpCliRut#)}
	</procedure>
	
	<procedure id="consultarMenus" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_men(#ind#)}
	</procedure>
	
	<procedure id="consultarUsuario" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_usu(#usuId#,#perNom#)}
	</procedure>
	
	<procedure id="guardarUsuario" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_ins_usu(#usuId#,#usuNom#,#usuApePat#,#usuApeMat#,#usuEst#,#usuFec#,#usuCondAprob#,#usuPlat#,#perId#)}
	</procedure>
	
	<procedure id="guardarAprobadorUsuario" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_ins_apro_usu(#usuId#,#usuIdAprobAnt#,#usuIdAprob#)}
	</procedure>
	
	<procedure id="guardarAtribucionUsuario" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_ins_atr_usu(#usuId#,#atrId#,#usuAtrVal#)}
	</procedure>
	
	<procedure id="desactivarAprobadorUsuario" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_eli_apro_usu (#usuId#,#usuIdAprob#)}
	</procedure>
	
	<procedure id="consultarIndicadoresCliente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_cli_ind(#cliRut#)}
	</procedure>
	
	<procedure id="consultarJustificacionesReciprocidadPropuesta" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_jus_rec_prop(#sisId#, #prpModId#)}
	</procedure>

	<procedure id="consultarDetalleReciprocidadPropuesta" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_det_rec_prop(#sisId#, #prpModId#)}
	</procedure>
	
	<procedure id="guardarJustificacionPropuesta" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_ins_jus_rec_prop(#sisId#, #prpModId#, #jusRecTarTex#, #jusRecTarAdj#)}
	</procedure>
	
	<procedure id="guardarDetalleReciprocidadPropuesta" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_ins_det_rec_prop(#idRec#, #sisId#, #prpModId#, #detRecTarVal#, #detRecTarFecVcto#)}
	</procedure>

	<procedure id="guardarRegularizacion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_ins_reg(#usuIdAprob#, #usuId#, #cliRut#, #regTarEst#, #regTarTip#, #regTarTit#, #usuIdEjec#)}
	</procedure>

	<procedure id="guardarDetalleRegularizacion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_ins_reg_prod (	#proId#,
							    #regTarId#,
							    #sisId#,
							    #regTarNoCur#,
							    #regTarAprob#,
							    #regTarFecVctoTarAprob#,
							    #regTarCondLic#,
							    #regTarOperRef#,
							    #regTarMtoRef#,
								#regTarBanc#,
								#regTarMone#,
								#regTarCostFonBci#,
								#regTarCostFonComp#,
								#regTarAllInBci#,
								#regTarAllInComp#,
								#regTarPlazo#,
							    #regTarSpdComrBci#,
							    #regtarSpdComrComp#,
							    #regTarComsBci#,
							    #regTarComsComp#,
							    #regTarRznNegPerd#,
							    #regTarTasa#,
							    #regTarVolProd#,
							    #regTarComs#,
							    #regTarMonComs#,
							    #regTarTipPlazo#,
							    #reg_tar_cost_fon_bci_CBX1#,
							    #reg_tar_cost_fon_bci_CBX2#,
							    #reg_tar_all_in_bci_CBX1#,
							    #reg_tar_all_in_bci_CBX2#,
							    #reg_tar_cost_fon_comp_CBX1#,
							    #reg_tar_cost_fon_comp_CBX2#,
							    #reg_tar_all_in_comp_CBX1#,
							    #reg_tar_all_in_comp_CBX2# 
							  
							   
							    )}
	</procedure>
	
	<procedure id="guardarJustificacionRegularizacion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_ins_jus_rec_reg(#regTarId#, #sisId#, #jusRecTarTex#, #jusRecTarAdj#)}
	</procedure>

	<procedure id="guardarDetalleReciprocidadRegularizacion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_ins_det_rec_reg( #idRec#, #sisId#, #regTarId#, #detRecTarVal#, #detRecTarFecVcto#)}
	</procedure>
	
        <procedure id="consultarInformePreciosMinimoMaximo" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_prc_min_max(#sisId#,#proId#,#usuPlat#,#nomBanquero#,#detRecTarFecCurDesde#,#detRecTarFecCurHasta#,#regTarCondLic#,#precio#)}
	</procedure>
	
	<procedure id="consultarInformePerformanceBanqueros" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_perf_ban(#prpModFecVctoTarAprobDesde#,#prpModFecVctoTarAprobHasta#,#usuId#,#prpmModCondLic#,#sisId#,#proId#)}
	</procedure>
	
	<procedure id="consultarInformePreciosAnteriores" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_prc_ant(#sisId#,#proId#,#cliRut#,#detRecTarFecCurDesde#,#detRecTarFecCurHasta#,#regTarCondLic#)}
	</procedure>
	
	<procedure id="consultarInformeVencimiento" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_ven(#cliRut#,#usuPlat#,#nomBanquero#,#sisId#,#proId#,#detRecTarFecVctoDesde#,#detRecTarFecVctoHasta#,#prpModCondLic#,#idRec#)}
	</procedure>

	<procedure id="consultarJustificacionesReciprocidadRegularizacion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_jus_rec_reg(#sisId#, #regTarId#)}
	</procedure>
	
	<procedure id="consultarDetalleReciprocidadRegularizacion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_det_rec_reg( #sisId#, #regTarId#)}
	</procedure>

	<procedure id="consultarOtrosPreciosMinimoPactado" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_prc_min_reg(#cliRut#, #sisId#, #proId#)}
	</procedure>
	
	<procedure id="eliminarPropuesta" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_eli_prop(#prpModId#)}
	</procedure>

	<procedure id="eliminarRegularizacion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_eli_reg(#regTarId#)}
	</procedure>

	<procedure id="consultarGrupoCliente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_grp()}
	</procedure>
	
        <procedure id="consultarInformeComparacion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_cns_ult_prop(#ruts#,#sisId#,#prpModCondLic#)}
	</procedure>

	<procedure id="modificarEstadoPropuesta" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_mod_est_prop(#prpModId#, #prpModEst#)}
	</procedure>
	
	<procedure id="modificarEstadoRegularizacion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_mod_est_reg_tar(#regTarId#, #regTarEst#)}
	</procedure>

 <procedure id="sp_cns_cnv_pdt_serv_cash" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
   {CALL sp_cns_cnv_pdt_serv_cash(#prp_mod_id#)}
 </procedure>


	<resultMap id="consultaNegociosPerdido" class="java.util.HashMap">
	    <result property="rutCliente"                 	        column="cli_rut" 			        jdbcType="INTEGER"    	 javaType="int"/>        	
        <result property="producto"	     			            column="pro_id" 			        jdbcType="INTEGER"       javaType="int" />        	
	    <result property="sistema"    				            column="sis_id"				        jdbcType="INTEGER"    	 javaType="int" />        	
	    <result property="grupo"              		            column="grp_id"		            	jdbcType="INTEGER"    	 javaType="int" />        	
	    <result property="usuarioGerente"				        column="usu_id_gerente"				jdbcType="CHAR"    	     javaType="String" />
	    <result property="usuarioBanquero"				        column="usu_id_banq"				jdbcType="CHAR"    	     javaType="String" />         	
	    <result property="razonPerdidaConvenio"                 column="nep_id_raz_perdida"			jdbcType="INTEGER"    	 javaType="String" />        		   
		<result property="estado"    		     	    column="nep_estado"			        jdbcType="CHAR"    	     javaType="String" />        	
		<result property="fechaIngreso"			            	column="nep_fecha_ing"				jdbcType="DATE"          javaType="Date"/>                	
	    <result property="tieneEjecutivo1"              		column="nep_eje_1" 			        jdbcType="BIT"    	     javaType="Boolean"/> 
	    <result property="tieneEjecutivo2"               		column="nep_eje_2" 			        jdbcType="BIT"    	     javaType="Boolean"/>
        <result property="tieneEjecutivo3"              		column="nep_eje_3" 			        jdbcType="BIT"    	     javaType="Boolean"/> 
	    <result property="tieneEjecutivo4"               		column="nep_eje_4" 			        jdbcType="BIT"       	 javaType="Boolean"/>
		<result property="volumenNegocio"                       column="nep_volumen" 			    jdbcType="NUMERIC"    	 javaType="Double"/>
		<result property="montocomision"                        column="nep_mnt_com" 			    jdbcType="NUMERIC"    	 javaType="Double"/>
		<result property="montoTransaccionesyPagos"             column="nep_mnt_trx" 			    jdbcType="NUMERIC"    	 javaType="Double"/>
		<result property="codigoMonedaMonto"                    column="nep_cod_mon_mnt_par_id" 	jdbcType="CHAR"    	     javaType="String"/>
	    <result property="codigoMonedaComision"                 column="nep_cod_mon_mnt_com_par_id" jdbcType="CHAR"     	 javaType="String"/>
	    <result property="usuarioIngresoNegocio"                column="usu_id_ingresa" 	        jdbcType="CHAR"    	     javaType="String"/>
	    <result property="comentario"                           column="nep_comentario" 	        jdbcType="VARCHAR"       javaType="String"/>
	    <result property="descripcionProducto"                  column="sis_pro_nom" 	            jdbcType="VARCHAR"       javaType="String"/>
	    <result property="nombreGerente"                        column="usu_nom"       	            jdbcType="VARCHAR"       javaType="String"/>
	    <result property="apellidoMGerente"                     column="usu_ape_mat"       	        jdbcType="VARCHAR"       javaType="String"/>
	    <result property="apellidoPGerente"                     column="usu_ape_pat"       	        jdbcType="VARCHAR"       javaType="String"/>
	    <result property="dvCliente"                            column="cli_dv"       	            jdbcType="CHAR"          javaType="String"/>
	    <result property="nombreCliente"                        column="cli_raz_soc"       	        jdbcType="VARCHAR"       javaType="String"/>
	    <result property="nomGrupoEconomico"                    column="grp_desc"      	            jdbcType="VARCHAR"       javaType="String"/>
	    <result property="nomSubProducto"                       column="pro_nom"      	            jdbcType="VARCHAR"       javaType="String"/>
	    <result property="nomRazonNegPerdido"                   column="par_desc"      	            jdbcType="VARCHAR"       javaType="String"/>
	    <result property="nombreUsuBanquero"                    column="nom_banquero"      	        jdbcType="VARCHAR"       javaType="String"/>
	    <result property="nombrejecutivoCash"                   column="nom_eje_cash"      	        jdbcType="VARCHAR"       javaType="String"/>
	    <result property="descripncionMonedaTransPagos"         column="des_mon_tras_pagos"      	jdbcType="VARCHAR"       javaType="String"/>
	    <result property="ejecutivoCashSelecionado"             column="usu_id_eje_cash"      	    jdbcType="VARCHAR"       javaType="String"/>
	    
	</resultMap>
	
	<procedure id="consultaNegociosPerdidos" parameterClass="java.util.HashMap" resultMap="consultaNegociosPerdido">
		{CALL sp_cns_nep_neg_perd(#cli_rut#, #pro_id#, #sis_id#, #grp_id#, #usu_id_gerente#, #usu_id_banq#, #nep_id_raz_perdida#, #nep_estado#, #nep_fecha_ini#, #nep_fecha_fin#, #usu_id_eje_cash#)}
	</procedure>

     <procedure id="guardarnegocioPerdido" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_ins_reg_neg_per(#cli_rut#, #pro_id#, #sis_id#, #grp_id#, #usu_id_gerente#, #usu_id_banq#, #nep_eje_1#, #nep_eje_2#, #nep_eje_3#, #nep_eje_4#, #nep_volumen#, #nep_mnt_trx#, #nep_cod_mon_mnt_par_id#, #nep_id_raz_perdida#, #nep_cod_mon_mnt_com_par_id#, #nep_mnt_com#, #nep_comentario#, #usu_id_ingresa#, #nom_gerente#, #nom_banquero#, #usu_id_eje_cash#,#nom_eje_cash#, #des_mon_tras_pagos#)}
	</procedure>

<procedure id="sp_ins_cnv_pdt_serv_cash" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
   {CALL sp_ins_cnv_pdt_serv_cash(#p_pro_id#,#p_prp_mod_id#,#p_sis_id#,#p_cnv_id_cnv_banele#,#p_cnv_id_ser_banele#,#p_cnv_tar_ant#,#p_usu_id_aprob#,#p_cnv_fec_mod_tar#,#p_cnv_eslicitado#,#p_cnv_fec_ter_lic#,#p_cnv_esper_cnv#,#p_cnv_fec_per_cnv#,#p_usu_id_mod#,#p_cnv_fec_mod#)}
 </procedure>

	<procedure id="obtenerReporteCursesPerdidosComex" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_rep_cur_perd_comex ( #cliRut#,
				                        #grpId#,
				                        #proId#,
				                        #sisId#,
				                        #usuIdGer#,
				                    	#usuIdBan#,
				                        #motNegPerd#,
				                        #tipGraf#,
				                        #detRecTarFecCurDesde#,
				                        #detRecTarFecCurHasta#)}
	</procedure>
	<procedure id="obtenerReporteCursesPerdidosCash" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		{CALL sp_rep_cur_perd_cash ( #cliRut#,
				                        #grpId#,
				                        #proId#,
				                        #sisId#,
				                        #usuIdGer#,
				                    	#usuIdBan#,
				                    	#usuIdEjec#,
				                        #motNegPerd#,
				                        #tipGraf#,
				                        #detRecTarFecCurDesde#,
				                        #detRecTarFecCurHasta#)}
	</procedure>
	
	<parameterMap id="setObtenerClientePorRut" class="java.util.HashMap">
		<parameter property="cli_rut" jdbcType="INTEGER" javaType="java.lang.Long" />
	</parameterMap>
	
	<resultMap id="getObtenerClientePorRut" class="java.util.HashMap">
		<result property="cli_rut"		column="cli_rut"		jdbcType="INTEGER"	javaType="java.lang.Long" />
		<result property="ind_val"		column="ind_val"		jdbcType="CHAR"		javaType="String" />
		<result property="cli_dv"		column="cli_dv"			jdbcType="CHAR"		javaType="java.lang.Long" />
		<result property="cli_raz_soc"	column="cli_raz_soc"	jdbcType="CHAR"		javaType="String" />
		<result property="cli_art_85"	column="cli_art_85"		jdbcType="CHAR"		javaType="String" />
		<result property="grp_id"		column="grp_id"			jdbcType="INTEGER"	javaType="int" />
		<result property="grp_desc"		column="grp_desc"		jdbcType="CHAR"		javaType="String" />
		<result property="usu_plat"		column="usu_plat"		jdbcType="CHAR"		javaType="String" />
	</resultMap>
	
	<procedure id="obtenerClientePorRut" parameterMap="setObtenerClientePorRut" resultMap="getObtenerClientePorRut">
		{ CALL sp_consulta_cliente_rut(?) }
	</procedure>
	
	<parameterMap id="setObtenerClientePorNombre" class="java.util.HashMap">
		<parameter property="cli_raz_soc" jdbcType="CHAR" javaType="String" />
	</parameterMap>
	
	<resultMap id="getObtenerClientePorNombre" class="java.util.HashMap">
		<result property="cli_rut"		column="cli_rut"		jdbcType="INTEGER"	javaType="java.lang.Long" />
		<result property="ind_val"		column="ind_val"		jdbcType="CHAR"		javaType="String" />
		<result property="cli_dv"		column="cli_dv"			jdbcType="CHAR"		javaType="java.lang.Long" />
		<result property="cli_raz_soc"	column="cli_raz_soc"	jdbcType="CHAR"		javaType="String" />
		<result property="cli_art_85"	column="cli_art_85"		jdbcType="CHAR"		javaType="String" />
		<result property="grp_id"		column="grp_id"			jdbcType="INTEGER"	javaType="int" />
		<result property="grp_desc"		column="grp_desc"		jdbcType="CHAR"		javaType="String" />
		<result property="usu_plat"		column="usu_plat"		jdbcType="CHAR"		javaType="String" />
	</resultMap>
	
	<procedure id="obtenerClientePorNombre" parameterMap="setObtenerClientePorNombre" resultMap="getObtenerClientePorNombre">
		{ CALL sp_consulta_cliente_nombre(?) }
	</procedure>
	
	<parameterMap id="setObtenerEmpresasPorGrupo" class="java.util.HashMap">
		<parameter property="grp_id" 	jdbcType="INTEGER" 	javaType="int" />
		<parameter property="usu_plat" 	jdbcType="CHAR" 	javaType="String" />
	</parameterMap>
	
	<resultMap id="getObtenerEmpresasPorGrupo" class="java.util.HashMap">
		<result property="cli_rut"		column="cli_rut"		jdbcType="INTEGER"	javaType="java.lang.Long" />
		<result property="ind_val"		column="ind_val"		jdbcType="CHAR"		javaType="String" />
		<result property="cli_dv"		column="cli_dv"			jdbcType="CHAR"		javaType="java.lang.Long" />
		<result property="cli_raz_soc"	column="cli_raz_soc"	jdbcType="CHAR"		javaType="String" />
		<result property="cli_art_85"	column="cli_art_85"		jdbcType="CHAR"		javaType="String" />
	</resultMap>
	
	<procedure id="obtenerEmpresasPorGrupo" parameterMap="setObtenerEmpresasPorGrupo" resultMap="getObtenerEmpresasPorGrupo">
		{ CALL sp_consulta_empresas_grupo(?,?) }
	</procedure>
	
	
	<parameterMap id="setObtenerGruposEconomico" class="java.util.HashMap">
		<parameter property="ejecutivo"	jdbcType="char" 	javaType="String" />
		<parameter property="idGrupo"	jdbcType="INTEGER" 	javaType="int" />		
	</parameterMap>
	
	<resultMap id="getObtenerGruposEconomico" class="java.util.HashMap">
		<result property="grp_id"		column="grp_id"			jdbcType="INTEGER"	javaType="java.lang.Long" />
		<result property="grp_desc"		column="grp_desc"		jdbcType="CHAR"		javaType="String" />
		<result property="cli_cant"		column="cli_cant"		jdbcType="INTEGER"	javaType="int" />
		<result property="mcg_id"		column="mcg_id"			jdbcType="INTEGER"	javaType="java.lang.Long" />
		<result property="mcg_nombre"	column="mcg_nombre"		jdbcType="CHAR"		javaType="String" />
		<result property="grp_cup_tot"	column="grp_cup_tot"	jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="grp_cup_uti" 	column="grp_cup_uti"    jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="grp_cup_dis" 	column="grp_cup_dis"    jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="grp_cup_vto"	column="grp_cup_vto"	jdbcType="DATE"		javaType="String" />
		<result property="usu_plat"		column="usu_plat"		jdbcType="CHAR"		javaType="String" />
	</resultMap>
	
	<procedure id="obtenerGruposEconomico" parameterMap="setObtenerGruposEconomico" resultMap="getObtenerGruposEconomico">
		{ CALL sp_consulta_grupos_economico(?,?) }
	</procedure>

	<parameterMap id="setObtenerMargenesEmpresasGrupo" class="java.util.HashMap">
		<parameter property="grp_id"	jdbcType="INTEGER" 	javaType="int" />		
	</parameterMap>
	
	<resultMap id="getObtenerMargenesEmpresasGrupo" class="java.util.HashMap">
		<result property="llave_rut_fecha"  column="llave_rut_fecha"    jdbcType="CHAR"     javaType="String" />
		<result property="limite"		    column="limite"     	    jdbcType="CHAR"     javaType="String" />
		<result property="tipo_moneda"      column="tipo_moneda"        jdbcType="CHAR"     javaType="String" />
		<result property="cli_raz_soc"      column="cli_raz_soc"        jdbcType="CHAR"     javaType="String" />
		<result property="cli_rut"	        column="cli_rut"		    jdbcType="INTEGER"	javaType="java.lang.Long" />
		<result property="mar_deu_dir"		column="mar_deu_dir"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_deu_ind"		column="mar_deu_ind"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_deu_com"		column="mar_deu_com"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_gar_esp"		column="mar_gar_esp"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_gar_gen"		column="mar_gar_gen"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_deu_imp"		column="mar_deu_imp"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="riesgo"	        column="riesgo"	            jdbcType="CHAR"	    javaType="String" />
		<result property="calificacion"     column="calificacion"       jdbcType="CHAR"     javaType="String" />
		<result property="garantias"     	column="garantias"      	jdbcType="NUMERIC"  javaType="java.math.BigDecimal" />
		<result property="mar_fec_art_85"	column="mar_fec_art_85"	    jdbcType="DATE"		javaType="String" />
		<result property="mar_gar_hip"	    column="mar_gar_hip"	    jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_gar_pre"	    column="mar_gar_pre"	    jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_gar_war"	    column="mar_gar_war"	    jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_gar_lyp"	    column="mar_gar_lyp"	    jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
	</resultMap>
	
	<procedure id="obtenerMargenesEmpresasGrupo" parameterMap="setObtenerMargenesEmpresasGrupo" resultMap="getObtenerMargenesEmpresasGrupo">
		{ CALL sp_consulta_margenes_empresas_grupo(?) }
	</procedure>
	

	<parameterMap id="setObtenerMargenesCliente" class="java.util.HashMap">
		<parameter property="cli_rut"	jdbcType="INTEGER" 	javaType="java.lang.Long" />		
	</parameterMap>
	
	<resultMap id="getObtenerMargenesCliente" class="java.util.HashMap">
		<result property="mar_fec_art_85"	column="mar_fec_art_85"		jdbcType="DATE"		javaType="String" />
		<result property="mar_deu_dir"		column="mar_deu_dir"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_deu_ind"		column="mar_deu_ind"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_deu_com"		column="mar_deu_com"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="garantias"		column="garantias"		    jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="limite"		    		column="limite"     	    	jdbcType="CHAR"     javaType="String" />
		<result property="tipo_moneda"      		column="tipo_moneda"        	jdbcType="CHAR"     javaType="String" />
		<result property="mar_deu_imp"		column="mar_deu_imp"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="total_imputable"	column="total_imputable"	jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="tipo_relacion"	column="tipo_relacion"		jdbcType="CHAR"	    javaType="String" />
		<result property="rel_id"		    column="rel_id"	            jdbcType="CHAR"		javaType="String" />
		<result property="mar_gar_hip"	    column="mar_gar_hip"	    jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_gar_pre"	    column="mar_gar_pre"	    jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_gar_war"	    column="mar_gar_war"	    jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_gar_lyp"	    column="mar_gar_lyp"	    jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />

	</resultMap>
	
	<procedure id="obtenerMargenesCliente" parameterMap="setObtenerMargenesCliente" resultMap="getObtenerMargenesCliente">
		{ CALL sp_consulta_margenes_cliente(?) }
	</procedure>

	
	<parameterMap id="setObtenerPatrimonioEfectivo" class="java.util.HashMap">
		<parameter property="cli_rut"	jdbcType="INTEGER" 	javaType="java.lang.Long" />		
	</parameterMap>
	
	<resultMap id="getObtenerPatrimonioEfectivo" class="java.util.HashMap">
		<result property="mar_pat_efe"    column="mar_pat_efe"    jdbcType="NUMERIC"    javaType="java.math.BigDecimal" />
	</resultMap>
	
	<procedure id="obtenerPatrimonioEfectivo" parameterMap="setObtenerPatrimonioEfectivo" resultMap="getObtenerPatrimonioEfectivo">
		{ CALL sp_consulta_pat_efectivo(?) }
	</procedure>
	
	<parameterMap id="setObtenerEmpresasArt85" class="java.util.HashMap">
		<parameter property="grp_id"	jdbcType="INTEGER" 	javaType="int" />		
	</parameterMap>
	
	<resultMap id="getObtenerEmpresasArt85" class="java.util.HashMap">
		<result property="cli_raz_soc"      column="cli_raz_soc"        jdbcType="CHAR"     javaType="String" />
		<result property="cli_rut"	        column="cli_rut"		    jdbcType="INTEGER"	javaType="java.lang.Long" />
		<result property="mar_deu_dir"		column="mar_deu_dir"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_deu_ind"		column="mar_deu_ind"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_deu_com"		column="mar_deu_com"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_gar_esp"		column="mar_gar_esp"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
		<result property="mar_gar_gen"		column="mar_gar_gen"		jdbcType="NUMERIC"	javaType="java.math.BigDecimal" />
	</resultMap>
	
	<procedure id="obtenerEmpresasArt85" parameterMap="setObtenerEmpresasArt85" resultMap="getObtenerEmpresasArt85">
		{ CALL sp_consulta_art_85(?) }
	</procedure>
	
	 <procedure id="obtenerUsuariosBanqueros" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        { CALL sp_mnt_usuarios() }
    </procedure>

    <procedure id="obtenerMacroGrupos" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        { CALL sp_mnt_macro_grupos() }
    </procedure>
    
    <procedure id="asignaMacroGrupo" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        { CALL sp_mnt_asigna_macro_grupo(#idGrupo#, #idMacroGrupo#) }
    </procedure>
    
    <procedure id="asignaUsuarioAMacroGrupo" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        { CALL sp_mnt_asigna_usuario_grupo(#idUsuario#, #idGrupo#) }
    </procedure>

     <procedure id="buscarGruposEconomicos" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        { CALL sp_mnt_consulta_grp_economico(#termino#) }
    </procedure>

     <procedure id="logEventosMantenedor" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        { CALL sp_mnt_ingresa_evento(#idUsuario#, #evento#) }
    </procedure>
	
</sqlMap>  
