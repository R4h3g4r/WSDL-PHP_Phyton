<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.prime.com.tr/ui"
    xmlns:aut="http://bci.cl/facelets/autorizadorWeb">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <h:outputStylesheet name="screen.css" library="Webbci/#{portalMB.atributosWeb.estiloCss}css" />
    <h:outputStylesheet name="bcipay.css" library="Webbci/intranet/css/productos/servicios/pagos/bcipay/transferencia" />
    <h:outputStylesheet name="excepcionesDePago.css" library="Webbci/intranet/css" />
    <h:outputScript name="jquery.tools.min.js" library="Webbci/common/js" target="head" />
    <h:outputScript name="jquery.tooltip.min.js" library="Webbci/common/js" target="head" />
</h:head>
<h:body onload="parent.fnCargaIframe();">
    <f:loadBundle basename="#{resolutorResourceBundleMB.obtieneResourceBundle('cl.bci.aplicaciones.productos.servicios.pagos.bcipay.panorama.consultaResumenArchivosPagosRecibidos')}" var="msg" />
    <div id="content">
        <h:form id="formConsultaArchivoPago" prependId="false">
            <h2>
                <h:outputText styleClass="encabezado" value="#{msg.archivos} " />
                <h:panelGroup rendered="#{consultaResumenArchivosPagosRecibidosBackingMB.codigoEstado eq 'APR'}">
                        <h:outputText value="#{msg.enProcesoDePago}" />
                </h:panelGroup>
                <h:panelGroup rendered="#{consultaResumenArchivosPagosRecibidosBackingMB.codigoEstado eq 'DPA'}">
                        <h:outputText value="#{msg.duplicados}" />
                </h:panelGroup>
                <h:panelGroup rendered="#{consultaResumenArchivosPagosRecibidosBackingMB.codigoEstado eq 'AFI'}">
                        <h:outputText value="#{msg.formatoIncorrecto}" />
                </h:panelGroup>
                <h:panelGroup rendered="#{consultaResumenArchivosPagosRecibidosBackingMB.codigoEstado eq 'NEP'}">
                        <h:outputText value="#{msg.noEnviadoProceso}" />
                </h:panelGroup>
                <h:panelGroup rendered="#{consultaResumenArchivosPagosRecibidosBackingMB.codigoEstado eq 'APP'}">
                        <h:outputText value="#{msg.archivoProcesadoCorrectamente}" />
                </h:panelGroup>
            </h2>
            <h:panelGroup id="resultado" layout="block" styleClass="cont_info_cliente tablas_de_resultado">
                <h:panelGroup layout="block" styleClass="fondo_info_cliente">
                    <h3>
                        <span class="titulo"><h:outputText value="#{msg.origenCCA}" /></span>
                    </h3>
                    #{consultaResumenArchivosPagosRecibidosBackingMB.getArchivosRecibidos('CCA')}
                    <p:dataTable value="#{consultaResumenArchivosPagosRecibidosBackingMB.listaArchivosRecibidos}" var="archivosCCA" id="archivosCCA" styleClass="tabla_datos"
                        emptyMessage="#{msg.sinResultados}" paginator="true" paginatorPosition="bottom" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                        rows="15">
                        <p:column styleClass="columnLeft">
                            <f:facet name="header">
                                <h:outputText value="#{msg.nombreArchivo}" escape="false" />
                            </f:facet>
                            <h:outputText value="#{archivosCCA.nombreArchivo}" />
                        </p:column>
                        <p:column styleClass="columnLeft">
                            <f:facet name="header">
                                <h:outputText value="#{msg.bancoOrigen}" escape="false" />
                            </f:facet>
                            <h:outputText value="#{archivosCCA.descripcionBancoOriginador}" />
                        </p:column>
                        <p:column styleClass="columnLeft">
                            <f:facet name="header">
                                <h:outputText value="#{msg.fechaHoraRecepcion}" escape="false" />
                            </f:facet>
                            <h:outputText value="#{formateadorUtilityMB.formatearFecha(archivosCCA.fechaRecepcion, 'dd/MM/yyyy HH:mm')}" />
                        </p:column>
                    </p:dataTable>
                </h:panelGroup>
                <h:panelGroup layout="block" styleClass="fondo_bottom_info_cliente">&nbsp;</h:panelGroup>
            </h:panelGroup>
            <h:panelGroup layout="block" styleClass="align_center">
                <input type="button" class="bot_01 bot_volver" value="#{msg.volver}" onclick="window.location='#{consultaResumenArchivosPagosRecibidosBackingMB.vistaVolver}'"/>
            </h:panelGroup>
        </h:form>
    </div>
</h:body>
</html>
<!--
/***************************************************************************************************************
* Archivo:          consultaArchivosPagosRecibidosPorEstado.xhtml
* Descripcion       Vista que contendra el listado de archivos recibidos.
* Path              /cl/bci/aplicaciones/productos/servicios/pagos/bcipay/panorama/
* " Todos los derechos reservados por Banco de Credito e Inversiones."              
* Historia Cambios
* version       fecha                autor                                                            cambios
* =======   ==========    ======================================================        =================================
* 1.0       18/04/2016    Sergio Cuevas D. (SEnTRA) - Kay Vera (Ing. Soft. BCI):        Version Inicial.
****************************************************************************************************************/
-->

