<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
    
<sqlMap namespace="mktoto.procedimientosAlmacenados">

<!-- SECCION BANCARIZACION DE CAMPANAS - NIVEL JERARQUICO-->

    <resultMap id="usuario" class="java.util.HashMap">
        <result property="usuario" javaType="String" column="userid" jdbcType="char" />
        <result property="rut" javaType="String" column="rut" jdbcType="char" />
        <result property="nombre" javaType="String" column="nombre" jdbcType="char" />
        <result property="oficinaGestion" javaType="String" column="ofi_gj" jdbcType="char" />
        <result property="codigoDeBanca" javaType="String" column="bca_gj" jdbcType="char" />
        <result property="nombreDeCargo" javaType="String" column="desc_cargo" jdbcType="char" />
        <result property="oficina" javaType="String" column="oficina" jdbcType="char" />
        <result property="codigoDeCargo" javaType="String" column="id_pst" jdbcType="char" />
        <result property="codigoPrecedencia" javaType="String" column="precedencia" jdbcType="char" />
        <result property="tipoDeEjecutivo" javaType="String" column="tip_eje" jdbcType="char" />
        <result property="regionalPersona" javaType="String" column="regional_per" jdbcType="char" />
        <result property="oficinaPersona" javaType="String" column="oficina_per" jdbcType="char" />
        <result property="regionalEmpresa" javaType="String" column="regional_emp" jdbcType="char" />
        <result property="plataforma" javaType="String" column="plataforma" jdbcType="char" />
        <result property="codigoZonalPersona" javaType="String" column="cod_zonal_per" jdbcType="char" />
        <result property="descripcionZonalPersona" javaType="String" column="desc_zonal_per" jdbcType="char" />
    </resultMap>

    <resultMap id="zonal" class="java.util.HashMap">
        <result property="codigoZonal" javaType="String" column="codigoZonal" jdbcType="char" />
        <result property="descripcionZonal" javaType="String" column="descripcionZonal" jdbcType="char" />
    </resultMap>

    <resultMap id="regional" class="java.util.HashMap">
        <result property="codigoRegional" javaType="String" column="grupo3" jdbcType="char" />
        <result property="descripcionRegional" javaType="String" column="desc_grupo3" jdbcType="char" />
    </resultMap>

    <resultMap id="plataforma" class="java.util.HashMap">
        <result property="codigoPlataforma" javaType="String" column="grupo4" jdbcType="char" />
        <result property="descripcionPlataforma" javaType="String" column="plataforma" jdbcType="char" />
    </resultMap>
    
    <resultMap id="oficina" class="java.util.HashMap">
        <result property="codigoOficina" javaType="String" column="oficina" jdbcType="char" />
        <result property="descripcionOficina" javaType="String" column="ofi_des" jdbcType="char" />
    </resultMap>
    
    <resultMap id="ejecutivo" class="java.util.HashMap">
        <result property="usuario" javaType="String" column="userid" jdbcType="char" />
        <result property="rut" javaType="String" column="rut" jdbcType="char" />
        <result property="nombre" javaType="String" column="nombre" jdbcType="char" />
    </resultMap>

    <resultMap id="centro" class="java.util.HashMap">
        <result property="codigoCentroEmpresario" javaType="String" column="id_centro" jdbcType="char" />
        <result property="descripcionCentroEmpresario" javaType="String" column="descripcion_centro" jdbcType="char" />
    </resultMap>
    
    <resultMap id="unidad" class="java.util.HashMap">
        <result property="codigoDeCargo" javaType="String" column="id_pst" jdbcType="char" />
        <result property="nombreDeCargo" javaType="String" column="desc_cargo" jdbcType="char" />
    </resultMap>

    <!-- sp_cns_usu(@@usr_idn) -->
    <procedure id="consultaUsuario" parameterClass="java.util.HashMap" resultMap="usuario">
        {CALL sp_cns_usu(#identificador#)}
    </procedure>

    <!-- sp_cns_gtz_p() -->
    <procedure id="consultaZonalesPersona" resultMap="zonal">
        {CALL sp_cns_gtz_p()}
    </procedure>

    <!-- sp_cns_gtr_p() -->
    <procedure id="consultaRegionalesPersona" resultMap="regional">
        {CALL sp_cns_gtr_p(#codigoZonal#)}
    </procedure>
    
    <!-- sp_cns_jof_p(@cod_reg) -->
    <procedure id="consultaOficinasPersona" parameterClass="java.util.HashMap" resultMap="oficina">
        {CALL sp_cns_jof_p(#codigoRegional#)}
    </procedure>
    
    <!-- sp_cns_eje_p(@cod_ofi) -->
    <procedure id="consultaEjecutivosPersona" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_p(#codigoNivel#)}
    </procedure>
    
    <!-- sp_cns_rgl_e() -->
    <procedure id="consultaRegionalesEmpresa" resultMap="regional">
        {CALL sp_cns_rgl_e()}
    </procedure>
    
    <!-- sp_cns_pla_e(@cod_reg) -->
    <procedure id="consultaPlataformasEmpresa" parameterClass="java.util.HashMap" resultMap="plataforma">
        {CALL sp_cns_pla_e(#codigoRegional#)}
    </procedure>

    <!-- sp_cns_pla_tbanc() -->
    <procedure id="consultaPlataformasTbanc" parameterClass="java.util.HashMap" resultMap="oficina">
        {CALL sp_cns_pla_tbanc(#codigoBanca#)}
    </procedure>

    <!-- sp_cns_eje_tbanc(@cod_plat) -->
    <procedure id="consultarEjecutivosTbanc" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_tbanc(#codigoNivel#)}
    </procedure>

    <!-- sp_cns_eje_e(@cod_plt) -->
    <procedure id="consultaEjecutivosEmpresa" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_e(#codigoPlataforma#)}
    </procedure>

    <!-- sp_cns_cem_pm() -->
    <procedure id="consultaCentrosEmpresarios" resultMap="centro">
        {CALL sp_cns_cem_pm()}
    </procedure>

    <!-- sp_cns_eje_pm (cod_cem char(15)) -->
    <procedure id="consultaEjecutivosEmpresario" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_pm(#codigoCentroEmpresario#)}
    </procedure>

    <!-- sp_cns_uni_lea() -->
    <procedure id="consultaUnidadesLeasing" resultMap="unidad">
        {CALL sp_cns_uni_lea()}
    </procedure>

    <!-- sp_cns_usu_pre(in cod_uni varchar(15)) -->
    <procedure id="consultaEjecutivosLeasing" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_usu_pre(#codigoNivel#)}
    </procedure>

    <!-- sp_cns_uni_fct() -->
    <procedure id="consultaUnidadesFactoring" resultMap="unidad">
        {CALL sp_cns_uni_fct()}
    </procedure>
    
    <!-- sp_cns_usu_pre(in cod_uni varchar(15)) -->
    <procedure id="consultaEjecutivosFactoring" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_usu_pre(#codigoNivel#)}
    </procedure>

    
    <!-- sp_cns_eje_pbp(@cod_ofi varchar(15)) -->
    <procedure id="consultarEjecutivosBancaPreferencial" parameterClass="java.util.HashMap" resultMap="ejecutivo">
        {CALL sp_cns_eje_pbp(#codigoNivel#)}
    </procedure>

<!-- TERMINO SECCION BANCARIZACION DE CAMPANAS - NIVEL JERARQUICO-->


<!-- SECCION INFORME CAMPANAS -->
	
    <resultMap id="listadoNivel" class="java.util.HashMap">
        <result property="codigo" javaType="String" column="codigo"/>
        <result property="descripcion" javaType="String" column="nivel"/>
    </resultMap>
	
	<resultMap id="listadoProductos" class="java.util.HashMap">
        <result property="codigo" javaType="String" column="codigo"/>
        <result property="descripcion" javaType="String" column="producto"/>
    </resultMap>
	
	<resultMap id="listadoCampanas" class="java.util.HashMap">
        <result property="codigo" javaType="String" column="codigo"/>
        <result property="descripcion" javaType="String" column="campana"/>
    </resultMap>
	
	<resultMap id="gestionTotal" class="java.util.HashMap">
        <result property="nivelSeleccionado" javaType="String" column="niv_sel"/>
        <result property="nivelSiguiente" javaType="String" column="niv_sgte"/>
        <result property="codigoEjecutivo" javaType="String" column="cod_eje"/>
        <result property="cantidadEjecutivos" column="cant_eje"/>
	<result property="cantidadDiasTrabajados" column="cant_dias_trab"/>
        <result property="rutContactoEfectivo" javaType="String" column="rut_cnt_efect"/>
        <result property="contactoEfectivo" javaType="String" column="cnt_efect"/>
        <result property="totalProductosGestionados" javaType="long" column="gest_total"/>
        <result property="autogeneradas" javaType="long" column="autogenerado"/>
        <result property="campanas" javaType="long" column="campania"/>
        <result property="aceptadas" javaType="long" column="aceptada"/>
        <result property="agendadosAlDia" javaType="long" column="agn_al_dia"/>
        <result property="agendadasAtrasadas" javaType="long" column="agn_atrazado"/>
        <result property="totalAgendados" javaType="long" column="total_agn"/>
        <result property="rechazoCliente" javaType="long" column="rch_cliente"/>
        <result property="rechazoBanco" javaType="long" column="rch_banco"/>
        <result property="noUbicable" javaType="long" column="no_ubicable"/>
        <result property="productosActivados" javaType="long" column="prd_activado"/>
        <result property="porcentajeUsoHerramienta" javaType="long" column="pcj_uso"/>
        <result property="leadPorGestionar" javaType="long" column="lead_no_gest"/>
    </resultMap>
	
	<resultMap id="winRate" class="java.util.HashMap">
        <result property="nivelSeleccionado" javaType="String" column="niv_sel"/>
        <result property="nivelSiguiente" javaType="String" column="niv_sgte"/>
        <result property="ejecutivo" javaType="String" column="cod_eje"/>
        <result property="numeroEjecutivos" javaType="String" column="cant_eje"/>
        <result property="tasaAceptacion" javaType="long" column="tacp"/>
        <result property="tasaActivacion" javaType="long" column="tact"/>
        <result property="productosAceptados" javaType="long" column="acept"/>
        <result property="productosActivados" javaType="long" column="activ"/>
        <result property="contactoEfectivo" javaType="long" column="cont_efect"/>
        <result property="campanasAceptadas" javaType="long" column="camp_acept"/>
    </resultMap>
    
	<resultMap id="evolutivo" class="java.util.HashMap">
        <result property="nivelSeleccionado" javaType="String" column="niv_sel"/>
        <result property="nivelSiguiente" javaType="String" column="niv_sgte"/>
        <result property="ejecutivo" javaType="String" column="cod_eje"/>
        <result property="cantidadEjecutivos" column="cant_eje"/>
        <result property="fecha1"  javaType="long" column="fecha1"/>
        <result property="fecha2"  javaType="long" column="fecha2"/>
        <result property="fecha3"  javaType="long" column="fecha3"/>
        <result property="fecha4"  javaType="long" column="fecha4"/>
        <result property="fecha5"  javaType="long" column="fecha5"/>
        <result property="fecha6"  javaType="long" column="fecha6"/>
        <result property="fecha7"  javaType="long" column="fecha7"/>
        <result property="fecha8"  javaType="long" column="fecha8"/>
        <result property="fecha9"  javaType="long" column="fecha9"/>
        <result property="fecha10" javaType="long" column="fecha10"/>
        <result property="fecha11" javaType="long" column="fecha11"/>
        <result property="fecha12" javaType="long" column="fecha12"/>
    </resultMap>
    
    <procedure id="obtenerListadoZonal" parameterClass="java.util.HashMap" resultMap="listadoNivel">
        {CALL sp_inf_cmp_cns_ger(#banca#)}
    </procedure>
	
	<procedure id="obtenerListadoRegional" parameterClass="java.util.HashMap" resultMap="listadoNivel">
        {CALL sp_inf_cmp_cns_reg(#banca#,#nivel#)}
    </procedure>
	
	<procedure id="obtenerListadoOficina" parameterClass="java.util.HashMap" resultMap="listadoNivel">
        {CALL sp_inf_cmp_cns_ofi(#banca#,#nivel#)}
    </procedure>
	
	<procedure id="obtenerListadoEjecutivo" parameterClass="java.util.HashMap" resultMap="listadoNivel">
        {CALL sp_inf_cmp_cns_eje(#banca#,#nivel#)}
    </procedure>
	
	<procedure id="obtenerProductos" parameterClass="java.util.HashMap" resultMap="listadoProductos">
        {CALL sp_inf_cmp_cns_prod()}
    </procedure>
	
	<procedure id="obtenerCampanas" parameterClass="java.util.HashMap" resultMap="listadoCampanas">
        {CALL sp_inf_cmp_cns_cmp(#producto#)}
    </procedure>
	
	<procedure id="obtenerGestionTotal" parameterClass="java.util.HashMap" resultMap="gestionTotal">
		
        {CALL sp_inf_cmp_ges_tot(
		<isNotNull property="banca">#banca#</isNotNull>
		<isNull property="banca">NULL</isNull>
		,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
		<isNull property="nivel_uno">NULL</isNull>
		,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
		<isNull property="nivel_dos">NULL</isNull>
		,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
		<isNull property="nivel_tres">NULL</isNull>
		,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
		<isNull property="ejecutivo">NULL</isNull>
		,#tipo#
		,#fecha_inicio#
		,#fecha_fin#
		,<isNotNull property="producto">#producto#</isNotNull>
		<isNull property="producto">NULL</isNull>
		,<isNotNull property="campana">#campana#</isNotNull>
		<isNull property="campana">NULL</isNull>)} 
		
    </procedure>
	
	<procedure id="obtenerWinRate" parameterClass="java.util.HashMap" resultMap="winRate">
		
        {CALL sp_inf_cmp_win_rte(
		<isNotNull property="banca">#banca#</isNotNull>
		<isNull property="banca">NULL</isNull>
		,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
		<isNull property="nivel_uno">NULL</isNull>
		,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
		<isNull property="nivel_dos">NULL</isNull>
		,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
		<isNull property="nivel_tres">NULL</isNull>
		,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
		<isNull property="ejecutivo">NULL</isNull>
		,#tipo#
		,#fecha_inicio#
		,#fecha_fin#
		,<isNotNull property="producto">#producto#</isNotNull>
		<isNull property="producto">NULL</isNull>
		,<isNotNull property="campana">#campana#</isNotNull>
		<isNull property="campana">NULL</isNull>)} 
		
    </procedure>

	<procedure id="obtenerEvolutivoProductosActivados" parameterClass="java.util.HashMap" resultMap="evolutivo">
		
        {CALL sp_inf_cmp_evol_pact(
		<isNotNull property="banca">#banca#</isNotNull>
		<isNull property="banca">NULL</isNull>
		,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
		<isNull property="nivel_uno">NULL</isNull>
		,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
		<isNull property="nivel_dos">NULL</isNull>
		,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
		<isNull property="nivel_tres">NULL</isNull>
		,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
		<isNull property="ejecutivo">NULL</isNull>
		,#tipo#
		,#fecha#
		,<isNotNull property="producto">#producto#</isNotNull>
		<isNull property="producto">NULL</isNull>
		,<isNotNull property="campana">#campana#</isNotNull>
		<isNull property="campana">NULL</isNull>)} 
		
    </procedure>

	<procedure id="obtenerEvolutivoPromediosContactos" parameterClass="java.util.HashMap" resultMap="evolutivo">
		
        {CALL sp_inf_cmp_evol_cont(
		<isNotNull property="banca">#banca#</isNotNull>
		<isNull property="banca">NULL</isNull>
		,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
		<isNull property="nivel_uno">NULL</isNull>
		,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
		<isNull property="nivel_dos">NULL</isNull>
		,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
		<isNull property="nivel_tres">NULL</isNull>
		,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
		<isNull property="ejecutivo">NULL</isNull>
		,#tipo#
		,#fecha#
		,<isNotNull property="producto">#producto#</isNotNull>
		<isNull property="producto">NULL</isNull>
		,<isNotNull property="campana">#campana#</isNotNull>
		<isNull property="campana">NULL</isNull>)} 
		
    </procedure>

	<procedure id="obtenerEvolutivoPromediosProductosAceptados" parameterClass="java.util.HashMap" resultMap="evolutivo">
		
        {CALL sp_inf_cmp_evol_acp(
		<isNotNull property="banca">#banca#</isNotNull>
		<isNull property="banca">NULL</isNull>
		,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
		<isNull property="nivel_uno">NULL</isNull>
		,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
		<isNull property="nivel_dos">NULL</isNull>
		,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
		<isNull property="nivel_tres">NULL</isNull>
		,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
		<isNull property="ejecutivo">NULL</isNull>
		,#tipo#
		,#fecha#
		,<isNotNull property="producto">#producto#</isNotNull>
		<isNull property="producto">NULL</isNull>
		,<isNotNull property="campana">#campana#</isNotNull>
		<isNull property="campana">NULL</isNull>)} 
		
    </procedure>
	
	<procedure id="obtenerEvolutivoTasaDeAceptacion" parameterClass="java.util.HashMap" resultMap="evolutivo">
		
        {CALL sp_inf_cmp_evol_tacp(
		<isNotNull property="banca">#banca#</isNotNull>
		<isNull property="banca">NULL</isNull>
		,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
		<isNull property="nivel_uno">NULL</isNull>
		,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
		<isNull property="nivel_dos">NULL</isNull>
		,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
		<isNull property="nivel_tres">NULL</isNull>
		,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
		<isNull property="ejecutivo">NULL</isNull>
		,#tipo#
		,#fecha#
		,<isNotNull property="producto">#producto#</isNotNull>
		<isNull property="producto">NULL</isNull>
		,<isNotNull property="campana">#campana#</isNotNull>
		<isNull property="campana">NULL</isNull>)} 
		
    </procedure>
	
	<procedure id="obtenerEvolutivoTasaDeActivacion" parameterClass="java.util.HashMap" resultMap="evolutivo">
		
        {CALL sp_inf_cmp_evol_tact(
		<isNotNull property="banca">#banca#</isNotNull>
		<isNull property="banca">NULL</isNull>
		,<isNotNull property="nivel_uno">#nivel_uno#</isNotNull>
		<isNull property="nivel_uno">NULL</isNull>
		,<isNotNull property="nivel_dos">#nivel_dos#</isNotNull>
		<isNull property="nivel_dos">NULL</isNull>
		,<isNotNull property="nivel_tres">#nivel_tres#</isNotNull>
		<isNull property="nivel_tres">NULL</isNull>
		,<isNotNull property="ejecutivo">#ejecutivo#</isNotNull>
		<isNull property="ejecutivo">NULL</isNull>
		,#tipo#
		,#fecha#
		,<isNotNull property="producto">#producto#</isNotNull>
		<isNull property="producto">NULL</isNull>
		,<isNotNull property="campana">#campana#</isNotNull>
		<isNull property="campana">NULL</isNull>)} 
		
    </procedure>

<!-- FIN SECCION INFORME CAMPANAS  -->

    <resultMap id="banca" class="java.util.HashMap">
        <result property="codigo" javaType="String" column="bca_cod" jdbcType="char" />
        <result property="nombre" javaType="String" column="bca_nom" jdbcType="char" />
        <result property="descripcion" javaType="String" column="bca_des" jdbcType="char" />
    </resultMap>
    
    <resultMap id="salidaOfertasCliente" class="java.util.HashMap">
        <result property="idCampana"            javaType="String"  column="ofe_cod"     jdbcType="char" />
        <result property="correlativoOferta"    javaType="String"  column="ofc_crr"     jdbcType="char" />
        <result property="nombreOferta"         javaType="String"  column="ofe_des"     jdbcType="char" />
        <result property="estadoOferta"         javaType="String"  column="tro_cod"     jdbcType="char" />
        <result property="codEjecutivo"         javaType="String"  column="ofc_eje_cab" jdbcType="char" />
        <result property="mejorProximaOferta"   javaType="int"     column="mpo_prd"     jdbcType="int"  />
        <result property="tipoProducto"         javaType="String"  column="tpo_cod"     jdbcType="char" />
        <result property="codigoBanca"          javaType="String"  column="bca_cod"     jdbcType="char" />
        <result property="responsable"          javaType="String"  column="tip_age"     jdbcType="char" />
    </resultMap>

	<resultMap id="UnidadYFamiliaProducto" class="java.util.HashMap">
		<result property="unidadDeNegocio" javaType="String" column="unidad" jdbcType="varchar"/>
		<result property="familiaDeProducto" javaType="String" column="familia" jdbcType="varchar"/>
	</resultMap>
	
	<resultMap id="tipoInyeccion" class="java.util.HashMap">
        <result property="codigoTipoInyeccion" column="codIny"/>
        <result property="codigoEtapaInyeccion" column="codEtp"/>
    </resultMap>

	<resultMap id="productoSubProducto" class="java.util.HashMap">
        <result property="codigoProducto" column="producto"/>
        <result property="codigoSubProducto" column="subProducto"/>
    </resultMap>    

    <!-- sp_cns_bca() -->
    <procedure id="consultaBancas" resultMap="banca">
        {CALL sp_cns_bca()}
    </procedure>

    <!-- sp_cns_ofe_cli(@@rut_cliente, @@ofe_cod) -->
    <procedure id="consultaOfertasCliente" parameterClass="java.util.HashMap" resultMap="salidaOfertasCliente">
        {CALL sp_cns_ofe_cli(#rut#, #idCampana#)}
    </procedure>
    
	<resultMap id="unidadDeNegocio" class="java.util.HashMap">
        <result property="codigoUnidadDeNegocio" column="und_neg_cod"/>
        <result property="unidadDeNegocio" column="un_neg_des"/>
		<result property="tipoCodigo" column="tpo_cod"/>
		<result property="codigoBanca" column="bca_cod"/>
    </resultMap>
	
	<resultMap id="familiaDeProducto" class="java.util.HashMap">
        <result property="codigoUnidadDeNegocio" column="und_neg_cod"/>
        <result property="codigoFamiliaDeProducto" column="fm_prod_cod"/>
		<result property="familiaDeProducto" column="fm_prod_des"/>
    </resultMap>
	
	<resultMap id="bancaAsociada" class="java.util.HashMap">
        <result property="codigoBanca" column="codigo_banca"/>
    </resultMap>
	
	<resultMap id="etapaInyeccion" class="java.util.HashMap">
        <result property="codigoEtapa" column="codigo_etapa"/>
    </resultMap>
	
	<resultMap id="InyeccionCNU" class="java.util.HashMap">
        <result property="numeroNoUbicableOferta" column="numeroNoUbicableOferta"/>
        <result property="numeroMaxNoUbicableOferta" column="numeroMaxNoUbicableOferta"/>
    </resultMap>

    <resultMap id="empresasPorEjecutivo" class="java.util.HashMap">
        <result property="RutEmpresa" column="rut_emp"/>
        <result property="NombreEmpresa" column="rut_nom"/>
    </resultMap>

    <resultMap id="salidaCampanasPriorizadas" class="java.util.HashMap">
        <result property="codigoCampana" javaType="String" column="ofe_cod" jdbcType="char" />
        <result property="correlativoOferta" javaType="String"  column="ofc_crr" jdbcType="char" />
        <result property="nombreCampana" javaType="String"  column="ofe_des" jdbcType="char" />
        <result property="rutCliente" javaType="String" column="cli_rut" jdbcType="char"/>
        <result property="nomCliente" javaType="String" column="cli_nom" jdbcType="char"/>
        <result property="numeroDiasGestionar" javaType="int" column="ofc_dia_ges" jdbcType="int"/>
        <result property="codigoMoneda" javaType="String" column="ofc_mon" jdbcType="char"/>
        <result property="montoSumado" javaType="Long" column="mto_sum" jdbcType="numeric"/>
        <result property="montoNormal" javaType="Long" column="mto_nor" jdbcType="numeric"/>
        <result property="tipoProducto" javaType="String" column="tpo_cod" jdbcType="char"/>
		<result property="descripcionProducto" javaType="String" column="tpo_des" jdbcType="char"/>
		<result property="rutEmpresa" javaType="String" column="emp_rut" jdbcType="char"/>
		<result property="nombreEmpresa" javaType="String" column="emp_nom" jdbcType="char"/>
    </resultMap>

    <resultMap id="salidaReemplazados" class="java.util.HashMap">
        <result property="idReemplazos" javaType="Integer" column="id_reemplazos" jdbcType="int" />
        <result property="ejecutivoReemplazante" javaType="String" column="eje_reemplazante" jdbcType="char" />
        <result property="ejecutivoReemplazado" javaType="String" column="eje_reemplazado" jdbcType="char" />
        <result property="fechaInicio" javaType="java.util.Calendar" column="fecha_ini_reemplazo" jdbcType="DATE" typeHandler="cl.bci.middleware.aplicacion.persistencia.handler.CalendarTypeHandler"/>
        <result property="fechaFin" javaType="java.util.Calendar" column="fecha_fin_reemplazo" jdbcType="DATE" typeHandler="cl.bci.middleware.aplicacion.persistencia.handler.CalendarTypeHandler"/>
        <result property="idVig" javaType="String" column="id_vig" jdbcType="char" />
        <result property="idMotivoReemplazo" javaType="String" column="id_mot_reemplazo" jdbcType="char" />
        <result property="glosaMotReemplazo" javaType="String" column="glosa_mot_reemplazo" jdbcType="char" />
        <result property="codigoDeUnidad" javaType="String" column="uni_gst" jdbcType="char" />
    </resultMap>

    <resultMap id="salidaClientesAgendados" class="java.util.HashMap">
        <result property="nombreCampana" javaType="String" column="nom_camp" jdbcType="char" />
        <result property="rutCliente" javaType="String" column="ru_cliente" jdbcType="char" />
        <result property="nomCliente" javaType="String" column="nombre_cliente" jdbcType="char" />
        <result property="fechaInicio" javaType="String" column="fecha_agendada" jdbcType="char" />
        <result property="codigoCampana" javaType="String" column="cod_camp" jdbcType="char" />
        <result property="correlativoOferta" javaType="String" column="correlativo" jdbcType="char" />
        <result property="logEjecutivo" javaType="String" column="rof_eje" jdbcType="char" />
        <result property="tipoProducto" javaType="String" column="tpo_cod" jdbcType="char" />
        <result property="descripcionProducto" javaType="String" column="tpo_des" jdbcType="char" />
		<result property="rutEmpresa" javaType="String" column="emp_rut" jdbcType="char"/>
		<result property="nombreEmpresa" javaType="String" column="emp_nom" jdbcType="char"/>
    </resultMap>

    <resultMap id="salidaProductos" class="java.util.HashMap">
        <result property="nombreProducto" javaType="String" column="tpo_des" jdbcType="char"/>
        <result property="idProducto" javaType="String" column="tpo_cod" jdbcType="char"/>
    </resultMap>

    <resultMap id="SalidaSubProductos" class="java.util.HashMap">
        <result property="codigoSubproducto" javaType="String" column="codigoProducto" jdbcType="char"/>
        <result property="descripcionSubproducto" javaType="String" column="DescProducto" jdbcType="char"/>
    </resultMap>

	<resultMap id="consultarRespuestasClientes" class="java.util.HashMap">
        <result property="correlativo" column="det_tro_crr"/>
        <result property="texto" column="det_tro_txt"/>
    </resultMap>
	
    <resultMap id="respuestasCausalesClientes" class="java.util.HashMap">
        <result property="correlativo" column="det_tro_crr"/>
        <result property="texto" column="det_tro_txt"/>
        <result property="codigoRespuesta" column="tro_cod"/>
        <result property="descripcionRespuesta" column="tro_des"/>
    </resultMap>

    <resultMap id="ingresarNuevaRespuesta" class="java.util.HashMap">
        <result property="codigoRespuesta" column="codigo"/>
    </resultMap>

	<procedure id="obtieneUnidadYFamiliaDeProducto" resultMap="UnidadYFamiliaProducto" parameterClass="java.util.HashMap">
		{CALL sp_cns_uni_fam(#codigoOferta#)}
	</procedure>
	
	<procedure id="consultaTipoInyeccion" resultMap="tipoInyeccion" parameterClass="java.util.HashMap">
        {CALL sp_cns_iny(#respuestaOferta#, #codigoOferta#)}
    </procedure>
	
	<procedure id="obtieneProductoSubProducto" resultMap="productoSubProducto" parameterClass="java.util.HashMap">
        {CALL sp_cns_tpo_subtpo(#codigoOferta#)}
    </procedure>
	
	<procedure id="consultarUnidadesDeNegocio" resultMap="unidadDeNegocio" parameterClass="java.util.HashMap">
        {CALL sp_cns_und_neg(#bca_cod#)}
    </procedure>
	
	<procedure id="consultarFamiliasDeProducto" resultMap="familiaDeProducto" parameterClass="java.util.HashMap">
        {CALL sp_cns_fml_prod(#und_neg_cod#)}
    </procedure>
	
	<procedure id="consultarBancaPorCodigoOferta" resultMap="bancaAsociada" parameterClass="java.util.HashMap">
        {CALL sp_cns_cod_bca(#cod_ofe#)}
    </procedure>
	
	<procedure id="consultarEtapaInyeccion" resultMap="etapaInyeccion" parameterClass="java.util.HashMap">
        {CALL sp_cns_etapa_iny(#banca#,#ofe_cod#,#respuestaOferta#)}
    </procedure>
	
	<procedure id="consultarNumeroInyeccion" resultMap="InyeccionCNU" parameterClass="java.util.HashMap">
        {CALL sp_cns_iny_cnu(#codigoOferta#,#correlativoOferta#)}
    </procedure>
	
	<procedure id="unidadYFamiliaPersonaNoCliente" resultMap="UnidadYFamiliaProducto" parameterClass="java.util.HashMap">
		{CALL sp_cns_uyf_per(#banca#,#ofe_cod#)}
	</procedure>
	
	<procedure id="unidadYFamiliaPersonaOfeAutogen" resultMap="UnidadYFamiliaProducto" parameterClass="java.util.HashMap">
		{CALL sp_cns_uni_fam_aut(#cod_bca#,#cod_pro#)}
	</procedure>
	
	<parameterMap id="setInsertarCliente" class="java.util.HashMap">
		<parameter property="codOferta"          jdbcType="CHAR"      javaType="String" />
		<parameter property="rutCliente"         jdbcType="CHAR"      javaType="String" />
		<parameter property="dvCliente"          jdbcType="CHAR"      javaType="String" />
		<parameter property="estado"		 jdbcType="CHAR"      javaType="String" />
	</parameterMap>

	<procedure id="insertarCliente" parameterMap="setInsertarCliente" resultClass="int">
		{ CALL sp_ins_ofc(?,?,?,?) }
	</procedure>
	
	<parameterMap id="setActualizarFecha" class="java.util.HashMap">
		<parameter property="codRegistro"        jdbcType="CHAR"      javaType="String" />
		<parameter property="rutCliente"         jdbcType="CHAR"      javaType="String" />
		<parameter property="dvCliente"          jdbcType="CHAR"      javaType="String" />
		<parameter property="fecha" 		 jdbcType="DATE"      javaType="java.util.Calendar" typeHandler="cl.bci.middleware.aplicacion.persistencia.handler.CalendarTypeHandler" />
	</parameterMap>
	<procedure id="actualizarFecha" parameterMap="setActualizarFecha" resultClass="int">
		{ CALL sp_upd_fec_ofc(?,?,?,?) }
	</procedure>    

	<procedure id="consultarEmpresasPorEjecutivo" resultMap="empresasPorEjecutivo" parameterClass="java.util.HashMap">
		{CALL sp_camp_buscaEmpEje(#cod_eje#)}
	</procedure>

	<procedure id="sp_cns_dato_solicitud" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
		{CALL sp_cns_dato_solicitud(#rut#,#campana_aprobada#,#campana_preaprobada#)}
	</procedure>

    <!-- DBA.sp_cns_uni_rpl(@uni_gst) -->
    <procedure id="obtenerEjecutivosReemplazadosUnidad" parameterClass="java.util.HashMap" resultClass="string">
        {CALL sp_cns_uni_rpl(#codigoUnidad#)}
    </procedure>

    <!-- DBA.sp_cns_eje_rpl(@reemplazante) -->
    <procedure id="obtenerReemplazadosPorEjecutivo" parameterClass="java.util.HashMap" resultMap="salidaReemplazados">
        {CALL sp_cns_eje_rpl(#codigoEjecutivo#)}
    </procedure>

    <!-- DBA.sp_cns_rpl_eje(@eje_reemplazado) -->
    <procedure id="obtenerReemplazosParaEjecutivo" parameterClass="java.util.HashMap" resultMap="salidaReemplazados">
        {CALL sp_cns_rpl_eje(#codigoEjecutivo#)}
    </procedure>

    <!-- DBA.sp_cns_rpl(@id_reemplazos) -->
    <procedure id="obtenerReemplazo" parameterClass="java.util.HashMap" resultMap="salidaReemplazados">
        {CALL sp_cns_rpl(#idReemplazos#)}
    </procedure>

    <!-- DBA.sp_ins_rpl(
            @eje_reemplazante,
            @eje_reemplazado,
            @fecha_ini_reemplazo,
            @fecha_fin_reemplazo,
            @id_vig,
            @id_mot_reemplazo,
            @glosa_mot_reemplazo,
            @uni_gst) -->
    <procedure id="ingresarReemplazo" parameterClass="java.util.HashMap">
        {CALL sp_ins_rpl (
            #ejecutivoReemplazante#,
            #ejecutivoReemplazado#,
            #inicioDelPeriodoDeReemplazo#,
            #terminoDelPeriodoDeReemplazo#,
            #idVig#,
            #idMotivoReemplazo#,
            #glosaMotReemplazo#,
            #codigoDeUnidad#)}
    </procedure>

    <!-- DBA.sp_upd_rpl(
			@id_reemplazos
            @eje_reemplazante,
            @fecha_ini_reemplazo,
            @fecha_fin_reemplazo,
            @id_mot_reemplazo,
            @glosa_mot_reemplazo) -->
    <procedure id="modificarReemplazo" parameterClass="java.util.HashMap">
        {CALL sp_upd_rpl (
			#idReemplazos#
            #ejecutivoReemplazante#,
            #inicioDelPeriodoDeReemplazo#,
            #terminoDelPeriodoDeReemplazo#,
            #idMotivoReemplazo#,
            #glosaMotReemplazo#)}
    </procedure>

    <!-- DBA.sp_cns_cli_prz(@idproducto, @loginejecutivo, @stock, , @subProducto char(3)) -->
    <procedure id="obtenerCampanasPriorizadas" parameterClass="java.util.HashMap" resultMap="salidaCampanasPriorizadas">
        {CALL sp_cns_cli_prz(#tipoProducto#, #logEjecutivo#, #maximoRegistros#, #ofe_cod#, #emp_rut#, #subProducto#, <isNull property="codigoDeBanca">NULL</isNull><isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull>)}
    </procedure>

    <!-- DBA.sp_cns_cli_prz_suc(@idproducto, @loginejecutivo, @stock, @ofc_suc_eje_cab, @uni_gst, , @subProducto char(3)) -->
    <procedure id="obtenerCampanasPriorizadasSucursal" parameterClass="java.util.HashMap" resultMap="salidaCampanasPriorizadas">
        {CALL sp_cns_cli_prz_suc(#tipoProducto#, #logEjecutivo#, #maximoRegistros#, #codigoOficina#, #codigoUnidad#, #ofe_cod#, #emp_rut#, #subProducto#, <isNull property="codigoDeBanca">NULL</isNull><isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull>)}
    </procedure>

    <!-- sp_cns_clientes_agendados (@idproducto char(3), @loginejecutivo char(12), @ofe_cod char(8), @emp_rut char (10), @subProducto char(3) ) -->
    <procedure id="obtenerClientesAgendados" parameterClass="java.util.HashMap" resultMap="salidaClientesAgendados">
        {CALL sp_cns_clientes_agendados(#producto#, #ejecutivo#, #ofe_cod#, #emp_rut#, #subProducto#, #fechaInicio#, #fechaFin#, <isNull property="codigoDeBanca">NULL</isNull><isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull>)}
    </procedure>

    <!-- sp_cns_tpo_bca( @bca_cod char(3)) -->
    <procedure id="obtenerProductosPorBanca" parameterClass="java.util.HashMap" resultMap="salidaProductos">
        {CALL sp_cns_tpo_bca(#codigoBanca#)}
    </procedure>

    <!-- sp_cns_sub_prod(@codigoProducto char(3)) -->
    <procedure id="consultarSubProducto" parameterClass="java.util.HashMap" resultMap="SalidaSubProductos">
        {CALL sp_cns_sub_prod(#codigoProducto#)}
    </procedure>
	
	<procedure id="consultarRespuestasClientes" parameterClass="java.util.HashMap" resultMap="consultarRespuestasClientes">
        {CALL sp_cns_det_tro(#codigoProducto#, #codigoSubProducto#, #codigoRespuesta#)}
    </procedure>

	<procedure id="respuestasCausalesClientes" parameterClass="java.util.HashMap" resultMap="respuestasCausalesClientes">
        {CALL sp_cns_causales_respuestas(#codigoProducto#, #codigoSubProducto#, #codigoRespuesta#)}
    </procedure>

	<procedure id="ingresarNuevaRespuesta" parameterClass="java.util.HashMap" resultMap="ingresarNuevaRespuesta">
        {CALL sp_ins_respuesta_subproducto(#respuesta#)}
    </procedure>
    
    <resultMap id="salidaObtenerComentariosHistoricos" class="java.util.HashMap">
        <result property="nombreProducto"       javaType="String"  column="tpo_des"           jdbcType="char" />
        <result property="nombreSubProducto" javaType="String"  column="sub_tpo_des"   jdbcType="char" />
        <result property="nombreCampana"      javaType="String"  column="ofe_des"           jdbcType="char" />
        <result property="ejecutivo"                  javaType="String"  column="obs_ets"            jdbcType="char" />
        <result property="fecha"                        javaType="String"  column="obs_fec"           jdbcType="char" />
        <result property="texto"                        javaType="String"  column="obs_txt"           jdbcType="char" />
        <result property="estadoCampana"       javaType="String"  column="eof_des"          jdbcType="char" />
        <result property="estado"                      javaType="String"  column="tro_des"          jdbcType="char" />
    </resultMap>
    
    <!-- dbo.sp_cns_lis_obs_hist (@rut numeric(8) , @can_reg int) -->
    <procedure id="obtenerComentariosHistoricos" parameterClass="java.util.HashMap" resultMap="salidaObtenerComentariosHistoricos">
        {CALL sp_cns_lis_obs_hist(#rutCliente#, #cantidadRegistros#)}
    </procedure>    

<!-- SECCION CAMPANAS PROSERVICE -->

    <resultMap id="salidaSiguienteOfertaProservice" class="java.util.HashMap">
    	<result property="codigoOferta" javaType="Integer" column="ofe_cod" jdbcType="int" />
    </resultMap> 
    
    <!-- sp_acp_gen_ofe_cod_pserv () -->
    <procedure id="obtieneSiguienteCodigoOfertaProservice" resultMap="salidaSiguienteOfertaProservice">
        {CALL sp_acp_gen_ofe_cod_pserv()}
    </procedure>   
	
    <resultMap id="salidaCampanasPriorizadasProservice" class="java.util.HashMap">
        <result property="codigoCampana" javaType="String" column="ofe_cod" jdbcType="char" />
        <result property="correlativoOferta" javaType="String"  column="ofc_crr" jdbcType="char" />
        <result property="nombreCampana" javaType="String"  column="ofe_des" jdbcType="char" />
        <result property="rutCliente" javaType="String" column="cli_rut" jdbcType="char"/>
        <result property="nomCliente" javaType="String" column="cli_nom" jdbcType="char"/>
        <result property="numeroDiasGestionar" javaType="int" column="ofc_dia_ges" jdbcType="int"/>
        <result property="codigoMoneda" javaType="String" column="ofc_mon" jdbcType="char"/>
        <result property="montoSumado" javaType="Long" column="mto_sum" jdbcType="numeric"/>
        <result property="montoNormal" javaType="Long" column="mto_nor" jdbcType="numeric"/>
        <result property="tipoProducto" javaType="String" column="tpo_cod" jdbcType="char"/>
		<result property="descripcionProducto" javaType="String" column="tpo_des" jdbcType="char"/>
		<result property="rutEmpresa" javaType="String" column="emp_rut" jdbcType="char"/>
		<result property="nombreEmpresa" javaType="String" column="emp_nom" jdbcType="char"/>
    </resultMap>
    
    <!-- DBA.sp_cns_cli_prz_pserv(@idproducto, @loginejecutivo, @stock, , @subProducto char(3)) -->
    <procedure id="obtenerCampanasPriorizadasProservice" parameterClass="java.util.HashMap" resultMap="salidaCampanasPriorizadasProservice">
        {CALL sp_cns_cli_prz_pserv(#tipoProducto#, #logEjecutivo#, #maximoRegistros#, #ofe_cod#, #emp_rut#, #subProducto#, <isNull property="codigoDeBanca">NULL</isNull><isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull>)}
    </procedure>
    
    
    <!-- DBA.sp_cns_cli_prz_suc_pserv(@idproducto, @loginejecutivo, @stock, @ofc_suc_eje_cab, @uni_gst, , @subProducto char(3)) -->
    <procedure id="obtenerCampanasPriorizadasSucursalProservice" parameterClass="java.util.HashMap" resultMap="salidaCampanasPriorizadasProservice">
        {CALL sp_cns_cli_prz_suc_pserv(#tipoProducto#, #logEjecutivo#, #maximoRegistros#, #codigoOficina#, #codigoUnidad#, #ofe_cod#, #emp_rut#, #subProducto#, <isNull property="codigoDeBanca">NULL</isNull><isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull>)}
    </procedure>    
        
    <resultMap id="salidaClientesAgendadosProservice" class="java.util.HashMap">
        <result property="nombreCampana" javaType="String" column="nom_camp" jdbcType="char" />
        <result property="rutCliente" javaType="String" column="ru_cliente" jdbcType="char" />
        <result property="nomCliente" javaType="String" column="nombre_cliente" jdbcType="char" />
        <result property="fechaInicio" javaType="String" column="fecha_agendada" jdbcType="char" />
        <result property="codigoCampana" javaType="String" column="cod_camp" jdbcType="char" />
        <result property="correlativoOferta" javaType="String" column="correlativo" jdbcType="char" />
        <result property="logEjecutivo" javaType="String" column="rof_eje" jdbcType="char" />
        <result property="tipoProducto" javaType="String" column="tpo_cod" jdbcType="char" />
        <result property="descripcionProducto" javaType="String" column="tpo_des" jdbcType="char" />
		<result property="rutEmpresa" javaType="String" column="emp_rut" jdbcType="char"/>
		<result property="nombreEmpresa" javaType="String" column="emp_nom" jdbcType="char"/>
    </resultMap>
        
    <!-- sp_cns_cli_agendados_pserv (@idproducto char(3), @loginejecutivo   char(12), @ofe_cod char(8), @emp_rut char (10)) -->
    <procedure id="obtenerClientesAgendadosProservice" parameterClass="java.util.HashMap" resultMap="salidaClientesAgendadosProservice">
        {CALL sp_cns_cli_agendados_pserv(#producto#, #ejecutivo#, #ofe_cod#, #emp_rut#, #subProducto#, #fechaInicio#, #fechaFin#, <isNull property="codigoDeBanca">NULL</isNull><isNotNull property="codigoDeBanca">#codigoDeBanca#</isNotNull>)}
    </procedure> 

    <resultMap id="salidaClientesGestionadosProservice" class="java.util.HashMap">
    	<result property="rutCliente" javaType="String" column="rut_cliente" jdbcType="char" />
    	<result property="nomCliente" javaType="String" column="nom_cliente" jdbcType="char" />
    	<result property="nombreCampana" javaType="String" column="campana" jdbcType="char" />
    	<result property="logEjecutivo" javaType="String" column="ejecutivo" jdbcType="char" />
    	<result property="estadoOferta" javaType="String" column="respuesta" jdbcType="char" />
    	<result property="fechaDeGestion" javaType="String" column="fec_gestion" jdbcType="char" />
    	<result property="tipoDeCanalDeGestion" javaType="String" column="cnl_gestion" jdbcType="char" />
    	<result property="codigoCampana" javaType="String" column="cod_campana" jdbcType="char" />
    	<result property="correlativoOferta" javaType="Integer" column="cod_correlativo" jdbcType="int" />
    	<result property="totalRegistros" javaType="Integer" column="reg_tot" jdbcType="int" />
    	<result property="idProducto" javaType="String" column="idProducto" jdbcType="char" />
    	<result property="descripcionProducto" javaType="String" column="producto" jdbcType="char" />
    	<result property="rutEmpresa" javaType="String" column="emp_rut" jdbcType="char" />
    	<result property="nombreEmpresa" javaType="String" column="emp_nom" jdbcType="char" />
    </resultMap>  
    
    <!-- sp_cns_cli_gestionados_pserv (@tro_cod char(3), @fec_ini_char char(10), @fec_fin_char char(10), 
    		@rof_eje char(12), @tpo_cod char(3), @num_reg int, @num_pag int, @ofe_cod char(8),
    		@emp_rut char(10), @subProducto char(3), @codigoDeBanca char(3)) -->
    <procedure id="obtenerClientesGestionadosProservice" parameterClass="java.util.HashMap" resultMap="salidaClientesGestionadosProservice">
        {CALL sp_cns_cli_gestionados_pserv(#codRespuesta#, #fechaInicio#, #fechaFin#, #codEjecutivo#, #idProducto#, #numeroRegistros#, #indicadorPagina#, #codOferta#, #rutEmpresa#, #codSubProd#, <isNull property="codigoDeBanca">NULL</isNull><isNotNull property="codigoDeBanca">#codBanca#</isNotNull>)}
    </procedure>       
	
    <resultMap id="salidaOfertasClienteProservice" class="java.util.HashMap">
        <result property="idCampana"            javaType="String"  column="ofe_cod"     jdbcType="char" />
        <result property="correlativoOferta"    javaType="String"  column="ofc_crr"     jdbcType="char" />
        <result property="nombreOferta"         javaType="String"  column="ofe_des"     jdbcType="char" />
        <result property="estadoOferta"         javaType="String"  column="tro_cod"     jdbcType="char" />
        <result property="codEjecutivo"         javaType="String"  column="ofc_eje_cab" jdbcType="char" />
        <result property="mejorProximaOferta"   javaType="int"     column="mpo_prd"     jdbcType="int"  />
        <result property="tipoProducto"         javaType="String"  column="tpo_cod"     jdbcType="char" />
        <result property="codigoBanca"          javaType="String"  column="bca_cod"     jdbcType="char" />
        <result property="responsable"          javaType="String"  column="tip_age"     jdbcType="char" />
    </resultMap>
    	
	<!-- sp_cns_ofe_cli_pserv ( @rut_cliente char(8), @ofe_cod char(8)) -->
    <procedure id="consultaOfertasClienteProservice" parameterClass="java.util.HashMap" resultMap="salidaOfertasClienteProservice">
        {CALL sp_cns_ofe_cli_pserv(#rut#, #idCampana#)}
    </procedure>
    
    <resultMap id="salidaObtenerCampanasVencidaPorClientePserv" class="java.util.HashMap">
        <result property="idCampana"            javaType="String"  column="ofe_cod"     jdbcType="char" />
        <result property="correlativoOferta"    javaType="String"  column="ofc_crr"     jdbcType="char" />
        <result property="nombreOferta"         javaType="String"  column="ofe_des"     jdbcType="char" />
        <result property="estadoOferta"         javaType="String"  column="tro_cod"     jdbcType="char" />
    </resultMap>
    	
	<!-- sp_cns_ofe_venc_pserv ( @rut_cliente char(8)) -->
    <procedure id="obtenerlistadoCampanasVencidaPorClienteProservice" parameterClass="java.util.HashMap" resultMap="salidaObtenerCampanasVencidaPorClientePserv">
        {CALL sp_cns_ofe_venc_pserv(#rutCliente#)}
    </procedure>    

    <resultMap id="salidaFiltrarOfertasProservicePorProducto" class="java.util.HashMap">
        <result property="codigoOferta"         javaType="String"  column="ofe_cod"       jdbcType="char" />
        <result property="descripcion"          javaType="String"  column="ofe_des"       jdbcType="char" />
        <result property="fechaInicio"          javaType="String"  column="ofe_fec_ini"   jdbcType="char" />
        <result property="fechaFin"             javaType="String"  column="ofe_fec_ter"   jdbcType="char" />
        <result property="codEstado"            javaType="String"  column="eof_cod"       jdbcType="char" />
        <result property="descEstado"           javaType="String"  column="eof_des"       jdbcType="char" />
        <result property="codProducto"          javaType="String"  column="tpo_cod"       jdbcType="char" />
        <result property="producto"             javaType="String"  column="tpo_des"       jdbcType="char" />
        <result property="codSubproducto"       javaType="String"  column="sub_tpo_cod"   jdbcType="char" />
        <result property="descripcion2"         javaType="String"  column="sub_tpo_des"   jdbcType="char" />
    </resultMap>
        
    <!-- sp_acp_lis_ofe_pserv (@eof_cod char(3), @tpo_cod char(3), @fec_ini datetime, @fec_ter datetime) -->
    <procedure id="filtrarOfertasProservicePorProducto" parameterClass="java.util.HashMap" resultMap="salidaFiltrarOfertasProservicePorProducto">
        {CALL sp_acp_lis_ofe_pserv(#codigoEstado#,#codigoProducto#,#fechaInicio#,#fechaTermino#)}
    </procedure>      

<!-- TERMINO SECCION CAMPANAS PROSERVICE -->
	<parameterMap id="inTieneCampanas" class="java.util.HashMap">
		<parameter property="rutCliente" jdbcType="VARCHAR" javaType="String" />
		<parameter property="codigoCanal" jdbcType="VARCHAR" javaType="String" />	
	</parameterMap>
	<resultMap id="outTieneCampanas" class="java.util.HashMap">
		<result  property="respuesta" jdbcType="INTEGER"  javaType="java.lang.Integer" />
	</resultMap>
	<procedure id="tieneCampanas" parameterMap="inTieneCampanas" resultMap="outTieneCampanas">
	   {CALL sp_tiene_cam_ivr(?, ?)}
	</procedure>
    
    <!-- PROYECTO AGENDA ABIERTA -->
    <resultMap id="AgendaTO" class="java.util.HashMap">
        <result property="codigoDeEstado"             column="agn_cod_est"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="codigoEjecutivo"            column="agn_cod_eje"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="comentario"                 column="agn_com"        javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="fechaFinAgendamiento"       column="agn_fec_fin"    javaType="Date"/>           
        <result property="fechaInicioAgendamiento"    column="agn_fec_ini"    javaType="Date"/>             
        <result property="motivoDelAgendamiento"      column="mot_cod_mot"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="rutBackupDelAgendamiento"   column="agn_rut_bkp"    javaType="java.lang.Long"    jdbcType="INTEGER"/>
        <result property="rutCliente"                 column="cli_rut_cli"    javaType="java.lang.Long"    jdbcType="INTEGER"/>
        <result property="tipoDeNotificacion"         column="agn_tip_not"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="nombreDelEjecutivo"         column="NOMBRE"         javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="descripcionDelMotivo"       column="mot_des_mot"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="codigoDeOficina"            column="agn_cod_ofi"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
	<result property="ejecutivoInversiones"       column="agn_sol_eje"    javaType="java.lang.String"  jdbcType="VARCHAR"/>
    </resultMap>
    
    <resultMap id="ClienteTO" class="java.util.HashMap">
        <result property="email"              column="cli_dir_eml"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="rut"                column="cli_rut_cli"    javaType="java.lang.Long"      jdbcType="INTEGER"/>             
        <result property="telefonoCelular"    column="cli_tel_cel"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="telefonoFijo"       column="cli_tel_fjo"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
    </resultMap>
    
    <resultMap id="EjecutivoTO" class="java.util.HashMap">
        <result property="nombre"  column="NOMBRE"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="codigo"  column="USERID"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="oficina" column="OFICINA"   javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="banca"   column="BCA_GJ"    javaType="java.lang.String"    jdbcType="VARCHAR"/>           
        <result property="cargo"   column="ID_PST"    javaType="java.lang.String"    jdbcType="VARCHAR"/>             
    </resultMap>
	
    <resultMap id="EvaluacionReunionTO" class="java.util.HashMap">
        <result property="cumpleHoraAgendada"     column="cld_hra_agn"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="comentarioHoraAgendada" column="cld_hra_com"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="cumpleExpectativas"     column="cld_exp_agn"    javaType="java.lang.String"    jdbcType="VARCHAR"/>
        <result property="comentarioExpectativas" column="cld_exp_com"    javaType="java.lang.String"    jdbcType="VARCHAR"/>           
        <result property="notaCita"               column="cld_nta_agn"    javaType="java.lang.String"    jdbcType="VARCHAR"/>             
	<result property="codigoDelEjecutivo"     column="agn_cod_eje"    javaType="java.lang.String"    jdbcType="VARCHAR"/>             
	<result property="fechaDeInicio"          column="agn_fec_ini"    javaType="Date"                jdbcType="VARCHAR"/>             
	<result property="rutDelCliente"          column="cli_rut_cli"    javaType="java.lang.Long"      jdbcType="VARCHAR"/>             
	<result property="motivoReunion"          column="mot_cod_mot"    javaType="java.lang.String"    jdbcType="VARCHAR"/>             
    </resultMap>
    
    <procedure id="actualizar" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_mod_agn(#agn_cod_eje#,#agn_fec_ini#,#cli_rut_cli#,#agn_fec_fin#,#agn_cod_est#,#agn_com#,#mot_cod_mot#,#agn_rut_bkp#, #agn_tip_not#, #agn_cod_ofi#, #agn_cod_cnl#, #agn_sol_eje#)}
    </procedure>
    
    <procedure id="traerAgendaEjecutivo" parameterClass="java.util.HashMap" resultMap="AgendaTO">
        {CALL sp_cns_agn_eje(#cod_eje#,#fec_ini#,#fec_fin#)}
    </procedure>
    
    <procedure id="traerAgendaCliente" parameterClass="java.util.HashMap" resultMap="AgendaTO">
        {CALL sp_cns_agn_cli(#cli_rut_cli#,#agn_fec_ini#,#agn_fec_fin#)}
    </procedure>
    
    <procedure id="bloqueoYDesbloqueoDeAgenda" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_blq_agn_fec(#agn_cod_eje#,#fec_ini#,#fec_fin#,#agn_cod_est#,#agn_com#,#mot_cod_mot#,#agn_cod_cnl#)}
    </procedure>
    
    <procedure id="actualizarCliente" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_mod_cli(#cli_rut_cli#,#cli_dir_eml#,#cli_tel_cel#,#cli_tel_fjo#)}
    </procedure>
    
    <procedure id="traerDatosDeContacto" parameterClass="java.util.HashMap" resultMap="ClienteTO">
        {CALL sp_cns_cli(#cli_rut_cli#)}
    </procedure>
    
    <procedure id="agregarGestion" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_ins_ges(#ges_fec_ges#,#ges_cod_usu#,#ges_pst_ges#,#ges_cod_mot#,#ges_cod_est#,#ges_cod_ofi#,#ges_fec_ini#,#ges_fec_fin#,#ges_rut_cli#,#ges_cod_eje#)}
    </procedure>
    
    <procedure id="traerMotivos" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_mot(#mot_tip_mot#)}
    </procedure>
    
    <procedure id="traerDisponibles" parameterClass="java.util.HashMap" resultMap="AgendaTO">
        {CALL sp_cns_agn_dsp(#agn_cod_eje#,#agn_fec_ini#,#agn_fec_fin#)}
    </procedure>
    
    <procedure id="existeCitaEnRangoDeFechas" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_cta_per(#cli_rut_cli#, #fecha_agn#, #dias#)}
    </procedure>
    
    <procedure id="existenHorasAgendadas" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_agn_per(#cod_eje#,#fecha_ini#,#fecha_fin#)}
    </procedure>
    
    <procedure id="traerOficinasPiloto" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
        {CALL sp_cns_ofi_pil()}
    </procedure>
	
	<procedure id="evaluarReunion" parameterClass="java.util.HashMap" >
        {CALL sp_ins_cld_srv(#agn_cod_eje#, #agn_fec_ini#, #cli_rut_cli#, #cld_nta_agn#, #cld_exp_com#, #cld_exp_agn#, #cld_hra_com#, #cld_hra_agn#, #mot_cod_mot#)}
    </procedure>
	
	<procedure id="traerEvaluacion" parameterClass="java.util.HashMap" resultMap="EvaluacionReunionTO">
        {CALL sp_cns_cld_srv(#agn_cod_eje#, #agn_fec_ini#, #cli_rut_cli#)}
    </procedure>
    
    <!-- EJECUTIVO  AGENDA ABIERTA-->
    <procedure id="consultarEjecutivo" parameterClass="java.util.HashMap" resultMap="EjecutivoTO">
        {CALL sp_cns_dat_eje(#cod_eje#)}
    </procedure>
    
    <procedure id="consultarJefeDeOficina" parameterClass="java.util.HashMap" resultMap="EjecutivoTO">
        {CALL sp_cns_jof(#cod_ofi#)}
    </procedure>
    
    <procedure id="consultarEjecutivosbancaPremier" parameterClass="java.util.HashMap" resultMap="EjecutivoTO">
        {CALL sp_cns_eje_prm(#cod_ofi#)}
    </procedure>

<!-- Procedimientos de pagina de apoyo --> 
	<procedure id="proc_crea_url" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
		{CALL proc_crea_url(#codigo#,#descripcion#,#url#,#tipo#)}
	</procedure>

	<procedure id="proc_obtiene_tipo_url" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
		{CALL proc_obtiene_tipo_url()}
	</procedure>

	<procedure id="proc_obtiene_urls" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
		{CALL proc_obtiene_urls()}
	</procedure>

	<procedure id="proc_obtiene_url" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
		{CALL proc_obtiene_url(#codigo#)}
	</procedure>

	<procedure id="proc_upd_url" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
		{CALL proc_upd_url(#codigo#,#descripcion#,#url#,#tipo#)}
	</procedure>

	<procedure id="proc_elimina_url" resultClass="java.util.HashMap" parameterClass="java.util.HashMap">
		{CALL proc_elimina_url(#codigo#)}
	</procedure>
<!-- Inicio ResultMap y Procedure para Integracion Cobranza Normaliza -->
    <resultMap id="resultadoObtenerOficinasGerentesNormaliza" class="java.util.HashMap">
         <result property="codigo" javaType="String" column="cod_oficina" jdbcType="varchar"/>
         <result property="glosa" javaType="String" column="glosa_oficina" jdbcType="varchar"/>
    </resultMap>
  
    <procedure id="obtenerOficinasGerentesNormaliza" parameterClass="java.util.HashMap" resultMap="resultadoObtenerOficinasGerentesNormaliza">
        {CALL sp_cns_ofi_gerentes_normaliza(#usuario#)}
    </procedure>
<!-- FIN ResultMap y Procedure para Integracion Cobranza Normaliza -->

    
<!-- SECCION CARTERA CLIENTES PERSONA  -->

    <resultMap id="salidaConsultarEjecutivoCarteraPersona" class="java.util.HashMap">
        <result property="codRegional"        javaType="String"     column="cod_regional"     jdbcType="char" />
        <result property="descRegional"      javaType="String"     column="desc_regional"   jdbcType="char" />
        <result property="codOficina"          javaType="String"      column="cod_oficina"       jdbcType="char" />
        <result property="descOficina"        javaType="String"      column="desc_oficina"     jdbcType="char" />
        <result property="ejecutivo"           javaType="String"       column="ejecutivo"          jdbcType="char" />     
    </resultMap>       

    <!-- dbo.sp_cns_usu_car_cli_per (@cod_eje char(12)) -->
    <procedure id="consultarEjecutivoCarteraPersona" parameterClass="java.util.HashMap" resultMap="salidaConsultarEjecutivoCarteraPersona">
        {CALL sp_cns_usu_car_cli_per(#usuario#)}
    </procedure>    
    
<!-- TERMINO  SECCION CARTERA CLIENTES PERSONA -->
<!-- Metodos nuevos para prueba de concepto Benchmark  Tuxedo - Ibatis -->	
	
	
	<!-- metodo 3 CampDespOferEs -->
	
    <parameterMap id="setCampDespOferEs" class="java.util.HashMap">
		<parameter property="rut" 			jdbcType="VARCHAR" javaType="String" />
		<parameter property="codOferta" 	jdbcType="VARCHAR" javaType="String" />
		<parameter property="correlativo"   jdbcType="Numeric" javaType="Integer" />
    </parameterMap>
	
  	<resultMap id="getCampDespOferEs" class="java.util.HashMap">
	    <result  property="codigo"   		jdbcType="Varchar"   javaType="String" />
	    <result  property="correlativo"   	jdbcType="Numeric"   javaType="Integer" />
	    <result  property="nombreDestin"   	jdbcType="Varchar"   javaType="String" />
	    <result  property="estadoSolicit"   jdbcType="Varchar"   javaType="String" />
	    <result  property="ejecutivo"   	jdbcType="Varchar"   javaType="String" />
	</resultMap> 
	
	<procedure id="CampDespOferEs" parameterMap="setCampDespOferEs" resultMap="getCampDespOferEs">
	   {CALL sp_cons_ofe_clte(?,?,?)}
	</procedure>	
	
	
	
	<!-- metodo 4 CmpAdmCnsOfe -->
	

    <parameterMap id="setCmpAdmCnsOfe" class="java.util.HashMap">
		<parameter property="codOferta" 		jdbcType="Varchar" javaType="String" />
    </parameterMap>

  	<resultMap id="getCmpAdmCnsOfe" class="java.util.HashMap">
       <result  property="responsable" 		jdbcType="Varchar"   javaType="String" />
       <result  property="descripcion" 		jdbcType="Varchar"   javaType="String" />
       <result  property="fechaInicio" 		jdbcType="Date"   	 javaType="Date" />
       <result  property="fechaFin" 		jdbcType="Date"   	 javaType="Date" />
       <result  property="codEstado" 		jdbcType="Varchar"   javaType="String" />
       <result  property="fechaEstado" 		jdbcType="Date"   	 javaType="Date" />
       <result  property="stockTotal" 		jdbcType="Numeric"   javaType="Integer" />
       <result  property="stockDisponible" 	jdbcType="Numeric"   javaType="Integer" />
       <result  property="prioridad" 		jdbcType="Numeric"   javaType="Integer" />
       <result  property="tipo" 			jdbcType="Varchar"   javaType="String" />
       <result  property="contacto1"		jdbcType="Numeric"   javaType="Integer" />
       <result  property="contacto2" 		jdbcType="Numeric"   javaType="Integer" />
       <result  property="numeroPlantilla"  jdbcType="Varchar"   javaType="String" />
       <result  property="codigo" 			jdbcType="Numeric"   javaType="Integer" />
       <result  property="moneda" 			jdbcType="Varchar"   javaType="String" />
       <result  property="codigo2" 			jdbcType="Varchar"   javaType="String" />
       <result  property="fechaIngreso" 	jdbcType="Date"   	 javaType="Date" />
       <result  property="codigo3" 			jdbcType="Varchar"   javaType="String" />
       <result  property="fechaActualiza" 	jdbcType="Date"   	 javaType="Date" />
       <result  property="plazoMax" 		jdbcType="Numeric"   javaType="Integer" />
       <result  property="numeroReint" 		jdbcType="Numeric"   javaType="Integer" />
       <result  property="obligatorio" 		jdbcType="Varchar"   javaType="String" />
	   <result  property="canal" 			jdbcType="Varchar"   javaType="String" />
       <result  property="idProducto" 		jdbcType="Varchar"   javaType="String" />
       <result  property="producto2" 		jdbcType="Varchar"   javaType="String" />
       <result  property="traspaso" 		jdbcType="Varchar"   javaType="String" />
	   <result  property="codBanca" 		jdbcType="Varchar"   javaType="String" />
       <result  property="tipoOpe" 			jdbcType="Varchar"   javaType="String" />												
	</resultMap>

	<procedure id="CmpAdmCnsOfe" parameterMap="setCmpAdmCnsOfe" resultMap="getCmpAdmCnsOfe">
	   {CALL sp_acp_cns_ofe(?)}
	</procedure>		
</sqlMap>    
